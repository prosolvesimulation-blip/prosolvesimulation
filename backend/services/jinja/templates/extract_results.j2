{% if runs %}
{% for run in runs %}
{{ run.result_name }} = CALC_CHAMP(reuse={{ run.result_name }},
                         RESULTAT={{ run.result_name }},
                         CONTRAINTE=('SIGM_ELNO', 'SIGM_ELGA'),
                         CRITERES=('SIEQ_ELNO', 'SIEQ_ELGA'),
                         FORCE=('REAC_NODA', 'FORC_NODA'))



{% if has_shells %}
RESU_{{ run.case_name }}_INF = POST_CHAMP(RESULTAT={{ run.result_name }},
                                         EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO', NUME_COUCHE=1, NIVE_COUCHE='INF'))



RESU_{{ run.case_name }}_INF = CALC_CHAMP(reuse=RESU_{{ run.case_name }}_INF,
                                         RESULTAT=RESU_{{ run.case_name }}_INF,
                                         CONTRAINTE=('SIGM_NOEU',),
                                         CRITERES=('SIEQ_NOEU',))



RESU_{{ run.case_name }}_MOY = POST_CHAMP(RESULTAT={{ run.result_name }},
                                         EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO', NUME_COUCHE=1, NIVE_COUCHE='MOY'))



RESU_{{ run.case_name }}_MOY = CALC_CHAMP(reuse=RESU_{{ run.case_name }}_MOY,
                                         RESULTAT=RESU_{{ run.case_name }}_MOY,
                                         CONTRAINTE=('SIGM_NOEU',),
                                         CRITERES=('SIEQ_NOEU',))



RESU_{{ run.case_name }}_SUP = POST_CHAMP(RESULTAT={{ run.result_name }},
                                         EXTR_COQUE=_F(NOM_CHAM='SIGM_ELNO', NUME_COUCHE=1, NIVE_COUCHE='SUP'))



RESU_{{ run.case_name }}_SUP = CALC_CHAMP(reuse=RESU_{{ run.case_name }}_SUP,
                                         RESULTAT=RESU_{{ run.case_name }}_SUP,
                                         CONTRAINTE=('SIGM_NOEU',),
                                         CRITERES=('SIEQ_NOEU',))



{% endif %}
IMPR_RESU(FORMAT='MED',
          UNITE=8,
          RESU=(
              _F(RESULTAT={{ run.result_name }},
                 NOM_CHAM=('DEPL', 'REAC_NODA', 'FORC_NODA'),
                 NOM_CHAM_MED=('DEPL_{{ run.case_name }}', 'REAC_{{ run.case_name }}', 'FORC_{{ run.case_name }}')),
{% if has_shells %}
              _F(RESULTAT=RESU_{{ run.case_name }}_INF,
                 NOM_CHAM=('SIGM_NOEU', 'SIEQ_NOEU'),
                 NOM_CHAM_MED=('S_INF_{{ run.case_name }}', 'VM_INF_{{ run.case_name }}')),
              _F(RESULTAT=RESU_{{ run.case_name }}_MOY,
                 NOM_CHAM=('SIGM_NOEU', 'SIEQ_NOEU'),
                 NOM_CHAM_MED=('S_MID_{{ run.case_name }}', 'VM_MID_{{ run.case_name }}')),
              _F(RESULTAT=RESU_{{ run.case_name }}_SUP,
                 NOM_CHAM=('SIGM_NOEU', 'SIEQ_NOEU'),
                 NOM_CHAM_MED=('S_SUP_{{ run.case_name }}', 'VM_SUP_{{ run.case_name }}')),
{% else %}
              _F(RESULTAT={{ run.result_name }},
                 NOM_CHAM=('SIGM_ELGA', 'SIEQ_ELGA'),
                 NOM_CHAM_MED=('SIGM_{{ run.case_name }}', 'SIEQ_{{ run.case_name }}')),
{% endif %}
          ))



tab_{{ run.case_name }} = POST_RELEVE_T(ACTION=_F(OPERATION='EXTRACTION',
                                                 INTITULE='REAC_{{ run.case_name }}',
                                                 RESULTAT={{ run.result_name }},
                                                 NOM_CHAM='REAC_NODA',
                                                 GROUP_NO='TOUT_NO',
                                                 RESULTANTE=('DX','DY','DZ'),
                                                 MOMENT=('DRX','DRY','DRZ'),
                                                 POINT=(0,0,0)))



IMPR_TABLE(TABLE=tab_{{ run.case_name }},
           UNITE=27,
           FORMAT='TABLEAU',
           SEPARATEUR=',',
           TITRE='REACTIONS_{{ run.case_name }}')



{% endfor %}
{% endif %}
