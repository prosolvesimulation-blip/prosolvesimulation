(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ds(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Pb(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var W0={exports:{}},bo={};var uT;function Ib(){if(uT)return bo;uT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:c,ref:i!==void 0?i:null,props:s}}return bo.Fragment=e,bo.jsx=n,bo.jsxs=n,bo}var lT;function eL(){return lT||(lT=1,W0.exports=Ib()),W0.exports}var L=eL(),K0={exports:{}},xe={};var fT;function tL(){if(fT)return xe;fT=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),y=Symbol.iterator;function v(k){return k===null||typeof k!="object"?null:(k=y&&k[y]||k["@@iterator"],typeof k=="function"?k:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,m={};function E(k,Z,te){this.props=k,this.context=Z,this.refs=m,this.updater=te||S}E.prototype.isReactComponent={},E.prototype.setState=function(k,Z){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Z,"setState")},E.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function O(){}O.prototype=E.prototype;function M(k,Z,te){this.props=k,this.context=Z,this.refs=m,this.updater=te||S}var w=M.prototype=new O;w.constructor=M,x(w,E.prototype),w.isPureReactComponent=!0;var D=Array.isArray;function R(){}var B={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function G(k,Z,te){var ce=te.ref;return{$$typeof:t,type:k,key:Z,ref:ce!==void 0?ce:null,props:te}}function z(k,Z){return G(k.type,Z,k.props)}function H(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function A(k){var Z={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(te){return Z[te]})}var $=/\/+/g;function K(k,Z){return typeof k=="object"&&k!==null&&k.key!=null?A(""+k.key):Z.toString(36)}function ee(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(R,R):(k.status="pending",k.then(function(Z){k.status==="pending"&&(k.status="fulfilled",k.value=Z)},function(Z){k.status==="pending"&&(k.status="rejected",k.reason=Z)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function U(k,Z,te,ce,he){var fe=typeof k;(fe==="undefined"||fe==="boolean")&&(k=null);var Te=!1;if(k===null)Te=!0;else switch(fe){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(k.$$typeof){case t:case e:Te=!0;break;case d:return Te=k._init,U(Te(k._payload),Z,te,ce,he)}}if(Te)return he=he(k),Te=ce===""?"."+K(k,0):ce,D(he)?(te="",Te!=null&&(te=Te.replace($,"$&/")+"/"),U(he,Z,te,"",function(en){return en})):he!=null&&(H(he)&&(he=z(he,te+(he.key==null||k&&k.key===he.key?"":(""+he.key).replace($,"$&/")+"/")+Te)),Z.push(he)),1;Te=0;var Ze=ce===""?".":ce+":";if(D(k))for(var Fe=0;Fe<k.length;Fe++)ce=k[Fe],fe=Ze+K(ce,Fe),Te+=U(ce,Z,te,fe,he);else if(Fe=v(k),typeof Fe=="function")for(k=Fe.call(k),Fe=0;!(ce=k.next()).done;)ce=ce.value,fe=Ze+K(ce,Fe++),Te+=U(ce,Z,te,fe,he);else if(fe==="object"){if(typeof k.then=="function")return U(ee(k),Z,te,ce,he);throw Z=String(k),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function q(k,Z,te){if(k==null)return k;var ce=[],he=0;return U(k,ce,"","",function(fe){return Z.call(te,fe,he++)}),ce}function re(k){if(k._status===-1){var Z=k._result;Z=Z(),Z.then(function(te){(k._status===0||k._status===-1)&&(k._status=1,k._result=te)},function(te){(k._status===0||k._status===-1)&&(k._status=2,k._result=te)}),k._status===-1&&(k._status=0,k._result=Z)}if(k._status===1)return k._result.default;throw k._result}var J=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},oe={map:q,forEach:function(k,Z,te){q(k,function(){Z.apply(this,arguments)},te)},count:function(k){var Z=0;return q(k,function(){Z++}),Z},toArray:function(k){return q(k,function(Z){return Z})||[]},only:function(k){if(!H(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return xe.Activity=h,xe.Children=oe,xe.Component=E,xe.Fragment=n,xe.Profiler=i,xe.PureComponent=M,xe.StrictMode=r,xe.Suspense=f,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,xe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return B.H.useMemoCache(k)}},xe.cache=function(k){return function(){return k.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(k,Z,te){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ce=x({},k.props),he=k.key;if(Z!=null)for(fe in Z.key!==void 0&&(he=""+Z.key),Z)!_.call(Z,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&Z.ref===void 0||(ce[fe]=Z[fe]);var fe=arguments.length-2;if(fe===1)ce.children=te;else if(1<fe){for(var Te=Array(fe),Ze=0;Ze<fe;Ze++)Te[Ze]=arguments[Ze+2];ce.children=Te}return G(k.type,he,ce)},xe.createContext=function(k){return k={$$typeof:c,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:s,_context:k},k},xe.createElement=function(k,Z,te){var ce,he={},fe=null;if(Z!=null)for(ce in Z.key!==void 0&&(fe=""+Z.key),Z)_.call(Z,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(he[ce]=Z[ce]);var Te=arguments.length-2;if(Te===1)he.children=te;else if(1<Te){for(var Ze=Array(Te),Fe=0;Fe<Te;Fe++)Ze[Fe]=arguments[Fe+2];he.children=Ze}if(k&&k.defaultProps)for(ce in Te=k.defaultProps,Te)he[ce]===void 0&&(he[ce]=Te[ce]);return G(k,fe,he)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(k){return{$$typeof:u,render:k}},xe.isValidElement=H,xe.lazy=function(k){return{$$typeof:d,_payload:{_status:-1,_result:k},_init:re}},xe.memo=function(k,Z){return{$$typeof:g,type:k,compare:Z===void 0?null:Z}},xe.startTransition=function(k){var Z=B.T,te={};B.T=te;try{var ce=k(),he=B.S;he!==null&&he(te,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(R,J)}catch(fe){J(fe)}finally{Z!==null&&te.types!==null&&(Z.types=te.types),B.T=Z}},xe.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},xe.use=function(k){return B.H.use(k)},xe.useActionState=function(k,Z,te){return B.H.useActionState(k,Z,te)},xe.useCallback=function(k,Z){return B.H.useCallback(k,Z)},xe.useContext=function(k){return B.H.useContext(k)},xe.useDebugValue=function(){},xe.useDeferredValue=function(k,Z){return B.H.useDeferredValue(k,Z)},xe.useEffect=function(k,Z){return B.H.useEffect(k,Z)},xe.useEffectEvent=function(k){return B.H.useEffectEvent(k)},xe.useId=function(){return B.H.useId()},xe.useImperativeHandle=function(k,Z,te){return B.H.useImperativeHandle(k,Z,te)},xe.useInsertionEffect=function(k,Z){return B.H.useInsertionEffect(k,Z)},xe.useLayoutEffect=function(k,Z){return B.H.useLayoutEffect(k,Z)},xe.useMemo=function(k,Z){return B.H.useMemo(k,Z)},xe.useOptimistic=function(k,Z){return B.H.useOptimistic(k,Z)},xe.useReducer=function(k,Z,te){return B.H.useReducer(k,Z,te)},xe.useRef=function(k){return B.H.useRef(k)},xe.useState=function(k){return B.H.useState(k)},xe.useSyncExternalStore=function(k,Z,te){return B.H.useSyncExternalStore(k,Z,te)},xe.useTransition=function(){return B.H.useTransition()},xe.version="19.2.3",xe}var gT;function Wp(){return gT||(gT=1,K0.exports=tL()),K0.exports}var I=Wp();const nL=Ds(I);var X0={exports:{}},Lo={},Y0={exports:{}},q0={};var hT;function rL(){return hT||(hT=1,(function(t){function e(U,q){var re=U.length;U.push(q);e:for(;0<re;){var J=re-1>>>1,oe=U[J];if(0<i(oe,q))U[J]=q,U[re]=oe,re=J;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],re=U.pop();if(re!==q){U[0]=re;e:for(var J=0,oe=U.length,k=oe>>>1;J<k;){var Z=2*(J+1)-1,te=U[Z],ce=Z+1,he=U[ce];if(0>i(te,re))ce<oe&&0>i(he,te)?(U[J]=he,U[ce]=re,J=ce):(U[J]=te,U[Z]=re,J=Z);else if(ce<oe&&0>i(he,re))U[J]=he,U[ce]=re,J=ce;else break e}}return q}function i(U,q){var re=U.sortIndex-q.sortIndex;return re!==0?re:U.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var f=[],g=[],d=1,h=null,y=3,v=!1,S=!1,x=!1,m=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function w(U){for(var q=n(g);q!==null;){if(q.callback===null)r(g);else if(q.startTime<=U)r(g),q.sortIndex=q.expirationTime,e(f,q);else break;q=n(g)}}function D(U){if(x=!1,w(U),!S)if(n(f)!==null)S=!0,R||(R=!0,A());else{var q=n(g);q!==null&&ee(D,q.startTime-U)}}var R=!1,B=-1,_=5,G=-1;function z(){return m?!0:!(t.unstable_now()-G<_)}function H(){if(m=!1,R){var U=t.unstable_now();G=U;var q=!0;try{e:{S=!1,x&&(x=!1,O(B),B=-1),v=!0;var re=y;try{t:{for(w(U),h=n(f);h!==null&&!(h.expirationTime>U&&z());){var J=h.callback;if(typeof J=="function"){h.callback=null,y=h.priorityLevel;var oe=J(h.expirationTime<=U);if(U=t.unstable_now(),typeof oe=="function"){h.callback=oe,w(U),q=!0;break t}h===n(f)&&r(f),w(U)}else r(f);h=n(f)}if(h!==null)q=!0;else{var k=n(g);k!==null&&ee(D,k.startTime-U),q=!1}}break e}finally{h=null,y=re,v=!1}q=void 0}}finally{q?A():R=!1}}}var A;if(typeof M=="function")A=function(){M(H)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,K=$.port2;$.port1.onmessage=H,A=function(){K.postMessage(null)}}else A=function(){E(H,0)};function ee(U,q){B=E(function(){U(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(U){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var re=y;y=q;try{return U()}finally{y=re}},t.unstable_requestPaint=function(){m=!0},t.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var re=y;y=U;try{return q()}finally{y=re}},t.unstable_scheduleCallback=function(U,q,re){var J=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?J+re:J):re=J,U){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=re+oe,U={id:d++,callback:q,priorityLevel:U,startTime:re,expirationTime:oe,sortIndex:-1},re>J?(U.sortIndex=re,e(g,U),n(f)===null&&U===n(g)&&(x?(O(B),B=-1):x=!0,ee(D,re-J))):(U.sortIndex=oe,e(f,U),S||v||(S=!0,R||(R=!0,A()))),U},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(U){var q=y;return function(){var re=y;y=q;try{return U.apply(this,arguments)}finally{y=re}}}})(q0)),q0}var pT;function aL(){return pT||(pT=1,Y0.exports=rL()),Y0.exports}var Z0={exports:{}},jt={};var dT;function iL(){if(dT)return jt;dT=1;var t=Wp();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)g+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,g,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:f,containerInfo:g,implementation:d}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,jt.createPortal=function(f,g){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return s(f,g,null,d)},jt.flushSync=function(f){var g=c.T,d=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=g,r.p=d,r.d.f()}},jt.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(f,g))},jt.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},jt.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var d=g.as,h=u(d,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,v=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;d==="style"?r.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:h,integrity:y,fetchPriority:v}):d==="script"&&r.d.X(f,{crossOrigin:h,integrity:y,fetchPriority:v,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},jt.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var d=u(g.as,g.crossOrigin);r.d.M(f,{crossOrigin:d,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(f)},jt.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var d=g.as,h=u(d,g.crossOrigin);r.d.L(f,d,{crossOrigin:h,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},jt.preloadModule=function(f,g){if(typeof f=="string")if(g){var d=u(g.as,g.crossOrigin);r.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:d,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(f)},jt.requestFormReset=function(f){r.d.r(f)},jt.unstable_batchedUpdates=function(f,g){return f(g)},jt.useFormState=function(f,g,d){return c.H.useFormState(f,g,d)},jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},jt.version="19.2.3",jt}var yT;function sL(){if(yT)return Z0.exports;yT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Z0.exports=iL(),Z0.exports}var vT;function oL(){if(vT)return Lo;vT=1;var t=aL(),e=Wp(),n=sL();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(r(188))}function g(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(r(188));return o!==a?null:a}for(var l=a,p=o;;){var T=l.return;if(T===null)break;var C=T.alternate;if(C===null){if(p=T.return,p!==null){l=p;continue}break}if(T.child===C.child){for(C=T.child;C;){if(C===l)return f(T),a;if(C===p)return f(T),o;C=C.sibling}throw Error(r(188))}if(l.return!==p.return)l=T,p=C;else{for(var b=!1,N=T.child;N;){if(N===l){b=!0,l=T,p=C;break}if(N===p){b=!0,p=T,l=C;break}N=N.sibling}if(!b){for(N=C.child;N;){if(N===l){b=!0,l=C,p=T;break}if(N===p){b=!0,p=C,l=T;break}N=N.sibling}if(!b)throw Error(r(189))}}if(l.alternate!==p)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?a:o}function d(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=d(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function A(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var $=Symbol.for("react.client.reference");function K(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===$?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case E:return"Profiler";case m:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList";case G:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case S:return"Portal";case M:return a.displayName||"Context";case O:return(a._context.displayName||"Context")+".Consumer";case w:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case B:return o=a.displayName||null,o!==null?o:K(a.type)||"Memo";case _:o=a._payload,a=a._init;try{return K(a(o))}catch{}}return null}var ee=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},J=[],oe=-1;function k(a){return{current:a}}function Z(a){0>oe||(a.current=J[oe],J[oe]=null,oe--)}function te(a,o){oe++,J[oe]=a.current,a.current=o}var ce=k(null),he=k(null),fe=k(null),Te=k(null);function Ze(a,o){switch(te(fe,o),te(he,a),te(ce,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Nx(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Nx(o),a=Bx(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Z(ce),te(ce,a)}function Fe(){Z(ce),Z(he),Z(fe)}function en(a){a.memoizedState!==null&&te(Te,a);var o=ce.current,l=Bx(o,a.type);o!==l&&(te(he,a),te(ce,l))}function Mi(a){he.current===a&&(Z(ce),Z(he)),Te.current===a&&(Z(Te),Mo._currentValue=re)}var Na,Ar;function Ba(a){if(Na===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Na=o&&o[1]||"",Ar=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Na+a+Ar}var Df=!1;function Rf(a,o){if(!a||Df)return"";Df=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(P){var Q=P}Reflect.construct(a,[],ie)}else{try{ie.call()}catch(P){Q=P}a.call(ie.prototype)}}else{try{throw Error()}catch(P){Q=P}(ie=a())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(P){if(P&&Q&&typeof P.stack=="string")return[P.stack,Q.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),b=C[0],N=C[1];if(b&&N){var F=b.split(`
`),Y=N.split(`
`);for(T=p=0;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;for(;T<Y.length&&!Y[T].includes("DetermineComponentFrameRoot");)T++;if(p===F.length||T===Y.length)for(p=F.length-1,T=Y.length-1;1<=p&&0<=T&&F[p]!==Y[T];)T--;for(;1<=p&&0<=T;p--,T--)if(F[p]!==Y[T]){if(p!==1||T!==1)do if(p--,T--,0>T||F[p]!==Y[T]){var ne=`
`+F[p].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=p&&0<=T);break}}}finally{Df=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?Ba(l):""}function bD(a,o){switch(a.tag){case 26:case 27:case 5:return Ba(a.type);case 16:return Ba("Lazy");case 13:return a.child!==o&&o!==null?Ba("Suspense Fallback"):Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 15:return Rf(a.type,!1);case 11:return Rf(a.type.render,!1);case 1:return Rf(a.type,!0);case 31:return Ba("Activity");default:return""}}function u1(a){try{var o="",l=null;do o+=bD(a,l),l=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var bf=Object.prototype.hasOwnProperty,Lf=t.unstable_scheduleCallback,Vf=t.unstable_cancelCallback,LD=t.unstable_shouldYield,VD=t.unstable_requestPaint,ln=t.unstable_now,ND=t.unstable_getCurrentPriorityLevel,l1=t.unstable_ImmediatePriority,f1=t.unstable_UserBlockingPriority,_c=t.unstable_NormalPriority,BD=t.unstable_LowPriority,g1=t.unstable_IdlePriority,_D=t.log,UD=t.unstable_setDisableYieldValue,Us=null,fn=null;function jr(a){if(typeof _D=="function"&&UD(a),fn&&typeof fn.setStrictMode=="function")try{fn.setStrictMode(Us,a)}catch{}}var gn=Math.clz32?Math.clz32:GD,kD=Math.log,FD=Math.LN2;function GD(a){return a>>>=0,a===0?32:31-(kD(a)/FD|0)|0}var Uc=256,kc=262144,Fc=4194304;function _a(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Gc(a,o,l){var p=a.pendingLanes;if(p===0)return 0;var T=0,C=a.suspendedLanes,b=a.pingedLanes;a=a.warmLanes;var N=p&134217727;return N!==0?(p=N&~C,p!==0?T=_a(p):(b&=N,b!==0?T=_a(b):l||(l=N&~a,l!==0&&(T=_a(l))))):(N=p&~C,N!==0?T=_a(N):b!==0?T=_a(b):l||(l=p&~a,l!==0&&(T=_a(l)))),T===0?0:o!==0&&o!==T&&(o&C)===0&&(C=T&-T,l=o&-o,C>=l||C===32&&(l&4194048)!==0)?o:T}function ks(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function zD(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h1(){var a=Fc;return Fc<<=1,(Fc&62914560)===0&&(Fc=4194304),a}function Nf(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function Fs(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function AD(a,o,l,p,T,C){var b=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,F=a.expirationTimes,Y=a.hiddenUpdates;for(l=b&~l;0<l;){var ne=31-gn(l),ie=1<<ne;N[ne]=0,F[ne]=-1;var Q=Y[ne];if(Q!==null)for(Y[ne]=null,ne=0;ne<Q.length;ne++){var P=Q[ne];P!==null&&(P.lane&=-536870913)}l&=~ie}p!==0&&p1(a,p,0),C!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=C&~(b&~o))}function p1(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-gn(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|l&261930}function d1(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var p=31-gn(l),T=1<<p;T&o|a[p]&o&&(a[p]|=o),l&=~T}}function y1(a,o){var l=o&-o;return l=(l&42)!==0?1:Bf(l),(l&(a.suspendedLanes|o))!==0?0:l}function Bf(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function _f(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function v1(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:nT(a.type))}function x1(a,o){var l=q.p;try{return q.p=a,o()}finally{q.p=l}}var Hr=Math.random().toString(36).slice(2),Vt="__reactFiber$"+Hr,tn="__reactProps$"+Hr,wi="__reactContainer$"+Hr,Uf="__reactEvents$"+Hr,jD="__reactListeners$"+Hr,HD="__reactHandles$"+Hr,T1="__reactResources$"+Hr,Gs="__reactMarker$"+Hr;function kf(a){delete a[Vt],delete a[tn],delete a[Uf],delete a[jD],delete a[HD]}function Oi(a){var o=a[Vt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[wi]||l[Vt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=Ax(a);a!==null;){if(l=a[Vt])return l;a=Ax(a)}return o}a=l,l=a.parentNode}return null}function Di(a){if(a=a[Vt]||a[wi]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function zs(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Ri(a){var o=a[T1];return o||(o=a[T1]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ot(a){a[Gs]=!0}var m1=new Set,S1={};function Ua(a,o){bi(a,o),bi(a+"Capture",o)}function bi(a,o){for(S1[a]=o,a=0;a<o.length;a++)m1.add(o[a])}var $D=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),C1={},E1={};function WD(a){return bf.call(E1,a)?!0:bf.call(C1,a)?!1:$D.test(a)?E1[a]=!0:(C1[a]=!0,!1)}function zc(a,o,l){if(WD(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function Ac(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function hr(a,o,l,p){if(p===null)a.removeAttribute(l);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+p)}}function Mn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function M1(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function KD(a,o,l){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,C=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return T.call(this)},set:function(b){l=""+b,C.call(this,b)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Ff(a){if(!a._valueTracker){var o=M1(a)?"checked":"value";a._valueTracker=KD(a,o,""+a[o])}}function w1(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),p="";return a&&(p=M1(a)?a.checked?"true":"false":a.value),a=p,a!==l?(o.setValue(a),!0):!1}function jc(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var XD=/[\n"\\]/g;function wn(a){return a.replace(XD,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Gf(a,o,l,p,T,C,b,N){a.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?a.type=b:a.removeAttribute("type"),o!=null?b==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Mn(o)):a.value!==""+Mn(o)&&(a.value=""+Mn(o)):b!=="submit"&&b!=="reset"||a.removeAttribute("value"),o!=null?zf(a,b,Mn(o)):l!=null?zf(a,b,Mn(l)):p!=null&&a.removeAttribute("value"),T==null&&C!=null&&(a.defaultChecked=!!C),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+Mn(N):a.removeAttribute("name")}function O1(a,o,l,p,T,C,b,N){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),o!=null||l!=null){if(!(C!=="submit"&&C!=="reset"||o!=null)){Ff(a);return}l=l!=null?""+Mn(l):"",o=o!=null?""+Mn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}p=p??T,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=N?a.checked:!!p,a.defaultChecked=!!p,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.name=b),Ff(a)}function zf(a,o,l){o==="number"&&jc(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Li(a,o,l,p){if(a=a.options,o){o={};for(var T=0;T<l.length;T++)o["$"+l[T]]=!0;for(l=0;l<a.length;l++)T=o.hasOwnProperty("$"+a[l].value),a[l].selected!==T&&(a[l].selected=T),T&&p&&(a[l].defaultSelected=!0)}else{for(l=""+Mn(l),o=null,T=0;T<a.length;T++){if(a[T].value===l){a[T].selected=!0,p&&(a[T].defaultSelected=!0);return}o!==null||a[T].disabled||(o=a[T])}o!==null&&(o.selected=!0)}}function D1(a,o,l){if(o!=null&&(o=""+Mn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+Mn(l):""}function R1(a,o,l,p){if(o==null){if(p!=null){if(l!=null)throw Error(r(92));if(ee(p)){if(1<p.length)throw Error(r(93));p=p[0]}l=p}l==null&&(l=""),o=l}l=Mn(o),a.defaultValue=l,p=a.textContent,p===l&&p!==""&&p!==null&&(a.value=p),Ff(a)}function Vi(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var YD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function b1(a,o,l){var p=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,l):typeof l!="number"||l===0||YD.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function L1(a,o,l){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,l!=null){for(var p in l)!l.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var T in o)p=o[T],o.hasOwnProperty(T)&&l[T]!==p&&b1(a,T,p)}else for(var C in o)o.hasOwnProperty(C)&&b1(a,C,o[C])}function Af(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hc(a){return ZD.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function pr(){}var jf=null;function Hf(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ni=null,Bi=null;function V1(a){var o=Di(a);if(o&&(a=o.stateNode)){var l=a[tn]||null;e:switch(a=o.stateNode,o.type){case"input":if(Gf(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var p=l[o];if(p!==a&&p.form===a.form){var T=p[tn]||null;if(!T)throw Error(r(90));Gf(p,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(o=0;o<l.length;o++)p=l[o],p.form===a.form&&w1(p)}break e;case"textarea":D1(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Li(a,!!l.multiple,o,!1)}}}var $f=!1;function N1(a,o,l){if($f)return a(o,l);$f=!0;try{var p=a(o);return p}finally{if($f=!1,(Ni!==null||Bi!==null)&&(bu(),Ni&&(o=Ni,a=Bi,Bi=Ni=null,V1(o),a)))for(o=0;o<a.length;o++)V1(a[o])}}function As(a,o){var l=a.stateNode;if(l===null)return null;var p=l[tn]||null;if(p===null)return null;l=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(r(231,o,typeof l));return l}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wf=!1;if(dr)try{var js={};Object.defineProperty(js,"passive",{get:function(){Wf=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Wf=!1}var $r=null,Kf=null,$c=null;function B1(){if($c)return $c;var a,o=Kf,l=o.length,p,T="value"in $r?$r.value:$r.textContent,C=T.length;for(a=0;a<l&&o[a]===T[a];a++);var b=l-a;for(p=1;p<=b&&o[l-p]===T[C-p];p++);return $c=T.slice(a,1<p?1-p:void 0)}function Wc(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Kc(){return!0}function _1(){return!1}function nn(a){function o(l,p,T,C,b){this._reactName=l,this._targetInst=T,this.type=p,this.nativeEvent=C,this.target=b,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(C):C[N]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Kc:_1,this.isPropagationStopped=_1,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Kc)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Kc)},persist:function(){},isPersistent:Kc}),o}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=nn(ka),Hs=h({},ka,{view:0,detail:0}),QD=nn(Hs),Xf,Yf,$s,Yc=h({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zf,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==$s&&($s&&a.type==="mousemove"?(Xf=a.screenX-$s.screenX,Yf=a.screenY-$s.screenY):Yf=Xf=0,$s=a),Xf)},movementY:function(a){return"movementY"in a?a.movementY:Yf}}),U1=nn(Yc),JD=h({},Yc,{dataTransfer:0}),PD=nn(JD),ID=h({},Hs,{relatedTarget:0}),qf=nn(ID),eR=h({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),tR=nn(eR),nR=h({},ka,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),rR=nn(nR),aR=h({},ka,{data:0}),k1=nn(aR),iR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cR(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=oR[a])?!!o[a]:!1}function Zf(){return cR}var uR=h({},Hs,{key:function(a){if(a.key){var o=iR[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Wc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?sR[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zf,charCode:function(a){return a.type==="keypress"?Wc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Wc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),lR=nn(uR),fR=h({},Yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F1=nn(fR),gR=h({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zf}),hR=nn(gR),pR=h({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),dR=nn(pR),yR=h({},Yc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),vR=nn(yR),xR=h({},ka,{newState:0,oldState:0}),TR=nn(xR),mR=[9,13,27,32],Qf=dr&&"CompositionEvent"in window,Ws=null;dr&&"documentMode"in document&&(Ws=document.documentMode);var SR=dr&&"TextEvent"in window&&!Ws,G1=dr&&(!Qf||Ws&&8<Ws&&11>=Ws),z1=" ",A1=!1;function j1(a,o){switch(a){case"keyup":return mR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var _i=!1;function CR(a,o){switch(a){case"compositionend":return H1(o);case"keypress":return o.which!==32?null:(A1=!0,z1);case"textInput":return a=o.data,a===z1&&A1?null:a;default:return null}}function ER(a,o){if(_i)return a==="compositionend"||!Qf&&j1(a,o)?(a=B1(),$c=Kf=$r=null,_i=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return G1&&o.locale!=="ko"?null:o.data;default:return null}}var MR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $1(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!MR[a.type]:o==="textarea"}function W1(a,o,l,p){Ni?Bi?Bi.push(p):Bi=[p]:Ni=p,o=ku(o,"onChange"),0<o.length&&(l=new Xc("onChange","change",null,l,p),a.push({event:l,listeners:o}))}var Ks=null,Xs=null;function wR(a){Ox(a,0)}function qc(a){var o=zs(a);if(w1(o))return a}function K1(a,o){if(a==="change")return o}var X1=!1;if(dr){var Jf;if(dr){var Pf="oninput"in document;if(!Pf){var Y1=document.createElement("div");Y1.setAttribute("oninput","return;"),Pf=typeof Y1.oninput=="function"}Jf=Pf}else Jf=!1;X1=Jf&&(!document.documentMode||9<document.documentMode)}function q1(){Ks&&(Ks.detachEvent("onpropertychange",Z1),Xs=Ks=null)}function Z1(a){if(a.propertyName==="value"&&qc(Xs)){var o=[];W1(o,Xs,a,Hf(a)),N1(wR,o)}}function OR(a,o,l){a==="focusin"?(q1(),Ks=o,Xs=l,Ks.attachEvent("onpropertychange",Z1)):a==="focusout"&&q1()}function DR(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return qc(Xs)}function RR(a,o){if(a==="click")return qc(o)}function bR(a,o){if(a==="input"||a==="change")return qc(o)}function LR(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var hn=typeof Object.is=="function"?Object.is:LR;function Ys(a,o){if(hn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),p=Object.keys(o);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var T=l[p];if(!bf.call(o,T)||!hn(a[T],o[T]))return!1}return!0}function Q1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function J1(a,o){var l=Q1(a);a=0;for(var p;l;){if(l.nodeType===3){if(p=a+l.textContent.length,a<=o&&p>=o)return{node:l,offset:o-a};a=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Q1(l)}}function P1(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?P1(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function I1(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=jc(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=jc(a.document)}return o}function If(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var VR=dr&&"documentMode"in document&&11>=document.documentMode,Ui=null,eg=null,qs=null,tg=!1;function ey(a,o,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;tg||Ui==null||Ui!==jc(p)||(p=Ui,"selectionStart"in p&&If(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),qs&&Ys(qs,p)||(qs=p,p=ku(eg,"onSelect"),0<p.length&&(o=new Xc("onSelect","select",null,o,l),a.push({event:o,listeners:p}),o.target=Ui)))}function Fa(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var ki={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},ng={},ty={};dr&&(ty=document.createElement("div").style,"AnimationEvent"in window||(delete ki.animationend.animation,delete ki.animationiteration.animation,delete ki.animationstart.animation),"TransitionEvent"in window||delete ki.transitionend.transition);function Ga(a){if(ng[a])return ng[a];if(!ki[a])return a;var o=ki[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in ty)return ng[a]=o[l];return a}var ny=Ga("animationend"),ry=Ga("animationiteration"),ay=Ga("animationstart"),NR=Ga("transitionrun"),BR=Ga("transitionstart"),_R=Ga("transitioncancel"),iy=Ga("transitionend"),sy=new Map,rg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rg.push("scrollEnd");function Wn(a,o){sy.set(a,o),Ua(o,[a])}var Zc=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},On=[],Fi=0,ag=0;function Qc(){for(var a=Fi,o=ag=Fi=0;o<a;){var l=On[o];On[o++]=null;var p=On[o];On[o++]=null;var T=On[o];On[o++]=null;var C=On[o];if(On[o++]=null,p!==null&&T!==null){var b=p.pending;b===null?T.next=T:(T.next=b.next,b.next=T),p.pending=T}C!==0&&oy(l,T,C)}}function Jc(a,o,l,p){On[Fi++]=a,On[Fi++]=o,On[Fi++]=l,On[Fi++]=p,ag|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function ig(a,o,l,p){return Jc(a,o,l,p),Pc(a)}function za(a,o){return Jc(a,null,null,o),Pc(a)}function oy(a,o,l){a.lanes|=l;var p=a.alternate;p!==null&&(p.lanes|=l);for(var T=!1,C=a.return;C!==null;)C.childLanes|=l,p=C.alternate,p!==null&&(p.childLanes|=l),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(T=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,T&&o!==null&&(T=31-gn(l),a=C.hiddenUpdates,p=a[T],p===null?a[T]=[o]:p.push(o),o.lane=l|536870912),C):null}function Pc(a){if(50<vo)throw vo=0,p0=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Gi={};function UR(a,o,l,p){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(a,o,l,p){return new UR(a,o,l,p)}function sg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function yr(a,o){var l=a.alternate;return l===null?(l=pn(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function cy(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Ic(a,o,l,p,T,C){var b=0;if(p=a,typeof a=="function")sg(a)&&(b=1);else if(typeof a=="string")b=Ab(a,l,ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case G:return a=pn(31,l,o,T),a.elementType=G,a.lanes=C,a;case x:return Aa(l.children,T,C,o);case m:b=8,T|=24;break;case E:return a=pn(12,l,o,T|2),a.elementType=E,a.lanes=C,a;case D:return a=pn(13,l,o,T),a.elementType=D,a.lanes=C,a;case R:return a=pn(19,l,o,T),a.elementType=R,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:b=10;break e;case O:b=9;break e;case w:b=11;break e;case B:b=14;break e;case _:b=16,p=null;break e}b=29,l=Error(r(130,a===null?"null":typeof a,"")),p=null}return o=pn(b,l,o,T),o.elementType=a,o.type=p,o.lanes=C,o}function Aa(a,o,l,p){return a=pn(7,a,p,o),a.lanes=l,a}function og(a,o,l){return a=pn(6,a,null,o),a.lanes=l,a}function uy(a){var o=pn(18,null,null,0);return o.stateNode=a,o}function cg(a,o,l){return o=pn(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var ly=new WeakMap;function Dn(a,o){if(typeof a=="object"&&a!==null){var l=ly.get(a);return l!==void 0?l:(o={value:a,source:o,stack:u1(o)},ly.set(a,o),o)}return{value:a,source:o,stack:u1(o)}}var zi=[],Ai=0,eu=null,Zs=0,Rn=[],bn=0,Wr=null,In=1,er="";function vr(a,o){zi[Ai++]=Zs,zi[Ai++]=eu,eu=a,Zs=o}function fy(a,o,l){Rn[bn++]=In,Rn[bn++]=er,Rn[bn++]=Wr,Wr=a;var p=In;a=er;var T=32-gn(p)-1;p&=~(1<<T),l+=1;var C=32-gn(o)+T;if(30<C){var b=T-T%5;C=(p&(1<<b)-1).toString(32),p>>=b,T-=b,In=1<<32-gn(o)+T|l<<T|p,er=C+a}else In=1<<C|l<<T|p,er=a}function ug(a){a.return!==null&&(vr(a,1),fy(a,1,0))}function lg(a){for(;a===eu;)eu=zi[--Ai],zi[Ai]=null,Zs=zi[--Ai],zi[Ai]=null;for(;a===Wr;)Wr=Rn[--bn],Rn[bn]=null,er=Rn[--bn],Rn[bn]=null,In=Rn[--bn],Rn[bn]=null}function gy(a,o){Rn[bn++]=In,Rn[bn++]=er,Rn[bn++]=Wr,In=o.id,er=o.overflow,Wr=a}var Nt=null,Qe=null,be=!1,Kr=null,Ln=!1,fg=Error(r(519));function Xr(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qs(Dn(o,a)),fg}function hy(a){var o=a.stateNode,l=a.type,p=a.memoizedProps;switch(o[Vt]=a,o[tn]=p,l){case"dialog":Oe("cancel",o),Oe("close",o);break;case"iframe":case"object":case"embed":Oe("load",o);break;case"video":case"audio":for(l=0;l<To.length;l++)Oe(To[l],o);break;case"source":Oe("error",o);break;case"img":case"image":case"link":Oe("error",o),Oe("load",o);break;case"details":Oe("toggle",o);break;case"input":Oe("invalid",o),O1(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Oe("invalid",o);break;case"textarea":Oe("invalid",o),R1(o,p.value,p.defaultValue,p.children)}l=p.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||p.suppressHydrationWarning===!0||Lx(o.textContent,l)?(p.popover!=null&&(Oe("beforetoggle",o),Oe("toggle",o)),p.onScroll!=null&&Oe("scroll",o),p.onScrollEnd!=null&&Oe("scrollend",o),p.onClick!=null&&(o.onclick=pr),o=!0):o=!1,o||Xr(a,!0)}function py(a){for(Nt=a.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Nt=Nt.return}}function ji(a){if(a!==Nt)return!1;if(!be)return py(a),be=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||b0(a.type,a.memoizedProps)),l=!l),l&&Qe&&Xr(a),py(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Qe=zx(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Qe=zx(a)}else o===27?(o=Qe,sa(a.type)?(a=_0,_0=null,Qe=a):Qe=o):Qe=Nt?Nn(a.stateNode.nextSibling):null;return!0}function ja(){Qe=Nt=null,be=!1}function gg(){var a=Kr;return a!==null&&(on===null?on=a:on.push.apply(on,a),Kr=null),a}function Qs(a){Kr===null?Kr=[a]:Kr.push(a)}var hg=k(null),Ha=null,xr=null;function Yr(a,o,l){te(hg,o._currentValue),o._currentValue=l}function Tr(a){a._currentValue=hg.current,Z(hg)}function pg(a,o,l){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===l)break;a=a.return}}function dg(a,o,l,p){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var C=T.dependencies;if(C!==null){var b=T.child;C=C.firstContext;e:for(;C!==null;){var N=C;C=T;for(var F=0;F<o.length;F++)if(N.context===o[F]){C.lanes|=l,N=C.alternate,N!==null&&(N.lanes|=l),pg(C.return,l,a),p||(b=null);break e}C=N.next}}else if(T.tag===18){if(b=T.return,b===null)throw Error(r(341));b.lanes|=l,C=b.alternate,C!==null&&(C.lanes|=l),pg(b,l,a),b=null}else b=T.child;if(b!==null)b.return=T;else for(b=T;b!==null;){if(b===a){b=null;break}if(T=b.sibling,T!==null){T.return=b.return,b=T;break}b=b.return}T=b}}function Hi(a,o,l,p){a=null;for(var T=o,C=!1;T!==null;){if(!C){if((T.flags&524288)!==0)C=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var b=T.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var N=T.type;hn(T.pendingProps.value,b.value)||(a!==null?a.push(N):a=[N])}}else if(T===Te.current){if(b=T.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(Mo):a=[Mo])}T=T.return}a!==null&&dg(o,a,l,p),o.flags|=262144}function tu(a){for(a=a.firstContext;a!==null;){if(!hn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function $a(a){Ha=a,xr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Bt(a){return dy(Ha,a)}function nu(a,o){return Ha===null&&$a(a),dy(a,o)}function dy(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},xr===null){if(a===null)throw Error(r(308));xr=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else xr=xr.next=o;return l}var kR=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},FR=t.unstable_scheduleCallback,GR=t.unstable_NormalPriority,dt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yg(){return{controller:new kR,data:new Map,refCount:0}}function Js(a){a.refCount--,a.refCount===0&&FR(GR,function(){a.controller.abort()})}var Ps=null,vg=0,$i=0,Wi=null;function zR(a,o){if(Ps===null){var l=Ps=[];vg=0,$i=m0(),Wi={status:"pending",value:void 0,then:function(p){l.push(p)}}}return vg++,o.then(yy,yy),o}function yy(){if(--vg===0&&Ps!==null){Wi!==null&&(Wi.status="fulfilled");var a=Ps;Ps=null,$i=0,Wi=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function AR(a,o){var l=[],p={status:"pending",value:null,reason:null,then:function(T){l.push(T)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var T=0;T<l.length;T++)(0,l[T])(o)},function(T){for(p.status="rejected",p.reason=T,T=0;T<l.length;T++)(0,l[T])(void 0)}),p}var vy=U.S;U.S=function(a,o){ex=ln(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&zR(a,o),vy!==null&&vy(a,o)};var Wa=k(null);function xg(){var a=Wa.current;return a!==null?a:Ke.pooledCache}function ru(a,o){o===null?te(Wa,Wa.current):te(Wa,o.pool)}function xy(){var a=xg();return a===null?null:{parent:dt._currentValue,pool:a}}var Ki=Error(r(460)),Tg=Error(r(474)),au=Error(r(542)),iu={then:function(){}};function Ty(a){return a=a.status,a==="fulfilled"||a==="rejected"}function my(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(pr,pr),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cy(a),a;default:if(typeof o.status=="string")o.then(pr,pr);else{if(a=Ke,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var T=o;T.status="fulfilled",T.value=p}},function(p){if(o.status==="pending"){var T=o;T.status="rejected",T.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Cy(a),a}throw Xa=o,Ki}}function Ka(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Xa=l,Ki):l}}var Xa=null;function Sy(){if(Xa===null)throw Error(r(459));var a=Xa;return Xa=null,a}function Cy(a){if(a===Ki||a===au)throw Error(r(483))}var Xi=null,Is=0;function su(a){var o=Is;return Is+=1,Xi===null&&(Xi=[]),my(Xi,a,o)}function eo(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function ou(a,o){throw o.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Ey(a){function o(W,j){if(a){var X=W.deletions;X===null?(W.deletions=[j],W.flags|=16):X.push(j)}}function l(W,j){if(!a)return null;for(;j!==null;)o(W,j),j=j.sibling;return null}function p(W){for(var j=new Map;W!==null;)W.key!==null?j.set(W.key,W):j.set(W.index,W),W=W.sibling;return j}function T(W,j){return W=yr(W,j),W.index=0,W.sibling=null,W}function C(W,j,X){return W.index=X,a?(X=W.alternate,X!==null?(X=X.index,X<j?(W.flags|=67108866,j):X):(W.flags|=67108866,j)):(W.flags|=1048576,j)}function b(W){return a&&W.alternate===null&&(W.flags|=67108866),W}function N(W,j,X,ae){return j===null||j.tag!==6?(j=og(X,W.mode,ae),j.return=W,j):(j=T(j,X),j.return=W,j)}function F(W,j,X,ae){var pe=X.type;return pe===x?ne(W,j,X.props.children,ae,X.key):j!==null&&(j.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===_&&Ka(pe)===j.type)?(j=T(j,X.props),eo(j,X),j.return=W,j):(j=Ic(X.type,X.key,X.props,null,W.mode,ae),eo(j,X),j.return=W,j)}function Y(W,j,X,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==X.containerInfo||j.stateNode.implementation!==X.implementation?(j=cg(X,W.mode,ae),j.return=W,j):(j=T(j,X.children||[]),j.return=W,j)}function ne(W,j,X,ae,pe){return j===null||j.tag!==7?(j=Aa(X,W.mode,ae,pe),j.return=W,j):(j=T(j,X),j.return=W,j)}function ie(W,j,X){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=og(""+j,W.mode,X),j.return=W,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case v:return X=Ic(j.type,j.key,j.props,null,W.mode,X),eo(X,j),X.return=W,X;case S:return j=cg(j,W.mode,X),j.return=W,j;case _:return j=Ka(j),ie(W,j,X)}if(ee(j)||A(j))return j=Aa(j,W.mode,X,null),j.return=W,j;if(typeof j.then=="function")return ie(W,su(j),X);if(j.$$typeof===M)return ie(W,nu(W,j),X);ou(W,j)}return null}function Q(W,j,X,ae){var pe=j!==null?j.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return pe!==null?null:N(W,j,""+X,ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case v:return X.key===pe?F(W,j,X,ae):null;case S:return X.key===pe?Y(W,j,X,ae):null;case _:return X=Ka(X),Q(W,j,X,ae)}if(ee(X)||A(X))return pe!==null?null:ne(W,j,X,ae,null);if(typeof X.then=="function")return Q(W,j,su(X),ae);if(X.$$typeof===M)return Q(W,j,nu(W,X),ae);ou(W,X)}return null}function P(W,j,X,ae,pe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return W=W.get(X)||null,N(j,W,""+ae,pe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return W=W.get(ae.key===null?X:ae.key)||null,F(j,W,ae,pe);case S:return W=W.get(ae.key===null?X:ae.key)||null,Y(j,W,ae,pe);case _:return ae=Ka(ae),P(W,j,X,ae,pe)}if(ee(ae)||A(ae))return W=W.get(X)||null,ne(j,W,ae,pe,null);if(typeof ae.then=="function")return P(W,j,X,su(ae),pe);if(ae.$$typeof===M)return P(W,j,X,nu(j,ae),pe);ou(j,ae)}return null}function ue(W,j,X,ae){for(var pe=null,Be=null,ge=j,Se=j=0,Re=null;ge!==null&&Se<X.length;Se++){ge.index>Se?(Re=ge,ge=null):Re=ge.sibling;var _e=Q(W,ge,X[Se],ae);if(_e===null){ge===null&&(ge=Re);break}a&&ge&&_e.alternate===null&&o(W,ge),j=C(_e,j,Se),Be===null?pe=_e:Be.sibling=_e,Be=_e,ge=Re}if(Se===X.length)return l(W,ge),be&&vr(W,Se),pe;if(ge===null){for(;Se<X.length;Se++)ge=ie(W,X[Se],ae),ge!==null&&(j=C(ge,j,Se),Be===null?pe=ge:Be.sibling=ge,Be=ge);return be&&vr(W,Se),pe}for(ge=p(ge);Se<X.length;Se++)Re=P(ge,W,Se,X[Se],ae),Re!==null&&(a&&Re.alternate!==null&&ge.delete(Re.key===null?Se:Re.key),j=C(Re,j,Se),Be===null?pe=Re:Be.sibling=Re,Be=Re);return a&&ge.forEach(function(fa){return o(W,fa)}),be&&vr(W,Se),pe}function de(W,j,X,ae){if(X==null)throw Error(r(151));for(var pe=null,Be=null,ge=j,Se=j=0,Re=null,_e=X.next();ge!==null&&!_e.done;Se++,_e=X.next()){ge.index>Se?(Re=ge,ge=null):Re=ge.sibling;var fa=Q(W,ge,_e.value,ae);if(fa===null){ge===null&&(ge=Re);break}a&&ge&&fa.alternate===null&&o(W,ge),j=C(fa,j,Se),Be===null?pe=fa:Be.sibling=fa,Be=fa,ge=Re}if(_e.done)return l(W,ge),be&&vr(W,Se),pe;if(ge===null){for(;!_e.done;Se++,_e=X.next())_e=ie(W,_e.value,ae),_e!==null&&(j=C(_e,j,Se),Be===null?pe=_e:Be.sibling=_e,Be=_e);return be&&vr(W,Se),pe}for(ge=p(ge);!_e.done;Se++,_e=X.next())_e=P(ge,W,Se,_e.value,ae),_e!==null&&(a&&_e.alternate!==null&&ge.delete(_e.key===null?Se:_e.key),j=C(_e,j,Se),Be===null?pe=_e:Be.sibling=_e,Be=_e);return a&&ge.forEach(function(Jb){return o(W,Jb)}),be&&vr(W,Se),pe}function We(W,j,X,ae){if(typeof X=="object"&&X!==null&&X.type===x&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case v:e:{for(var pe=X.key;j!==null;){if(j.key===pe){if(pe=X.type,pe===x){if(j.tag===7){l(W,j.sibling),ae=T(j,X.props.children),ae.return=W,W=ae;break e}}else if(j.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===_&&Ka(pe)===j.type){l(W,j.sibling),ae=T(j,X.props),eo(ae,X),ae.return=W,W=ae;break e}l(W,j);break}else o(W,j);j=j.sibling}X.type===x?(ae=Aa(X.props.children,W.mode,ae,X.key),ae.return=W,W=ae):(ae=Ic(X.type,X.key,X.props,null,W.mode,ae),eo(ae,X),ae.return=W,W=ae)}return b(W);case S:e:{for(pe=X.key;j!==null;){if(j.key===pe)if(j.tag===4&&j.stateNode.containerInfo===X.containerInfo&&j.stateNode.implementation===X.implementation){l(W,j.sibling),ae=T(j,X.children||[]),ae.return=W,W=ae;break e}else{l(W,j);break}else o(W,j);j=j.sibling}ae=cg(X,W.mode,ae),ae.return=W,W=ae}return b(W);case _:return X=Ka(X),We(W,j,X,ae)}if(ee(X))return ue(W,j,X,ae);if(A(X)){if(pe=A(X),typeof pe!="function")throw Error(r(150));return X=pe.call(X),de(W,j,X,ae)}if(typeof X.then=="function")return We(W,j,su(X),ae);if(X.$$typeof===M)return We(W,j,nu(W,X),ae);ou(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,j!==null&&j.tag===6?(l(W,j.sibling),ae=T(j,X),ae.return=W,W=ae):(l(W,j),ae=og(X,W.mode,ae),ae.return=W,W=ae),b(W)):l(W,j)}return function(W,j,X,ae){try{Is=0;var pe=We(W,j,X,ae);return Xi=null,pe}catch(ge){if(ge===Ki||ge===au)throw ge;var Be=pn(29,ge,null,W.mode);return Be.lanes=ae,Be.return=W,Be}}}var Ya=Ey(!0),My=Ey(!1),qr=!1;function mg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sg(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Zr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Qr(a,o,l){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(ke&2)!==0){var T=p.pending;return T===null?o.next=o:(o.next=T.next,T.next=o),p.pending=o,o=Pc(a),oy(a,null,l),o}return Jc(a,p,o,l),Pc(a)}function to(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,l|=p,o.lanes=l,d1(a,l)}}function Cg(a,o){var l=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var T=null,C=null;if(l=l.firstBaseUpdate,l!==null){do{var b={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};C===null?T=C=b:C=C.next=b,l=l.next}while(l!==null);C===null?T=C=o:C=C.next=o}else T=C=o;l={baseState:p.baseState,firstBaseUpdate:T,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Eg=!1;function no(){if(Eg){var a=Wi;if(a!==null)throw a}}function ro(a,o,l,p){Eg=!1;var T=a.updateQueue;qr=!1;var C=T.firstBaseUpdate,b=T.lastBaseUpdate,N=T.shared.pending;if(N!==null){T.shared.pending=null;var F=N,Y=F.next;F.next=null,b===null?C=Y:b.next=Y,b=F;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,N=ne.lastBaseUpdate,N!==b&&(N===null?ne.firstBaseUpdate=Y:N.next=Y,ne.lastBaseUpdate=F))}if(C!==null){var ie=T.baseState;b=0,ne=Y=F=null,N=C;do{var Q=N.lane&-536870913,P=Q!==N.lane;if(P?(De&Q)===Q:(p&Q)===Q){Q!==0&&Q===$i&&(Eg=!0),ne!==null&&(ne=ne.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var ue=a,de=N;Q=o;var We=l;switch(de.tag){case 1:if(ue=de.payload,typeof ue=="function"){ie=ue.call(We,ie,Q);break e}ie=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,Q=typeof ue=="function"?ue.call(We,ie,Q):ue,Q==null)break e;ie=h({},ie,Q);break e;case 2:qr=!0}}Q=N.callback,Q!==null&&(a.flags|=64,P&&(a.flags|=8192),P=T.callbacks,P===null?T.callbacks=[Q]:P.push(Q))}else P={lane:Q,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ne===null?(Y=ne=P,F=ie):ne=ne.next=P,b|=Q;if(N=N.next,N===null){if(N=T.shared.pending,N===null)break;P=N,N=P.next,P.next=null,T.lastBaseUpdate=P,T.shared.pending=null}}while(!0);ne===null&&(F=ie),T.baseState=F,T.firstBaseUpdate=Y,T.lastBaseUpdate=ne,C===null&&(T.shared.lanes=0),ta|=b,a.lanes=b,a.memoizedState=ie}}function wy(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function Oy(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)wy(l[a],o)}var Yi=k(null),cu=k(0);function Dy(a,o){a=Rr,te(cu,a),te(Yi,o),Rr=a|o.baseLanes}function Mg(){te(cu,Rr),te(Yi,Yi.current)}function wg(){Rr=cu.current,Z(Yi),Z(cu)}var dn=k(null),Vn=null;function Jr(a){var o=a.alternate;te(gt,gt.current&1),te(dn,a),Vn===null&&(o===null||Yi.current!==null||o.memoizedState!==null)&&(Vn=a)}function Og(a){te(gt,gt.current),te(dn,a),Vn===null&&(Vn=a)}function Ry(a){a.tag===22?(te(gt,gt.current),te(dn,a),Vn===null&&(Vn=a)):Pr()}function Pr(){te(gt,gt.current),te(dn,dn.current)}function yn(a){Z(dn),Vn===a&&(Vn=null),Z(gt)}var gt=k(0);function uu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||N0(l)||B0(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var mr=0,me=null,He=null,yt=null,lu=!1,qi=!1,qa=!1,fu=0,ao=0,Zi=null,jR=0;function st(){throw Error(r(321))}function Dg(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!hn(a[l],o[l]))return!1;return!0}function Rg(a,o,l,p,T,C){return mr=C,me=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,U.H=a===null||a.memoizedState===null?fv:$g,qa=!1,C=l(p,T),qa=!1,qi&&(C=Ly(o,l,p,T)),by(a),C}function by(a){U.H=oo;var o=He!==null&&He.next!==null;if(mr=0,yt=He=me=null,lu=!1,ao=0,Zi=null,o)throw Error(r(300));a===null||vt||(a=a.dependencies,a!==null&&tu(a)&&(vt=!0))}function Ly(a,o,l,p){me=a;var T=0;do{if(qi&&(Zi=null),ao=0,qi=!1,25<=T)throw Error(r(301));if(T+=1,yt=He=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}U.H=gv,C=o(l,p)}while(qi);return C}function HR(){var a=U.H,o=a.useState()[0];return o=typeof o.then=="function"?io(o):o,a=a.useState()[0],(He!==null?He.memoizedState:null)!==a&&(me.flags|=1024),o}function bg(){var a=fu!==0;return fu=0,a}function Lg(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function Vg(a){if(lu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}lu=!1}mr=0,yt=He=me=null,qi=!1,ao=fu=0,Zi=null}function Xt(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?me.memoizedState=yt=a:yt=yt.next=a,yt}function ht(){if(He===null){var a=me.alternate;a=a!==null?a.memoizedState:null}else a=He.next;var o=yt===null?me.memoizedState:yt.next;if(o!==null)yt=o,He=a;else{if(a===null)throw me.alternate===null?Error(r(467)):Error(r(310));He=a,a={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},yt===null?me.memoizedState=yt=a:yt=yt.next=a}return yt}function gu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function io(a){var o=ao;return ao+=1,Zi===null&&(Zi=[]),a=my(Zi,a,o),o=me,(yt===null?o.memoizedState:yt.next)===null&&(o=o.alternate,U.H=o===null||o.memoizedState===null?fv:$g),a}function hu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return io(a);if(a.$$typeof===M)return Bt(a)}throw Error(r(438,String(a)))}function Ng(a){var o=null,l=me.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var p=me.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(T){return T.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=gu(),me.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),p=0;p<a;p++)l[p]=z;return o.index++,l}function Sr(a,o){return typeof o=="function"?o(a):o}function pu(a){var o=ht();return Bg(o,He,a)}function Bg(a,o,l){var p=a.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var T=a.baseQueue,C=p.pending;if(C!==null){if(T!==null){var b=T.next;T.next=C.next,C.next=b}o.baseQueue=T=C,p.pending=null}if(C=a.baseState,T===null)a.memoizedState=C;else{o=T.next;var N=b=null,F=null,Y=o,ne=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(De&ie)===ie:(mr&ie)===ie){var Q=Y.revertLane;if(Q===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===$i&&(ne=!0);else if((mr&Q)===Q){Y=Y.next,Q===$i&&(ne=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},F===null?(N=F=ie,b=C):F=F.next=ie,me.lanes|=Q,ta|=Q;ie=Y.action,qa&&l(C,ie),C=Y.hasEagerState?Y.eagerState:l(C,ie)}else Q={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},F===null?(N=F=Q,b=C):F=F.next=Q,me.lanes|=ie,ta|=ie;Y=Y.next}while(Y!==null&&Y!==o);if(F===null?b=C:F.next=N,!hn(C,a.memoizedState)&&(vt=!0,ne&&(l=Wi,l!==null)))throw l;a.memoizedState=C,a.baseState=b,a.baseQueue=F,p.lastRenderedState=C}return T===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function _g(a){var o=ht(),l=o.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var p=l.dispatch,T=l.pending,C=o.memoizedState;if(T!==null){l.pending=null;var b=T=T.next;do C=a(C,b.action),b=b.next;while(b!==T);hn(C,o.memoizedState)||(vt=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),l.lastRenderedState=C}return[C,p]}function Vy(a,o,l){var p=me,T=ht(),C=be;if(C){if(l===void 0)throw Error(r(407));l=l()}else l=o();var b=!hn((He||T).memoizedState,l);if(b&&(T.memoizedState=l,vt=!0),T=T.queue,Fg(_y.bind(null,p,T,a),[a]),T.getSnapshot!==o||b||yt!==null&&yt.memoizedState.tag&1){if(p.flags|=2048,Qi(9,{destroy:void 0},By.bind(null,p,T,l,o),null),Ke===null)throw Error(r(349));C||(mr&127)!==0||Ny(p,o,l)}return l}function Ny(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=me.updateQueue,o===null?(o=gu(),me.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function By(a,o,l,p){o.value=l,o.getSnapshot=p,Uy(o)&&ky(a)}function _y(a,o,l){return l(function(){Uy(o)&&ky(a)})}function Uy(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!hn(a,l)}catch{return!0}}function ky(a){var o=za(a,2);o!==null&&cn(o,a,2)}function Ug(a){var o=Xt();if(typeof a=="function"){var l=a;if(a=l(),qa){jr(!0);try{l()}finally{jr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:a},o}function Fy(a,o,l,p){return a.baseState=l,Bg(a,He,typeof p=="function"?p:Sr)}function $R(a,o,l,p,T){if(vu(a))throw Error(r(485));if(a=o.action,a!==null){var C={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){C.listeners.push(b)}};U.T!==null?l(!0):C.isTransition=!1,p(C),l=o.pending,l===null?(C.next=o.pending=C,Gy(o,C)):(C.next=l.next,o.pending=l.next=C)}}function Gy(a,o){var l=o.action,p=o.payload,T=a.state;if(o.isTransition){var C=U.T,b={};U.T=b;try{var N=l(T,p),F=U.S;F!==null&&F(b,N),zy(a,o,N)}catch(Y){kg(a,o,Y)}finally{C!==null&&b.types!==null&&(C.types=b.types),U.T=C}}else try{C=l(T,p),zy(a,o,C)}catch(Y){kg(a,o,Y)}}function zy(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(p){Ay(a,o,p)},function(p){return kg(a,o,p)}):Ay(a,o,l)}function Ay(a,o,l){o.status="fulfilled",o.value=l,jy(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,Gy(a,l)))}function kg(a,o,l){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=l,jy(o),o=o.next;while(o!==p)}a.action=null}function jy(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Hy(a,o){return o}function $y(a,o){if(be){var l=Ke.formState;if(l!==null){e:{var p=me;if(be){if(Qe){t:{for(var T=Qe,C=Ln;T.nodeType!==8;){if(!C){T=null;break t}if(T=Nn(T.nextSibling),T===null){T=null;break t}}C=T.data,T=C==="F!"||C==="F"?T:null}if(T){Qe=Nn(T.nextSibling),p=T.data==="F!";break e}}Xr(p)}p=!1}p&&(o=l[0])}}return l=Xt(),l.memoizedState=l.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hy,lastRenderedState:o},l.queue=p,l=cv.bind(null,me,p),p.dispatch=l,p=Ug(!1),C=Hg.bind(null,me,!1,p.queue),p=Xt(),T={state:o,dispatch:null,action:a,pending:null},p.queue=T,l=$R.bind(null,me,T,C,l),T.dispatch=l,p.memoizedState=a,[o,l,!1]}function Wy(a){var o=ht();return Ky(o,He,a)}function Ky(a,o,l){if(o=Bg(a,o,Hy)[0],a=pu(Sr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=io(o)}catch(b){throw b===Ki?au:b}else p=o;o=ht();var T=o.queue,C=T.dispatch;return l!==o.memoizedState&&(me.flags|=2048,Qi(9,{destroy:void 0},WR.bind(null,T,l),null)),[p,C,a]}function WR(a,o){a.action=o}function Xy(a){var o=ht(),l=He;if(l!==null)return Ky(o,l,a);ht(),o=o.memoizedState,l=ht();var p=l.queue.dispatch;return l.memoizedState=a,[o,p,!1]}function Qi(a,o,l,p){return a={tag:a,create:l,deps:p,inst:o,next:null},o=me.updateQueue,o===null&&(o=gu(),me.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(p=l.next,l.next=a,a.next=p,o.lastEffect=a),a}function Yy(){return ht().memoizedState}function du(a,o,l,p){var T=Xt();me.flags|=a,T.memoizedState=Qi(1|o,{destroy:void 0},l,p===void 0?null:p)}function yu(a,o,l,p){var T=ht();p=p===void 0?null:p;var C=T.memoizedState.inst;He!==null&&p!==null&&Dg(p,He.memoizedState.deps)?T.memoizedState=Qi(o,C,l,p):(me.flags|=a,T.memoizedState=Qi(1|o,C,l,p))}function qy(a,o){du(8390656,8,a,o)}function Fg(a,o){yu(2048,8,a,o)}function KR(a){me.flags|=4;var o=me.updateQueue;if(o===null)o=gu(),me.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function Zy(a){var o=ht().memoizedState;return KR({ref:o,nextImpl:a}),function(){if((ke&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function Qy(a,o){return yu(4,2,a,o)}function Jy(a,o){return yu(4,4,a,o)}function Py(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Iy(a,o,l){l=l!=null?l.concat([a]):null,yu(4,4,Py.bind(null,o,a),l)}function Gg(){}function ev(a,o){var l=ht();o=o===void 0?null:o;var p=l.memoizedState;return o!==null&&Dg(o,p[1])?p[0]:(l.memoizedState=[a,o],a)}function tv(a,o){var l=ht();o=o===void 0?null:o;var p=l.memoizedState;if(o!==null&&Dg(o,p[1]))return p[0];if(p=a(),qa){jr(!0);try{a()}finally{jr(!1)}}return l.memoizedState=[p,o],p}function zg(a,o,l){return l===void 0||(mr&1073741824)!==0&&(De&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=nx(),me.lanes|=a,ta|=a,l)}function nv(a,o,l,p){return hn(l,o)?l:Yi.current!==null?(a=zg(a,l,p),hn(a,o)||(vt=!0),a):(mr&42)===0||(mr&1073741824)!==0&&(De&261930)===0?(vt=!0,a.memoizedState=l):(a=nx(),me.lanes|=a,ta|=a,o)}function rv(a,o,l,p,T){var C=q.p;q.p=C!==0&&8>C?C:8;var b=U.T,N={};U.T=N,Hg(a,!1,o,l);try{var F=T(),Y=U.S;if(Y!==null&&Y(N,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ne=AR(F,p);so(a,o,ne,Tn(a))}else so(a,o,p,Tn(a))}catch(ie){so(a,o,{then:function(){},status:"rejected",reason:ie},Tn())}finally{q.p=C,b!==null&&N.types!==null&&(b.types=N.types),U.T=b}}function XR(){}function Ag(a,o,l,p){if(a.tag!==5)throw Error(r(476));var T=av(a).queue;rv(a,T,o,re,l===null?XR:function(){return iv(a),l(p)})}function av(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:re},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function iv(a){var o=av(a);o.next===null&&(o=a.alternate.memoizedState),so(a,o.next.queue,{},Tn())}function jg(){return Bt(Mo)}function sv(){return ht().memoizedState}function ov(){return ht().memoizedState}function YR(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=Tn();a=Zr(l);var p=Qr(o,a,l);p!==null&&(cn(p,o,l),to(p,o,l)),o={cache:yg()},a.payload=o;return}o=o.return}}function qR(a,o,l){var p=Tn();l={lane:p,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},vu(a)?uv(o,l):(l=ig(a,o,l,p),l!==null&&(cn(l,a,p),lv(l,o,p)))}function cv(a,o,l){var p=Tn();so(a,o,l,p)}function so(a,o,l,p){var T={lane:p,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(vu(a))uv(o,T);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var b=o.lastRenderedState,N=C(b,l);if(T.hasEagerState=!0,T.eagerState=N,hn(N,b))return Jc(a,o,T,0),Ke===null&&Qc(),!1}catch{}if(l=ig(a,o,T,p),l!==null)return cn(l,a,p),lv(l,o,p),!0}return!1}function Hg(a,o,l,p){if(p={lane:2,revertLane:m0(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},vu(a)){if(o)throw Error(r(479))}else o=ig(a,l,p,2),o!==null&&cn(o,a,2)}function vu(a){var o=a.alternate;return a===me||o!==null&&o===me}function uv(a,o){qi=lu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function lv(a,o,l){if((l&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,l|=p,o.lanes=l,d1(a,l)}}var oo={readContext:Bt,use:hu,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};oo.useEffectEvent=st;var fv={readContext:Bt,use:hu,useCallback:function(a,o){return Xt().memoizedState=[a,o===void 0?null:o],a},useContext:Bt,useEffect:qy,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,du(4194308,4,Py.bind(null,o,a),l)},useLayoutEffect:function(a,o){return du(4194308,4,a,o)},useInsertionEffect:function(a,o){du(4,2,a,o)},useMemo:function(a,o){var l=Xt();o=o===void 0?null:o;var p=a();if(qa){jr(!0);try{a()}finally{jr(!1)}}return l.memoizedState=[p,o],p},useReducer:function(a,o,l){var p=Xt();if(l!==void 0){var T=l(o);if(qa){jr(!0);try{l(o)}finally{jr(!1)}}}else T=o;return p.memoizedState=p.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},p.queue=a,a=a.dispatch=qR.bind(null,me,a),[p.memoizedState,a]},useRef:function(a){var o=Xt();return a={current:a},o.memoizedState=a},useState:function(a){a=Ug(a);var o=a.queue,l=cv.bind(null,me,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:Gg,useDeferredValue:function(a,o){var l=Xt();return zg(l,a,o)},useTransition:function(){var a=Ug(!1);return a=rv.bind(null,me,a.queue,!0,!1),Xt().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var p=me,T=Xt();if(be){if(l===void 0)throw Error(r(407));l=l()}else{if(l=o(),Ke===null)throw Error(r(349));(De&127)!==0||Ny(p,o,l)}T.memoizedState=l;var C={value:l,getSnapshot:o};return T.queue=C,qy(_y.bind(null,p,C,a),[a]),p.flags|=2048,Qi(9,{destroy:void 0},By.bind(null,p,C,l,o),null),l},useId:function(){var a=Xt(),o=Ke.identifierPrefix;if(be){var l=er,p=In;l=(p&~(1<<32-gn(p)-1)).toString(32)+l,o="_"+o+"R_"+l,l=fu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=jR++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:jg,useFormState:$y,useActionState:$y,useOptimistic:function(a){var o=Xt();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Hg.bind(null,me,!0,l),l.dispatch=o,[a,o]},useMemoCache:Ng,useCacheRefresh:function(){return Xt().memoizedState=YR.bind(null,me)},useEffectEvent:function(a){var o=Xt(),l={impl:a};return o.memoizedState=l,function(){if((ke&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},$g={readContext:Bt,use:hu,useCallback:ev,useContext:Bt,useEffect:Fg,useImperativeHandle:Iy,useInsertionEffect:Qy,useLayoutEffect:Jy,useMemo:tv,useReducer:pu,useRef:Yy,useState:function(){return pu(Sr)},useDebugValue:Gg,useDeferredValue:function(a,o){var l=ht();return nv(l,He.memoizedState,a,o)},useTransition:function(){var a=pu(Sr)[0],o=ht().memoizedState;return[typeof a=="boolean"?a:io(a),o]},useSyncExternalStore:Vy,useId:sv,useHostTransitionStatus:jg,useFormState:Wy,useActionState:Wy,useOptimistic:function(a,o){var l=ht();return Fy(l,He,a,o)},useMemoCache:Ng,useCacheRefresh:ov};$g.useEffectEvent=Zy;var gv={readContext:Bt,use:hu,useCallback:ev,useContext:Bt,useEffect:Fg,useImperativeHandle:Iy,useInsertionEffect:Qy,useLayoutEffect:Jy,useMemo:tv,useReducer:_g,useRef:Yy,useState:function(){return _g(Sr)},useDebugValue:Gg,useDeferredValue:function(a,o){var l=ht();return He===null?zg(l,a,o):nv(l,He.memoizedState,a,o)},useTransition:function(){var a=_g(Sr)[0],o=ht().memoizedState;return[typeof a=="boolean"?a:io(a),o]},useSyncExternalStore:Vy,useId:sv,useHostTransitionStatus:jg,useFormState:Xy,useActionState:Xy,useOptimistic:function(a,o){var l=ht();return He!==null?Fy(l,He,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:Ng,useCacheRefresh:ov};gv.useEffectEvent=Zy;function Wg(a,o,l,p){o=a.memoizedState,l=l(p,o),l=l==null?o:h({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var Kg={enqueueSetState:function(a,o,l){a=a._reactInternals;var p=Tn(),T=Zr(p);T.payload=o,l!=null&&(T.callback=l),o=Qr(a,T,p),o!==null&&(cn(o,a,p),to(o,a,p))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var p=Tn(),T=Zr(p);T.tag=1,T.payload=o,l!=null&&(T.callback=l),o=Qr(a,T,p),o!==null&&(cn(o,a,p),to(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=Tn(),p=Zr(l);p.tag=2,o!=null&&(p.callback=o),o=Qr(a,p,l),o!==null&&(cn(o,a,l),to(o,a,l))}};function hv(a,o,l,p,T,C,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,C,b):o.prototype&&o.prototype.isPureReactComponent?!Ys(l,p)||!Ys(T,C):!0}function pv(a,o,l,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,p),o.state!==a&&Kg.enqueueReplaceState(o,o.state,null)}function Za(a,o){var l=o;if("ref"in o){l={};for(var p in o)p!=="ref"&&(l[p]=o[p])}if(a=a.defaultProps){l===o&&(l=h({},l));for(var T in a)l[T]===void 0&&(l[T]=a[T])}return l}function dv(a){Zc(a)}function yv(a){console.error(a)}function vv(a){Zc(a)}function xu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function xv(a,o,l){try{var p=a.onCaughtError;p(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Xg(a,o,l){return l=Zr(l),l.tag=3,l.payload={element:null},l.callback=function(){xu(a,o)},l}function Tv(a){return a=Zr(a),a.tag=3,a}function mv(a,o,l,p){var T=l.type.getDerivedStateFromError;if(typeof T=="function"){var C=p.value;a.payload=function(){return T(C)},a.callback=function(){xv(o,l,p)}}var b=l.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(a.callback=function(){xv(o,l,p),typeof T!="function"&&(na===null?na=new Set([this]):na.add(this));var N=p.stack;this.componentDidCatch(p.value,{componentStack:N!==null?N:""})})}function ZR(a,o,l,p,T){if(l.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=l.alternate,o!==null&&Hi(o,l,T,!0),l=dn.current,l!==null){switch(l.tag){case 31:case 13:return Vn===null?Lu():l.alternate===null&&ot===0&&(ot=3),l.flags&=-257,l.flags|=65536,l.lanes=T,p===iu?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([p]):o.add(p),v0(a,p,T)),!1;case 22:return l.flags|=65536,p===iu?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([p]):l.add(p)),v0(a,p,T)),!1}throw Error(r(435,l.tag))}return v0(a,p,T),Lu(),!1}if(be)return o=dn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=T,p!==fg&&(a=Error(r(422),{cause:p}),Qs(Dn(a,l)))):(p!==fg&&(o=Error(r(423),{cause:p}),Qs(Dn(o,l))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,p=Dn(p,l),T=Xg(a.stateNode,p,T),Cg(a,T),ot!==4&&(ot=2)),!1;var C=Error(r(520),{cause:p});if(C=Dn(C,l),yo===null?yo=[C]:yo.push(C),ot!==4&&(ot=2),o===null)return!0;p=Dn(p,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=T&-T,l.lanes|=a,a=Xg(l.stateNode,p,a),Cg(l,a),!1;case 1:if(o=l.type,C=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(na===null||!na.has(C))))return l.flags|=65536,T&=-T,l.lanes|=T,T=Tv(T),mv(T,a,l,p),Cg(l,T),!1}l=l.return}while(l!==null);return!1}var Yg=Error(r(461)),vt=!1;function _t(a,o,l,p){o.child=a===null?My(o,null,l,p):Ya(o,a.child,l,p)}function Sv(a,o,l,p,T){l=l.render;var C=o.ref;if("ref"in p){var b={};for(var N in p)N!=="ref"&&(b[N]=p[N])}else b=p;return $a(o),p=Rg(a,o,l,b,C,T),N=bg(),a!==null&&!vt?(Lg(a,o,T),Cr(a,o,T)):(be&&N&&ug(o),o.flags|=1,_t(a,o,p,T),o.child)}function Cv(a,o,l,p,T){if(a===null){var C=l.type;return typeof C=="function"&&!sg(C)&&C.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=C,Ev(a,o,C,p,T)):(a=Ic(l.type,null,p,o,o.mode,T),a.ref=o.ref,a.return=o,o.child=a)}if(C=a.child,!t0(a,T)){var b=C.memoizedProps;if(l=l.compare,l=l!==null?l:Ys,l(b,p)&&a.ref===o.ref)return Cr(a,o,T)}return o.flags|=1,a=yr(C,p),a.ref=o.ref,a.return=o,o.child=a}function Ev(a,o,l,p,T){if(a!==null){var C=a.memoizedProps;if(Ys(C,p)&&a.ref===o.ref)if(vt=!1,o.pendingProps=p=C,t0(a,T))(a.flags&131072)!==0&&(vt=!0);else return o.lanes=a.lanes,Cr(a,o,T)}return qg(a,o,l,p,T)}function Mv(a,o,l,p){var T=p.children,C=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(C=C!==null?C.baseLanes|l:l,a!==null){for(p=o.child=a.child,T=0;p!==null;)T=T|p.lanes|p.childLanes,p=p.sibling;p=T&~C}else p=0,o.child=null;return wv(a,o,C,l,p)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&ru(o,C!==null?C.cachePool:null),C!==null?Dy(o,C):Mg(),Ry(o);else return p=o.lanes=536870912,wv(a,o,C!==null?C.baseLanes|l:l,l,p)}else C!==null?(ru(o,C.cachePool),Dy(o,C),Pr(),o.memoizedState=null):(a!==null&&ru(o,null),Mg(),Pr());return _t(a,o,T,l),o.child}function co(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function wv(a,o,l,p,T){var C=xg();return C=C===null?null:{parent:dt._currentValue,pool:C},o.memoizedState={baseLanes:l,cachePool:C},a!==null&&ru(o,null),Mg(),Ry(o),a!==null&&Hi(a,o,p,!0),o.childLanes=T,null}function Tu(a,o){return o=Su({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Ov(a,o,l){return Ya(o,a.child,null,l),a=Tu(o,o.pendingProps),a.flags|=2,yn(o),o.memoizedState=null,a}function QR(a,o,l){var p=o.pendingProps,T=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(be){if(p.mode==="hidden")return a=Tu(o,p),o.lanes=536870912,co(null,a);if(Og(o),(a=Qe)?(a=Gx(a,Ln),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Wr!==null?{id:In,overflow:er}:null,retryLane:536870912,hydrationErrors:null},l=uy(a),l.return=o,o.child=l,Nt=o,Qe=null)):a=null,a===null)throw Xr(o);return o.lanes=536870912,null}return Tu(o,p)}var C=a.memoizedState;if(C!==null){var b=C.dehydrated;if(Og(o),T)if(o.flags&256)o.flags&=-257,o=Ov(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(vt||Hi(a,o,l,!1),T=(l&a.childLanes)!==0,vt||T){if(p=Ke,p!==null&&(b=y1(p,l),b!==0&&b!==C.retryLane))throw C.retryLane=b,za(a,b),cn(p,a,b),Yg;Lu(),o=Ov(a,o,l)}else a=C.treeContext,Qe=Nn(b.nextSibling),Nt=o,be=!0,Kr=null,Ln=!1,a!==null&&gy(o,a),o=Tu(o,p),o.flags|=4096;return o}return a=yr(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function mu(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function qg(a,o,l,p,T){return $a(o),l=Rg(a,o,l,p,void 0,T),p=bg(),a!==null&&!vt?(Lg(a,o,T),Cr(a,o,T)):(be&&p&&ug(o),o.flags|=1,_t(a,o,l,T),o.child)}function Dv(a,o,l,p,T,C){return $a(o),o.updateQueue=null,l=Ly(o,p,l,T),by(a),p=bg(),a!==null&&!vt?(Lg(a,o,C),Cr(a,o,C)):(be&&p&&ug(o),o.flags|=1,_t(a,o,l,C),o.child)}function Rv(a,o,l,p,T){if($a(o),o.stateNode===null){var C=Gi,b=l.contextType;typeof b=="object"&&b!==null&&(C=Bt(b)),C=new l(p,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Kg,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=p,C.state=o.memoizedState,C.refs={},mg(o),b=l.contextType,C.context=typeof b=="object"&&b!==null?Bt(b):Gi,C.state=o.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(Wg(o,l,b,p),C.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(b=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),b!==C.state&&Kg.enqueueReplaceState(C,C.state,null),ro(o,p,C,T),no(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){C=o.stateNode;var N=o.memoizedProps,F=Za(l,N);C.props=F;var Y=C.context,ne=l.contextType;b=Gi,typeof ne=="object"&&ne!==null&&(b=Bt(ne));var ie=l.getDerivedStateFromProps;ne=typeof ie=="function"||typeof C.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,ne||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N||Y!==b)&&pv(o,C,p,b),qr=!1;var Q=o.memoizedState;C.state=Q,ro(o,p,C,T),no(),Y=o.memoizedState,N||Q!==Y||qr?(typeof ie=="function"&&(Wg(o,l,ie,p),Y=o.memoizedState),(F=qr||hv(o,l,F,p,Q,Y,b))?(ne||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=Y),C.props=p,C.state=Y,C.context=b,p=F):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{C=o.stateNode,Sg(a,o),b=o.memoizedProps,ne=Za(l,b),C.props=ne,ie=o.pendingProps,Q=C.context,Y=l.contextType,F=Gi,typeof Y=="object"&&Y!==null&&(F=Bt(Y)),N=l.getDerivedStateFromProps,(Y=typeof N=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(b!==ie||Q!==F)&&pv(o,C,p,F),qr=!1,Q=o.memoizedState,C.state=Q,ro(o,p,C,T),no();var P=o.memoizedState;b!==ie||Q!==P||qr||a!==null&&a.dependencies!==null&&tu(a.dependencies)?(typeof N=="function"&&(Wg(o,l,N,p),P=o.memoizedState),(ne=qr||hv(o,l,ne,p,Q,P,F)||a!==null&&a.dependencies!==null&&tu(a.dependencies))?(Y||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,P,F),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,P,F)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||b===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=P),C.props=p,C.state=P,C.context=F,p=ne):(typeof C.componentDidUpdate!="function"||b===a.memoizedProps&&Q===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||b===a.memoizedProps&&Q===a.memoizedState||(o.flags|=1024),p=!1)}return C=p,mu(a,o),p=(o.flags&128)!==0,C||p?(C=o.stateNode,l=p&&typeof l.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,a!==null&&p?(o.child=Ya(o,a.child,null,T),o.child=Ya(o,null,l,T)):_t(a,o,l,T),o.memoizedState=C.state,a=o.child):a=Cr(a,o,T),a}function bv(a,o,l,p){return ja(),o.flags|=256,_t(a,o,l,p),o.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qg(a){return{baseLanes:a,cachePool:xy()}}function Jg(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=xn),a}function Lv(a,o,l){var p=o.pendingProps,T=!1,C=(o.flags&128)!==0,b;if((b=C)||(b=a!==null&&a.memoizedState===null?!1:(gt.current&2)!==0),b&&(T=!0,o.flags&=-129),b=(o.flags&32)!==0,o.flags&=-33,a===null){if(be){if(T?Jr(o):Pr(),(a=Qe)?(a=Gx(a,Ln),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Wr!==null?{id:In,overflow:er}:null,retryLane:536870912,hydrationErrors:null},l=uy(a),l.return=o,o.child=l,Nt=o,Qe=null)):a=null,a===null)throw Xr(o);return B0(a)?o.lanes=32:o.lanes=536870912,null}var N=p.children;return p=p.fallback,T?(Pr(),T=o.mode,N=Su({mode:"hidden",children:N},T),p=Aa(p,T,l,null),N.return=o,p.return=o,N.sibling=p,o.child=N,p=o.child,p.memoizedState=Qg(l),p.childLanes=Jg(a,b,l),o.memoizedState=Zg,co(null,p)):(Jr(o),Pg(o,N))}var F=a.memoizedState;if(F!==null&&(N=F.dehydrated,N!==null)){if(C)o.flags&256?(Jr(o),o.flags&=-257,o=Ig(a,o,l)):o.memoizedState!==null?(Pr(),o.child=a.child,o.flags|=128,o=null):(Pr(),N=p.fallback,T=o.mode,p=Su({mode:"visible",children:p.children},T),N=Aa(N,T,l,null),N.flags|=2,p.return=o,N.return=o,p.sibling=N,o.child=p,Ya(o,a.child,null,l),p=o.child,p.memoizedState=Qg(l),p.childLanes=Jg(a,b,l),o.memoizedState=Zg,o=co(null,p));else if(Jr(o),B0(N)){if(b=N.nextSibling&&N.nextSibling.dataset,b)var Y=b.dgst;b=Y,p=Error(r(419)),p.stack="",p.digest=b,Qs({value:p,source:null,stack:null}),o=Ig(a,o,l)}else if(vt||Hi(a,o,l,!1),b=(l&a.childLanes)!==0,vt||b){if(b=Ke,b!==null&&(p=y1(b,l),p!==0&&p!==F.retryLane))throw F.retryLane=p,za(a,p),cn(b,a,p),Yg;N0(N)||Lu(),o=Ig(a,o,l)}else N0(N)?(o.flags|=192,o.child=a.child,o=null):(a=F.treeContext,Qe=Nn(N.nextSibling),Nt=o,be=!0,Kr=null,Ln=!1,a!==null&&gy(o,a),o=Pg(o,p.children),o.flags|=4096);return o}return T?(Pr(),N=p.fallback,T=o.mode,F=a.child,Y=F.sibling,p=yr(F,{mode:"hidden",children:p.children}),p.subtreeFlags=F.subtreeFlags&65011712,Y!==null?N=yr(Y,N):(N=Aa(N,T,l,null),N.flags|=2),N.return=o,p.return=o,p.sibling=N,o.child=p,co(null,p),p=o.child,N=a.child.memoizedState,N===null?N=Qg(l):(T=N.cachePool,T!==null?(F=dt._currentValue,T=T.parent!==F?{parent:F,pool:F}:T):T=xy(),N={baseLanes:N.baseLanes|l,cachePool:T}),p.memoizedState=N,p.childLanes=Jg(a,b,l),o.memoizedState=Zg,co(a.child,p)):(Jr(o),l=a.child,a=l.sibling,l=yr(l,{mode:"visible",children:p.children}),l.return=o,l.sibling=null,a!==null&&(b=o.deletions,b===null?(o.deletions=[a],o.flags|=16):b.push(a)),o.child=l,o.memoizedState=null,l)}function Pg(a,o){return o=Su({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Su(a,o){return a=pn(22,a,null,o),a.lanes=0,a}function Ig(a,o,l){return Ya(o,a.child,null,l),a=Pg(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Vv(a,o,l){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),pg(a.return,o,l)}function e0(a,o,l,p,T,C){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:T,treeForkCount:C}:(b.isBackwards=o,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=l,b.tailMode=T,b.treeForkCount=C)}function Nv(a,o,l){var p=o.pendingProps,T=p.revealOrder,C=p.tail;p=p.children;var b=gt.current,N=(b&2)!==0;if(N?(b=b&1|2,o.flags|=128):b&=1,te(gt,b),_t(a,o,p,l),p=be?Zs:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Vv(a,l,o);else if(a.tag===19)Vv(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(T){case"forwards":for(l=o.child,T=null;l!==null;)a=l.alternate,a!==null&&uu(a)===null&&(T=l),l=l.sibling;l=T,l===null?(T=o.child,o.child=null):(T=l.sibling,l.sibling=null),e0(o,!1,T,l,C,p);break;case"backwards":case"unstable_legacy-backwards":for(l=null,T=o.child,o.child=null;T!==null;){if(a=T.alternate,a!==null&&uu(a)===null){o.child=T;break}a=T.sibling,T.sibling=l,l=T,T=a}e0(o,!0,l,null,C,p);break;case"together":e0(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function Cr(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),ta|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(Hi(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,l=yr(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=yr(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function t0(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&tu(a)))}function JR(a,o,l){switch(o.tag){case 3:Ze(o,o.stateNode.containerInfo),Yr(o,dt,a.memoizedState.cache),ja();break;case 27:case 5:en(o);break;case 4:Ze(o,o.stateNode.containerInfo);break;case 10:Yr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Og(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Jr(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Lv(a,o,l):(Jr(o),a=Cr(a,o,l),a!==null?a.sibling:null);Jr(o);break;case 19:var T=(a.flags&128)!==0;if(p=(l&o.childLanes)!==0,p||(Hi(a,o,l,!1),p=(l&o.childLanes)!==0),T){if(p)return Nv(a,o,l);o.flags|=128}if(T=o.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),te(gt,gt.current),p)break;return null;case 22:return o.lanes=0,Mv(a,o,l,o.pendingProps);case 24:Yr(o,dt,a.memoizedState.cache)}return Cr(a,o,l)}function Bv(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)vt=!0;else{if(!t0(a,l)&&(o.flags&128)===0)return vt=!1,JR(a,o,l);vt=(a.flags&131072)!==0}else vt=!1,be&&(o.flags&1048576)!==0&&fy(o,Zs,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=Ka(o.elementType),o.type=a,typeof a=="function")sg(a)?(p=Za(a,p),o.tag=1,o=Rv(null,o,a,p,l)):(o.tag=0,o=qg(null,o,a,p,l));else{if(a!=null){var T=a.$$typeof;if(T===w){o.tag=11,o=Sv(null,o,a,p,l);break e}else if(T===B){o.tag=14,o=Cv(null,o,a,p,l);break e}}throw o=K(a)||a,Error(r(306,o,""))}}return o;case 0:return qg(a,o,o.type,o.pendingProps,l);case 1:return p=o.type,T=Za(p,o.pendingProps),Rv(a,o,p,T,l);case 3:e:{if(Ze(o,o.stateNode.containerInfo),a===null)throw Error(r(387));p=o.pendingProps;var C=o.memoizedState;T=C.element,Sg(a,o),ro(o,p,null,l);var b=o.memoizedState;if(p=b.cache,Yr(o,dt,p),p!==C.cache&&dg(o,[dt],l,!0),no(),p=b.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:b.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=bv(a,o,p,l);break e}else if(p!==T){T=Dn(Error(r(424)),o),Qs(T),o=bv(a,o,p,l);break e}else for(a=o.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Qe=Nn(a.firstChild),Nt=o,be=!0,Kr=null,Ln=!0,l=My(o,null,p,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ja(),p===T){o=Cr(a,o,l);break e}_t(a,o,p,l)}o=o.child}return o;case 26:return mu(a,o),a===null?(l=Wx(o.type,null,o.pendingProps,null))?o.memoizedState=l:be||(l=o.type,a=o.pendingProps,p=Fu(fe.current).createElement(l),p[Vt]=o,p[tn]=a,Ut(p,l,a),Ot(p),o.stateNode=p):o.memoizedState=Wx(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return en(o),a===null&&be&&(p=o.stateNode=jx(o.type,o.pendingProps,fe.current),Nt=o,Ln=!0,T=Qe,sa(o.type)?(_0=T,Qe=Nn(p.firstChild)):Qe=T),_t(a,o,o.pendingProps.children,l),mu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&be&&((T=p=Qe)&&(p=Db(p,o.type,o.pendingProps,Ln),p!==null?(o.stateNode=p,Nt=o,Qe=Nn(p.firstChild),Ln=!1,T=!0):T=!1),T||Xr(o)),en(o),T=o.type,C=o.pendingProps,b=a!==null?a.memoizedProps:null,p=C.children,b0(T,C)?p=null:b!==null&&b0(T,b)&&(o.flags|=32),o.memoizedState!==null&&(T=Rg(a,o,HR,null,null,l),Mo._currentValue=T),mu(a,o),_t(a,o,p,l),o.child;case 6:return a===null&&be&&((a=l=Qe)&&(l=Rb(l,o.pendingProps,Ln),l!==null?(o.stateNode=l,Nt=o,Qe=null,a=!0):a=!1),a||Xr(o)),null;case 13:return Lv(a,o,l);case 4:return Ze(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=Ya(o,null,p,l):_t(a,o,p,l),o.child;case 11:return Sv(a,o,o.type,o.pendingProps,l);case 7:return _t(a,o,o.pendingProps,l),o.child;case 8:return _t(a,o,o.pendingProps.children,l),o.child;case 12:return _t(a,o,o.pendingProps.children,l),o.child;case 10:return p=o.pendingProps,Yr(o,o.type,p.value),_t(a,o,p.children,l),o.child;case 9:return T=o.type._context,p=o.pendingProps.children,$a(o),T=Bt(T),p=p(T),o.flags|=1,_t(a,o,p,l),o.child;case 14:return Cv(a,o,o.type,o.pendingProps,l);case 15:return Ev(a,o,o.type,o.pendingProps,l);case 19:return Nv(a,o,l);case 31:return QR(a,o,l);case 22:return Mv(a,o,l,o.pendingProps);case 24:return $a(o),p=Bt(dt),a===null?(T=xg(),T===null&&(T=Ke,C=yg(),T.pooledCache=C,C.refCount++,C!==null&&(T.pooledCacheLanes|=l),T=C),o.memoizedState={parent:p,cache:T},mg(o),Yr(o,dt,T)):((a.lanes&l)!==0&&(Sg(a,o),ro(o,null,null,l),no()),T=a.memoizedState,C=o.memoizedState,T.parent!==p?(T={parent:p,cache:p},o.memoizedState=T,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=T),Yr(o,dt,p)):(p=C.cache,Yr(o,dt,p),p!==T.cache&&dg(o,[dt],l,!0))),_t(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Er(a){a.flags|=4}function n0(a,o,l,p,T){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(T&335544128)===T)if(a.stateNode.complete)a.flags|=8192;else if(sx())a.flags|=8192;else throw Xa=iu,Tg}else a.flags&=-16777217}function _v(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Zx(o))if(sx())a.flags|=8192;else throw Xa=iu,Tg}function Cu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?h1():536870912,a.lanes|=o,es|=o)}function uo(a,o){if(!be)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Je(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,p=0;if(o)for(var T=a.child;T!==null;)l|=T.lanes|T.childLanes,p|=T.subtreeFlags&65011712,p|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)l|=T.lanes|T.childLanes,p|=T.subtreeFlags,p|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=p,a.childLanes=l,o}function PR(a,o,l){var p=o.pendingProps;switch(lg(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(o),null;case 1:return Je(o),null;case 3:return l=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),Tr(dt),Fe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(ji(o)?Er(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,gg())),Je(o),null;case 26:var T=o.type,C=o.memoizedState;return a===null?(Er(o),C!==null?(Je(o),_v(o,C)):(Je(o),n0(o,T,null,p,l))):C?C!==a.memoizedState?(Er(o),Je(o),_v(o,C)):(Je(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&Er(o),Je(o),n0(o,T,a,p,l)),null;case 27:if(Mi(o),l=fe.current,T=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&Er(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Je(o),null}a=ce.current,ji(o)?hy(o):(a=jx(T,p,l),o.stateNode=a,Er(o))}return Je(o),null;case 5:if(Mi(o),T=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&Er(o);else{if(!p){if(o.stateNode===null)throw Error(r(166));return Je(o),null}if(C=ce.current,ji(o))hy(o);else{var b=Fu(fe.current);switch(C){case 1:C=b.createElementNS("http://www.w3.org/2000/svg",T);break;case 2:C=b.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;default:switch(T){case"svg":C=b.createElementNS("http://www.w3.org/2000/svg",T);break;case"math":C=b.createElementNS("http://www.w3.org/1998/Math/MathML",T);break;case"script":C=b.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof p.is=="string"?b.createElement("select",{is:p.is}):b.createElement("select"),p.multiple?C.multiple=!0:p.size&&(C.size=p.size);break;default:C=typeof p.is=="string"?b.createElement(T,{is:p.is}):b.createElement(T)}}C[Vt]=o,C[tn]=p;e:for(b=o.child;b!==null;){if(b.tag===5||b.tag===6)C.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===o)break e;for(;b.sibling===null;){if(b.return===null||b.return===o)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}o.stateNode=C;e:switch(Ut(C,T,p),T){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&Er(o)}}return Je(o),n0(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&Er(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(r(166));if(a=fe.current,ji(o)){if(a=o.stateNode,l=o.memoizedProps,p=null,T=Nt,T!==null)switch(T.tag){case 27:case 5:p=T.memoizedProps}a[Vt]=o,a=!!(a.nodeValue===l||p!==null&&p.suppressHydrationWarning===!0||Lx(a.nodeValue,l)),a||Xr(o,!0)}else a=Fu(a).createTextNode(p),a[Vt]=o,o.stateNode=a}return Je(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(p=ji(o),l!==null){if(a===null){if(!p)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Vt]=o}else ja(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),a=!1}else l=gg(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(yn(o),o):(yn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Je(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=ji(o),p!==null&&p.dehydrated!==null){if(a===null){if(!T)throw Error(r(318));if(T=o.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[Vt]=o}else ja(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),T=!1}else T=gg(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return o.flags&256?(yn(o),o):(yn(o),null)}return yn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=p!==null,a=a!==null&&a.memoizedState!==null,l&&(p=o.child,T=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(T=p.alternate.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==T&&(p.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),Cu(o,o.updateQueue),Je(o),null);case 4:return Fe(),a===null&&M0(o.stateNode.containerInfo),Je(o),null;case 10:return Tr(o.type),Je(o),null;case 19:if(Z(gt),p=o.memoizedState,p===null)return Je(o),null;if(T=(o.flags&128)!==0,C=p.rendering,C===null)if(T)uo(p,!1);else{if(ot!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(C=uu(a),C!==null){for(o.flags|=128,uo(p,!1),a=C.updateQueue,o.updateQueue=a,Cu(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)cy(l,a),l=l.sibling;return te(gt,gt.current&1|2),be&&vr(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&ln()>Du&&(o.flags|=128,T=!0,uo(p,!1),o.lanes=4194304)}else{if(!T)if(a=uu(C),a!==null){if(o.flags|=128,T=!0,a=a.updateQueue,o.updateQueue=a,Cu(o,a),uo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!C.alternate&&!be)return Je(o),null}else 2*ln()-p.renderingStartTime>Du&&l!==536870912&&(o.flags|=128,T=!0,uo(p,!1),o.lanes=4194304);p.isBackwards?(C.sibling=o.child,o.child=C):(a=p.last,a!==null?a.sibling=C:o.child=C,p.last=C)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=ln(),a.sibling=null,l=gt.current,te(gt,T?l&1|2:l&1),be&&vr(o,p.treeForkCount),a):(Je(o),null);case 22:case 23:return yn(o),wg(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(l&536870912)!==0&&(o.flags&128)===0&&(Je(o),o.subtreeFlags&6&&(o.flags|=8192)):Je(o),l=o.updateQueue,l!==null&&Cu(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==l&&(o.flags|=2048),a!==null&&Z(Wa),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Tr(dt),Je(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function IR(a,o){switch(lg(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Tr(dt),Fe(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Mi(o),null;case 31:if(o.memoizedState!==null){if(yn(o),o.alternate===null)throw Error(r(340));ja()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(yn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));ja()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return Z(gt),null;case 4:return Fe(),null;case 10:return Tr(o.type),null;case 22:case 23:return yn(o),wg(),a!==null&&Z(Wa),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Tr(dt),null;case 25:return null;default:return null}}function Uv(a,o){switch(lg(o),o.tag){case 3:Tr(dt),Fe();break;case 26:case 27:case 5:Mi(o);break;case 4:Fe();break;case 31:o.memoizedState!==null&&yn(o);break;case 13:yn(o);break;case 19:Z(gt);break;case 10:Tr(o.type);break;case 22:case 23:yn(o),wg(),a!==null&&Z(Wa);break;case 24:Tr(dt)}}function lo(a,o){try{var l=o.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var T=p.next;l=T;do{if((l.tag&a)===a){p=void 0;var C=l.create,b=l.inst;p=C(),b.destroy=p}l=l.next}while(l!==T)}}catch(N){Ae(o,o.return,N)}}function Ir(a,o,l){try{var p=o.updateQueue,T=p!==null?p.lastEffect:null;if(T!==null){var C=T.next;p=C;do{if((p.tag&a)===a){var b=p.inst,N=b.destroy;if(N!==void 0){b.destroy=void 0,T=o;var F=l,Y=N;try{Y()}catch(ne){Ae(T,F,ne)}}}p=p.next}while(p!==C)}}catch(ne){Ae(o,o.return,ne)}}function kv(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Oy(o,l)}catch(p){Ae(a,a.return,p)}}}function Fv(a,o,l){l.props=Za(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(p){Ae(a,o,p)}}function fo(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof l=="function"?a.refCleanup=l(p):l.current=p}}catch(T){Ae(a,o,T)}}function tr(a,o){var l=a.ref,p=a.refCleanup;if(l!==null)if(typeof p=="function")try{p()}catch(T){Ae(a,o,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(T){Ae(a,o,T)}else l.current=null}function Gv(a){var o=a.type,l=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&p.focus();break e;case"img":l.src?p.src=l.src:l.srcSet&&(p.srcset=l.srcSet)}}catch(T){Ae(a,a.return,T)}}function r0(a,o,l){try{var p=a.stateNode;Sb(p,a.type,l,o),p[tn]=o}catch(T){Ae(a,a.return,T)}}function zv(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&sa(a.type)||a.tag===4}function a0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||zv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&sa(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function i0(a,o,l){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=pr));else if(p!==4&&(p===27&&sa(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(i0(a,o,l),a=a.sibling;a!==null;)i0(a,o,l),a=a.sibling}function Eu(a,o,l){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(p!==4&&(p===27&&sa(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Eu(a,o,l),a=a.sibling;a!==null;)Eu(a,o,l),a=a.sibling}function Av(a){var o=a.stateNode,l=a.memoizedProps;try{for(var p=a.type,T=o.attributes;T.length;)o.removeAttributeNode(T[0]);Ut(o,p,l),o[Vt]=a,o[tn]=l}catch(C){Ae(a,a.return,C)}}var Mr=!1,xt=!1,s0=!1,jv=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function eb(a,o){if(a=a.containerInfo,D0=Wu,a=I1(a),If(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var T=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{l.nodeType,C.nodeType}catch{l=null;break e}var b=0,N=-1,F=-1,Y=0,ne=0,ie=a,Q=null;t:for(;;){for(var P;ie!==l||T!==0&&ie.nodeType!==3||(N=b+T),ie!==C||p!==0&&ie.nodeType!==3||(F=b+p),ie.nodeType===3&&(b+=ie.nodeValue.length),(P=ie.firstChild)!==null;)Q=ie,ie=P;for(;;){if(ie===a)break t;if(Q===l&&++Y===T&&(N=b),Q===C&&++ne===p&&(F=b),(P=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=P}l=N===-1||F===-1?null:{start:N,end:F}}else l=null}l=l||{start:0,end:0}}else l=null;for(R0={focusedElem:a,selectionRange:l},Wu=!1,Dt=o;Dt!==null;)if(o=Dt,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Dt=a;else for(;Dt!==null;){switch(o=Dt,C=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)T=a[l],T.ref.impl=T.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,l=o,T=C.memoizedProps,C=C.memoizedState,p=l.stateNode;try{var ue=Za(l.type,T);a=p.getSnapshotBeforeUpdate(ue,C),p.__reactInternalSnapshotBeforeUpdate=a}catch(de){Ae(l,l.return,de)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)V0(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":V0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Dt=a;break}Dt=o.return}}function Hv(a,o,l){var p=l.flags;switch(l.tag){case 0:case 11:case 15:Or(a,l),p&4&&lo(5,l);break;case 1:if(Or(a,l),p&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(b){Ae(l,l.return,b)}else{var T=Za(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(T,o,a.__reactInternalSnapshotBeforeUpdate)}catch(b){Ae(l,l.return,b)}}p&64&&kv(l),p&512&&fo(l,l.return);break;case 3:if(Or(a,l),p&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Oy(a,o)}catch(b){Ae(l,l.return,b)}}break;case 27:o===null&&p&4&&Av(l);case 26:case 5:Or(a,l),o===null&&p&4&&Gv(l),p&512&&fo(l,l.return);break;case 12:Or(a,l);break;case 31:Or(a,l),p&4&&Kv(a,l);break;case 13:Or(a,l),p&4&&Xv(a,l),p&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=ub.bind(null,l),bb(a,l))));break;case 22:if(p=l.memoizedState!==null||Mr,!p){o=o!==null&&o.memoizedState!==null||xt,T=Mr;var C=xt;Mr=p,(xt=o)&&!C?Dr(a,l,(l.subtreeFlags&8772)!==0):Or(a,l),Mr=T,xt=C}break;case 30:break;default:Or(a,l)}}function $v(a){var o=a.alternate;o!==null&&(a.alternate=null,$v(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&kf(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tt=null,rn=!1;function wr(a,o,l){for(l=l.child;l!==null;)Wv(a,o,l),l=l.sibling}function Wv(a,o,l){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(Us,l)}catch{}switch(l.tag){case 26:xt||tr(l,o),wr(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:xt||tr(l,o);var p=tt,T=rn;sa(l.type)&&(tt=l.stateNode,rn=!1),wr(a,o,l),So(l.stateNode),tt=p,rn=T;break;case 5:xt||tr(l,o);case 6:if(p=tt,T=rn,tt=null,wr(a,o,l),tt=p,rn=T,tt!==null)if(rn)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(l.stateNode)}catch(C){Ae(l,o,C)}else try{tt.removeChild(l.stateNode)}catch(C){Ae(l,o,C)}break;case 18:tt!==null&&(rn?(a=tt,kx(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),cs(a)):kx(tt,l.stateNode));break;case 4:p=tt,T=rn,tt=l.stateNode.containerInfo,rn=!0,wr(a,o,l),tt=p,rn=T;break;case 0:case 11:case 14:case 15:Ir(2,l,o),xt||Ir(4,l,o),wr(a,o,l);break;case 1:xt||(tr(l,o),p=l.stateNode,typeof p.componentWillUnmount=="function"&&Fv(l,o,p)),wr(a,o,l);break;case 21:wr(a,o,l);break;case 22:xt=(p=xt)||l.memoizedState!==null,wr(a,o,l),xt=p;break;default:wr(a,o,l)}}function Kv(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{cs(a)}catch(l){Ae(o,o.return,l)}}}function Xv(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{cs(a)}catch(l){Ae(o,o.return,l)}}function tb(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new jv),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new jv),o;default:throw Error(r(435,a.tag))}}function Mu(a,o){var l=tb(a);o.forEach(function(p){if(!l.has(p)){l.add(p);var T=lb.bind(null,a,p);p.then(T,T)}})}function an(a,o){var l=o.deletions;if(l!==null)for(var p=0;p<l.length;p++){var T=l[p],C=a,b=o,N=b;e:for(;N!==null;){switch(N.tag){case 27:if(sa(N.type)){tt=N.stateNode,rn=!1;break e}break;case 5:tt=N.stateNode,rn=!1;break e;case 3:case 4:tt=N.stateNode.containerInfo,rn=!0;break e}N=N.return}if(tt===null)throw Error(r(160));Wv(C,b,T),tt=null,rn=!1,C=T.alternate,C!==null&&(C.return=null),T.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Yv(o,a),o=o.sibling}var Kn=null;function Yv(a,o){var l=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:an(o,a),sn(a),p&4&&(Ir(3,a,a.return),lo(3,a),Ir(5,a,a.return));break;case 1:an(o,a),sn(a),p&512&&(xt||l===null||tr(l,l.return)),p&64&&Mr&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?p:l.concat(p))));break;case 26:var T=Kn;if(an(o,a),sn(a),p&512&&(xt||l===null||tr(l,l.return)),p&4){var C=l!==null?l.memoizedState:null;if(p=a.memoizedState,l===null)if(p===null)if(a.stateNode===null){e:{p=a.type,l=a.memoizedProps,T=T.ownerDocument||T;t:switch(p){case"title":C=T.getElementsByTagName("title")[0],(!C||C[Gs]||C[Vt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=T.createElement(p),T.head.insertBefore(C,T.querySelector("head > title"))),Ut(C,p,l),C[Vt]=a,Ot(C),p=C;break e;case"link":var b=Yx("link","href",T).get(p+(l.href||""));if(b){for(var N=0;N<b.length;N++)if(C=b[N],C.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&C.getAttribute("rel")===(l.rel==null?null:l.rel)&&C.getAttribute("title")===(l.title==null?null:l.title)&&C.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){b.splice(N,1);break t}}C=T.createElement(p),Ut(C,p,l),T.head.appendChild(C);break;case"meta":if(b=Yx("meta","content",T).get(p+(l.content||""))){for(N=0;N<b.length;N++)if(C=b[N],C.getAttribute("content")===(l.content==null?null:""+l.content)&&C.getAttribute("name")===(l.name==null?null:l.name)&&C.getAttribute("property")===(l.property==null?null:l.property)&&C.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&C.getAttribute("charset")===(l.charSet==null?null:l.charSet)){b.splice(N,1);break t}}C=T.createElement(p),Ut(C,p,l),T.head.appendChild(C);break;default:throw Error(r(468,p))}C[Vt]=a,Ot(C),p=C}a.stateNode=p}else qx(T,a.type,a.stateNode);else a.stateNode=Xx(T,p,a.memoizedProps);else C!==p?(C===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):C.count--,p===null?qx(T,a.type,a.stateNode):Xx(T,p,a.memoizedProps)):p===null&&a.stateNode!==null&&r0(a,a.memoizedProps,l.memoizedProps)}break;case 27:an(o,a),sn(a),p&512&&(xt||l===null||tr(l,l.return)),l!==null&&p&4&&r0(a,a.memoizedProps,l.memoizedProps);break;case 5:if(an(o,a),sn(a),p&512&&(xt||l===null||tr(l,l.return)),a.flags&32){T=a.stateNode;try{Vi(T,"")}catch(ue){Ae(a,a.return,ue)}}p&4&&a.stateNode!=null&&(T=a.memoizedProps,r0(a,T,l!==null?l.memoizedProps:T)),p&1024&&(s0=!0);break;case 6:if(an(o,a),sn(a),p&4){if(a.stateNode===null)throw Error(r(162));p=a.memoizedProps,l=a.stateNode;try{l.nodeValue=p}catch(ue){Ae(a,a.return,ue)}}break;case 3:if(Au=null,T=Kn,Kn=Gu(o.containerInfo),an(o,a),Kn=T,sn(a),p&4&&l!==null&&l.memoizedState.isDehydrated)try{cs(o.containerInfo)}catch(ue){Ae(a,a.return,ue)}s0&&(s0=!1,qv(a));break;case 4:p=Kn,Kn=Gu(a.stateNode.containerInfo),an(o,a),sn(a),Kn=p;break;case 12:an(o,a),sn(a);break;case 31:an(o,a),sn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Mu(a,p)));break;case 13:an(o,a),sn(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ou=ln()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Mu(a,p)));break;case 22:T=a.memoizedState!==null;var F=l!==null&&l.memoizedState!==null,Y=Mr,ne=xt;if(Mr=Y||T,xt=ne||F,an(o,a),xt=ne,Mr=Y,sn(a),p&8192)e:for(o=a.stateNode,o._visibility=T?o._visibility&-2:o._visibility|1,T&&(l===null||F||Mr||xt||Qa(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){F=l=o;try{if(C=F.stateNode,T)b=C.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{N=F.stateNode;var ie=F.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;N.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(ue){Ae(F,F.return,ue)}}}else if(o.tag===6){if(l===null){F=o;try{F.stateNode.nodeValue=T?"":F.memoizedProps}catch(ue){Ae(F,F.return,ue)}}}else if(o.tag===18){if(l===null){F=o;try{var P=F.stateNode;T?Fx(P,!0):Fx(F.stateNode,!1)}catch(ue){Ae(F,F.return,ue)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(l=p.retryQueue,l!==null&&(p.retryQueue=null,Mu(a,l))));break;case 19:an(o,a),sn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Mu(a,p)));break;case 30:break;case 21:break;default:an(o,a),sn(a)}}function sn(a){var o=a.flags;if(o&2){try{for(var l,p=a.return;p!==null;){if(zv(p)){l=p;break}p=p.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var T=l.stateNode,C=a0(a);Eu(a,C,T);break;case 5:var b=l.stateNode;l.flags&32&&(Vi(b,""),l.flags&=-33);var N=a0(a);Eu(a,N,b);break;case 3:case 4:var F=l.stateNode.containerInfo,Y=a0(a);i0(a,Y,F);break;default:throw Error(r(161))}}catch(ne){Ae(a,a.return,ne)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function qv(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;qv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Or(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Hv(a,o.alternate,o),o=o.sibling}function Qa(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ir(4,o,o.return),Qa(o);break;case 1:tr(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Fv(o,o.return,l),Qa(o);break;case 27:So(o.stateNode);case 26:case 5:tr(o,o.return),Qa(o);break;case 22:o.memoizedState===null&&Qa(o);break;case 30:Qa(o);break;default:Qa(o)}a=a.sibling}}function Dr(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,T=a,C=o,b=C.flags;switch(C.tag){case 0:case 11:case 15:Dr(T,C,l),lo(4,C);break;case 1:if(Dr(T,C,l),p=C,T=p.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Y){Ae(p,p.return,Y)}if(p=C,T=p.updateQueue,T!==null){var N=p.stateNode;try{var F=T.shared.hiddenCallbacks;if(F!==null)for(T.shared.hiddenCallbacks=null,T=0;T<F.length;T++)wy(F[T],N)}catch(Y){Ae(p,p.return,Y)}}l&&b&64&&kv(C),fo(C,C.return);break;case 27:Av(C);case 26:case 5:Dr(T,C,l),l&&p===null&&b&4&&Gv(C),fo(C,C.return);break;case 12:Dr(T,C,l);break;case 31:Dr(T,C,l),l&&b&4&&Kv(T,C);break;case 13:Dr(T,C,l),l&&b&4&&Xv(T,C);break;case 22:C.memoizedState===null&&Dr(T,C,l),fo(C,C.return);break;case 30:break;default:Dr(T,C,l)}o=o.sibling}}function o0(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Js(l))}function c0(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Js(a))}function Xn(a,o,l,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Zv(a,o,l,p),o=o.sibling}function Zv(a,o,l,p){var T=o.flags;switch(o.tag){case 0:case 11:case 15:Xn(a,o,l,p),T&2048&&lo(9,o);break;case 1:Xn(a,o,l,p);break;case 3:Xn(a,o,l,p),T&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Js(a)));break;case 12:if(T&2048){Xn(a,o,l,p),a=o.stateNode;try{var C=o.memoizedProps,b=C.id,N=C.onPostCommit;typeof N=="function"&&N(b,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){Ae(o,o.return,F)}}else Xn(a,o,l,p);break;case 31:Xn(a,o,l,p);break;case 13:Xn(a,o,l,p);break;case 23:break;case 22:C=o.stateNode,b=o.alternate,o.memoizedState!==null?C._visibility&2?Xn(a,o,l,p):go(a,o):C._visibility&2?Xn(a,o,l,p):(C._visibility|=2,Ji(a,o,l,p,(o.subtreeFlags&10256)!==0||!1)),T&2048&&o0(b,o);break;case 24:Xn(a,o,l,p),T&2048&&c0(o.alternate,o);break;default:Xn(a,o,l,p)}}function Ji(a,o,l,p,T){for(T=T&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var C=a,b=o,N=l,F=p,Y=b.flags;switch(b.tag){case 0:case 11:case 15:Ji(C,b,N,F,T),lo(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?Ji(C,b,N,F,T):go(C,b):(ne._visibility|=2,Ji(C,b,N,F,T)),T&&Y&2048&&o0(b.alternate,b);break;case 24:Ji(C,b,N,F,T),T&&Y&2048&&c0(b.alternate,b);break;default:Ji(C,b,N,F,T)}o=o.sibling}}function go(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,p=o,T=p.flags;switch(p.tag){case 22:go(l,p),T&2048&&o0(p.alternate,p);break;case 24:go(l,p),T&2048&&c0(p.alternate,p);break;default:go(l,p)}o=o.sibling}}var ho=8192;function Pi(a,o,l){if(a.subtreeFlags&ho)for(a=a.child;a!==null;)Qv(a,o,l),a=a.sibling}function Qv(a,o,l){switch(a.tag){case 26:Pi(a,o,l),a.flags&ho&&a.memoizedState!==null&&jb(l,Kn,a.memoizedState,a.memoizedProps);break;case 5:Pi(a,o,l);break;case 3:case 4:var p=Kn;Kn=Gu(a.stateNode.containerInfo),Pi(a,o,l),Kn=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=ho,ho=16777216,Pi(a,o,l),ho=p):Pi(a,o,l));break;default:Pi(a,o,l)}}function Jv(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function po(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var p=o[l];Dt=p,Iv(p,a)}Jv(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Pv(a),a=a.sibling}function Pv(a){switch(a.tag){case 0:case 11:case 15:po(a),a.flags&2048&&Ir(9,a,a.return);break;case 3:po(a);break;case 12:po(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,wu(a)):po(a);break;default:po(a)}}function wu(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var p=o[l];Dt=p,Iv(p,a)}Jv(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ir(8,o,o.return),wu(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,wu(o));break;default:wu(o)}a=a.sibling}}function Iv(a,o){for(;Dt!==null;){var l=Dt;switch(l.tag){case 0:case 11:case 15:Ir(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var p=l.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Js(l.memoizedState.cache)}if(p=l.child,p!==null)p.return=l,Dt=p;else e:for(l=a;Dt!==null;){p=Dt;var T=p.sibling,C=p.return;if($v(p),p===l){Dt=null;break e}if(T!==null){T.return=C,Dt=T;break e}Dt=C}}}var nb={getCacheForType:function(a){var o=Bt(dt),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return Bt(dt).controller.signal}},rb=typeof WeakMap=="function"?WeakMap:Map,ke=0,Ke=null,we=null,De=0,ze=0,vn=null,ea=!1,Ii=!1,u0=!1,Rr=0,ot=0,ta=0,Ja=0,l0=0,xn=0,es=0,yo=null,on=null,f0=!1,Ou=0,ex=0,Du=1/0,Ru=null,na=null,St=0,ra=null,ts=null,br=0,g0=0,h0=null,tx=null,vo=0,p0=null;function Tn(){return(ke&2)!==0&&De!==0?De&-De:U.T!==null?m0():v1()}function nx(){if(xn===0)if((De&536870912)===0||be){var a=kc;kc<<=1,(kc&3932160)===0&&(kc=262144),xn=a}else xn=536870912;return a=dn.current,a!==null&&(a.flags|=32),xn}function cn(a,o,l){(a===Ke&&(ze===2||ze===9)||a.cancelPendingCommit!==null)&&(ns(a,0),aa(a,De,xn,!1)),Fs(a,l),((ke&2)===0||a!==Ke)&&(a===Ke&&((ke&2)===0&&(Ja|=l),ot===4&&aa(a,De,xn,!1)),nr(a))}function rx(a,o,l){if((ke&6)!==0)throw Error(r(327));var p=!l&&(o&127)===0&&(o&a.expiredLanes)===0||ks(a,o),T=p?sb(a,o):y0(a,o,!0),C=p;do{if(T===0){Ii&&!p&&aa(a,o,0,!1);break}else{if(l=a.current.alternate,C&&!ab(l)){T=y0(a,o,!1),C=!1;continue}if(T===2){if(C=o,a.errorRecoveryDisabledLanes&C)var b=0;else b=a.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){o=b;e:{var N=a;T=yo;var F=N.current.memoizedState.isDehydrated;if(F&&(ns(N,b).flags|=256),b=y0(N,b,!1),b!==2){if(u0&&!F){N.errorRecoveryDisabledLanes|=C,Ja|=C,T=4;break e}C=on,on=T,C!==null&&(on===null?on=C:on.push.apply(on,C))}T=b}if(C=!1,T!==2)continue}}if(T===1){ns(a,0),aa(a,o,0,!0);break}e:{switch(p=a,C=T,C){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:aa(p,o,xn,!ea);break e;case 2:on=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(T=Ou+300-ln(),10<T)){if(aa(p,o,xn,!ea),Gc(p,0,!0)!==0)break e;br=o,p.timeoutHandle=_x(ax.bind(null,p,l,on,Ru,f0,o,xn,Ja,es,ea,C,"Throttled",-0,0),T);break e}ax(p,l,on,Ru,f0,o,xn,Ja,es,ea,C,null,-0,0)}}break}while(!0);nr(a)}function ax(a,o,l,p,T,C,b,N,F,Y,ne,ie,Q,P){if(a.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pr},Qv(o,C,ie);var ue=(C&62914560)===C?Ou-ln():(C&4194048)===C?ex-ln():0;if(ue=Hb(ie,ue),ue!==null){br=C,a.cancelPendingCommit=ue(gx.bind(null,a,o,C,l,p,T,b,N,F,ne,ie,null,Q,P)),aa(a,C,b,!Y);return}}gx(a,o,C,l,p,T,b,N,F)}function ab(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var p=0;p<l.length;p++){var T=l[p],C=T.getSnapshot;T=T.value;try{if(!hn(C(),T))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function aa(a,o,l,p){o&=~l0,o&=~Ja,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var T=o;0<T;){var C=31-gn(T),b=1<<C;p[C]=-1,T&=~b}l!==0&&p1(a,l,o)}function bu(){return(ke&6)===0?(xo(0),!1):!0}function d0(){if(we!==null){if(ze===0)var a=we.return;else a=we,xr=Ha=null,Vg(a),Xi=null,Is=0,a=we;for(;a!==null;)Uv(a.alternate,a),a=a.return;we=null}}function ns(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,Mb(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),br=0,d0(),Ke=a,we=l=yr(a.current,null),De=o,ze=0,vn=null,ea=!1,Ii=ks(a,o),u0=!1,es=xn=l0=Ja=ta=ot=0,on=yo=null,f0=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var T=31-gn(p),C=1<<T;o|=a[T],p&=~C}return Rr=o,Qc(),l}function ix(a,o){me=null,U.H=oo,o===Ki||o===au?(o=Sy(),ze=3):o===Tg?(o=Sy(),ze=4):ze=o===Yg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,vn=o,we===null&&(ot=1,xu(a,Dn(o,a.current)))}function sx(){var a=dn.current;return a===null?!0:(De&4194048)===De?Vn===null:(De&62914560)===De||(De&536870912)!==0?a===Vn:!1}function ox(){var a=U.H;return U.H=oo,a===null?oo:a}function cx(){var a=U.A;return U.A=nb,a}function Lu(){ot=4,ea||(De&4194048)!==De&&dn.current!==null||(Ii=!0),(ta&134217727)===0&&(Ja&134217727)===0||Ke===null||aa(Ke,De,xn,!1)}function y0(a,o,l){var p=ke;ke|=2;var T=ox(),C=cx();(Ke!==a||De!==o)&&(Ru=null,ns(a,o)),o=!1;var b=ot;e:do try{if(ze!==0&&we!==null){var N=we,F=vn;switch(ze){case 8:d0(),b=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(o=!0);var Y=ze;if(ze=0,vn=null,rs(a,N,F,Y),l&&Ii){b=0;break e}break;default:Y=ze,ze=0,vn=null,rs(a,N,F,Y)}}ib(),b=ot;break}catch(ne){ix(a,ne)}while(!0);return o&&a.shellSuspendCounter++,xr=Ha=null,ke=p,U.H=T,U.A=C,we===null&&(Ke=null,De=0,Qc()),b}function ib(){for(;we!==null;)ux(we)}function sb(a,o){var l=ke;ke|=2;var p=ox(),T=cx();Ke!==a||De!==o?(Ru=null,Du=ln()+500,ns(a,o)):Ii=ks(a,o);e:do try{if(ze!==0&&we!==null){o=we;var C=vn;t:switch(ze){case 1:ze=0,vn=null,rs(a,o,C,1);break;case 2:case 9:if(Ty(C)){ze=0,vn=null,lx(o);break}o=function(){ze!==2&&ze!==9||Ke!==a||(ze=7),nr(a)},C.then(o,o);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Ty(C)?(ze=0,vn=null,lx(o)):(ze=0,vn=null,rs(a,o,C,7));break;case 5:var b=null;switch(we.tag){case 26:b=we.memoizedState;case 5:case 27:var N=we;if(b?Zx(b):N.stateNode.complete){ze=0,vn=null;var F=N.sibling;if(F!==null)we=F;else{var Y=N.return;Y!==null?(we=Y,Vu(Y)):we=null}break t}}ze=0,vn=null,rs(a,o,C,5);break;case 6:ze=0,vn=null,rs(a,o,C,6);break;case 8:d0(),ot=6;break e;default:throw Error(r(462))}}ob();break}catch(ne){ix(a,ne)}while(!0);return xr=Ha=null,U.H=p,U.A=T,ke=l,we!==null?0:(Ke=null,De=0,Qc(),ot)}function ob(){for(;we!==null&&!LD();)ux(we)}function ux(a){var o=Bv(a.alternate,a,Rr);a.memoizedProps=a.pendingProps,o===null?Vu(a):we=o}function lx(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=Dv(l,o,o.pendingProps,o.type,void 0,De);break;case 11:o=Dv(l,o,o.pendingProps,o.type.render,o.ref,De);break;case 5:Vg(o);default:Uv(l,o),o=we=cy(o,Rr),o=Bv(l,o,Rr)}a.memoizedProps=a.pendingProps,o===null?Vu(a):we=o}function rs(a,o,l,p){xr=Ha=null,Vg(o),Xi=null,Is=0;var T=o.return;try{if(ZR(a,T,o,l,De)){ot=1,xu(a,Dn(l,a.current)),we=null;return}}catch(C){if(T!==null)throw we=T,C;ot=1,xu(a,Dn(l,a.current)),we=null;return}o.flags&32768?(be||p===1?a=!0:Ii||(De&536870912)!==0?a=!1:(ea=a=!0,(p===2||p===9||p===3||p===6)&&(p=dn.current,p!==null&&p.tag===13&&(p.flags|=16384))),fx(o,a)):Vu(o)}function Vu(a){var o=a;do{if((o.flags&32768)!==0){fx(o,ea);return}a=o.return;var l=PR(o.alternate,o,Rr);if(l!==null){we=l;return}if(o=o.sibling,o!==null){we=o;return}we=o=a}while(o!==null);ot===0&&(ot=5)}function fx(a,o){do{var l=IR(a.alternate,a);if(l!==null){l.flags&=32767,we=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){we=a;return}we=a=l}while(a!==null);ot=6,we=null}function gx(a,o,l,p,T,C,b,N,F){a.cancelPendingCommit=null;do Nu();while(St!==0);if((ke&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(C=o.lanes|o.childLanes,C|=ag,AD(a,l,C,b,N,F),a===Ke&&(we=Ke=null,De=0),ts=o,ra=a,br=l,g0=C,h0=T,tx=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,fb(_c,function(){return vx(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=U.T,U.T=null,T=q.p,q.p=2,b=ke,ke|=4;try{eb(a,o,l)}finally{ke=b,q.p=T,U.T=p}}St=1,hx(),px(),dx()}}function hx(){if(St===1){St=0;var a=ra,o=ts,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=U.T,U.T=null;var p=q.p;q.p=2;var T=ke;ke|=4;try{Yv(o,a);var C=R0,b=I1(a.containerInfo),N=C.focusedElem,F=C.selectionRange;if(b!==N&&N&&N.ownerDocument&&P1(N.ownerDocument.documentElement,N)){if(F!==null&&If(N)){var Y=F.start,ne=F.end;if(ne===void 0&&(ne=Y),"selectionStart"in N)N.selectionStart=Y,N.selectionEnd=Math.min(ne,N.value.length);else{var ie=N.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var P=Q.getSelection(),ue=N.textContent.length,de=Math.min(F.start,ue),We=F.end===void 0?de:Math.min(F.end,ue);!P.extend&&de>We&&(b=We,We=de,de=b);var W=J1(N,de),j=J1(N,We);if(W&&j&&(P.rangeCount!==1||P.anchorNode!==W.node||P.anchorOffset!==W.offset||P.focusNode!==j.node||P.focusOffset!==j.offset)){var X=ie.createRange();X.setStart(W.node,W.offset),P.removeAllRanges(),de>We?(P.addRange(X),P.extend(j.node,j.offset)):(X.setEnd(j.node,j.offset),P.addRange(X))}}}}for(ie=[],P=N;P=P.parentNode;)P.nodeType===1&&ie.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ie.length;N++){var ae=ie[N];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Wu=!!D0,R0=D0=null}finally{ke=T,q.p=p,U.T=l}}a.current=o,St=2}}function px(){if(St===2){St=0;var a=ra,o=ts,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=U.T,U.T=null;var p=q.p;q.p=2;var T=ke;ke|=4;try{Hv(a,o.alternate,o)}finally{ke=T,q.p=p,U.T=l}}St=3}}function dx(){if(St===4||St===3){St=0,VD();var a=ra,o=ts,l=br,p=tx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?St=5:(St=0,ts=ra=null,yx(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(na=null),_f(l),o=o.stateNode,fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(Us,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=U.T,T=q.p,q.p=2,U.T=null;try{for(var C=a.onRecoverableError,b=0;b<p.length;b++){var N=p[b];C(N.value,{componentStack:N.stack})}}finally{U.T=o,q.p=T}}(br&3)!==0&&Nu(),nr(a),T=a.pendingLanes,(l&261930)!==0&&(T&42)!==0?a===p0?vo++:(vo=0,p0=a):vo=0,xo(0)}}function yx(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Js(o)))}function Nu(){return hx(),px(),dx(),vx()}function vx(){if(St!==5)return!1;var a=ra,o=g0;g0=0;var l=_f(br),p=U.T,T=q.p;try{q.p=32>l?32:l,U.T=null,l=h0,h0=null;var C=ra,b=br;if(St=0,ts=ra=null,br=0,(ke&6)!==0)throw Error(r(331));var N=ke;if(ke|=4,Pv(C.current),Zv(C,C.current,b,l),ke=N,xo(0,!1),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(Us,C)}catch{}return!0}finally{q.p=T,U.T=p,yx(a,o)}}function xx(a,o,l){o=Dn(l,o),o=Xg(a.stateNode,o,2),a=Qr(a,o,2),a!==null&&(Fs(a,2),nr(a))}function Ae(a,o,l){if(a.tag===3)xx(a,a,l);else for(;o!==null;){if(o.tag===3){xx(o,a,l);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(na===null||!na.has(p))){a=Dn(l,a),l=Tv(2),p=Qr(o,l,2),p!==null&&(mv(l,p,o,a),Fs(p,2),nr(p));break}}o=o.return}}function v0(a,o,l){var p=a.pingCache;if(p===null){p=a.pingCache=new rb;var T=new Set;p.set(o,T)}else T=p.get(o),T===void 0&&(T=new Set,p.set(o,T));T.has(l)||(u0=!0,T.add(l),a=cb.bind(null,a,o,l),o.then(a,a))}function cb(a,o,l){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,Ke===a&&(De&l)===l&&(ot===4||ot===3&&(De&62914560)===De&&300>ln()-Ou?(ke&2)===0&&ns(a,0):l0|=l,es===De&&(es=0)),nr(a)}function Tx(a,o){o===0&&(o=h1()),a=za(a,o),a!==null&&(Fs(a,o),nr(a))}function ub(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Tx(a,l)}function lb(a,o){var l=0;switch(a.tag){case 31:case 13:var p=a.stateNode,T=a.memoizedState;T!==null&&(l=T.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(o),Tx(a,l)}function fb(a,o){return Lf(a,o)}var Bu=null,as=null,x0=!1,_u=!1,T0=!1,ia=0;function nr(a){a!==as&&a.next===null&&(as===null?Bu=as=a:as=as.next=a),_u=!0,x0||(x0=!0,hb())}function xo(a,o){if(!T0&&_u){T0=!0;do for(var l=!1,p=Bu;p!==null;){if(a!==0){var T=p.pendingLanes;if(T===0)var C=0;else{var b=p.suspendedLanes,N=p.pingedLanes;C=(1<<31-gn(42|a)+1)-1,C&=T&~(b&~N),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(l=!0,Ex(p,C))}else C=De,C=Gc(p,p===Ke?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||ks(p,C)||(l=!0,Ex(p,C));p=p.next}while(l);T0=!1}}function gb(){mx()}function mx(){_u=x0=!1;var a=0;ia!==0&&Eb()&&(a=ia);for(var o=ln(),l=null,p=Bu;p!==null;){var T=p.next,C=Sx(p,o);C===0?(p.next=null,l===null?Bu=T:l.next=T,T===null&&(as=l)):(l=p,(a!==0||(C&3)!==0)&&(_u=!0)),p=T}St!==0&&St!==5||xo(a),ia!==0&&(ia=0)}function Sx(a,o){for(var l=a.suspendedLanes,p=a.pingedLanes,T=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var b=31-gn(C),N=1<<b,F=T[b];F===-1?((N&l)===0||(N&p)!==0)&&(T[b]=zD(N,o)):F<=o&&(a.expiredLanes|=N),C&=~N}if(o=Ke,l=De,l=Gc(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,l===0||a===o&&(ze===2||ze===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&Vf(p),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||ks(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(p!==null&&Vf(p),_f(l)){case 2:case 8:l=f1;break;case 32:l=_c;break;case 268435456:l=g1;break;default:l=_c}return p=Cx.bind(null,a),l=Lf(l,p),a.callbackPriority=o,a.callbackNode=l,o}return p!==null&&p!==null&&Vf(p),a.callbackPriority=2,a.callbackNode=null,2}function Cx(a,o){if(St!==0&&St!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(Nu()&&a.callbackNode!==l)return null;var p=De;return p=Gc(a,a===Ke?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(rx(a,p,o),Sx(a,ln()),a.callbackNode!=null&&a.callbackNode===l?Cx.bind(null,a):null)}function Ex(a,o){if(Nu())return null;rx(a,o,!0)}function hb(){wb(function(){(ke&6)!==0?Lf(l1,gb):mx()})}function m0(){if(ia===0){var a=$i;a===0&&(a=Uc,Uc<<=1,(Uc&261888)===0&&(Uc=256)),ia=a}return ia}function Mx(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Hc(""+a)}function wx(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function pb(a,o,l,p,T){if(o==="submit"&&l&&l.stateNode===T){var C=Mx((T[tn]||null).action),b=p.submitter;b&&(o=(o=b[tn]||null)?Mx(o.formAction):b.getAttribute("formAction"),o!==null&&(C=o,b=null));var N=new Xc("action","action",null,p,T);a.push({event:N,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(ia!==0){var F=b?wx(T,b):new FormData(T);Ag(l,{pending:!0,data:F,method:T.method,action:C},null,F)}}else typeof C=="function"&&(N.preventDefault(),F=b?wx(T,b):new FormData(T),Ag(l,{pending:!0,data:F,method:T.method,action:C},C,F))},currentTarget:T}]})}}for(var S0=0;S0<rg.length;S0++){var C0=rg[S0],db=C0.toLowerCase(),yb=C0[0].toUpperCase()+C0.slice(1);Wn(db,"on"+yb)}Wn(ny,"onAnimationEnd"),Wn(ry,"onAnimationIteration"),Wn(ay,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(NR,"onTransitionRun"),Wn(BR,"onTransitionStart"),Wn(_R,"onTransitionCancel"),Wn(iy,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Ua("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ua("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ua("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ua("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ua("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ua("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(To));function Ox(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var p=a[l],T=p.event;p=p.listeners;e:{var C=void 0;if(o)for(var b=p.length-1;0<=b;b--){var N=p[b],F=N.instance,Y=N.currentTarget;if(N=N.listener,F!==C&&T.isPropagationStopped())break e;C=N,T.currentTarget=Y;try{C(T)}catch(ne){Zc(ne)}T.currentTarget=null,C=F}else for(b=0;b<p.length;b++){if(N=p[b],F=N.instance,Y=N.currentTarget,N=N.listener,F!==C&&T.isPropagationStopped())break e;C=N,T.currentTarget=Y;try{C(T)}catch(ne){Zc(ne)}T.currentTarget=null,C=F}}}}function Oe(a,o){var l=o[Uf];l===void 0&&(l=o[Uf]=new Set);var p=a+"__bubble";l.has(p)||(Dx(o,a,2,!1),l.add(p))}function E0(a,o,l){var p=0;o&&(p|=4),Dx(l,a,p,o)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function M0(a){if(!a[Uu]){a[Uu]=!0,m1.forEach(function(l){l!=="selectionchange"&&(vb.has(l)||E0(l,!1,a),E0(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Uu]||(o[Uu]=!0,E0("selectionchange",!1,o))}}function Dx(a,o,l,p){switch(nT(o)){case 2:var T=Kb;break;case 8:T=Xb;break;default:T=z0}l=T.bind(null,o,l,a),T=void 0,!Wf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(T=!0),p?T!==void 0?a.addEventListener(o,l,{capture:!0,passive:T}):a.addEventListener(o,l,!0):T!==void 0?a.addEventListener(o,l,{passive:T}):a.addEventListener(o,l,!1)}function w0(a,o,l,p,T){var C=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var b=p.tag;if(b===3||b===4){var N=p.stateNode.containerInfo;if(N===T)break;if(b===4)for(b=p.return;b!==null;){var F=b.tag;if((F===3||F===4)&&b.stateNode.containerInfo===T)return;b=b.return}for(;N!==null;){if(b=Oi(N),b===null)return;if(F=b.tag,F===5||F===6||F===26||F===27){p=C=b;continue e}N=N.parentNode}}p=p.return}N1(function(){var Y=C,ne=Hf(l),ie=[];e:{var Q=sy.get(a);if(Q!==void 0){var P=Xc,ue=a;switch(a){case"keypress":if(Wc(l)===0)break e;case"keydown":case"keyup":P=lR;break;case"focusin":ue="focus",P=qf;break;case"focusout":ue="blur",P=qf;break;case"beforeblur":case"afterblur":P=qf;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=U1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=PD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=hR;break;case ny:case ry:case ay:P=tR;break;case iy:P=dR;break;case"scroll":case"scrollend":P=QD;break;case"wheel":P=vR;break;case"copy":case"cut":case"paste":P=rR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=F1;break;case"toggle":case"beforetoggle":P=TR}var de=(o&4)!==0,We=!de&&(a==="scroll"||a==="scrollend"),W=de?Q!==null?Q+"Capture":null:Q;de=[];for(var j=Y,X;j!==null;){var ae=j;if(X=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||X===null||W===null||(ae=As(j,W),ae!=null&&de.push(mo(j,ae,X))),We)break;j=j.return}0<de.length&&(Q=new P(Q,ue,null,l,ne),ie.push({event:Q,listeners:de}))}}if((o&7)===0){e:{if(Q=a==="mouseover"||a==="pointerover",P=a==="mouseout"||a==="pointerout",Q&&l!==jf&&(ue=l.relatedTarget||l.fromElement)&&(Oi(ue)||ue[wi]))break e;if((P||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,P?(ue=l.relatedTarget||l.toElement,P=Y,ue=ue?Oi(ue):null,ue!==null&&(We=s(ue),de=ue.tag,ue!==We||de!==5&&de!==27&&de!==6)&&(ue=null)):(P=null,ue=Y),P!==ue)){if(de=U1,ae="onMouseLeave",W="onMouseEnter",j="mouse",(a==="pointerout"||a==="pointerover")&&(de=F1,ae="onPointerLeave",W="onPointerEnter",j="pointer"),We=P==null?Q:zs(P),X=ue==null?Q:zs(ue),Q=new de(ae,j+"leave",P,l,ne),Q.target=We,Q.relatedTarget=X,ae=null,Oi(ne)===Y&&(de=new de(W,j+"enter",ue,l,ne),de.target=X,de.relatedTarget=We,ae=de),We=ae,P&&ue)t:{for(de=xb,W=P,j=ue,X=0,ae=W;ae;ae=de(ae))X++;ae=0;for(var pe=j;pe;pe=de(pe))ae++;for(;0<X-ae;)W=de(W),X--;for(;0<ae-X;)j=de(j),ae--;for(;X--;){if(W===j||j!==null&&W===j.alternate){de=W;break t}W=de(W),j=de(j)}de=null}else de=null;P!==null&&Rx(ie,Q,P,de,!1),ue!==null&&We!==null&&Rx(ie,We,ue,de,!0)}}e:{if(Q=Y?zs(Y):window,P=Q.nodeName&&Q.nodeName.toLowerCase(),P==="select"||P==="input"&&Q.type==="file")var Be=K1;else if($1(Q))if(X1)Be=bR;else{Be=DR;var ge=OR}else P=Q.nodeName,!P||P.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?Y&&Af(Y.elementType)&&(Be=K1):Be=RR;if(Be&&(Be=Be(a,Y))){W1(ie,Be,l,ne);break e}ge&&ge(a,Q,Y),a==="focusout"&&Y&&Q.type==="number"&&Y.memoizedProps.value!=null&&zf(Q,"number",Q.value)}switch(ge=Y?zs(Y):window,a){case"focusin":($1(ge)||ge.contentEditable==="true")&&(Ui=ge,eg=Y,qs=null);break;case"focusout":qs=eg=Ui=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,ey(ie,l,ne);break;case"selectionchange":if(VR)break;case"keydown":case"keyup":ey(ie,l,ne)}var Se;if(Qf)e:{switch(a){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else _i?j1(a,l)&&(Re="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Re="onCompositionStart");Re&&(G1&&l.locale!=="ko"&&(_i||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&_i&&(Se=B1()):($r=ne,Kf="value"in $r?$r.value:$r.textContent,_i=!0)),ge=ku(Y,Re),0<ge.length&&(Re=new k1(Re,a,null,l,ne),ie.push({event:Re,listeners:ge}),Se?Re.data=Se:(Se=H1(l),Se!==null&&(Re.data=Se)))),(Se=SR?CR(a,l):ER(a,l))&&(Re=ku(Y,"onBeforeInput"),0<Re.length&&(ge=new k1("onBeforeInput","beforeinput",null,l,ne),ie.push({event:ge,listeners:Re}),ge.data=Se)),pb(ie,a,Y,l,ne)}Ox(ie,o)})}function mo(a,o,l){return{instance:a,listener:o,currentTarget:l}}function ku(a,o){for(var l=o+"Capture",p=[];a!==null;){var T=a,C=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||C===null||(T=As(a,l),T!=null&&p.unshift(mo(a,T,C)),T=As(a,o),T!=null&&p.push(mo(a,T,C))),a.tag===3)return p;a=a.return}return[]}function xb(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Rx(a,o,l,p,T){for(var C=o._reactName,b=[];l!==null&&l!==p;){var N=l,F=N.alternate,Y=N.stateNode;if(N=N.tag,F!==null&&F===p)break;N!==5&&N!==26&&N!==27||Y===null||(F=Y,T?(Y=As(l,C),Y!=null&&b.unshift(mo(l,Y,F))):T||(Y=As(l,C),Y!=null&&b.push(mo(l,Y,F)))),l=l.return}b.length!==0&&a.push({event:o,listeners:b})}var Tb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function bx(a){return(typeof a=="string"?a:""+a).replace(Tb,`
`).replace(mb,"")}function Lx(a,o){return o=bx(o),bx(a)===o}function $e(a,o,l,p,T,C){switch(l){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||Vi(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&Vi(a,""+p);break;case"className":Ac(a,"class",p);break;case"tabIndex":Ac(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Ac(a,l,p);break;case"style":L1(a,p,C);break;case"data":if(o!=="object"){Ac(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(l);break}p=Hc(""+p),a.setAttribute(l,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(l==="formAction"?(o!=="input"&&$e(a,o,"name",T.name,T,null),$e(a,o,"formEncType",T.formEncType,T,null),$e(a,o,"formMethod",T.formMethod,T,null),$e(a,o,"formTarget",T.formTarget,T,null)):($e(a,o,"encType",T.encType,T,null),$e(a,o,"method",T.method,T,null),$e(a,o,"target",T.target,T,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(l);break}p=Hc(""+p),a.setAttribute(l,p);break;case"onClick":p!=null&&(a.onclick=pr);break;case"onScroll":p!=null&&Oe("scroll",a);break;case"onScrollEnd":p!=null&&Oe("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(l=p.__html,l!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=l}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}l=Hc(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(l,""+p):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":p===!0?a.setAttribute(l,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(l,p):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(l,p):a.removeAttribute(l);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(l):a.setAttribute(l,p);break;case"popover":Oe("beforetoggle",a),Oe("toggle",a),zc(a,"popover",p);break;case"xlinkActuate":hr(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":hr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":hr(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":hr(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":hr(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":hr(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":hr(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":hr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":hr(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":zc(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qD.get(l)||l,zc(a,l,p))}}function O0(a,o,l,p,T,C){switch(l){case"style":L1(a,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(l=p.__html,l!=null){if(T.children!=null)throw Error(r(60));a.innerHTML=l}}break;case"children":typeof p=="string"?Vi(a,p):(typeof p=="number"||typeof p=="bigint")&&Vi(a,""+p);break;case"onScroll":p!=null&&Oe("scroll",a);break;case"onScrollEnd":p!=null&&Oe("scrollend",a);break;case"onClick":p!=null&&(a.onclick=pr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!S1.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(T=l.endsWith("Capture"),o=l.slice(2,T?l.length-7:void 0),C=a[tn]||null,C=C!=null?C[l]:null,typeof C=="function"&&a.removeEventListener(o,C,T),typeof p=="function")){typeof C!="function"&&C!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,p,T);break e}l in a?a[l]=p:p===!0?a.setAttribute(l,""):zc(a,l,p)}}}function Ut(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",a),Oe("load",a);var p=!1,T=!1,C;for(C in l)if(l.hasOwnProperty(C)){var b=l[C];if(b!=null)switch(C){case"src":p=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:$e(a,o,C,b,l,null)}}T&&$e(a,o,"srcSet",l.srcSet,l,null),p&&$e(a,o,"src",l.src,l,null);return;case"input":Oe("invalid",a);var N=C=b=T=null,F=null,Y=null;for(p in l)if(l.hasOwnProperty(p)){var ne=l[p];if(ne!=null)switch(p){case"name":T=ne;break;case"type":b=ne;break;case"checked":F=ne;break;case"defaultChecked":Y=ne;break;case"value":C=ne;break;case"defaultValue":N=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:$e(a,o,p,ne,l,null)}}O1(a,C,N,F,Y,b,T,!1);return;case"select":Oe("invalid",a),p=b=C=null;for(T in l)if(l.hasOwnProperty(T)&&(N=l[T],N!=null))switch(T){case"value":C=N;break;case"defaultValue":b=N;break;case"multiple":p=N;default:$e(a,o,T,N,l,null)}o=C,l=b,a.multiple=!!p,o!=null?Li(a,!!p,o,!1):l!=null&&Li(a,!!p,l,!0);return;case"textarea":Oe("invalid",a),C=T=p=null;for(b in l)if(l.hasOwnProperty(b)&&(N=l[b],N!=null))switch(b){case"value":p=N;break;case"defaultValue":T=N;break;case"children":C=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:$e(a,o,b,N,l,null)}R1(a,p,T,C);return;case"option":for(F in l)l.hasOwnProperty(F)&&(p=l[F],p!=null)&&(F==="selected"?a.selected=p&&typeof p!="function"&&typeof p!="symbol":$e(a,o,F,p,l,null));return;case"dialog":Oe("beforetoggle",a),Oe("toggle",a),Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":Oe("load",a);break;case"video":case"audio":for(p=0;p<To.length;p++)Oe(To[p],a);break;case"image":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"embed":case"source":case"link":Oe("error",a),Oe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(p=l[Y],p!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:$e(a,o,Y,p,l,null)}return;default:if(Af(o)){for(ne in l)l.hasOwnProperty(ne)&&(p=l[ne],p!==void 0&&O0(a,o,ne,p,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(p=l[N],p!=null&&$e(a,o,N,p,l,null))}function Sb(a,o,l,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,C=null,b=null,N=null,F=null,Y=null,ne=null;for(P in l){var ie=l[P];if(l.hasOwnProperty(P)&&ie!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":F=ie;default:p.hasOwnProperty(P)||$e(a,o,P,null,p,ie)}}for(var Q in p){var P=p[Q];if(ie=l[Q],p.hasOwnProperty(Q)&&(P!=null||ie!=null))switch(Q){case"type":C=P;break;case"name":T=P;break;case"checked":Y=P;break;case"defaultChecked":ne=P;break;case"value":b=P;break;case"defaultValue":N=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(137,o));break;default:P!==ie&&$e(a,o,Q,P,p,ie)}}Gf(a,b,N,F,Y,ne,C,T);return;case"select":P=b=N=Q=null;for(C in l)if(F=l[C],l.hasOwnProperty(C)&&F!=null)switch(C){case"value":break;case"multiple":P=F;default:p.hasOwnProperty(C)||$e(a,o,C,null,p,F)}for(T in p)if(C=p[T],F=l[T],p.hasOwnProperty(T)&&(C!=null||F!=null))switch(T){case"value":Q=C;break;case"defaultValue":N=C;break;case"multiple":b=C;default:C!==F&&$e(a,o,T,C,p,F)}o=N,l=b,p=P,Q!=null?Li(a,!!l,Q,!1):!!p!=!!l&&(o!=null?Li(a,!!l,o,!0):Li(a,!!l,l?[]:"",!1));return;case"textarea":P=Q=null;for(N in l)if(T=l[N],l.hasOwnProperty(N)&&T!=null&&!p.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:$e(a,o,N,null,p,T)}for(b in p)if(T=p[b],C=l[b],p.hasOwnProperty(b)&&(T!=null||C!=null))switch(b){case"value":Q=T;break;case"defaultValue":P=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==C&&$e(a,o,b,T,p,C)}D1(a,Q,P);return;case"option":for(var ue in l)Q=l[ue],l.hasOwnProperty(ue)&&Q!=null&&!p.hasOwnProperty(ue)&&(ue==="selected"?a.selected=!1:$e(a,o,ue,null,p,Q));for(F in p)Q=p[F],P=l[F],p.hasOwnProperty(F)&&Q!==P&&(Q!=null||P!=null)&&(F==="selected"?a.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":$e(a,o,F,Q,p,P));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var de in l)Q=l[de],l.hasOwnProperty(de)&&Q!=null&&!p.hasOwnProperty(de)&&$e(a,o,de,null,p,Q);for(Y in p)if(Q=p[Y],P=l[Y],p.hasOwnProperty(Y)&&Q!==P&&(Q!=null||P!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,o));break;default:$e(a,o,Y,Q,p,P)}return;default:if(Af(o)){for(var We in l)Q=l[We],l.hasOwnProperty(We)&&Q!==void 0&&!p.hasOwnProperty(We)&&O0(a,o,We,void 0,p,Q);for(ne in p)Q=p[ne],P=l[ne],!p.hasOwnProperty(ne)||Q===P||Q===void 0&&P===void 0||O0(a,o,ne,Q,p,P);return}}for(var W in l)Q=l[W],l.hasOwnProperty(W)&&Q!=null&&!p.hasOwnProperty(W)&&$e(a,o,W,null,p,Q);for(ie in p)Q=p[ie],P=l[ie],!p.hasOwnProperty(ie)||Q===P||Q==null&&P==null||$e(a,o,ie,Q,p,P)}function Vx(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Cb(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),p=0;p<l.length;p++){var T=l[p],C=T.transferSize,b=T.initiatorType,N=T.duration;if(C&&N&&Vx(b)){for(b=0,N=T.responseEnd,p+=1;p<l.length;p++){var F=l[p],Y=F.startTime;if(Y>N)break;var ne=F.transferSize,ie=F.initiatorType;ne&&Vx(ie)&&(F=F.responseEnd,b+=ne*(F<N?1:(N-Y)/(F-Y)))}if(--p,o+=8*(C+b)/(T.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var D0=null,R0=null;function Fu(a){return a.nodeType===9?a:a.ownerDocument}function Nx(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bx(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function b0(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var L0=null;function Eb(){var a=window.event;return a&&a.type==="popstate"?a===L0?!1:(L0=a,!0):(L0=null,!1)}var _x=typeof setTimeout=="function"?setTimeout:void 0,Mb=typeof clearTimeout=="function"?clearTimeout:void 0,Ux=typeof Promise=="function"?Promise:void 0,wb=typeof queueMicrotask=="function"?queueMicrotask:typeof Ux<"u"?function(a){return Ux.resolve(null).then(a).catch(Ob)}:_x;function Ob(a){setTimeout(function(){throw a})}function sa(a){return a==="head"}function kx(a,o){var l=o,p=0;do{var T=l.nextSibling;if(a.removeChild(l),T&&T.nodeType===8)if(l=T.data,l==="/$"||l==="/&"){if(p===0){a.removeChild(T),cs(o);return}p--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")p++;else if(l==="html")So(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,So(l);for(var C=l.firstChild;C;){var b=C.nextSibling,N=C.nodeName;C[Gs]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&C.rel.toLowerCase()==="stylesheet"||l.removeChild(C),C=b}}else l==="body"&&So(a.ownerDocument.body);l=T}while(l);cs(o)}function Fx(a,o){var l=a;a=0;do{var p=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),p&&p.nodeType===8)if(l=p.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=p}while(l)}function V0(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":V0(l),kf(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function Db(a,o,l,p){for(;a.nodeType===1;){var T=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Gs])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var C=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Nn(a.nextSibling),a===null)break}return null}function Rb(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Nn(a.nextSibling),a===null))return null;return a}function Gx(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Nn(a.nextSibling),a===null))return null;return a}function N0(a){return a.data==="$?"||a.data==="$~"}function B0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function bb(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var p=function(){o(),l.removeEventListener("DOMContentLoaded",p)};l.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function Nn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var _0=null;function zx(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return Nn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function Ax(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function jx(a,o,l){switch(o=Fu(l),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function So(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);kf(a)}var Bn=new Map,Hx=new Set;function Gu(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Lr=q.d;q.d={f:Lb,r:Vb,D:Nb,C:Bb,L:_b,m:Ub,X:Fb,S:kb,M:Gb};function Lb(){var a=Lr.f(),o=bu();return a||o}function Vb(a){var o=Di(a);o!==null&&o.tag===5&&o.type==="form"?iv(o):Lr.r(a)}var is=typeof document>"u"?null:document;function $x(a,o,l){var p=is;if(p&&typeof o=="string"&&o){var T=wn(o);T='link[rel="'+a+'"][href="'+T+'"]',typeof l=="string"&&(T+='[crossorigin="'+l+'"]'),Hx.has(T)||(Hx.add(T),a={rel:a,crossOrigin:l,href:o},p.querySelector(T)===null&&(o=p.createElement("link"),Ut(o,"link",a),Ot(o),p.head.appendChild(o)))}}function Nb(a){Lr.D(a),$x("dns-prefetch",a,null)}function Bb(a,o){Lr.C(a,o),$x("preconnect",a,o)}function _b(a,o,l){Lr.L(a,o,l);var p=is;if(p&&a&&o){var T='link[rel="preload"][as="'+wn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(T+='[imagesrcset="'+wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(T+='[imagesizes="'+wn(l.imageSizes)+'"]')):T+='[href="'+wn(a)+'"]';var C=T;switch(o){case"style":C=ss(a);break;case"script":C=os(a)}Bn.has(C)||(a=h({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),Bn.set(C,a),p.querySelector(T)!==null||o==="style"&&p.querySelector(Co(C))||o==="script"&&p.querySelector(Eo(C))||(o=p.createElement("link"),Ut(o,"link",a),Ot(o),p.head.appendChild(o)))}}function Ub(a,o){Lr.m(a,o);var l=is;if(l&&a){var p=o&&typeof o.as=="string"?o.as:"script",T='link[rel="modulepreload"][as="'+wn(p)+'"][href="'+wn(a)+'"]',C=T;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=os(a)}if(!Bn.has(C)&&(a=h({rel:"modulepreload",href:a},o),Bn.set(C,a),l.querySelector(T)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Eo(C)))return}p=l.createElement("link"),Ut(p,"link",a),Ot(p),l.head.appendChild(p)}}}function kb(a,o,l){Lr.S(a,o,l);var p=is;if(p&&a){var T=Ri(p).hoistableStyles,C=ss(a);o=o||"default";var b=T.get(C);if(!b){var N={loading:0,preload:null};if(b=p.querySelector(Co(C)))N.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},l),(l=Bn.get(C))&&U0(a,l);var F=b=p.createElement("link");Ot(F),Ut(F,"link",a),F._p=new Promise(function(Y,ne){F.onload=Y,F.onerror=ne}),F.addEventListener("load",function(){N.loading|=1}),F.addEventListener("error",function(){N.loading|=2}),N.loading|=4,zu(b,o,p)}b={type:"stylesheet",instance:b,count:1,state:N},T.set(C,b)}}}function Fb(a,o){Lr.X(a,o);var l=is;if(l&&a){var p=Ri(l).hoistableScripts,T=os(a),C=p.get(T);C||(C=l.querySelector(Eo(T)),C||(a=h({src:a,async:!0},o),(o=Bn.get(T))&&k0(a,o),C=l.createElement("script"),Ot(C),Ut(C,"link",a),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(T,C))}}function Gb(a,o){Lr.M(a,o);var l=is;if(l&&a){var p=Ri(l).hoistableScripts,T=os(a),C=p.get(T);C||(C=l.querySelector(Eo(T)),C||(a=h({src:a,async:!0,type:"module"},o),(o=Bn.get(T))&&k0(a,o),C=l.createElement("script"),Ot(C),Ut(C,"link",a),l.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(T,C))}}function Wx(a,o,l,p){var T=(T=fe.current)?Gu(T):null;if(!T)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=ss(l.href),l=Ri(T).hoistableStyles,p=l.get(o),p||(p={type:"style",instance:null,count:0,state:null},l.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=ss(l.href);var C=Ri(T).hoistableStyles,b=C.get(a);if(b||(T=T.ownerDocument||T,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,b),(C=T.querySelector(Co(a)))&&!C._p&&(b.instance=C,b.state.loading=5),Bn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Bn.set(a,l),C||zb(T,a,l,b.state))),o&&p===null)throw Error(r(528,""));return b}if(o&&p!==null)throw Error(r(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=os(l),l=Ri(T).hoistableScripts,p=l.get(o),p||(p={type:"script",instance:null,count:0,state:null},l.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ss(a){return'href="'+wn(a)+'"'}function Co(a){return'link[rel="stylesheet"]['+a+"]"}function Kx(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function zb(a,o,l,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Ut(o,"link",l),Ot(o),a.head.appendChild(o))}function os(a){return'[src="'+wn(a)+'"]'}function Eo(a){return"script[async]"+a}function Xx(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+wn(l.href)+'"]');if(p)return o.instance=p,Ot(p),p;var T=h({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),Ot(p),Ut(p,"style",T),zu(p,l.precedence,a),o.instance=p;case"stylesheet":T=ss(l.href);var C=a.querySelector(Co(T));if(C)return o.state.loading|=4,o.instance=C,Ot(C),C;p=Kx(l),(T=Bn.get(T))&&U0(p,T),C=(a.ownerDocument||a).createElement("link"),Ot(C);var b=C;return b._p=new Promise(function(N,F){b.onload=N,b.onerror=F}),Ut(C,"link",p),o.state.loading|=4,zu(C,l.precedence,a),o.instance=C;case"script":return C=os(l.src),(T=a.querySelector(Eo(C)))?(o.instance=T,Ot(T),T):(p=l,(T=Bn.get(C))&&(p=h({},l),k0(p,T)),a=a.ownerDocument||a,T=a.createElement("script"),Ot(T),Ut(T,"link",p),a.head.appendChild(T),o.instance=T);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,zu(p,l.precedence,a));return o.instance}function zu(a,o,l){for(var p=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=p.length?p[p.length-1]:null,C=T,b=0;b<p.length;b++){var N=p[b];if(N.dataset.precedence===o)C=N;else if(C!==T)break}C?C.parentNode.insertBefore(a,C.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function U0(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function k0(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Au=null;function Yx(a,o,l){if(Au===null){var p=new Map,T=Au=new Map;T.set(l,p)}else T=Au,p=T.get(l),p||(p=new Map,T.set(l,p));if(p.has(a))return p;for(p.set(a,null),l=l.getElementsByTagName(a),T=0;T<l.length;T++){var C=l[T];if(!(C[Gs]||C[Vt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var b=C.getAttribute(o)||"";b=a+b;var N=p.get(b);N?N.push(C):p.set(b,[C])}}return p}function qx(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function Ab(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(a=o.disabled,typeof o.precedence=="string"&&a==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Zx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function jb(a,o,l,p){if(l.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var T=ss(p.href),C=o.querySelector(Co(T));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=ju.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=C,Ot(C);return}C=o.ownerDocument||o,p=Kx(p),(T=Bn.get(T))&&U0(p,T),C=C.createElement("link"),Ot(C);var b=C;b._p=new Promise(function(N,F){b.onload=N,b.onerror=F}),Ut(C,"link",p),l.instance=C}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=ju.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var F0=0;function Hb(a,o){return a.stylesheets&&a.count===0&&$u(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var p=setTimeout(function(){if(a.stylesheets&&$u(a,a.stylesheets),a.unsuspend){var C=a.unsuspend;a.unsuspend=null,C()}},6e4+o);0<a.imgBytes&&F0===0&&(F0=62500*Cb());var T=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&$u(a,a.stylesheets),a.unsuspend)){var C=a.unsuspend;a.unsuspend=null,C()}},(a.imgBytes>F0?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(T)}}:null}function ju(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$u(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Hu=null;function $u(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Hu=new Map,o.forEach($b,a),Hu=null,ju.call(a))}function $b(a,o){if(!(o.state.loading&4)){var l=Hu.get(a);if(l)var p=l.get(null);else{l=new Map,Hu.set(a,l);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<T.length;C++){var b=T[C];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(l.set(b.dataset.precedence,b),p=b)}p&&l.set(null,p)}T=o.instance,b=T.getAttribute("data-precedence"),C=l.get(b)||p,C===p&&l.set(null,T),l.set(b,T),this.count++,p=ju.bind(this),T.addEventListener("load",p),T.addEventListener("error",p),C?C.parentNode.insertBefore(T,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),o.state.loading|=4}}var Mo={$$typeof:M,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function Wb(a,o,l,p,T,C,b,N,F){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.hiddenUpdates=Nf(null),this.identifierPrefix=p,this.onUncaughtError=T,this.onCaughtError=C,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Qx(a,o,l,p,T,C,b,N,F,Y,ne,ie){return a=new Wb(a,o,l,b,F,Y,ne,ie,N),o=1,C===!0&&(o|=24),C=pn(3,null,null,o),a.current=C,C.stateNode=a,o=yg(),o.refCount++,a.pooledCache=o,o.refCount++,C.memoizedState={element:p,isDehydrated:l,cache:o},mg(C),a}function Jx(a){return a?(a=Gi,a):Gi}function Px(a,o,l,p,T,C){T=Jx(T),p.context===null?p.context=T:p.pendingContext=T,p=Zr(o),p.payload={element:l},C=C===void 0?null:C,C!==null&&(p.callback=C),l=Qr(a,p,o),l!==null&&(cn(l,a,o),to(l,a,o))}function Ix(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function G0(a,o){Ix(a,o),(a=a.alternate)&&Ix(a,o)}function eT(a){if(a.tag===13||a.tag===31){var o=za(a,67108864);o!==null&&cn(o,a,67108864),G0(a,67108864)}}function tT(a){if(a.tag===13||a.tag===31){var o=Tn();o=Bf(o);var l=za(a,o);l!==null&&cn(l,a,o),G0(a,o)}}var Wu=!0;function Kb(a,o,l,p){var T=U.T;U.T=null;var C=q.p;try{q.p=2,z0(a,o,l,p)}finally{q.p=C,U.T=T}}function Xb(a,o,l,p){var T=U.T;U.T=null;var C=q.p;try{q.p=8,z0(a,o,l,p)}finally{q.p=C,U.T=T}}function z0(a,o,l,p){if(Wu){var T=A0(p);if(T===null)w0(a,o,p,Ku,l),rT(a,p);else if(qb(T,a,o,l,p))p.stopPropagation();else if(rT(a,p),o&4&&-1<Yb.indexOf(a)){for(;T!==null;){var C=Di(T);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var b=_a(C.pendingLanes);if(b!==0){var N=C;for(N.pendingLanes|=2,N.entangledLanes|=2;b;){var F=1<<31-gn(b);N.entanglements[1]|=F,b&=~F}nr(C),(ke&6)===0&&(Du=ln()+500,xo(0))}}break;case 31:case 13:N=za(C,2),N!==null&&cn(N,C,2),bu(),G0(C,2)}if(C=A0(p),C===null&&w0(a,o,p,Ku,l),C===T)break;T=C}T!==null&&p.stopPropagation()}else w0(a,o,p,null,l)}}function A0(a){return a=Hf(a),j0(a)}var Ku=null;function j0(a){if(Ku=null,a=Oi(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Ku=a,null}function nT(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ND()){case l1:return 2;case f1:return 8;case _c:case BD:return 32;case g1:return 268435456;default:return 32}default:return 32}}var H0=!1,oa=null,ca=null,ua=null,wo=new Map,Oo=new Map,la=[],Yb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function rT(a,o){switch(a){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":wo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(o.pointerId)}}function Do(a,o,l,p,T,C){return a===null||a.nativeEvent!==C?(a={blockedOn:o,domEventName:l,eventSystemFlags:p,nativeEvent:C,targetContainers:[T]},o!==null&&(o=Di(o),o!==null&&eT(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,T!==null&&o.indexOf(T)===-1&&o.push(T),a)}function qb(a,o,l,p,T){switch(o){case"focusin":return oa=Do(oa,a,o,l,p,T),!0;case"dragenter":return ca=Do(ca,a,o,l,p,T),!0;case"mouseover":return ua=Do(ua,a,o,l,p,T),!0;case"pointerover":var C=T.pointerId;return wo.set(C,Do(wo.get(C)||null,a,o,l,p,T)),!0;case"gotpointercapture":return C=T.pointerId,Oo.set(C,Do(Oo.get(C)||null,a,o,l,p,T)),!0}return!1}function aT(a){var o=Oi(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,x1(a.priority,function(){tT(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,x1(a.priority,function(){tT(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xu(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=A0(a.nativeEvent);if(l===null){l=a.nativeEvent;var p=new l.constructor(l.type,l);jf=p,l.target.dispatchEvent(p),jf=null}else return o=Di(l),o!==null&&eT(o),a.blockedOn=l,!1;o.shift()}return!0}function iT(a,o,l){Xu(a)&&l.delete(o)}function Zb(){H0=!1,oa!==null&&Xu(oa)&&(oa=null),ca!==null&&Xu(ca)&&(ca=null),ua!==null&&Xu(ua)&&(ua=null),wo.forEach(iT),Oo.forEach(iT)}function Yu(a,o){a.blockedOn===o&&(a.blockedOn=null,H0||(H0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Zb)))}var qu=null;function sT(a){qu!==a&&(qu=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){qu===a&&(qu=null);for(var o=0;o<a.length;o+=3){var l=a[o],p=a[o+1],T=a[o+2];if(typeof p!="function"){if(j0(p||l)===null)continue;break}var C=Di(l);C!==null&&(a.splice(o,3),o-=3,Ag(C,{pending:!0,data:T,method:l.method,action:p},p,T))}}))}function cs(a){function o(F){return Yu(F,a)}oa!==null&&Yu(oa,a),ca!==null&&Yu(ca,a),ua!==null&&Yu(ua,a),wo.forEach(o),Oo.forEach(o);for(var l=0;l<la.length;l++){var p=la[l];p.blockedOn===a&&(p.blockedOn=null)}for(;0<la.length&&(l=la[0],l.blockedOn===null);)aT(l),l.blockedOn===null&&la.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(p=0;p<l.length;p+=3){var T=l[p],C=l[p+1],b=T[tn]||null;if(typeof C=="function")b||sT(l);else if(b){var N=null;if(C&&C.hasAttribute("formAction")){if(T=C,b=C[tn]||null)N=b.formAction;else if(j0(T)!==null)continue}else N=b.action;typeof N=="function"?l[p+1]=N:(l.splice(p,3),p-=3),sT(l)}}}function oT(){function a(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(b){return T=b})},focusReset:"manual",scroll:"manual"})}function o(){T!==null&&(T(),T=null),p||setTimeout(l,20)}function l(){if(!p&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,T=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),T!==null&&(T(),T=null)}}}function $0(a){this._internalRoot=a}Zu.prototype.render=$0.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var l=o.current,p=Tn();Px(l,p,a,o,null,null)},Zu.prototype.unmount=$0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;Px(a.current,2,null,a,null,null),bu(),o[wi]=null}};function Zu(a){this._internalRoot=a}Zu.prototype.unstable_scheduleHydration=function(a){if(a){var o=v1();a={blockedOn:null,target:a,priority:o};for(var l=0;l<la.length&&o!==0&&o<la[l].priority;l++);la.splice(l,0,a),l===0&&aT(a)}};var cT=e.version;if(cT!=="19.2.3")throw Error(r(527,cT,"19.2.3"));q.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=g(o),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var Qb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{Us=Qu.inject(Qb),fn=Qu}catch{}}return Lo.createRoot=function(a,o){if(!i(a))throw Error(r(299));var l=!1,p="",T=dv,C=yv,b=vv;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(T=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError)),o=Qx(a,1,!1,null,null,l,p,null,T,C,b,oT),a[wi]=o.current,M0(a),new $0(o)},Lo.hydrateRoot=function(a,o,l){if(!i(a))throw Error(r(299));var p=!1,T="",C=dv,b=yv,N=vv,F=null;return l!=null&&(l.unstable_strictMode===!0&&(p=!0),l.identifierPrefix!==void 0&&(T=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(F=l.formState)),o=Qx(a,1,!0,o,l??null,p,T,F,C,b,N,oT),o.context=Jx(null),l=o.current,p=Tn(),p=Bf(p),T=Zr(p),T.callback=null,Qr(l,T,p),l=p,o.current.lanes=l,Fs(o,l),nr(o),a[wi]=o.current,M0(a),new Zu(o)},Lo.version="19.2.3",Lo}var xT;function cL(){if(xT)return X0.exports;xT=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),X0.exports=oL(),X0.exports}var uL=cL();const lL=Ds(uL),RS=I.createContext({});function fL(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const bS=typeof window<"u",gL=bS?I.useLayoutEffect:I.useEffect,Kp=I.createContext(null);function Xp(t,e){t.indexOf(e)===-1&&t.push(e)}function Yp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const fr=(t,e,n)=>n>e?e:n<t?t:n;let qp=()=>{};const Fr={},LS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function VS(t){return typeof t=="object"&&t!==null}const NS=t=>/^0[^.\s]+$/u.test(t);function Zp(t){let e;return()=>(e===void 0&&(e=t()),e)}const jn=t=>t,hL=(t,e)=>n=>e(t(n)),Tc=(...t)=>t.reduce(hL),ic=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Qp{constructor(){this.subscriptions=[]}add(e){return Xp(this.subscriptions,e),()=>Yp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const c=this.subscriptions[s];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ur=t=>t*1e3,zn=t=>t/1e3;function BS(t,e){return e?t*(1e3/e):0}const _S=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,pL=1e-7,dL=12;function yL(t,e,n,r,i){let s,c,u=0;do c=e+(n-e)/2,s=_S(c,r,i)-t,s>0?n=c:e=c;while(Math.abs(s)>pL&&++u<dL);return c}function mc(t,e,n,r){if(t===e&&n===r)return jn;const i=s=>yL(s,0,1,t,n);return s=>s===0||s===1?s:_S(i(s),e,r)}const US=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kS=t=>e=>1-t(1-e),FS=mc(.33,1.53,.69,.99),Jp=kS(FS),GS=US(Jp),zS=t=>(t*=2)<1?.5*Jp(t):.5*(2-Math.pow(2,-10*(t-1))),Pp=t=>1-Math.sin(Math.acos(t)),AS=kS(Pp),jS=US(Pp),vL=mc(.42,0,1,1),xL=mc(0,0,.58,1),HS=mc(.42,0,.58,1),TL=t=>Array.isArray(t)&&typeof t[0]!="number",$S=t=>Array.isArray(t)&&typeof t[0]=="number",mL={linear:jn,easeIn:vL,easeInOut:HS,easeOut:xL,circIn:Pp,circInOut:jS,circOut:AS,backIn:Jp,backInOut:GS,backOut:FS,anticipate:zS},SL=t=>typeof t=="string",TT=t=>{if($S(t)){qp(t.length===4);const[e,n,r,i]=t;return mc(e,n,r,i)}else if(SL(t))return mL[t];return t},Ju=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function CL(t,e){let n=new Set,r=new Set,i=!1,s=!1;const c=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function f(d){c.has(d)&&(g.schedule(d),t()),d(u)}const g={schedule:(d,h=!1,y=!1)=>{const S=y&&i?n:r;return h&&c.add(d),S.has(d)||S.add(d),d},cancel:d=>{r.delete(d),c.delete(d)},process:d=>{if(u=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(f),n.clear(),i=!1,s&&(s=!1,g.process(d))}};return g}const EL=40;function WS(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,c=Ju.reduce((M,w)=>(M[w]=CL(s),M),{}),{setup:u,read:f,resolveKeyframes:g,preUpdate:d,update:h,preRender:y,render:v,postRender:S}=c,x=()=>{const M=Fr.useManualTiming?i.timestamp:performance.now();n=!1,Fr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(M-i.timestamp,EL),1)),i.timestamp=M,i.isProcessing=!0,u.process(i),f.process(i),g.process(i),d.process(i),h.process(i),y.process(i),v.process(i),S.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},m=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Ju.reduce((M,w)=>{const D=c[w];return M[w]=(R,B=!1,_=!1)=>(n||m(),D.schedule(R,B,_)),M},{}),cancel:M=>{for(let w=0;w<Ju.length;w++)c[Ju[w]].cancel(M)},state:i,steps:c}}const{schedule:Ie,cancel:wa,state:Ft,steps:Q0}=WS(typeof requestAnimationFrame<"u"?requestAnimationFrame:jn,!0);let El;function ML(){El=void 0}const Jt={now:()=>(El===void 0&&Jt.set(Ft.isProcessing||Fr.useManualTiming?Ft.timestamp:performance.now()),El),set:t=>{El=t,queueMicrotask(ML)}},KS=t=>e=>typeof e=="string"&&e.startsWith(t),XS=KS("--"),wL=KS("var(--"),Ip=t=>wL(t)?OL.test(t.split("/*")[0].trim()):!1,OL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function mT(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Rs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},sc={...Rs,transform:t=>fr(0,1,t)},Pu={...Rs,default:1},qo=t=>Math.round(t*1e5)/1e5,ed=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DL(t){return t==null}const RL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,td=(t,e)=>n=>!!(typeof n=="string"&&RL.test(n)&&n.startsWith(t)||e&&!DL(n)&&Object.prototype.hasOwnProperty.call(n,e)),YS=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,c,u]=r.match(ed);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},bL=t=>fr(0,255,t),J0={...Rs,transform:t=>Math.round(bL(t))},hi={test:td("rgb","red"),parse:YS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+J0.transform(t)+", "+J0.transform(e)+", "+J0.transform(n)+", "+qo(sc.transform(r))+")"};function LL(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Zh={test:td("#"),parse:LL,transform:hi.transform},Sc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),va=Sc("deg"),ur=Sc("%"),le=Sc("px"),VL=Sc("vh"),NL=Sc("vw"),ST={...ur,parse:t=>ur.parse(t)/100,transform:t=>ur.transform(t*100)},hs={test:td("hsl","hue"),parse:YS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ur.transform(qo(e))+", "+ur.transform(qo(n))+", "+qo(sc.transform(r))+")"},mt={test:t=>hi.test(t)||Zh.test(t)||hs.test(t),parse:t=>hi.test(t)?hi.parse(t):hs.test(t)?hs.parse(t):Zh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?hi.transform(t):hs.transform(t),getAnimatableNone:t=>{const e=mt.parse(t);return e.alpha=0,mt.transform(e)}},BL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _L(t){return isNaN(t)&&typeof t=="string"&&(t.match(ed)?.length||0)+(t.match(BL)?.length||0)>0}const qS="number",ZS="color",UL="var",kL="var(",CT="${}",FL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function oc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const u=e.replace(FL,f=>(mt.test(f)?(r.color.push(s),i.push(ZS),n.push(mt.parse(f))):f.startsWith(kL)?(r.var.push(s),i.push(UL),n.push(f)):(r.number.push(s),i.push(qS),n.push(parseFloat(f))),++s,CT)).split(CT);return{values:n,split:u,indexes:r,types:i}}function QS(t){return oc(t).values}function JS(t){const{split:e,types:n}=oc(t),r=e.length;return i=>{let s="";for(let c=0;c<r;c++)if(s+=e[c],i[c]!==void 0){const u=n[c];u===qS?s+=qo(i[c]):u===ZS?s+=mt.transform(i[c]):s+=i[c]}return s}}const GL=t=>typeof t=="number"?0:mt.test(t)?mt.getAnimatableNone(t):t;function zL(t){const e=QS(t);return JS(t)(e.map(GL))}const Oa={test:_L,parse:QS,createTransformer:JS,getAnimatableNone:zL};function P0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,c=0;if(!e)i=s=c=n;else{const u=n<.5?n*(1+e):n+e-n*e,f=2*n-u;i=P0(f,u,t+1/3),s=P0(f,u,t),c=P0(f,u,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(c*255),alpha:r}}function $l(t,e){return n=>n>0?e:t}const it=(t,e,n)=>t+(e-t)*n,I0=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},jL=[Zh,hi,hs],HL=t=>jL.find(e=>e.test(t));function ET(t){const e=HL(t);if(!e)return!1;let n=e.parse(t);return e===hs&&(n=AL(n)),n}const MT=(t,e)=>{const n=ET(t),r=ET(e);if(!n||!r)return $l(t,e);const i={...n};return s=>(i.red=I0(n.red,r.red,s),i.green=I0(n.green,r.green,s),i.blue=I0(n.blue,r.blue,s),i.alpha=it(n.alpha,r.alpha,s),hi.transform(i))},Qh=new Set(["none","hidden"]);function $L(t,e){return Qh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function WL(t,e){return n=>it(t,e,n)}function nd(t){return typeof t=="number"?WL:typeof t=="string"?Ip(t)?$l:mt.test(t)?MT:YL:Array.isArray(t)?PS:typeof t=="object"?mt.test(t)?MT:KL:$l}function PS(t,e){const n=[...t],r=n.length,i=t.map((s,c)=>nd(s)(s,e[c]));return s=>{for(let c=0;c<r;c++)n[c]=i[c](s);return n}}function KL(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=nd(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function XL(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],c=t.indexes[s][r[s]],u=t.values[c]??0;n[i]=u,r[s]++}return n}const YL=(t,e)=>{const n=Oa.createTransformer(e),r=oc(t),i=oc(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Qh.has(t)&&!i.values.length||Qh.has(e)&&!r.values.length?$L(t,e):Tc(PS(XL(r,i),i.values),n):$l(t,e)};function IS(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?it(t,e,n):nd(t)(t,e)}const qL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ie.update(e,n),stop:()=>wa(e),now:()=>Ft.isProcessing?Ft.timestamp:Jt.now()}},eC=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Wl=2e4;function rd(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Wl;)e+=n,r=t.next(e);return e>=Wl?1/0:e}function ZL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(rd(r),Wl);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:zn(i)}}const QL=5;function tC(t,e,n){const r=Math.max(e-QL,0);return BS(n-t(r),e-r)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},eh=.001;function JL({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:r=ut.mass}){let i,s,c=1-e;c=fr(ut.minDamping,ut.maxDamping,c),t=fr(ut.minDuration,ut.maxDuration,zn(t)),c<1?(i=g=>{const d=g*c,h=d*t,y=d-n,v=Jh(g,c),S=Math.exp(-h);return eh-y/v*S},s=g=>{const h=g*c*t,y=h*n+n,v=Math.pow(c,2)*Math.pow(g,2)*t,S=Math.exp(-h),x=Jh(Math.pow(g,2),c);return(-i(g)+eh>0?-1:1)*((y-v)*S)/x}):(i=g=>{const d=Math.exp(-g*t),h=(g-n)*t+1;return-eh+d*h},s=g=>{const d=Math.exp(-g*t),h=(n-g)*(t*t);return d*h});const u=5/t,f=IL(i,s,u);if(t=Ur(t),isNaN(f))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const g=Math.pow(f,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:t}}}const PL=12;function IL(t,e,n){let r=n;for(let i=1;i<PL;i++)r=r-t(r)/e(r);return r}function Jh(t,e){return t*Math.sqrt(1-e*e)}const e3=["duration","bounce"],t3=["stiffness","damping","mass"];function wT(t,e){return e.some(n=>t[n]!==void 0)}function n3(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!wT(t,t3)&&wT(t,e3))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*fr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ut.mass,stiffness:i,damping:s}}else{const n=JL(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function Kl(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],u={done:!1,value:s},{stiffness:f,damping:g,mass:d,duration:h,velocity:y,isResolvedFromDuration:v}=n3({...n,velocity:-zn(n.velocity||0)}),S=y||0,x=g/(2*Math.sqrt(f*d)),m=c-s,E=zn(Math.sqrt(f/d)),O=Math.abs(m)<5;r||(r=O?ut.restSpeed.granular:ut.restSpeed.default),i||(i=O?ut.restDelta.granular:ut.restDelta.default);let M;if(x<1){const D=Jh(E,x);M=R=>{const B=Math.exp(-x*E*R);return c-B*((S+x*E*m)/D*Math.sin(D*R)+m*Math.cos(D*R))}}else if(x===1)M=D=>c-Math.exp(-E*D)*(m+(S+E*m)*D);else{const D=E*Math.sqrt(x*x-1);M=R=>{const B=Math.exp(-x*E*R),_=Math.min(D*R,300);return c-B*((S+x*E*m)*Math.sinh(_)+D*m*Math.cosh(_))/D}}const w={calculatedDuration:v&&h||null,next:D=>{const R=M(D);if(v)u.done=D>=h;else{let B=D===0?S:0;x<1&&(B=D===0?Ur(S):tC(M,D,R));const _=Math.abs(B)<=r,G=Math.abs(c-R)<=i;u.done=_&&G}return u.value=u.done?c:R,u},toString:()=>{const D=Math.min(rd(w),Wl),R=eC(B=>w.next(D*B).value,D,30);return D+"ms "+R},toTransition:()=>{}};return w}Kl.applyToOptions=t=>{const e=ZL(t,100,Kl);return t.ease=e.ease,t.duration=Ur(e.duration),t.type="keyframes",t};function Ph({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:c,min:u,max:f,restDelta:g=.5,restSpeed:d}){const h=t[0],y={done:!1,value:h},v=_=>u!==void 0&&_<u||f!==void 0&&_>f,S=_=>u===void 0?f:f===void 0||Math.abs(u-_)<Math.abs(f-_)?u:f;let x=n*e;const m=h+x,E=c===void 0?m:c(m);E!==m&&(x=E-h);const O=_=>-x*Math.exp(-_/r),M=_=>E+O(_),w=_=>{const G=O(_),z=M(_);y.done=Math.abs(G)<=g,y.value=y.done?E:z};let D,R;const B=_=>{v(y.value)&&(D=_,R=Kl({keyframes:[y.value,S(y.value)],velocity:tC(M,_,y.value),damping:i,stiffness:s,restDelta:g,restSpeed:d}))};return B(0),{calculatedDuration:null,next:_=>{let G=!1;return!R&&D===void 0&&(G=!0,w(_),B(_)),D!==void 0&&_>=D?R.next(_-D):(!G&&w(_),y)}}}function r3(t,e,n){const r=[],i=n||Fr.mix||IS,s=t.length-1;for(let c=0;c<s;c++){let u=i(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||jn:e;u=Tc(f,u)}r.push(u)}return r}function a3(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(qp(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=r3(e,r,i),f=u.length,g=d=>{if(c&&d<t[0])return e[0];let h=0;if(f>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const y=ic(t[h],t[h+1],d);return u[h](y)};return n?d=>g(fr(t[0],t[s-1],d)):g}function i3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ic(0,e,r);t.push(it(n,1,i))}}function s3(t){const e=[0];return i3(e,t.length-1),e}function o3(t,e){return t.map(n=>n*e)}function c3(t,e){return t.map(()=>e||HS).splice(0,t.length-1)}function Zo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=TL(r)?r.map(TT):TT(r),s={done:!1,value:e[0]},c=o3(n&&n.length===e.length?n:s3(e),t),u=a3(c,e,{ease:Array.isArray(i)?i:c3(e,i)});return{calculatedDuration:t,next:f=>(s.value=u(f),s.done=f>=t,s)}}const u3=t=>t!==null;function ad(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(u3),u=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!u||r===void 0?s[u]:r}const l3={decay:Ph,inertia:Ph,tween:Zo,keyframes:Zo,spring:Kl};function nC(t){typeof t.type=="string"&&(t.type=l3[t.type])}class id{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const f3=t=>t/100;class sd extends id{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Jt.now()&&this.tick(Jt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;nC(e);const{type:n=Zo,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:c=0}=e;let{keyframes:u}=e;const f=n||Zo;f!==Zo&&typeof u[0]!="number"&&(this.mixKeyframes=Tc(f3,IS(u[0],u[1])),u=[0,100]);const g=f({...e,keyframes:u});s==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...u].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=rd(g));const{calculatedDuration:d}=g;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=g}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:c,resolvedDuration:u,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:d,repeat:h,repeatType:y,repeatDelay:v,type:S,onUpdate:x,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const E=this.currentTime-g*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let M=this.currentTime,w=r;if(h){const _=Math.min(this.currentTime,i)/u;let G=Math.floor(_),z=_%1;!z&&_>=1&&(z=1),z===1&&G--,G=Math.min(G,h+1),G%2&&(y==="reverse"?(z=1-z,v&&(z-=v/u)):y==="mirror"&&(w=c)),M=fr(0,1,z)*u}const D=O?{done:!1,value:d[0]}:w.next(M);s&&(D.value=s(D.value));let{done:R}=D;!O&&f!==null&&(R=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return B&&S!==Ph&&(D.value=ad(d,this.options,m,this.speed)),x&&x(D.value),B&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return zn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zn(e)}get time(){return zn(this.currentTime)}set time(e){e=Ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Jt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=qL,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Jt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function g3(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const pi=t=>t*180/Math.PI,Ih=t=>{const e=pi(Math.atan2(t[1],t[0]));return ep(e)},h3={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ih,rotateZ:Ih,skewX:t=>pi(Math.atan(t[1])),skewY:t=>pi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ep=t=>(t=t%360,t<0&&(t+=360),t),OT=Ih,DT=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),RT=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),p3={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:DT,scaleY:RT,scale:t=>(DT(t)+RT(t))/2,rotateX:t=>ep(pi(Math.atan2(t[6],t[5]))),rotateY:t=>ep(pi(Math.atan2(-t[2],t[0]))),rotateZ:OT,rotate:OT,skewX:t=>pi(Math.atan(t[4])),skewY:t=>pi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function tp(t){return t.includes("scale")?1:0}function np(t,e){if(!t||t==="none")return tp(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=p3,i=n;else{const u=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=h3,i=u}if(!i)return tp(e);const s=r[e],c=i[1].split(",").map(y3);return typeof s=="function"?s(c):c[s]}const d3=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return np(n,e)};function y3(t){return parseFloat(t.trim())}const bs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ls=new Set(bs),bT=t=>t===Rs||t===le,v3=new Set(["x","y","z"]),x3=bs.filter(t=>!v3.has(t));function T3(t){const e=[];return x3.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ea={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>np(e,"x"),y:(t,{transform:e})=>np(e,"y")};Ea.translateX=Ea.x;Ea.translateY=Ea.y;const yi=new Set;let rp=!1,ap=!1,ip=!1;function rC(){if(ap){const t=Array.from(yi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=T3(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,c])=>{r.getValue(s)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ap=!1,rp=!1,yi.forEach(t=>t.complete(ip)),yi.clear()}function aC(){yi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ap=!0)})}function m3(){ip=!0,aC(),rC(),ip=!1}class od{constructor(e,n,r,i,s,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(yi.add(this),rp||(rp=!0,Ie.read(aC),Ie.resolveKeyframes(rC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),c=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const u=r.readValue(n,c);u!=null&&(e[0]=u)}e[0]===void 0&&(e[0]=c),i&&s===void 0&&i.set(e[0])}g3(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yi.delete(this)}cancel(){this.state==="scheduled"&&(yi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const S3=t=>t.startsWith("--");function C3(t,e,n){S3(e)?t.style.setProperty(e,n):t.style[e]=n}const E3=Zp(()=>window.ScrollTimeline!==void 0),M3={};function w3(t,e){const n=Zp(t);return()=>M3[e]??n()}const iC=w3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Go=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,LT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function sC(t,e){if(t)return typeof t=="function"?iC()?eC(t,e):"ease-out":$S(t)?Go(t):Array.isArray(t)?t.map(n=>sC(n,e)||LT.easeOut):LT[t]}function O3(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:c="loop",ease:u="easeOut",times:f}={},g=void 0){const d={[e]:n};f&&(d.offset=f);const h=sC(u,i);Array.isArray(h)&&(d.easing=h);const y={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:c==="reverse"?"alternate":"normal"};return g&&(y.pseudoElement=g),t.animate(d,y)}function oC(t){return typeof t=="function"&&"applyToOptions"in t}function D3({type:t,...e}){return oC(t)&&iC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class R3 extends id{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:c=!1,finalKeyframe:u,onComplete:f}=e;this.isPseudoElement=!!s,this.allowFlatten=c,this.options=e,qp(typeof e.type!="string");const g=D3(e);this.animation=O3(n,r,i,g,s),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=ad(i,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(d):C3(n,r,d),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return zn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zn(e)}get time(){return zn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&E3()?(this.animation.timeline=e,jn):n(this)}}const cC={anticipate:zS,backInOut:GS,circInOut:jS};function b3(t){return t in cC}function L3(t){typeof t.ease=="string"&&b3(t.ease)&&(t.ease=cC[t.ease])}const th=10;class V3 extends R3{constructor(e){L3(e),nC(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const u=new sd({...c,autoplay:!1}),f=Math.max(th,Jt.now()-this.startTime),g=fr(0,th,f-th);n.setWithVelocity(u.sample(Math.max(0,f-g)).value,u.sample(f).value,g),u.stop()}}const VT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Oa.test(t)||t==="0")&&!t.startsWith("url("));function N3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function B3(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],c=VT(i,e),u=VT(s,e);return!c||!u?!1:N3(t)||(n==="spring"||oC(n))&&r}function sp(t){t.duration=0,t.type="keyframes"}const _3=new Set(["opacity","clipPath","filter","transform"]),U3=Zp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function k3(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:g}=e.owner.getProps();return U3()&&n&&_3.has(n)&&(n!=="transform"||!g)&&!f&&!r&&i!=="mirror"&&s!==0&&c!=="inertia"}const F3=40;class G3 extends id{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:c="loop",keyframes:u,name:f,motionValue:g,element:d,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Jt.now();const y={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:c,name:f,motionValue:g,element:d,...h},v=d?.KeyframeResolver||od;this.keyframeResolver=new v(u,(S,x,m)=>this.onKeyframesResolved(S,x,y,!m),f,g,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:c,velocity:u,delay:f,isHandoff:g,onUpdate:d}=r;this.resolvedAt=Jt.now(),B3(e,s,c,u)||((Fr.instantAnimations||!f)&&d?.(ad(e,r,n)),e[0]=e[e.length-1],sp(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>F3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!g&&k3(y),S=y.motionValue?.owner?.current,x=v?new V3({...y,element:S}):new sd(y);x.finished.then(()=>{this.notifyFinished()}).catch(jn),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),m3()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function uC(t,e,n,r=0,i=1){const s=Array.from(t).sort((g,d)=>g.sortNodePosition(d)).indexOf(e),c=t.size,u=(c-1)*r;return typeof n=="function"?n(s,c):i===1?s*r:u-s*r}const z3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function A3(t){const e=z3.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function lC(t,e,n=1){const[r,i]=A3(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const c=s.trim();return LS(c)?parseFloat(c):c}return Ip(i)?lC(i,e,n+1):i}const j3={type:"spring",stiffness:500,damping:25,restSpeed:10},H3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$3={type:"keyframes",duration:.8},W3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},K3=(t,{keyframes:e})=>e.length>2?$3:Ls.has(t)?t.startsWith("scale")?H3(e[1]):j3:W3,X3=t=>t!==null;function Y3(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(X3),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}function cd(t,e){return t?.[e]??t?.default??t}function q3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:c,repeatDelay:u,from:f,elapsed:g,...d}){return!!Object.keys(d).length}const ud=(t,e,n,r={},i,s)=>c=>{const u=cd(r,t)||{},f=u.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Ur(f);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-g,onUpdate:y=>{e.set(y),u.onUpdate&&u.onUpdate(y)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:s?void 0:i};q3(u)||Object.assign(d,K3(t,d)),d.duration&&(d.duration=Ur(d.duration)),d.repeatDelay&&(d.repeatDelay=Ur(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(sp(d),d.delay===0&&(h=!0)),(Fr.instantAnimations||Fr.skipAnimations)&&(h=!0,sp(d),d.delay=0),d.allowFlatten=!u.type&&!u.ease,h&&!s&&e.get()!==void 0){const y=Y3(d.keyframes,u);if(y!==void 0){Ie.update(()=>{d.onUpdate(y),d.onComplete()});return}}return u.isSync?new sd(d):new G3(d)};function NT(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function ld(t,e,n,r){if(typeof e=="function"){const[i,s]=NT(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=NT(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ts(t,e,n){const r=t.getProps();return ld(r,e,n!==void 0?n:r.custom,t)}const fC=new Set(["width","height","top","left","right","bottom",...bs]),BT=30,Z3=t=>!isNaN(parseFloat(t));class Q3{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Jt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Z3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Qp);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>BT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,BT);return BS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Cs(t,e){return new Q3(t,e)}const op=t=>Array.isArray(t);function J3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Cs(n))}function P3(t){return op(t)?t[t.length-1]||0:t}function I3(t,e){const n=Ts(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const c in s){const u=P3(s[c]);J3(t,c,u)}}const Wt=t=>!!(t&&t.getVelocity);function eV(t){return!!(Wt(t)&&t.add)}function cp(t,e){const n=t.getValue("willChange");if(eV(n))return n.add(e);if(!n&&Fr.WillChange){const r=new Fr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function fd(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const tV="framerAppearId",gC="data-"+fd(tV);function hC(t){return t.props[gC]}function nV({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function pC(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:c,...u}=e;r&&(s=r);const f=[],g=i&&t.animationState&&t.animationState.getState()[i];for(const d in u){const h=t.getValue(d,t.latestValues[d]??null),y=u[d];if(y===void 0||g&&nV(g,d))continue;const v={delay:n,...cd(s||{},d)},S=h.get();if(S!==void 0&&!h.isAnimating&&!Array.isArray(y)&&y===S&&!v.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const E=hC(t);if(E){const O=window.MotionHandoffAnimation(E,d,Ie);O!==null&&(v.startTime=O,x=!0)}}cp(t,d),h.start(ud(d,h,y,t.shouldReduceMotion&&fC.has(d)?{type:!1}:v,t,x));const m=h.animation;m&&f.push(m)}return c&&Promise.all(f).then(()=>{Ie.update(()=>{c&&I3(t,c)})}),f}function up(t,e,n={}){const r=Ts(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(pC(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:d,staggerDirection:h}=i;return rV(t,e,f,g,d,h,n)}:()=>Promise.resolve(),{when:u}=i;if(u){const[f,g]=u==="beforeChildren"?[s,c]:[c,s];return f().then(()=>g())}else return Promise.all([s(),c(n.delay)])}function rV(t,e,n=0,r=0,i=0,s=1,c){const u=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),u.push(up(f,e,{...c,delay:n+(typeof r=="function"?0:r)+uC(t.variantChildren,f,r,i,s)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(u)}function aV(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>up(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=up(t,e,n);else{const i=typeof e=="function"?Ts(t,e,n.custom):e;r=Promise.all(pC(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const iV={test:t=>t==="auto",parse:t=>t},dC=t=>e=>e.test(t),yC=[Rs,le,ur,va,NL,VL,iV],_T=t=>yC.find(dC(t));function sV(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||NS(t):!0}const oV=new Set(["brightness","contrast","saturate","opacity"]);function cV(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ed)||[];if(!r)return t;const i=n.replace(r,"");let s=oV.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const uV=/\b([a-z-]*)\(.*?\)/gu,lp={...Oa,getAnimatableNone:t=>{const e=t.match(uV);return e?e.map(cV).join(" "):t}},UT={...Rs,transform:Math.round},lV={rotate:va,rotateX:va,rotateY:va,rotateZ:va,scale:Pu,scaleX:Pu,scaleY:Pu,scaleZ:Pu,skew:va,skewX:va,skewY:va,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:sc,originX:ST,originY:ST,originZ:le},gd={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,inset:le,insetBlock:le,insetBlockStart:le,insetBlockEnd:le,insetInline:le,insetInlineStart:le,insetInlineEnd:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,paddingBlock:le,paddingBlockStart:le,paddingBlockEnd:le,paddingInline:le,paddingInlineStart:le,paddingInlineEnd:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,marginBlock:le,marginBlockStart:le,marginBlockEnd:le,marginInline:le,marginInlineStart:le,marginInlineEnd:le,fontSize:le,backgroundPositionX:le,backgroundPositionY:le,...lV,zIndex:UT,fillOpacity:sc,strokeOpacity:sc,numOctaves:UT},fV={...gd,color:mt,backgroundColor:mt,outlineColor:mt,fill:mt,stroke:mt,borderColor:mt,borderTopColor:mt,borderRightColor:mt,borderBottomColor:mt,borderLeftColor:mt,filter:lp,WebkitFilter:lp},vC=t=>fV[t];function xC(t,e){let n=vC(t);return n!==lp&&(n=Oa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gV=new Set(["auto","none","0"]);function hV(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!gV.has(s)&&oc(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=xC(n,i)}class pV extends od{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),Ip(h))){const y=lC(h,n.current);y!==void 0&&(e[d]=y),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!fC.has(r)||e.length!==2)return;const[i,s]=e,c=_T(i),u=_T(s),f=mT(i),g=mT(s);if(f!==g&&Ea[r]){this.needsMeasurement=!0;return}if(c!==u)if(bT(c)&&bT(u))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else Ea[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||sV(e[i]))&&r.push(i);r.length&&hV(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ea[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,c=r[s];r[s]=Ea[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,f])=>{e.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function dV(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(r=>r!=null)}const TC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function yV(t){return VS(t)&&"offsetHeight"in t}const{schedule:hd}=WS(queueMicrotask,!1),qn={x:!1,y:!1};function mC(){return qn.x||qn.y}function vV(t){return t==="x"||t==="y"?qn[t]?null:(qn[t]=!0,()=>{qn[t]=!1}):qn.x||qn.y?null:(qn.x=qn.y=!0,()=>{qn.x=qn.y=!1})}function SC(t,e){const n=dV(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function kT(t){return!(t.pointerType==="touch"||mC())}function xV(t,e,n={}){const[r,i,s]=SC(t,n),c=u=>{if(!kT(u))return;const{target:f}=u,g=e(f,u);if(typeof g!="function"||!f)return;const d=h=>{kT(h)&&(g(h),f.removeEventListener("pointerleave",d))};f.addEventListener("pointerleave",d,i)};return r.forEach(u=>{u.addEventListener("pointerenter",c,i)}),s}const CC=(t,e)=>e?t===e?!0:CC(t,e.parentElement):!1,pd=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,TV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EC(t){return TV.has(t.tagName)||t.isContentEditable===!0}const Ml=new WeakSet;function FT(t){return e=>{e.key==="Enter"&&t(e)}}function nh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const mV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=FT(()=>{if(Ml.has(n))return;nh(n,"down");const i=FT(()=>{nh(n,"up")}),s=()=>nh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function GT(t){return pd(t)&&!mC()}function SV(t,e,n={}){const[r,i,s]=SC(t,n),c=u=>{const f=u.currentTarget;if(!GT(u))return;Ml.add(f);const g=e(f,u),d=(v,S)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",y),Ml.has(f)&&Ml.delete(f),GT(v)&&typeof g=="function"&&g(v,{success:S})},h=v=>{d(v,f===window||f===document||n.useGlobalTarget||CC(f,v.target))},y=v=>{d(v,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",y,i)};return r.forEach(u=>{(n.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),yV(u)&&(u.addEventListener("focus",g=>mV(g,i)),!EC(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),s}function MC(t){return VS(t)&&"ownerSVGElement"in t}function CV(t){return MC(t)&&t.tagName==="svg"}const EV=[...yC,mt,Oa],MV=t=>EV.find(dC(t)),zT=()=>({translate:0,scale:1,origin:0,originPoint:0}),ps=()=>({x:zT(),y:zT()}),AT=()=>({min:0,max:0}),Et=()=>({x:AT(),y:AT()}),fp={current:null},wC={current:!1},wV=typeof window<"u";function OV(){if(wC.current=!0,!!wV)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fp.current=t.matches;t.addEventListener("change",e),e()}else fp.current=!1}const DV=new WeakMap;function pf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function cc(t){return typeof t=="string"||Array.isArray(t)}const dd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yd=["initial",...dd];function df(t){return pf(t.animate)||yd.some(e=>cc(t[e]))}function OC(t){return!!(df(t)||t.variants)}function RV(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Wt(i))t.addValue(r,i);else if(Wt(s))t.addValue(r,Cs(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,Cs(c!==void 0?c:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const jT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Xl={};function DC(t){Xl=t}function bV(){return Xl}class LV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=od,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Jt.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ie.render(this.render,!1,!0))};const{latestValues:f,renderState:g}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!s,this.isControllingVariants=df(n),this.isVariantNode=OC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in h){const v=h[y];f[y]!==void 0&&Wt(v)&&v.set(f[y])}}mount(e){this.current=e,DV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(wC.current||OV(),this.shouldReduceMotion=fp.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wa(this.notifyUpdate),wa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ls.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;typeof window<"u"&&window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xl){const n=Xl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jT.length;r++){const i=jT[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,c=e[s];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=RV(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Cs(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LS(r)||NS(r))?r=parseFloat(r):!MV(r)&&Oa.test(n)&&(r=xC(e,n)),this.setBaseTarget(e,Wt(r)?r.get():r)),Wt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=ld(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Wt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Qp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){hd.render(this.render)}}class RC extends LV{constructor(){super(...arguments),this.KeyframeResolver=pV}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Wt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class ba{constructor(e){this.isMounted=!1,this.node=e}update(){}}function bC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function VV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function NV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function rh(t){return t===void 0||t===1}function gp({scale:t,scaleX:e,scaleY:n}){return!rh(t)||!rh(e)||!rh(n)}function si(t){return gp(t)||LC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function LC(t){return HT(t.x)||HT(t.y)}function HT(t){return t&&t!=="0%"}function Yl(t,e,n){const r=t-n,i=e*r;return n+i}function $T(t,e,n,r,i){return i!==void 0&&(t=Yl(t,i,r)),Yl(t,n,r)+e}function hp(t,e=0,n=1,r,i){t.min=$T(t.min,e,n,r,i),t.max=$T(t.max,e,n,r,i)}function VC(t,{x:e,y:n}){hp(t.x,e.translate,e.scale,e.originPoint),hp(t.y,n.translate,n.scale,n.originPoint)}const WT=.999999999999,KT=1.0000000000001;function BV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,c;for(let u=0;u<i;u++){s=n[u],c=s.projectionDelta;const{visualElement:f}=s.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ys(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,VC(t,c)),r&&si(s.latestValues)&&ys(t,s.latestValues))}e.x<KT&&e.x>WT&&(e.x=1),e.y<KT&&e.y>WT&&(e.y=1)}function ds(t,e){t.min=t.min+e,t.max=t.max+e}function XT(t,e,n,r,i=.5){const s=it(t.min,t.max,i);hp(t,e,n,s,r)}function ys(t,e){XT(t.x,e.x,e.scaleX,e.scale,e.originX),XT(t.y,e.y,e.scaleY,e.scale,e.originY)}function NC(t,e){return bC(NV(t.getBoundingClientRect(),e))}function _V(t,e,n){const r=NC(t,n),{scroll:i}=e;return i&&(ds(r.x,i.offset.x),ds(r.y,i.offset.y)),r}const UV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kV=bs.length;function FV(t,e,n){let r="",i=!0;for(let s=0;s<kV;s++){const c=bs[s],u=t[c];if(u===void 0)continue;let f=!0;if(typeof u=="number")f=u===(c.startsWith("scale")?1:0);else{const g=parseFloat(u);f=c.startsWith("scale")?g===1:g===0}if(!f||n){const g=TC(u,gd[c]);if(!f){i=!1;const d=UV[c]||c;r+=`${d}(${g}) `}n&&(e[c]=g)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function vd(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let c=!1,u=!1;for(const f in e){const g=e[f];if(Ls.has(f)){c=!0;continue}else if(XS(f)){i[f]=g;continue}else{const d=TC(g,gd[f]);f.startsWith("origin")?(u=!0,s[f]=d):r[f]=d}}if(e.transform||(c||n?r.transform=FV(e,t.transform,n):r.transform&&(r.transform="none")),u){const{originX:f="50%",originY:g="50%",originZ:d=0}=s;r.transformOrigin=`${f} ${g} ${d}`}}function BC(t,{style:e,vars:n},r,i){const s=t.style;let c;for(c in e)s[c]=e[c];i?.applyProjectionStyles(s,r);for(c in n)s.setProperty(c,n[c])}function YT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=YT(t,e.target.x),r=YT(t,e.target.y);return`${n}% ${r}%`}},GV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Oa.parse(t);if(i.length>5)return r;const s=Oa.createTransformer(t),c=typeof i[0]!="number"?1:0,u=n.x.scale*e.x,f=n.y.scale*e.y;i[0+c]/=u,i[1+c]/=f;const g=it(u,f,.5);return typeof i[2+c]=="number"&&(i[2+c]/=g),typeof i[3+c]=="number"&&(i[3+c]/=g),s(i)}},pp={borderRadius:{...Vo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vo,borderTopRightRadius:Vo,borderBottomLeftRadius:Vo,borderBottomRightRadius:Vo,boxShadow:GV};function _C(t,{layout:e,layoutId:n}){return Ls.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pp[t]||t==="opacity")}function xd(t,e,n){const r=t.style,i=e?.style,s={};if(!r)return s;for(const c in r)(Wt(r[c])||i&&Wt(i[c])||_C(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(s[c]=r[c]);return s}function zV(t){return window.getComputedStyle(t)}class AV extends RC{constructor(){super(...arguments),this.type="html",this.renderInstance=BC}readValueFromInstance(e,n){if(Ls.has(n))return this.projection?.isProjecting?tp(n):d3(e,n);{const r=zV(e),i=(XS(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return NC(e,n)}build(e,n,r){vd(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return xd(e,n,r)}}const jV={offset:"stroke-dashoffset",array:"stroke-dasharray"},HV={offset:"strokeDashoffset",array:"strokeDasharray"};function $V(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?jV:HV;t[s.offset]=`${-r}`,t[s.array]=`${e} ${n}`}const WV=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function UC(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:c=0,...u},f,g,d){if(vd(t,u,g),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:y}=t;h.transform&&(y.transform=h.transform,delete h.transform),(y.transform||h.transformOrigin)&&(y.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),y.transform&&(y.transformBox=d?.transformBox??"fill-box",delete h.transformBox);for(const v of WV)h[v]!==void 0&&(y[v]=h[v],delete h[v]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),i!==void 0&&$V(h,i,s,c,!1)}const kC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),FC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function KV(t,e,n,r){BC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(kC.has(i)?i:fd(i),e.attrs[i])}function GC(t,e,n){const r=xd(t,e,n);for(const i in t)if(Wt(t[i])||Wt(e[i])){const s=bs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}class XV extends RC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Et}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ls.has(n)){const r=vC(n);return r&&r.default||0}return n=kC.has(n)?n:fd(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return GC(e,n,r)}build(e,n,r){UC(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){KV(e,n,r,i)}mount(e){this.isSVGTag=FC(e.tagName),super.mount(e)}}const YV=yd.length;function zC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<YV;n++){const r=yd[n],i=t.props[r];(cc(i)||i===!1)&&(e[r]=i)}return e}function AC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const qV=[...dd].reverse(),ZV=dd.length;function QV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>aV(t,n,r)))}function JV(t){let e=QV(t),n=qT(),r=!0;const i=f=>(g,d)=>{const h=Ts(t,d,f==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:y,transitionEnd:v,...S}=h;g={...g,...S,...v}}return g};function s(f){e=f(t)}function c(f){const{props:g}=t,d=zC(t.parent)||{},h=[],y=new Set;let v={},S=1/0;for(let m=0;m<ZV;m++){const E=qV[m],O=n[E],M=g[E]!==void 0?g[E]:d[E],w=cc(M),D=E===f?O.isActive:null;D===!1&&(S=m);let R=M===d[E]&&M!==g[E]&&w;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),O.protectedKeys={...v},!O.isActive&&D===null||!M&&!O.prevProp||pf(M)||typeof M=="boolean")continue;const B=PV(O.prevProp,M);let _=B||E===f&&O.isActive&&!R&&w||m>S&&w,G=!1;const z=Array.isArray(M)?M:[M];let H=z.reduce(i(E),{});D===!1&&(H={});const{prevResolvedValues:A={}}=O,$={...A,...H},K=q=>{_=!0,y.has(q)&&(G=!0,y.delete(q)),O.needsAnimating[q]=!0;const re=t.getValue(q);re&&(re.liveStyle=!1)};for(const q in $){const re=H[q],J=A[q];if(v.hasOwnProperty(q))continue;let oe=!1;op(re)&&op(J)?oe=!AC(re,J):oe=re!==J,oe?re!=null?K(q):y.add(q):re!==void 0&&y.has(q)?K(q):O.protectedKeys[q]=!0}O.prevProp=M,O.prevResolvedValues=H,O.isActive&&(v={...v,...H}),r&&t.blockInitialAnimation&&(_=!1);const ee=R&&B;_&&(!ee||G)&&h.push(...z.map(q=>{const re={type:E};if(typeof q=="string"&&r&&!ee&&t.manuallyAnimateOnMount&&t.parent){const{parent:J}=t,oe=Ts(J,q);if(J.enteringChildren&&oe){const{delayChildren:k}=oe.transition||{};re.delay=uC(J.enteringChildren,t,k)}}return{animation:q,options:re}}))}if(y.size){const m={};if(typeof g.initial!="boolean"){const E=Ts(t,Array.isArray(g.initial)?g.initial[0]:g.initial);E&&E.transition&&(m.transition=E.transition)}y.forEach(E=>{const O=t.getBaseTarget(E),M=t.getValue(E);M&&(M.liveStyle=!0),m[E]=O??null}),h.push({animation:m})}let x=!!h.length;return r&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function u(f,g){if(n[f].isActive===g)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(f,g)),n[f].isActive=g;const d=c(f);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:c,setActive:u,setAnimateFunction:s,getState:()=>n,reset:()=>{n=qT()}}}function PV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AC(e,t):!1}function Pa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qT(){return{animate:Pa(!0),whileInView:Pa(),whileHover:Pa(),whileTap:Pa(),whileDrag:Pa(),whileFocus:Pa(),exit:Pa()}}function ZT(t,e){t.min=e.min,t.max=e.max}function Yn(t,e){ZT(t.x,e.x),ZT(t.y,e.y)}function QT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const jC=1e-4,IV=1-jC,eN=1+jC,HC=.01,tN=0-HC,nN=0+HC;function Pt(t){return t.max-t.min}function rN(t,e,n){return Math.abs(t-e)<=n}function JT(t,e,n,r=.5){t.origin=r,t.originPoint=it(e.min,e.max,t.origin),t.scale=Pt(n)/Pt(e),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(t.scale>=IV&&t.scale<=eN||isNaN(t.scale))&&(t.scale=1),(t.translate>=tN&&t.translate<=nN||isNaN(t.translate))&&(t.translate=0)}function Qo(t,e,n,r){JT(t.x,e.x,n.x,r?r.originX:void 0),JT(t.y,e.y,n.y,r?r.originY:void 0)}function PT(t,e,n){t.min=n.min+e.min,t.max=t.min+Pt(e)}function aN(t,e,n){PT(t.x,e.x,n.x),PT(t.y,e.y,n.y)}function IT(t,e,n){t.min=e.min-n.min,t.max=t.min+Pt(e)}function ql(t,e,n){IT(t.x,e.x,n.x),IT(t.y,e.y,n.y)}function em(t,e,n,r,i){return t-=e,t=Yl(t,1/n,r),i!==void 0&&(t=Yl(t,1/i,r)),t}function iN(t,e=0,n=1,r=.5,i,s=t,c=t){if(ur.test(e)&&(e=parseFloat(e),e=it(c.min,c.max,e/100)-c.min),typeof e!="number")return;let u=it(s.min,s.max,r);t===s&&(u-=e),t.min=em(t.min,e,n,u,i),t.max=em(t.max,e,n,u,i)}function tm(t,e,[n,r,i],s,c){iN(t,e[n],e[r],e[i],e.scale,s,c)}const sN=["x","scaleX","originX"],oN=["y","scaleY","originY"];function nm(t,e,n,r){tm(t.x,e,sN,n?n.x:void 0,r?r.x:void 0),tm(t.y,e,oN,n?n.y:void 0,r?r.y:void 0)}function rm(t){return t.translate===0&&t.scale===1}function $C(t){return rm(t.x)&&rm(t.y)}function am(t,e){return t.min===e.min&&t.max===e.max}function cN(t,e){return am(t.x,e.x)&&am(t.y,e.y)}function im(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WC(t,e){return im(t.x,e.x)&&im(t.y,e.y)}function sm(t){return Pt(t.x)/Pt(t.y)}function om(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function kn(t){return[t("x"),t("y")]}function uN(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,c=n?.z||0;if((i||s||c)&&(r=`translate3d(${i}px, ${s}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:d,rotateX:h,rotateY:y,skewX:v,skewY:S}=n;g&&(r=`perspective(${g}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),y&&(r+=`rotateY(${y}deg) `),v&&(r+=`skewX(${v}deg) `),S&&(r+=`skewY(${S}deg) `)}const u=t.x.scale*e.x,f=t.y.scale*e.y;return(u!==1||f!==1)&&(r+=`scale(${u}, ${f})`),r||"none"}const KC=["TopLeft","TopRight","BottomLeft","BottomRight"],lN=KC.length,cm=t=>typeof t=="string"?parseFloat(t):t,um=t=>typeof t=="number"||le.test(t);function fN(t,e,n,r,i,s){i?(t.opacity=it(0,n.opacity??1,gN(r)),t.opacityExit=it(e.opacity??1,0,hN(r))):s&&(t.opacity=it(e.opacity??1,n.opacity??1,r));for(let c=0;c<lN;c++){const u=`border${KC[c]}Radius`;let f=lm(e,u),g=lm(n,u);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||um(f)===um(g)?(t[u]=Math.max(it(cm(f),cm(g),r),0),(ur.test(g)||ur.test(f))&&(t[u]+="%")):t[u]=g}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,r))}function lm(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const gN=XC(0,.5,AS),hN=XC(.5,.95,jn);function XC(t,e,n){return r=>r<t?0:r>e?1:n(ic(t,e,r))}function pN(t,e,n){const r=Wt(t)?t:Cs(t);return r.start(ud("",r,e,n)),r.animation}function uc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const dN=(t,e)=>t.depth-e.depth;class yN{constructor(){this.children=[],this.isDirty=!1}add(e){Xp(this.children,e),this.isDirty=!0}remove(e){Yp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dN),this.isDirty=!1,this.children.forEach(e)}}function vN(t,e){const n=Jt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(wa(r),t(s-e))};return Ie.setup(r,!0),()=>wa(r)}function wl(t){return Wt(t)?t.get():t}class xN{constructor(){this.members=[]}add(e){Xp(this.members,e),e.scheduleRender()}remove(e){if(Yp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const i=r.options.layoutDependency,s=e.options.layoutDependency;i!==void 0&&s!==void 0&&i===s||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:u}=e.options;u===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Ol={hasAnimatedSinceResize:!0,hasEverUpdated:!1},ah=["","X","Y","Z"],TN=1e3;let mN=0;function ih(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function YC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ie,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&YC(r)}function qC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},u=e?.()){this.id=mN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(EN),this.nodes.forEach(DN),this.nodes.forEach(RN),this.nodes.forEach(MN)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new yN)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Qp),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const f=this.eventHandlers.get(c);f&&f.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=MC(c)&&!CV(c),this.instance=c;const{layoutId:u,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||u)&&(this.isLayoutDirty=!0),t){let d,h=0;const y=()=>this.root.updateBlockedByResize=!1;Ie.read(()=>{h=window.innerWidth}),t(c,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,d&&d(),d=vN(y,250),Ol.hasAnimatedSinceResize&&(Ol.hasAnimatedSinceResize=!1,this.nodes.forEach(hm)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&g&&(u||f)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||g.getDefaultTransition()||BN,{onLayoutAnimationStart:x,onLayoutAnimationComplete:m}=g.getProps(),E=!this.targetLayout||!WC(this.targetLayout,v),O=!h&&y;if(this.options.layoutRoot||this.resumeFrom||O||h&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...cd(S,"layout"),onPlay:x,onComplete:m};(g.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(d,O)}else h||hm(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bN),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&YC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:u,layout:f}=this.options;if(u===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(fm);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(gm);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ON),this.nodes.forEach(SN),this.nodes.forEach(CN)):this.nodes.forEach(gm),this.clearAllSnapshots();const u=Jt.now();Ft.delta=fr(0,1e3/60,u-Ft.timestamp),Ft.timestamp=u,Ft.isProcessing=!0,Q0.update.process(Ft),Q0.preRender.process(Ft),Q0.render.process(Ft),Ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,hd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wN),this.sharedNodes.forEach(LN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pt(this.snapshot.measuredBox.x)&&!Pt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!$C(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,d=g!==this.prevTransformTemplateValue;c&&this.instance&&(u||si(this.latestValues)||d)&&(i(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let f=this.removeElementScroll(u);return c&&(f=this.removeTransform(f)),_N(f),{animationId:this.root.animationId,measuredBox:u,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Et();const u=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(UN))){const{scroll:g}=this.root;g&&(ds(u.x,g.offset.x),ds(u.y,g.offset.y))}return u}removeElementScroll(c){const u=Et();if(Yn(u,c),this.scroll?.wasRoot)return u;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:d,options:h}=g;g!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Yn(u,c),ds(u.x,d.offset.x),ds(u.y,d.offset.y))}return u}applyTransform(c,u=!1){const f=Et();Yn(f,c);for(let g=0;g<this.path.length;g++){const d=this.path[g];!u&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ys(f,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),si(d.latestValues)&&ys(f,d.latestValues)}return si(this.latestValues)&&ys(f,this.latestValues),f}removeTransform(c){const u=Et();Yn(u,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!si(g.latestValues))continue;gp(g.latestValues)&&g.updateSnapshot();const d=Et(),h=g.measurePageBox();Yn(d,h),nm(u,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,d)}return si(this.latestValues)&&nm(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==u;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=Ft.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Yn(this.target,this.layout.layoutBox),VC(this.target,this.targetDelta)):Yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||gp(this.parent.latestValues)||LC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,u,f){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),ql(this.relativeTargetOrigin,u,f),Yn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),u=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ft.timestamp&&(f=!1),f)return;const{layout:g,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||d))return;Yn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,y=this.treeScale.y;BV(this.layoutCorrected,this.treeScale,this.path,u),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Et());const{target:v}=c;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(QT(this.prevProjectionDelta.x,this.projectionDelta.x),QT(this.prevProjectionDelta.y,this.projectionDelta.y)),Qo(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==y||!om(this.projectionDelta.x,this.prevProjectionDelta.x)||!om(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ps(),this.projectionDelta=ps(),this.projectionDeltaWithTransform=ps()}setAnimationOrigin(c,u=!1){const f=this.snapshot,g=f?f.latestValues:{},d={...this.latestValues},h=ps();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const y=Et(),v=f?f.source:void 0,S=this.layout?this.layout.source:void 0,x=v!==S,m=this.getStack(),E=!m||m.members.length<=1,O=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(NN));this.animationProgress=0;let M;this.mixTargetDelta=w=>{const D=w/1e3;pm(h.x,c.x,D),pm(h.y,c.y,D),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ql(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VN(this.relativeTarget,this.relativeTargetOrigin,y,D),M&&cN(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Et()),Yn(M,this.relativeTarget)),x&&(this.animationValues=d,fN(d,g,this.latestValues,D,O,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{Ol.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Cs(0)),this.currentAnimation=pN(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:f,layout:g,latestValues:d}=c;if(!(!u||!f||!g)){if(this!==c&&this.layout&&g&&ZC(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||Et();const h=Pt(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+h;const y=Pt(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+y}Yn(u,f),ys(u,d),Qo(this.projectionDeltaWithTransform,this.layoutCorrected,u,d)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new xN),this.sharedNodes.get(c).add(u);const g=u.options.initialPromotionConfig;u.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(u=!0),!u)return;const g={};f.z&&ih("z",c,g,this.animationValues);for(let d=0;d<ah.length;d++)ih(`rotate${ah[d]}`,c,g,this.animationValues),ih(`skew${ah[d]}`,c,g,this.animationValues);c.render();for(const d in g)c.setStaticValue(d,g[d]),this.animationValues&&(this.animationValues[d]=g[d]);c.scheduleRender()}applyProjectionStyles(c,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=wl(u?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=wl(u?.pointerEvents)||""),this.hasProjected&&!si(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const d=g.animationValues||g.latestValues;this.applyTransformsToTarget();let h=uN(this.projectionDeltaWithTransform,this.treeScale,d);f&&(h=f(d,h)),c.transform=h;const{x:y,y:v}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,g.animationValues?c.opacity=g===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=g===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const S in pp){if(d[S]===void 0)continue;const{correct:x,applyTo:m,isCSSVariable:E}=pp[S],O=h==="none"?d[S]:x(d[S],g);if(m){const M=m.length;for(let w=0;w<M;w++)c[m[w]]=O}else E?this.options.visualElement.renderState.vars[S]=O:c[S]=O}this.options.layoutId&&(c.pointerEvents=g===this?wl(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(fm),this.root.sharedNodes.clear()}}}function SN(t){t.updateLayout()}function CN(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?kn(d=>{const h=s?e.measuredBox[d]:e.layoutBox[d],y=Pt(h);h.min=n[d].min,h.max=h.min+y}):ZC(i,e.layoutBox,n)&&kn(d=>{const h=s?e.measuredBox[d]:e.layoutBox[d],y=Pt(n[d]);h.max=h.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+y)});const c=ps();Qo(c,n,e.layoutBox);const u=ps();s?Qo(u,t.applyTransform(r,!0),e.measuredBox):Qo(u,n,e.layoutBox);const f=!$C(c);let g=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:y}=d;if(h&&y){const v=Et();ql(v,e.layoutBox,h.layoutBox);const S=Et();ql(S,n,y.layoutBox),WC(v,S)||(g=!0),d.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:u,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function EN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function MN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function wN(t){t.clearSnapshot()}function fm(t){t.clearMeasurements()}function gm(t){t.isLayoutDirty=!1}function ON(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function hm(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function DN(t){t.resolveTargetDelta()}function RN(t){t.calcProjection()}function bN(t){t.resetSkewAndRotation()}function LN(t){t.removeLeadSnapshot()}function pm(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function dm(t,e,n,r){t.min=it(e.min,n.min,r),t.max=it(e.max,n.max,r)}function VN(t,e,n,r){dm(t.x,e.x,n.x,r),dm(t.y,e.y,n.y,r)}function NN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const BN={duration:.45,ease:[.4,0,.1,1]},ym=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),vm=ym("applewebkit/")&&!ym("chrome/")?Math.round:jn;function xm(t){t.min=vm(t.min),t.max=vm(t.max)}function _N(t){xm(t.x),xm(t.y)}function ZC(t,e,n){return t==="position"||t==="preserve-aspect"&&!rN(sm(e),sm(n),.2)}function UN(t){return t!==t.root&&t.scroll?.wasRoot}const kN=qC({attachResizeListener:(t,e)=>uc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),sh={current:void 0},QC=qC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sh.current){const t=new kN({});t.mount(window),t.setOptions({layoutScroll:!0}),sh.current=t}return sh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),JC=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function FN(t=!0){const e=I.useContext(Kp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const c=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,c]:[!0]}const PC=I.createContext({strict:!1}),Tm={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let mm=!1;function GN(){if(mm)return;const t={};for(const e in Tm)t[e]={isEnabled:n=>Tm[e].some(r=>!!n[r])};DC(t),mm=!0}function IC(){return GN(),bV()}function zN(t){const e=IC();for(const n in t)e[n]={...e[n],...t[n]};DC(e)}const AN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||AN.has(t)}let eE=t=>!Zl(t);function jN(t){typeof t=="function"&&(eE=e=>e.startsWith("on")?!Zl(e):t(e))}try{jN(require("@emotion/is-prop-valid").default)}catch{}function HN(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(eE(i)||n===!0&&Zl(i)||!e&&!Zl(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const yf=I.createContext({});function $N(t,e){if(df(t)){const{initial:n,animate:r}=t;return{initial:n===!1||cc(n)?n:void 0,animate:cc(r)?r:void 0}}return t.inherit!==!1?e:{}}function WN(t){const{initial:e,animate:n}=$N(t,I.useContext(yf));return I.useMemo(()=>({initial:e,animate:n}),[Sm(e),Sm(n)])}function Sm(t){return Array.isArray(t)?t.join(" "):t}const Td=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tE(t,e,n){for(const r in e)!Wt(e[r])&&!_C(r,n)&&(t[r]=e[r])}function KN({transformTemplate:t},e){return I.useMemo(()=>{const n=Td();return vd(n,e,t),Object.assign({},n.vars,n.style)},[e])}function XN(t,e){const n=t.style||{},r={};return tE(r,n,t),Object.assign(r,KN(t,e)),r}function YN(t,e){const n={},r=XN(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const nE=()=>({...Td(),attrs:{}});function qN(t,e,n,r){const i=I.useMemo(()=>{const s=nE();return UC(s,e,FC(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};tE(s,t.style,t),i.style={...s,...i.style}}return i}const ZN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function md(t){return typeof t!="string"||t.includes("-")?!1:!!(ZN.indexOf(t)>-1||/[A-Z]/u.test(t))}function QN(t,e,n,{latestValues:r},i,s=!1,c){const f=(c??md(t)?qN:YN)(e,r,i,t),g=HN(e,typeof t=="string",s),d=t!==I.Fragment?{...g,...f,ref:n}:{},{children:h}=e,y=I.useMemo(()=>Wt(h)?h.get():h,[h]);return I.createElement(t,{...d,children:y})}function JN({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:PN(n,r,i,t),renderState:e()}}function PN(t,e,n,r){const i={},s=r(t,{});for(const y in s)i[y]=wl(s[y]);let{initial:c,animate:u}=t;const f=df(t),g=OC(t);e&&g&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),u===void 0&&(u=e.animate));let d=n?n.initial===!1:!1;d=d||c===!1;const h=d?u:c;if(h&&typeof h!="boolean"&&!pf(h)){const y=Array.isArray(h)?h:[h];for(let v=0;v<y.length;v++){const S=ld(t,y[v]);if(S){const{transitionEnd:x,transition:m,...E}=S;for(const O in E){let M=E[O];if(Array.isArray(M)){const w=d?M.length-1:0;M=M[w]}M!==null&&(i[O]=M)}for(const O in x)i[O]=x[O]}}}return i}const rE=t=>(e,n)=>{const r=I.useContext(yf),i=I.useContext(Kp),s=()=>JN(t,e,r,i);return n?s():fL(s)},IN=rE({scrapeMotionValuesFromProps:xd,createRenderState:Td}),eB=rE({scrapeMotionValuesFromProps:GC,createRenderState:nE}),tB=Symbol.for("motionComponentSymbol");function nB(t,e,n){const r=I.useRef(n);I.useInsertionEffect(()=>{r.current=n});const i=I.useRef(null);return I.useCallback(s=>{s&&t.onMount?.(s),e&&(s?e.mount(s):e.unmount());const c=r.current;if(typeof c=="function")if(s){const u=c(s);typeof u=="function"&&(i.current=u)}else i.current?(i.current(),i.current=null):c(s);else c&&(c.current=s)},[e])}const aE=I.createContext({});function zo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rB(t,e,n,r,i,s){const{visualElement:c}=I.useContext(yf),u=I.useContext(PC),f=I.useContext(Kp),g=I.useContext(JC).reducedMotion,d=I.useRef(null),h=I.useRef(!1);r=r||u.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g,isSVG:s}),h.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const y=d.current,v=I.useContext(aE);y&&!y.projection&&i&&(y.type==="html"||y.type==="svg")&&aB(d.current,n,i,v);const S=I.useRef(!1);I.useInsertionEffect(()=>{y&&S.current&&y.update(n,f)});const x=n[gC],m=I.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return gL(()=>{h.current=!0,y&&(S.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),m.current&&y.animationState&&y.animationState.animateChanges())}),I.useEffect(()=>{y&&(!m.current&&y.animationState&&y.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),m.current=!1),y.enteringChildren=void 0)}),y}function aB(t,e,n,r){const{layoutId:i,layout:s,drag:c,dragConstraints:u,layoutScroll:f,layoutRoot:g,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:iE(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!c||u&&zo(u),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:f,layoutRoot:g})}function iE(t){if(t)return t.options.allowProjection!==!1?t.projection:iE(t.parent)}function oh(t,{forwardMotionProps:e=!1,type:n}={},r,i){r&&zN(r);const s=n?n==="svg":md(t),c=s?eB:IN;function u(g,d){let h;const y={...I.useContext(JC),...g,layoutId:iB(g)},{isStatic:v}=y,S=WN(g),x=c(g,v);if(!v&&bS){sB();const m=oB(y);h=m.MeasureLayout,S.visualElement=rB(t,x,y,i,m.ProjectionNode,s)}return L.jsxs(yf.Provider,{value:S,children:[h&&S.visualElement?L.jsx(h,{visualElement:S.visualElement,...y}):null,QN(t,g,nB(x,S.visualElement,d),x,v,e,s)]})}u.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const f=I.forwardRef(u);return f[tB]=t,f}function iB({layoutId:t}){const e=I.useContext(RS).id;return e&&t!==void 0?e+"-"+t:t}function sB(t,e){I.useContext(PC).strict}function oB(t){const e=IC(),{drag:n,layout:r}=e;if(!n&&!r)return{};const i={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function cB(t,e){if(typeof Proxy>"u")return oh;const n=new Map,r=(s,c)=>oh(s,c,t,e),i=(s,c)=>r(s,c);return new Proxy(i,{get:(s,c)=>c==="create"?r:(n.has(c)||n.set(c,oh(c,void 0,t,e)),n.get(c))})}const uB=(t,e)=>e.isSVG??md(t)?new XV(e):new AV(e,{allowProjection:t!==I.Fragment});class lB extends ba{constructor(e){super(e),e.animationState||(e.animationState=JV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let fB=0;class gB extends ba{constructor(){super(...arguments),this.id=fB++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const hB={animation:{Feature:lB},exit:{Feature:gB}};function Cc(t){return{point:{x:t.pageX,y:t.pageY}}}const pB=t=>e=>pd(e)&&t(e,Cc(e));function Jo(t,e,n,r){return uc(t,e,pB(n),r)}const sE=({current:t})=>t?t.ownerDocument.defaultView:null,Cm=(t,e)=>Math.abs(t-e);function dB(t,e){const n=Cm(t.x,e.x),r=Cm(t.y,e.y);return Math.sqrt(n**2+r**2)}const Em=new Set(["auto","scroll"]);class oE{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:c=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=uh(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,x=dB(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!x)return;const{point:m}=v,{timestamp:E}=Ft;this.history.push({...m,timestamp:E});const{onStart:O,onMove:M}=this.handlers;S||(O&&O(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,S)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=ch(S,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(v,S)=>{this.end();const{onEnd:x,onSessionEnd:m,resumeAnimation:E}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=uh(v.type==="pointercancel"?this.lastMoveEventInfo:ch(S,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,O),m&&m(v,O)},!pd(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=i||window;const f=Cc(e),g=ch(f,this.transformPagePoint),{point:d}=g,{timestamp:h}=Ft;this.history=[{...d,timestamp:h}];const{onSessionStart:y}=n;y&&y(e,uh(g,this.history)),this.removeListeners=Tc(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(Em.has(r.overflowX)||Em.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-n.x,y:i.y-n.y};s.x===0&&s.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),Ie.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),wa(this.updatePoint)}}function ch(t,e){return e?{point:e(t.point)}:t}function Mm(t,e){return{x:t.x-e.x,y:t.y-e.y}}function uh({point:t},e){return{point:t,delta:Mm(t,cE(e)),offset:Mm(t,yB(e)),velocity:vB(e,.1)}}function yB(t){return t[0]}function cE(t){return t[t.length-1]}function vB(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=cE(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ur(e)));)n--;if(!r)return{x:0,y:0};const s=zn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const c={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function xB(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?it(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?it(n,t,r.max):Math.min(t,n)),t}function wm(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function TB(t,{top:e,left:n,bottom:r,right:i}){return{x:wm(t.x,n,i),y:wm(t.y,e,r)}}function Om(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function mB(t,e){return{x:Om(t.x,e.x),y:Om(t.y,e.y)}}function SB(t,e){let n=.5;const r=Pt(t),i=Pt(e);return i>r?n=ic(e.min,e.max-r,t.min):r>i&&(n=ic(t.min,t.max-i,e.min)),fr(0,1,n)}function CB(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const dp=.35;function EB(t=dp){return t===!1?t=0:t===!0&&(t=dp),{x:Dm(t,"left","right"),y:Dm(t,"top","bottom")}}function Dm(t,e,n){return{min:Rm(t,e),max:Rm(t,n)}}function Rm(t,e){return typeof t=="number"?t:t[e]||0}const MB=new WeakMap;class wB{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=h=>{n?(this.stopAnimation(),this.snapToCursor(Cc(h).point)):this.pauseAnimation()},c=(h,y)=>{this.stopAnimation();const{drag:v,dragPropagation:S,onDragStart:x}=this.getProps();if(v&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=vV(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(E=>{let O=this.getAxisMotionValue(E).get()||0;if(ur.test(O)){const{projection:M}=this.visualElement;if(M&&M.layout){const w=M.layout.layoutBox[E];w&&(O=Pt(w)*(parseFloat(O)/100))}}this.originPoint[E]=O}),x&&Ie.postRender(()=>x(h,y)),cp(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},u=(h,y)=>{this.latestPointerEvent=h,this.latestPanInfo=y;const{dragPropagation:v,dragDirectionLock:S,onDirectionLock:x,onDrag:m}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:E}=y;if(S&&this.currentDirection===null){this.currentDirection=OB(E),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",y.point,E),this.updateAxis("y",y.point,E),this.visualElement.render(),m&&m(h,y)},f=(h,y)=>{this.latestPointerEvent=h,this.latestPanInfo=y,this.stop(h,y),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>kn(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new oE(e,{onSessionStart:s,onStart:c,onMove:u,onSessionEnd:f,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:sE(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:u}=this.getProps();u&&Ie.postRender(()=>u(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Iu(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=xB(c,this.constraints[e],this.elastic[e])),s.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&zo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=TB(r.layoutBox,e):this.constraints=!1,this.elastic=EB(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kn(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=CB(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!zo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=_V(r,i.root,this.visualElement.getTransformPagePoint());let c=mB(i.layout.layoutBox,s);if(n){const u=n(VV(c));this.hasMutatedConstraints=!!u,u&&(c=bC(u))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),f=this.constraints||{},g=kn(d=>{if(!Iu(d,n,this.currentDirection))return;let h=f&&f[d]||{};c&&(h={min:0,max:0});const y=i?200:1e6,v=i?40:1e7,S={type:"inertia",velocity:r?e[d]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,S)});return Promise.all(g).then(u)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return cp(this.visualElement,e),r.start(ud(e,r,0,n,this.visualElement,!1))}stopAnimation(){kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){kn(n=>{const{drag:r}=this.getProps();if(!Iu(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[n],f=s.get()||0;s.set(e[n]-it(c,u,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!zo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};kn(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const f=u.get();i[c]=SB({min:f,max:f},this.constraints[c])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kn(c=>{if(!Iu(c,e,null))return;const u=this.getAxisMotionValue(c),{min:f,max:g}=this.constraints[c];u.set(it(f,g,i[c]))})}addListeners(){if(!this.visualElement.current)return;MB.set(this.visualElement,this);const e=this.visualElement.current,n=Jo(e,"pointerdown",f=>{const{drag:g,dragListener:d=!0}=this.getProps(),h=f.target,y=h!==e&&EC(h);g&&d&&!y&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();zo(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ie.read(r);const c=uc(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(kn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=f[d].translate,h.set(h.get()+f[d].translate))}),this.visualElement.render())}));return()=>{c(),n(),s(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:c=dp,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:c,dragMomentum:u}}}function Iu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function OB(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DB extends ba{constructor(e){super(e),this.removeGroupControls=jn,this.removeListeners=jn,this.controls=new wB(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||jn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const bm=t=>(e,n)=>{t&&Ie.postRender(()=>t(e,n))};class RB extends ba{constructor(){super(...arguments),this.removePointerDownListener=jn}onPointerDown(e){this.session=new oE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:bm(e),onStart:bm(n),onMove:r,onEnd:(s,c)=>{delete this.session,i&&Ie.postRender(()=>i(s,c))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let lh=!1;class bB extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),lh&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Ol.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:c}=r;return c&&(c.isPresent=s,e.layoutDependency!==n&&c.setOptions({...c.options,layoutDependency:n}),lh=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?c.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?c.promote():c.relegate()||Ie.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),hd.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;lh=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uE(t){const[e,n]=FN(),r=I.useContext(RS);return L.jsx(bB,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(aE),isPresent:e,safeToRemove:n})}const LB={pan:{Feature:RB},drag:{Feature:DB,ProjectionNode:QC,MeasureLayout:uE}};function Lm(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ie.postRender(()=>s(e,Cc(e)))}class VB extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=xV(e,(n,r)=>(Lm(this.node,r,"Start"),i=>Lm(this.node,i,"End"))))}unmount(){}}class NB extends ba{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tc(uc(this.node.current,"focus",()=>this.onFocus()),uc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Vm(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ie.postRender(()=>s(e,Cc(e)))}class BB extends ba{mount(){const{current:e}=this.node;e&&(this.unmount=SV(e,(n,r)=>(Vm(this.node,r,"Start"),(i,{success:s})=>Vm(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const yp=new WeakMap,fh=new WeakMap,_B=t=>{const e=yp.get(t.target);e&&e(t)},UB=t=>{t.forEach(_B)};function kB({root:t,...e}){const n=t||document;fh.has(n)||fh.set(n,{});const r=fh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(UB,{root:t,...e})),r[i]}function FB(t,e,n){const r=kB(e);return yp.set(t,n),r.observe(t),()=>{yp.delete(t),r.unobserve(t)}}const GB={some:0,all:1};class zB extends ba{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:GB[i]},u=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,s&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),y=g?d:h;y&&y(f)};return FB(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AB(e,n))&&this.startObserver()}unmount(){}}function AB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jB={inView:{Feature:zB},tap:{Feature:BB},focus:{Feature:NB},hover:{Feature:VB}},HB={layout:{ProjectionNode:QC,MeasureLayout:uE}},$B={...hB,...jB,...LB,...HB},cr=cB($B,uB);const WB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KB=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Nm=t=>{const e=KB(t);return e.charAt(0).toUpperCase()+e.slice(1)},lE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),XB=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var YB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qB=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:c,...u},f)=>I.createElement("svg",{ref:f,...YB,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:lE("lucide",i),...!s&&!XB(u)&&{"aria-hidden":"true"},...u},[...c.map(([g,d])=>I.createElement(g,d)),...Array.isArray(s)?s:[s]]));const Xe=(t,e)=>{const n=I.forwardRef(({className:r,...i},s)=>I.createElement(qB,{ref:s,iconNode:e,className:lE(`lucide-${WB(Nm(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Nm(t),n};const ZB=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],QB=Xe("arrow-left",ZB);const JB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],PB=Xe("arrow-right",JB);const IB=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],e_=Xe("arrow-up",IB);const t_=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],n_=Xe("book-open",t_);const r_=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],a_=Xe("box",r_);const i_=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],s_=Xe("building-2",i_);const o_=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],c_=Xe("check",o_);const u_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],l_=Xe("circle-alert",u_);const f_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],g_=Xe("eye-off",f_);const h_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bm=Xe("eye",h_);const p_=[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.8",key:"1kchwa"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}],["path",{d:"M3 13.1a2 2 0 0 0-.999 1.76v3.24a2 2 0 0 0 .969 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01z",key:"19flxy"}],["path",{d:"M7 17v5",key:"1yj1jh"}]],d_=Xe("file-box",p_);const y_=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Po=Xe("folder-open",y_);const v_=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],x_=Xe("grid-3x3",v_);const T_=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Sd=Xe("layers",T_);const m_=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],S_=Xe("layout-template",m_);const C_=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],E_=Xe("maximize",C_);const M_=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],w_=Xe("mouse-pointer-2",M_);const O_=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],D_=Xe("play",O_);const R_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vi=Xe("plus",R_);const b_=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fE=Xe("save",b_);const L_=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gE=Xe("settings",L_);const V_=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],N_=Xe("ship",V_);const B_=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],_m=Xe("terminal",B_);const __=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ec=Xe("trash-2",__);const U_=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hE=Xe("x",U_);const k_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],F_=Xe("zoom-in",k_);const G_=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],z_=Xe("zoom-out",G_);function A_({onClose:t}){const[e,n]=I.useState({freecad_path:"",salome_path:"",aster_path:""}),[r,i]=I.useState(!1),[s,c]=I.useState(null);I.useEffect(()=>{async function g(){try{const h=await(await fetch("/api/get_settings")).json();h.status==="success"&&h.settings&&n({freecad_path:h.settings.freecad_path||"",salome_path:h.settings.salome_path||"",aster_path:h.settings.aster_path||""})}catch(d){console.error("Failed to load settings",d)}}g()},[]);const u=async g=>{try{const h=await(await fetch("/api/open_folder_dialog")).json();h.status==="success"&&h.path&&n(y=>({...y,[g]:h.path}))}catch(d){console.error("Failed to open dialog:",d)}},f=async()=>{i(!0);try{const d=await(await fetch("/api/save_settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();d.status==="success"?(c({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>c(null),3e3)):c({type:"error",text:"Failed: "+d.message})}catch{c({type:"error",text:"Failed to save settings"})}finally{i(!1)}};return L.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:L.jsxs(cr.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-2xl mx-4",children:[L.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx(gE,{className:"w-6 h-6 text-blue-400"}),L.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Application Settings"})]}),L.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-200 transition-colors",children:""})]}),L.jsxs("div",{className:"p-6 space-y-6",children:[s&&L.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${s.type==="success"?"bg-green-500/10 border border-green-500/20 text-green-400":"bg-red-500/10 border border-red-500/20 text-red-400"}`,children:[L.jsx(l_,{className:"w-5 h-5"}),L.jsx("span",{className:"text-sm",children:s.text})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"FreeCAD Executable"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"text",value:e.freecad_path,onChange:g=>n(d=>({...d,freecad_path:g.target.value})),placeholder:"C:\\Program Files\\FreeCAD\\bin\\FreeCAD.exe",className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:outline-none focus:border-blue-500 transition-colors font-mono text-sm"}),L.jsxs("button",{onClick:()=>u("freecad_path"),className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[L.jsx(Po,{className:"w-4 h-4"}),"Browse"]})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Salome Executable"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"text",value:e.salome_path,onChange:g=>n(d=>({...d,salome_path:g.target.value})),placeholder:"C:\\SALOME\\salome.bat",className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:outline-none focus:border-blue-500 transition-colors font-mono text-sm"}),L.jsxs("button",{onClick:()=>u("salome_path"),className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[L.jsx(Po,{className:"w-4 h-4"}),"Browse"]})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Code_Aster Path"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{type:"text",value:e.aster_path,onChange:g=>n(d=>({...d,aster_path:g.target.value})),placeholder:"C:\\CodeAster\\bin\\as_run",className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:outline-none focus:border-blue-500 transition-colors font-mono text-sm"}),L.jsxs("button",{onClick:()=>u("aster_path"),className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[L.jsx(Po,{className:"w-4 h-4"}),"Browse"]})]})]})]}),L.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-700",children:[L.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:"Cancel"}),L.jsxs("button",{onClick:f,disabled:r,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:[L.jsx(fE,{className:"w-4 h-4"}),r?"Saving...":"Save Settings"]})]})]})})}function j_({onNavigate:t}){const[e,n]=I.useState(!1);return L.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8",children:[L.jsx(cr.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>n(!0),className:"absolute top-6 right-6 p-3 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700 hover:border-slate-600 rounded-lg transition-all",children:L.jsx(gE,{className:"w-5 h-5 text-slate-400 hover:text-slate-200"})}),L.jsx(cr.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-5xl font-light mb-16 text-slate-100 tracking-tight",children:"ProSolve Professional"}),L.jsxs("div",{className:"grid grid-cols-3 gap-8 max-w-6xl w-full",children:[L.jsxs(cr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>t("structural"),className:"group relative bg-slate-800/50 backdrop-blur-sm hover:bg-slate-700/50 border border-slate-700 hover:border-blue-500 p-10 rounded-2xl cursor-pointer transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),L.jsx(s_,{className:"w-12 h-12 mb-6 text-blue-400 group-hover:text-blue-300 transition-colors"}),L.jsx("h2",{className:"text-3xl font-bold mb-3 text-slate-100 group-hover:text-blue-300 transition-colors",children:"Structural"}),L.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"FEA Analysis & Modeling with Code_Aster"})]}),L.jsxs(cr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative bg-slate-800/30 border border-slate-800 p-10 rounded-2xl opacity-50 cursor-not-allowed",children:[L.jsx(N_,{className:"w-12 h-12 mb-6 text-slate-600"}),L.jsx("h2",{className:"text-3xl font-bold mb-3 text-slate-500",children:"Marine"}),L.jsx("p",{className:"text-slate-600 text-sm",children:"Coming soon..."})]}),L.jsxs(cr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"group relative bg-slate-800/50 backdrop-blur-sm hover:bg-slate-700/50 border border-slate-700 hover:border-purple-500 p-10 rounded-2xl cursor-pointer transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:[L.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),L.jsx(n_,{className:"w-12 h-12 mb-6 text-purple-400 group-hover:text-purple-300 transition-colors"}),L.jsx("h2",{className:"text-3xl font-bold mb-3 text-slate-100 group-hover:text-purple-300 transition-colors",children:"Utility"}),L.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Calculation Tools & Engineering Notebooks"})]})]}),e&&L.jsx(A_,{onClose:()=>n(!1)})]})}const gh={"1D":[{value:"POU_D_T",label:"Beam (Timoshenko) - POU_D_T"},{value:"POU_D_E",label:"Beam (Euler) - POU_D_E"},{value:"BARRE",label:"Truss/Bar - BARRE"},{value:"CABLE",label:"Cable - CABLE"}],"2D":[{value:"DKT",label:"Plate (Thin) - DKT"},{value:"DST",label:"Plate (Thick) - DST"},{value:"COQUE_3D",label:"Shell 3D - COQUE_3D"},{value:"MEMBRANE",label:"Membrane - MEMBRANE"},{value:"C_PLAN",label:"Plane Strain - C_PLAN"},{value:"D_PLAN",label:"Plane Stress - D_PLAN"},{value:"AXIS",label:"Axisymmetric - AXIS"}],"3D":[{value:"3D",label:"Solid/Volume - 3D"}]};function H_({projectPath:t,meshGroups:e,currentGeometries:n=[],onUpdate:r}){const[i,s]=I.useState([]),c=I.useRef(!0),u=I.useRef(""),f=I.useRef("");I.useEffect(()=>{},[e]),I.useEffect(()=>{if(c.current){c.current=!1;return}if(r){const S=i.filter(m=>m.selected).map(m=>({group:m.name,_meshFile:m.meshFile,...n.find(O=>O.group===m.name&&O._meshFile===m.meshFile)||{},type:m.model,formulation:m.model==="DKT"||m.model==="DST"?m.model:void 0,phenomenon:"MECANIQUE",_category:m.category})),x=JSON.stringify(S);x!==f.current&&(f.current=x,r(S))}},[i,r]),I.useEffect(()=>{if(e){const S=JSON.stringify(Object.entries(e).map(([m,E])=>({file:m,groups:Object.keys(E).sort()})));if(S===u.current)return;u.current=S,console.log("MODEL_CHILD: Mapping independent meshGroups keys:",Object.keys(e));const x=[];Object.entries(e).forEach(([m,E])=>{Object.entries(E).forEach(([O,M])=>{const w=M.category||g(M.types||{}),D=M.types?Object.entries(M.types).map(([B,_])=>`${B}:${_}`).join(", "):w,R=n.find(B=>B.group===O&&B._meshFile===m);x.push({name:O,meshFile:m,selected:n.length>0?!!R:!0,count:M.count,composition:D,category:w,model:R?.type||d(w),phenomenon:"MECANIQUE"})})}),s(x)}},[e,n]);const g=S=>{const x=Object.keys(S);return x.some(m=>m==="Node")?"Node":x.some(m=>m.includes("HEXA")||m.includes("TETRA")||m.includes("PENTA"))?"3D":x.some(m=>m.includes("QUAD")||m.includes("TRIA"))?"2D":x.some(m=>m.includes("SEG"))?"1D":"3D"},d=S=>S==="Node"?"Node":S==="3D"?"3D":S==="2D"?"COQUE_3D":S==="1D"?"POU_D_T":"3D",h=S=>{const x=[...i];x[S].selected=!x[S].selected,s(x)},y=(S,x)=>{const m=[...i];m[S].model=x,s(m)},v=S=>{const x=i.map(m=>({...m,selected:S}));s(x)};return t?i.length===0?L.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-10 text-slate-400",children:[L.jsx("div",{className:"text-4xl mb-4 text-slate-600",children:""}),L.jsx("h3",{className:"text-xl font-bold text-slate-300 mb-2",children:"No Mesh Groups Detected"}),L.jsx("p",{className:"mb-6 text-center max-w-md text-sm",children:"Please scan workspace first from the Toolbar."}),L.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-slate-800 hover:bg-slate-700 rounded transition-colors border border-slate-600",children:"Refresh Data"})]}):L.jsxs("div",{className:"flex flex-col h-full w-full",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4 bg-slate-800/50 p-3 rounded-lg border border-slate-700",children:[L.jsxs("div",{className:"flex gap-2",children:[L.jsxs("button",{onClick:()=>v(!0),className:"px-3 py-1.5 text-xs font-semibold bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded transition-colors flex items-center gap-1",children:[L.jsx(c_,{className:"w-3 h-3"}),"Check All"]}),L.jsxs("button",{onClick:()=>v(!1),className:"px-3 py-1.5 text-xs font-semibold bg-slate-700 hover:bg-slate-600 border border-slate-600 rounded transition-colors flex items-center gap-1",children:[L.jsx(hE,{className:"w-3 h-3"}),"Uncheck All"]})]}),L.jsx("div",{className:"text-[10px] text-slate-500 uppercase font-bold tracking-wider",children:"Model Definition"})]}),L.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg overflow-hidden shadow-xl flex-1 flex flex-col",children:[L.jsx("div",{className:"overflow-y-auto flex-1",children:L.jsxs("table",{className:"w-full text-left border-collapse",children:[L.jsx("thead",{className:"bg-slate-950 text-slate-400 text-[10px] uppercase tracking-wider sticky top-0 z-10",children:L.jsxs("tr",{children:[L.jsx("th",{className:"p-3 w-12 text-center border-b border-slate-800",children:"Sel."}),L.jsx("th",{className:"p-3 w-1/4 border-b border-slate-800",children:"Mesh Source"}),L.jsx("th",{className:"p-3 w-1/4 border-b border-slate-800",children:"Group Name"}),L.jsx("th",{className:"p-3 w-1/4 border-b border-slate-800",children:"Composition"}),L.jsx("th",{className:"p-3 w-1/4 border-b border-slate-800",children:"Model Definition"})]})}),L.jsx("tbody",{className:"divide-y divide-slate-700/50 text-sm",children:i.map((S,x)=>S.category==="Node"||S.category==="Point"?null:L.jsxs("tr",{className:`transition-colors hover:bg-slate-700/30 ${S.selected?"":"opacity-50 grayscale-[50%]"}`,children:[L.jsx("td",{className:"p-3 text-center",children:L.jsx("input",{type:"checkbox",checked:S.selected,onChange:()=>h(x),className:"w-4 h-4 rounded border-slate-500 bg-slate-700 accent-blue-600 cursor-pointer"})}),L.jsx("td",{className:"p-3 text-xs font-mono text-slate-500 truncate max-w-[120px]",title:S.meshFile,children:S.meshFile}),L.jsx("td",{className:"p-3 font-mono font-medium text-blue-300",children:S.name}),L.jsx("td",{className:"p-3 text-xs text-slate-400 font-mono",children:S.composition}),L.jsx("td",{className:"p-3",children:L.jsxs("select",{value:S.model,onChange:m=>y(x,m.target.value),disabled:!S.selected,className:"w-full bg-slate-900 border border-slate-600 rounded px-2 py-1.5 text-xs focus:ring-1 focus:ring-blue-500 outline-none disabled:cursor-not-allowed transition-colors hover:border-slate-500",children:[S.category==="3D"&&L.jsx("optgroup",{label:"Volume (3D)",children:gh["3D"].map(m=>L.jsx("option",{value:m.value,children:m.label},m.value))}),S.category==="2D"&&L.jsx("optgroup",{label:"Plate / Shell (2D)",children:gh["2D"].map(m=>L.jsx("option",{value:m.value,children:m.label},m.value))}),S.category==="1D"&&L.jsx("optgroup",{label:"Beam / Truss (1D)",children:gh["1D"].map(m=>L.jsx("option",{value:m.value,children:m.label},m.value))})]})})]},x))})]})}),L.jsxs("div",{className:"bg-slate-950 p-2 border-t border-slate-800 text-[10px] text-slate-500 flex justify-between px-4",children:[L.jsxs("span",{children:["Detected Groups: ",i.length]}),L.jsxs("span",{children:["Selected: ",i.filter(S=>S.selected).length]})]})]})]}):L.jsx("div",{className:"p-10 text-center text-slate-500",children:"Please select a project."})}function $_({projectPath:t,availableGroups:e=[],nodeGroups:n=[],initialMaterials:r=[],onUpdate:i}){const s=I.useRef(!0),c=I.useMemo(()=>{const S=new Set(n);return e.filter(x=>!S.has(x))},[e,n]),[u,f]=I.useState([]),g=I.useRef(null);I.useEffect(()=>{if(t&&g.current!==t)if(r&&r.length>0){const S=r.map((x,m)=>({id:(m+1).toString(),name:x.name,E:(x.E/1e6).toString(),nu:(x.nu||0).toString(),rho:(x.rho||0).toString(),assignedGroups:x.assignedGroups||[]}));f(S),g.current=t}else u.length===0&&(f([{id:"1",name:"Steel_S355",E:"210000",nu:"0.3",rho:"7850",assignedGroups:[]}]),g.current=t)},[t,r]),I.useEffect(()=>{if(s.current){s.current=!1;return}if(i){const S=u.map(x=>({name:x.name,E:parseFloat(x.E)*1e6,nu:parseFloat(x.nu),rho:parseFloat(x.rho),assignedGroups:x.assignedGroups}));i(S)}},[u,i]);const d=()=>{const S=(u.length+1).toString();f([...u,{id:S,name:`Material_${S}`,E:"210000",nu:"0.3",rho:"7850",assignedGroups:[]}])},h=S=>{if(u.length===1){alert("At least one material is required");return}f(u.filter(x=>x.id!==S))},y=(S,x,m)=>{f(u.map(E=>E.id===S?{...E,[x]:m}:E))},v=(S,x)=>{const m=u.find(M=>M.id===S);if(!m)return;const E=m.assignedGroups||[],O=E.includes(x)?E.filter(M=>M!==x):[...E,x];y(S,"assignedGroups",O)};return t?L.jsxs("div",{className:"flex flex-col h-full w-full p-4 overflow-hidden",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[L.jsxs("div",{children:[L.jsxs("h3",{className:"text-xl font-bold text-slate-100 flex items-center gap-2",children:[L.jsx("span",{className:"p-2 bg-blue-500/20 rounded text-blue-400",children:""}),"Material Properties"]}),L.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Define properties and assign them to mesh groups."})]}),L.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-xl transition-all shadow-lg shadow-blue-500/20 active:scale-95",children:[L.jsx(vi,{className:"w-5 h-5"}),"Add Material"]})]}),L.jsx("div",{className:"space-y-6 flex-1 overflow-y-auto pr-2 custom-scrollbar",children:u.map(S=>L.jsxs("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-2xl p-6 shadow-xl hover:border-slate-600/50 transition-colors",children:[L.jsxs("div",{className:"flex justify-between items-start mb-6",children:[L.jsxs("div",{className:"flex-1 max-w-md",children:[L.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1 ml-1",children:"Material Identification"}),L.jsx("input",{type:"text",value:S.name,onChange:x=>y(S.id,"name",x.target.value),className:"w-full text-xl font-bold bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"Ex: Steel S355"})]}),L.jsx("button",{onClick:()=>h(S.id),className:"p-2.5 text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-xl transition-all ml-4",title:"Delete Material",disabled:u.length===1,children:L.jsx(Ec,{className:"w-5 h-5"})})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[L.jsxs("div",{className:"bg-slate-900/40 p-4 rounded-xl border border-slate-700/30",children:[L.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Young's Modulus E (MPa)"}),L.jsx("input",{type:"text",value:S.E,onChange:x=>y(S.id,"E",x.target.value),className:"w-full bg-transparent text-lg font-mono text-blue-300 focus:outline-none",placeholder:"210000"})]}),L.jsxs("div",{className:"bg-slate-900/40 p-4 rounded-xl border border-slate-700/30",children:[L.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Poisson's Ratio "}),L.jsx("input",{type:"text",value:S.nu,onChange:x=>y(S.id,"nu",x.target.value),className:"w-full bg-transparent text-lg font-mono text-blue-300 focus:outline-none",placeholder:"0.30"})]}),L.jsxs("div",{className:"bg-slate-900/40 p-4 rounded-xl border border-slate-700/30",children:[L.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2",children:"Density  (kg/m)"}),L.jsx("input",{type:"text",value:S.rho,onChange:x=>y(S.id,"rho",x.target.value),className:"w-full bg-transparent text-lg font-mono text-blue-300 focus:outline-none",placeholder:"7850"})]})]}),L.jsxs("div",{className:"border-t border-slate-700/50 pt-6",children:[L.jsxs("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[L.jsx(Sd,{className:"w-3.5 h-3.5"}),"Assigned Groups (Beams, Shells, Solids)"]}),c.length>0?L.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(x=>{const m=(S.assignedGroups||[]).includes(x),E=u.some(O=>O.id!==S.id&&O.assignedGroups.includes(x));return L.jsxs("button",{disabled:E,onClick:()=>v(S.id,x),className:`
                                                    px-3 py-1.5 rounded-lg text-xs font-medium border transition-all flex items-center gap-2
                                                    ${m?"bg-blue-500 border-blue-400 text-white shadow-lg shadow-blue-500/20":E?"bg-slate-800/30 border-slate-800 text-slate-700 cursor-not-allowed opacity-50":"bg-slate-900/50 border-slate-700 text-slate-400 hover:border-slate-500 hover:text-slate-200"}
                                                `,children:[m?"":"",x,E&&L.jsx("span",{className:"text-[9px] opacity-70",children:"(Used)"})]},x)})}):L.jsx("div",{className:"bg-slate-900/30 border border-dashed border-slate-700 rounded-xl p-4 text-center",children:L.jsx("p",{className:"text-xs text-slate-500 italic",children:"No mesh groups detected. Please open a project with valid mesh files."})})]})]},S.id))})]}):L.jsx("div",{className:"p-10 text-center text-slate-500",children:"Please select a project."})}function W_({projectPath:t,availableGroups:e=[],initialRestrictions:n=[],onUpdate:r}){const[i,s]=I.useState([]),c=I.useRef(!0),u=I.useRef("");I.useEffect(()=>{console.log("RESTRICTION_CHILD: Mounted. Initial Restrictions Prop:",n)},[]),I.useEffect(()=>{console.log("RESTRICTION_CHILD: Internal State Updated:",i)},[i]),I.useEffect(()=>{if(console.log("RESTRICTION_CHILD: Effect - initialRestrictions changed",n),n.length>0){console.log("RESTRICTION_CHILD: Loading from props...");const h=n.map((y,v)=>({id:(v+1).toString(),name:y.name,group:y.group,dx:y.dof?.DX!==null,dy:y.dof?.DY!==null,dz:y.dof?.DZ!==null,drx:y.dof?.DRX!==null,dry:y.dof?.DRY!==null,drz:y.dof?.DRZ!==null}));s(h)}},[n]),I.useEffect(()=>{if(c.current){c.current=!1;return}if(r){const h=i.map(v=>({name:String(v.name||""),group:String(v.group||""),dof:{DX:v.dx?0:null,DY:v.dy?0:null,DZ:v.dz?0:null,DRX:v.drx?0:null,DRY:v.dry?0:null,DRZ:v.drz?0:null}})),y=JSON.stringify(h);u.current!==y&&(u.current=y,r(h))}},[i,r]);const f=()=>{const h=(i.length+1).toString();s([...i,{id:h,name:`Restriction_${h}`,group:e[0]||"",dx:!0,dy:!0,dz:!0,drx:!1,dry:!1,drz:!1}])},g=h=>{s(i.filter(y=>y.id!==h))},d=(h,y,v)=>{s(i.map(S=>S.id===h?{...S,[y]:v}:S))};return t?L.jsxs("div",{className:"flex flex-col h-full w-full p-4",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Boundary Conditions (Restrictions)"}),L.jsxs("button",{onClick:f,disabled:e.length===0,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-colors disabled:opacity-50",children:[L.jsx(vi,{className:"w-4 h-4"}),"Add Restriction"]})]}),e.length===0&&L.jsx("div",{className:"text-center text-slate-400 p-10",children:"No mesh groups available. Please configure Model first."}),L.jsx("div",{className:"space-y-4 flex-1 overflow-y-auto",children:i.map(h=>L.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:[L.jsxs("div",{className:"flex justify-between items-start mb-4",children:[L.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Name"}),L.jsx("input",{type:"text",value:h.name,onChange:y=>d(h.id,"name",y.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-purple-500",placeholder:"Restriction Name"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Mesh Group"}),L.jsx("select",{value:h.group,onChange:y=>d(h.id,"group",y.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-purple-500",children:e.map(y=>L.jsx("option",{value:y,children:y},y))})]})]}),L.jsx("button",{onClick:()=>g(h.id),className:"ml-3 p-2 text-red-400 hover:bg-red-500/10 rounded transition-colors",children:L.jsx(Ec,{className:"w-4 h-4"})})]}),L.jsxs("div",{className:"border-t border-slate-700 pt-3",children:[L.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Restricted Degrees of Freedom:"}),L.jsx("div",{className:"grid grid-cols-6 gap-2",children:["dx","dy","dz","drx","dry","drz"].map(y=>L.jsxs("label",{className:"flex items-center gap-2 bg-slate-900/50 p-2 rounded cursor-pointer hover:bg-slate-900 transition-colors",children:[L.jsx("input",{type:"checkbox",checked:h[y],onChange:v=>d(h.id,y,v.target.checked),className:"w-4 h-4 rounded border-slate-500 bg-slate-700 accent-purple-600"}),L.jsx("span",{className:"text-xs font-mono uppercase",children:y})]},y))})]})]},h.id))})]}):L.jsx("div",{className:"p-10 text-center text-slate-500",children:"Please select a project."})}function K_({projectPath:t,availableGroups:e=[],initialLoads:n=[],onUpdate:r}){const[i,s]=I.useState([]),c=I.useRef(!0);I.useEffect(()=>{if(n.length>0&&i.length===0){const h=n.map((y,v)=>{let S="force";return y.type==="PESANTEUR"?S="gravity":y.type==="PRESSION"&&(S="pressure"),{id:(v+1).toString(),name:y.name,type:S,group:y.group||"",fx:y.fx?.toString()||"0",fy:y.fy?.toString()||"0",fz:y.fz?.toString()||"0",pressure:y.pressure?.toString()||"0",ax:y.direction?.[0]?.toString()||"0",ay:y.direction?.[1]?.toString()||"0",az:y.direction?.[2]?.toString()||"-1",intensity:y.gravite?.toString()||"9.81"}});s(h)}},[n]);const u=I.useRef("");I.useEffect(()=>{if(c.current){c.current=!1;return}if(r){const h=i.map(v=>v.type==="gravity"?{name:String(v.name||""),type:"PESANTEUR",direction:[parseFloat(v.ax||"0"),parseFloat(v.ay||"0"),parseFloat(v.az||"-1")],gravite:parseFloat(v.intensity||"9.81")}:v.type==="force"?{name:String(v.name||""),type:"FORCE_NODALE",group:String(v.group||""),fx:parseFloat(v.fx||"0"),fy:parseFloat(v.fy||"0"),fz:parseFloat(v.fz||"0")}:{name:String(v.name||""),type:"PRESSION",group:String(v.group||""),pressure:parseFloat(v.pressure||"0")}),y=JSON.stringify(h);u.current!==y&&(u.current=y,r(h))}},[i,r]);const f=h=>{const y=(i.length+1).toString(),v=h==="gravity"?"ACCEL":h==="force"?"Force":"Pressure";s([...i,{id:y,name:`${v}_${y}`,type:h,group:e[0]||"",fx:"0",fy:"0",fz:"0",pressure:"0",ax:"0",ay:"0",az:"-1",intensity:"9.81"}])},g=h=>{s(i.filter(y=>y.id!==h))},d=(h,y,v)=>{s(i.map(S=>S.id===h?{...S,[y]:v}:S))};return t?L.jsxs("div",{className:"flex flex-col h-full w-full p-4",children:[L.jsxs("div",{className:"flex justify-between items-center mb-4",children:[L.jsx("h3",{className:"text-lg font-semibold text-slate-200",children:"Load Definitions"}),L.jsxs("div",{className:"flex gap-2",children:[L.jsxs("button",{onClick:()=>f("gravity"),className:"flex items-center gap-2 px-3 py-2 bg-orange-600 hover:bg-orange-500 rounded-lg transition-colors text-sm",children:[L.jsx(vi,{className:"w-4 h-4"}),"Acceleration"]}),L.jsxs("button",{onClick:()=>f("force"),disabled:e.length===0,className:"flex items-center gap-2 px-3 py-2 bg-green-600 hover:bg-green-500 rounded-lg transition-colors text-sm disabled:opacity-50",children:[L.jsx(vi,{className:"w-4 h-4"}),"Force"]}),L.jsxs("button",{onClick:()=>f("pressure"),disabled:e.length===0,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors text-sm disabled:opacity-50",children:[L.jsx(vi,{className:"w-4 h-4"}),"Pressure"]})]})]}),L.jsxs("div",{className:"space-y-4 flex-1 overflow-y-auto",children:[i.map(h=>L.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:L.jsxs("div",{className:"flex justify-between items-start mb-4",children:[L.jsxs("div",{className:"flex-1",children:[L.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[L.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${h.type==="gravity"?"bg-orange-500/20 text-orange-400":h.type==="force"?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"}`,children:h.type==="gravity"?"ACCELERATION":h.type.toUpperCase()}),L.jsx("input",{type:"text",value:h.name,onChange:y=>d(h.id,"name",y.target.value),className:"flex-1 bg-slate-900 border border-slate-600 rounded px-3 py-1 text-sm focus:outline-none focus:border-blue-500",placeholder:"Load Name"})]}),h.type!=="gravity"&&L.jsxs("div",{className:"mb-3",children:[L.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Mesh Group"}),L.jsx("select",{value:h.group,onChange:y=>d(h.id,"group",y.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",children:e.map(y=>L.jsx("option",{value:y,children:y},y))})]}),h.type==="gravity"&&L.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[L.jsxs("div",{children:[L.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Intensity (m/s)"}),L.jsx("input",{type:"text",value:h.intensity,onChange:y=>d(h.id,"intensity",y.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-orange-500",placeholder:"9.81"})]}),["ax","ay","az"].map(y=>L.jsxs("div",{children:[L.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:["Dir ",y.slice(1).toUpperCase()]}),L.jsx("input",{type:"text",value:h[y],onChange:v=>d(h.id,y,v.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-orange-500",placeholder:"0"})]},y))]}),h.type==="force"&&L.jsx("div",{className:"grid grid-cols-3 gap-3",children:["fx","fy","fz"].map(y=>L.jsxs("div",{children:[L.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:[y.toUpperCase()," (N)"]}),L.jsx("input",{type:"number",value:h[y],onChange:v=>d(h.id,y,v.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-green-500",placeholder:"0"})]},y))}),h.type==="pressure"&&L.jsxs("div",{children:[L.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Pressure (Pa)"}),L.jsx("input",{type:"number",value:h.pressure,onChange:y=>d(h.id,"pressure",y.target.value),className:"w-full bg-slate-900 border border-slate-600 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"0"})]})]}),L.jsx("button",{onClick:()=>g(h.id),className:"ml-3 p-2 text-red-400 hover:bg-red-500/10 rounded transition-colors",children:L.jsx(Ec,{className:"w-4 h-4"})})]})},h.id)),i.length===0&&L.jsx("div",{className:"text-center text-slate-400 p-10",children:"No loads defined. Click a button above to add loads."})]})]}):L.jsx("div",{className:"p-10 text-center text-slate-500",children:"Please select a project."})}const hh={RECTANGLE:{label:"Solid Rectangle",default:{hy:100,hz:50,offset_y:0,offset_z:0,rotation:0}},BOX:{label:"Rectangular Tube",default:{hy:100,hz:50,t:5,offset_y:0,offset_z:0,rotation:0}},CIRCLE:{label:"Solid Circle",default:{r:50,offset_y:0,offset_z:0,rotation:0}},TUBE:{label:"Circular Tube",default:{r:50,t:5,offset_y:0,offset_z:0,rotation:0}},I_SECTION:{label:"I-Section",default:{h:200,tw:6.3,bf_top:100,tf_top:8,bf_bot:100,tf_bot:8,offset_y:0,offset_z:0,rotation:0}}},X_={thickness:10,offset:0,vx:1,vy:0,vz:0};function Y_({projectPath:t,availableGeometries:e=[],onUpdate:n}){const[r,i]=I.useState([]),[s,c]=I.useState(0),[u,f]=I.useState(null),[g,d]=I.useState(null),[h,y]=I.useState(!1),[v,S]=I.useState(null),[x,m]=I.useState(55),E=I.useRef(null),O=I.useRef(!1);I.useEffect(()=>{if(e.length>0&&r.length===0){const A=e.filter($=>{const K=$._category||"";return K==="1D"||K==="2D"}).map($=>{const K=$._category==="1D",ee=$._category==="2D";let U={};return K?U={...hh.I_SECTION.default,...$.section_params||{}}:ee&&(U={...X_,...$.section_params||{}}),{...$,section_type:$.section_type||(K?"I_SECTION":"SHELL"),profile_name:$.profile_name||"Custom",section_params:U}});i(A)}},[e]),I.useEffect(()=>{r.length>0&&n&&n(r)},[r,n]),I.useEffect(()=>{r[s]&&(f(r[s].section_image||null),d(r[s].section_properties||null))},[s,r]);const M=async()=>{if(r.length===0)return;const A=r[s];if(!(A.type?.includes("POU")||A.type?.includes("BARRE"))){f(null),d(null);return}y(!0),S(null);try{const ee=await(await fetch("/api/calculate_section",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:A.section_type,params:A.section_params})})).json();if(ee.status==="success")f(ee.image),d(ee.properties),i(U=>U.map((q,re)=>re===s?{...q,section_properties:ee.properties,section_mesh:ee.mesh,section_image:ee.image}:q));else throw new Error(ee.message)}catch(K){S(`Error: ${K.message}`)}finally{y(!1)}},w=(A,$,K)=>{i(ee=>ee.map((U,q)=>q===A?{...U,profile_name:"Custom",section_params:{...U.section_params,[$]:K}}:U))},D=(A,$)=>{i(K=>K.map((ee,U)=>U===A?{...ee,section_type:$,profile_name:"Custom",section_params:{...hh[$].default}}:ee))},R=()=>{O.current=!0,document.body.style.cursor="col-resize"},B=()=>{O.current=!1,document.body.style.cursor=""},_=I.useCallback(A=>{if(!O.current||!E.current)return;const $=E.current.getBoundingClientRect();let K=(A.clientX-$.left)/$.width*100;K<30&&(K=30),K>70&&(K=70),m(K)},[]);if(I.useEffect(()=>()=>{r.some($=>{const K=$.type?.includes("DKT")||$.type?.includes("DST")||$.type?.includes("COQUE"),ee=parseFloat($.section_params?.thickness||"0");return K&&ee>0})&&t&&(console.log("GEOMETRY_CHILD: Leaving tab. Triggering MEDCoupling extrusion pre-calculation..."),fetch("/api/get_mesh_vtk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:t,geometries:r})}).catch($=>console.error("Extrusion pre-calc failed",$)))},[t,r]),I.useEffect(()=>(window.addEventListener("mouseup",B),window.addEventListener("mousemove",_),()=>{window.removeEventListener("mouseup",B),window.removeEventListener("mousemove",_)}),[_]),!t)return L.jsx("div",{className:"p-10 text-center text-slate-500",children:"Please select a project."});if(r.length===0)return L.jsx("div",{className:"p-10 text-center text-slate-500",children:"No 1D/2D groups found. Please configure Model first."});const G=r[s]||r[0],z=G._category==="1D",H=G._category==="2D";return L.jsxs("div",{className:"flex h-full w-full bg-slate-950 text-slate-200 text-sm overflow-hidden",children:[L.jsxs("div",{className:"w-56 border-r border-slate-800 bg-slate-950 flex flex-col shrink-0",children:[L.jsx("div",{className:"h-10 border-b border-slate-800 flex items-center px-4 bg-slate-950 shrink-0",children:L.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Mesh Groups"})}),L.jsx("div",{className:"flex-1 overflow-y-auto",children:r.map((A,$)=>L.jsxs("div",{onClick:()=>c($),className:`px-4 py-3 border-b border-slate-800/50 cursor-pointer flex justify-between items-center transition-colors ${s===$?"bg-blue-600/10 border-l-2 border-l-blue-500 text-white":"hover:bg-slate-900 text-slate-400 border-l-2 border-l-transparent"}`,children:[L.jsx("span",{className:"text-xs font-medium truncate w-28",title:A.group,children:A.group}),L.jsx("span",{className:"text-[9px] font-mono text-slate-500",children:A.type})]},$))})]}),L.jsxs("div",{className:"flex-1 flex overflow-hidden relative",ref:E,children:[L.jsxs("div",{style:{width:`${x}%`},className:"flex flex-col border-r border-slate-800 bg-slate-900 h-full min-w-[350px]",children:[L.jsxs("div",{className:"h-12 border-b border-slate-800 flex items-center justify-between px-4 bg-slate-900 shrink-0",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),L.jsx("span",{className:"text-[10px] font-bold text-blue-400 uppercase tracking-widest",children:"Definition"}),L.jsx("span",{className:"text-[10px] text-slate-500 font-mono bg-slate-800 px-2 py-0.5 rounded border border-slate-700 ml-2",children:G.group})]}),z&&L.jsx("div",{className:"flex items-center gap-3",children:L.jsx("button",{onClick:M,disabled:h,className:`px-2 py-1 rounded text-[9px] font-bold uppercase border transition-all bg-blue-600 hover:bg-blue-500 text-white border-blue-500 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"PROCESSING...":"CALCULATE"})})]}),L.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[z&&L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"grid grid-cols-2 gap-4",children:L.jsxs("div",{children:[L.jsx("label",{className:"text-[10px] font-bold text-blue-400 uppercase mb-1.5 block",children:"Profile Type"}),L.jsx("select",{className:"w-full bg-slate-950 border border-slate-700 text-xs rounded p-2.5 outline-none focus:border-blue-500",value:G.section_type||"I_SECTION",onChange:A=>D(s,A.target.value),children:Object.entries(hh).map(([A,$])=>L.jsx("option",{value:A,children:$.label},A))})]})}),L.jsxs("div",{children:[L.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block border-b border-slate-800 pb-1",children:"Dimensions & Position (mm / deg)"}),L.jsx("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:Object.entries(G.section_params||{}).map(([A,$])=>{const K=A.includes("offset"),ee=A==="rotation";let U="bg-slate-800 border-slate-700 text-slate-400",q="border-slate-700 focus:border-blue-500",re=A;return K?(U="bg-purple-900/30 border-purple-800 text-purple-400",q="border-purple-800 focus:border-purple-500",re=A.replace("offset_","off_")):ee&&(U="bg-orange-900/30 border-orange-800 text-orange-400",q="border-orange-800 focus:border-orange-500",re="rot"),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:`absolute inset-y-0 left-0 w-16 rounded-l border-y border-l flex items-center justify-center text-[9px] font-bold uppercase ${U}`,children:re}),L.jsx("input",{type:"text",className:`w-full bg-slate-900 border text-white text-sm rounded pl-20 pr-2 py-1.5 outline-none font-mono transition-all ${q}`,value:$||"",onChange:J=>w(s,A,J.target.value)})]},A)})})]}),g&&L.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-800",children:[L.jsx("div",{className:"text-[10px] font-bold text-green-500 uppercase mb-3",children:" Calculated Properties"}),L.jsxs("div",{className:"space-y-4 text-xs",children:[L.jsxs("div",{children:[L.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase mb-1",children:"Geometric"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsx(kt,{label:"Area (A)",value:g["Area (A)"]}),L.jsx(kt,{label:"Centroid Y",value:g["Centroid Y (cy)"]}),L.jsx(kt,{label:"Centroid Z",value:g["Centroid Z (cx)"]})]})]}),L.jsxs("div",{children:[L.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase mb-1",children:"Principal (Local)"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsx(kt,{label:"Iyy (Local)",value:g["Iyy (Local)"]}),L.jsx(kt,{label:"Izz (Local)",value:g["Izz (Local)"]}),L.jsx(kt,{label:"Angle (deg)",value:g["Angle (deg)"]}),L.jsx(kt,{label:"I1 (Principal)",value:g["I1 (Principal)"]}),L.jsx(kt,{label:"I2 (Principal)",value:g["I2 (Principal)"]})]})]}),L.jsxs("div",{children:[L.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase mb-1",children:"Nodal (At 0,0)"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsx(kt,{label:"Iyy (Node)",value:g["Iyy (Node 0,0)"],highlight:!0}),L.jsx(kt,{label:"Izz (Node)",value:g["Izz (Node 0,0)"],highlight:!0}),L.jsx(kt,{label:"Iyz (Node)",value:g["Iyz (Node 0,0)"]}),L.jsx(kt,{label:"Torsion J",value:g["Torsion J"],highlight:!0}),L.jsx(kt,{label:"Warping Iw",value:g["Warping Iw"]})]})]}),L.jsxs("div",{children:[L.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase mb-1",children:"Mechanical"}),L.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[L.jsx(kt,{label:"Shear Ay",value:g["Shear Area Ay"]}),L.jsx(kt,{label:"Shear Az",value:g["Shear Area Az"]}),L.jsx(kt,{label:"Elast. Wy",value:g["Elastic Mod. Wy (Zxx)"]}),L.jsx(kt,{label:"Elast. Wz",value:g["Elastic Mod. Wz (Zyy)"]})]})]})]})]})]}),H&&L.jsxs("div",{className:"space-y-6",children:[L.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 w-24 rounded-l border-y border-l bg-slate-800 border-slate-700 text-slate-400 flex items-center justify-center text-[9px] font-bold uppercase",children:"Thickness"}),L.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-700 focus:border-blue-500 text-sm rounded pl-28 pr-2 py-1.5 outline-none font-mono",value:G.section_params?.thickness||0,onChange:A=>w(s,"thickness",A.target.value)})]}),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 w-24 rounded-l border-y border-l bg-slate-800 border-slate-700 text-slate-400 flex items-center justify-center text-[9px] font-bold uppercase",children:"Eccentricity"}),L.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-700 focus:border-blue-500 text-sm rounded pl-28 pr-2 py-1.5 outline-none font-mono",value:G.section_params?.offset||0,onChange:A=>w(s,"offset",A.target.value)})]})]}),L.jsxs("div",{children:[L.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase mb-2 block border-b border-slate-800 pb-1",children:"Normal Vector"}),L.jsx("div",{className:"grid grid-cols-3 gap-2",children:["vx","vy","vz"].map(A=>L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 w-8 rounded-l border-y border-l bg-slate-800 border-slate-700 text-slate-400 flex items-center justify-center text-[9px] font-bold uppercase",children:A.toUpperCase()}),L.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-700 focus:border-blue-500 text-sm rounded pl-10 pr-2 py-1.5 outline-none font-mono",value:G.section_params?.[A]||0,onChange:$=>w(s,A,$.target.value)})]},A))})]})]})]})]}),L.jsx("div",{className:"w-1 bg-slate-950 hover:bg-blue-600 cursor-col-resize z-20",onMouseDown:R}),L.jsxs("div",{className:"flex-1 flex flex-col bg-white relative min-w-[200px]",children:[L.jsx("div",{className:"h-12 border-b border-slate-200 flex items-center px-4 bg-slate-50 shrink-0",children:L.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Section Preview"})}),L.jsx("div",{className:"flex-1 flex items-center justify-center",children:h?L.jsx("div",{className:"text-blue-500 animate-pulse",children:"Processing..."}):v?L.jsx("div",{className:"text-red-500 text-xs p-4",children:v}):u?L.jsx("img",{src:u,alt:"Section",className:"max-w-full max-h-full object-contain"}):z?L.jsxs("div",{className:"text-slate-300 text-center",children:[L.jsx("span",{className:"text-5xl opacity-20",children:""}),L.jsx("p",{className:"text-xs mt-2",children:"No Geometry"})]}):L.jsxs("div",{className:"text-slate-300 text-center",children:[L.jsx("span",{className:"text-5xl opacity-20",children:""}),L.jsx("p",{className:"text-xs mt-2",children:"3D Shell Element"})]})})]})]})]})}const kt=({label:t,value:e,highlight:n})=>{const r=i=>i==null?"-":typeof i!="number"?i:Math.abs(i)<1e-9?"0.00":Math.abs(i)<.001||Math.abs(i)>1e5?i.toExponential(3):i.toFixed(2);return L.jsxs("div",{className:`flex justify-between px-2 py-1 rounded border ${n?"bg-purple-900/20 border-purple-500/30":"bg-slate-950/50 border-slate-800"}`,children:[L.jsx("span",{className:"text-[9px] text-slate-500",children:t}),L.jsx("span",{className:`text-[10px] font-mono ${n?"text-white font-bold":"text-blue-300"}`,children:r(e)})]})};function q_({projectPath:t,availableLoads:e=[],availableRestrictions:n=[],availableGroups:r=[],initialLoadCases:i=[],onUpdate:s}){const c=I.useRef(!0),[u,f]=I.useState([]),g=I.useRef(null);I.useEffect(()=>{if(t&&g.current!==t)if(i&&i.length>0){const S=i.map((x,m)=>({id:(m+1).toString(),name:x.name,loads:x.loads||[],restrictions:x.restrictions||[]}));f(S),g.current=t}else u.length===0&&(f([{id:"1",name:"Case 1",loads:[],restrictions:[]}]),g.current=t)},[t,i]),I.useEffect(()=>{if(c.current){c.current=!1;return}s&&t===g.current&&s(u.map(S=>({name:S.name,loads:S.loads,restrictions:S.restrictions})))},[u,s,t]);const d=()=>{const S=(u.length+1).toString();f([...u,{id:S,name:`Case ${S}`,loads:[],restrictions:[]}])},h=S=>{f(u.filter(x=>x.id!==S))},y=(S,x)=>{f(u.map(m=>m.id===S?{...m,name:x}:m))},v=(S,x,m)=>{f(u.map(E=>{if(E.id!==S)return E;const O=E[x]||[],w=O.includes(m)?O.filter(D=>D!==m):[...O,m];return{...E,[x]:w}}))};return t?L.jsxs("div",{className:"flex flex-col h-full w-full p-4 overflow-hidden",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6 shrink-0",children:[L.jsxs("div",{children:[L.jsxs("h3",{className:"text-xl font-bold text-slate-100 flex items-center gap-2",children:[L.jsx("span",{className:"p-2 bg-indigo-500/20 rounded text-indigo-400",children:""}),"Load Cases (Combinations)"]}),L.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Combine boundary conditions and structural loads."})]}),L.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 hover:bg-blue-500 text-white font-semibold rounded-xl transition-all shadow-lg shadow-blue-500/20 active:scale-95",children:[L.jsx(vi,{className:"w-5 h-5"}),"New Case"]})]}),L.jsx("div",{className:"flex-1 overflow-y-auto space-y-6 pr-2 custom-scrollbar",children:u.map(S=>L.jsxs("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700/50 rounded-2xl p-6 shadow-xl hover:border-slate-600/50 transition-colors",children:[L.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-slate-700/50 pb-4",children:[L.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[L.jsxs("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest bg-slate-900/80 px-3 py-1.5 rounded-lg border border-slate-700",children:["CASE ID: ",S.id]}),L.jsx("input",{type:"text",value:S.name,onChange:x=>y(S.id,x.target.value),className:"bg-slate-900/50 border border-slate-700 rounded-xl px-4 py-2 text-lg font-bold text-white focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all min-w-[300px]",placeholder:"Enter case name..."})]}),L.jsx("button",{onClick:()=>h(S.id),className:"p-2.5 text-slate-500 hover:text-red-400 hover:bg-red-400/10 rounded-xl transition-all",title:"Delete Case",children:L.jsx(Ec,{className:"w-5 h-5"})})]}),L.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"flex items-center gap-2 text-blue-400",children:[L.jsx(Sd,{className:"w-4 h-4"}),L.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest",children:"Included Loads"})]}),L.jsx("div",{className:"bg-slate-900/40 p-4 rounded-xl border border-slate-700/30 flex flex-wrap gap-2 min-h-[60px]",children:e.length===0?L.jsx("span",{className:"text-xs text-slate-600 italic",children:"No loads available."}):e.map(x=>{const m=S.loads.includes(x.name);return L.jsx("button",{onClick:()=>v(S.id,"loads",x.name),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all ${m?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:x.name},x.name)})})]}),L.jsxs("div",{className:"space-y-4",children:[L.jsxs("div",{className:"flex items-center gap-2 text-orange-400",children:[L.jsx("button",{className:"p-0 border-0 bg-transparent text-inherit cursor-default",children:L.jsx(vi,{className:"w-4 h-4"})}),L.jsx("h4",{className:"text-xs font-bold uppercase tracking-widest",children:"Boundary Conditions (Restrictions)"})]}),L.jsx("div",{className:"bg-slate-900/40 p-4 rounded-xl border border-slate-700/30 flex flex-wrap gap-2 min-h-[60px]",children:n.length===0&&r.length===0?L.jsx("span",{className:"text-xs text-slate-600 italic",children:"No restrictions or groups found."}):(n.length>0?n:r).map(x=>{const m=typeof x=="string"?x:x.name,E=(S.restrictions||[]).includes(m);return L.jsx("button",{onClick:()=>v(S.id,"restrictions",m),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-all ${E?"bg-orange-600 border-orange-500 text-white shadow-lg shadow-orange-500/20":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:m},m)})})]})]})]},S.id))})]}):L.jsx("div",{className:"p-10 text-center text-slate-500",children:"Please select a project."})}function Z_({projectPath:t,meshes:e}){return t?L.jsxs("div",{className:"flex flex-col h-full w-full p-4",children:[L.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Detected Meshes"}),e.length===0?L.jsx("div",{className:"p-10 text-center text-slate-500 border border-dashed border-slate-700 rounded-lg",children:"No .med files detected in project folder."}):L.jsx("div",{className:"space-y-3",children:e.map(n=>L.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-800 border border-slate-700 rounded-lg",children:[L.jsx(d_,{className:"w-8 h-8 text-blue-500"}),L.jsxs("div",{children:[L.jsx("div",{className:"text-sm font-bold text-slate-200",children:n}),L.jsxs("div",{className:"text-xs text-slate-500",children:["Status: ",L.jsx("span",{className:"text-green-500",children:"Ready for Inspection"})]})]})]},n))}),L.jsxs("div",{className:"mt-8 p-4 bg-slate-900/50 rounded text-xs text-slate-500",children:[L.jsx("p",{children:"Mesh inspection runs automatically when opening the project."}),L.jsxs("p",{children:["Ensure ",L.jsx("b",{children:"Code_Aster path"})," is correctly set in Settings to enable group detection."]})]})]}):null}var Le=1e-6,Lt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function pE(){var t=new Lt(9);return Lt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Cd(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function Q_(t){var e=new Lt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function J_(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function P_(t,e,n,r,i,s,c,u,f){var g=new Lt(9);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=s,g[6]=c,g[7]=u,g[8]=f,g}function I_(t,e,n,r,i,s,c,u,f,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=c,t[6]=u,t[7]=f,t[8]=g,t}function La(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function dE(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ed(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=e[4],u=e[5],f=e[6],g=e[7],d=e[8],h=d*c-u*g,y=-d*s+u*f,v=g*s-c*f,S=n*h+r*y+i*v;return S?(S=1/S,t[0]=h*S,t[1]=(-d*r+i*g)*S,t[2]=(u*r-i*c)*S,t[3]=y*S,t[4]=(d*n-i*f)*S,t[5]=(-u*n+i*s)*S,t[6]=v*S,t[7]=(-g*n+r*f)*S,t[8]=(c*n-r*s)*S,t):null}function eU(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=e[4],u=e[5],f=e[6],g=e[7],d=e[8];return t[0]=c*d-u*g,t[1]=i*g-r*d,t[2]=r*u-i*c,t[3]=u*f-s*d,t[4]=n*d-i*f,t[5]=i*s-n*u,t[6]=s*g-c*f,t[7]=r*f-n*g,t[8]=n*c-r*s,t}function tU(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],c=t[5],u=t[6],f=t[7],g=t[8];return e*(g*s-c*f)+n*(-g*i+c*u)+r*(f*i-s*u)}function yE(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3],u=e[4],f=e[5],g=e[6],d=e[7],h=e[8],y=n[0],v=n[1],S=n[2],x=n[3],m=n[4],E=n[5],O=n[6],M=n[7],w=n[8];return t[0]=y*r+v*c+S*g,t[1]=y*i+v*u+S*d,t[2]=y*s+v*f+S*h,t[3]=x*r+m*c+E*g,t[4]=x*i+m*u+E*d,t[5]=x*s+m*f+E*h,t[6]=O*r+M*c+w*g,t[7]=O*i+M*u+w*d,t[8]=O*s+M*f+w*h,t}function nU(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3],u=e[4],f=e[5],g=e[6],d=e[7],h=e[8],y=n[0],v=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=c,t[4]=u,t[5]=f,t[6]=y*r+v*c+g,t[7]=y*i+v*u+d,t[8]=y*s+v*f+h,t}function rU(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3],u=e[4],f=e[5],g=e[6],d=e[7],h=e[8],y=Math.sin(n),v=Math.cos(n);return t[0]=v*r+y*c,t[1]=v*i+y*u,t[2]=v*s+y*f,t[3]=v*c-y*r,t[4]=v*u-y*i,t[5]=v*f-y*s,t[6]=g,t[7]=d,t[8]=h,t}function aU(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function iU(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function sU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function oU(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function cU(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function uU(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=n+n,u=r+r,f=i+i,g=n*c,d=r*c,h=r*u,y=i*c,v=i*u,S=i*f,x=s*c,m=s*u,E=s*f;return t[0]=1-h-S,t[3]=d-E,t[6]=y+m,t[1]=d+E,t[4]=1-g-S,t[7]=v-x,t[2]=y-m,t[5]=v+x,t[8]=1-g-h,t}function lU(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=e[4],u=e[5],f=e[6],g=e[7],d=e[8],h=e[9],y=e[10],v=e[11],S=e[12],x=e[13],m=e[14],E=e[15],O=n*u-r*c,M=n*f-i*c,w=n*g-s*c,D=r*f-i*u,R=r*g-s*u,B=i*g-s*f,_=d*x-h*S,G=d*m-y*S,z=d*E-v*S,H=h*m-y*x,A=h*E-v*x,$=y*E-v*m,K=O*$-M*A+w*H+D*z-R*G+B*_;return K?(K=1/K,t[0]=(u*$-f*A+g*H)*K,t[1]=(f*z-c*$-g*G)*K,t[2]=(c*A-u*z+g*_)*K,t[3]=(i*A-r*$-s*H)*K,t[4]=(n*$-i*z+s*G)*K,t[5]=(r*z-n*A-s*_)*K,t[6]=(x*B-m*R+E*D)*K,t[7]=(m*w-S*B-E*M)*K,t[8]=(S*R-x*w+E*O)*K,t):null}function fU(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function gU(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function hU(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function pU(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function vE(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function dU(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function yU(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function vU(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function xU(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],c=t[4],u=t[5],f=t[6],g=t[7],d=t[8],h=e[0],y=e[1],v=e[2],S=e[3],x=e[4],m=e[5],E=e[6],O=e[7],M=e[8];return Math.abs(n-h)<=Le*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-y)<=Le*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-v)<=Le*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(s-S)<=Le*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-x)<=Le*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(u-m)<=Le*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(f-E)<=Le*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(g-O)<=Le*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(d-M)<=Le*Math.max(1,Math.abs(d),Math.abs(M))}var TU=yE,mU=vE;const SU=Object.freeze(Object.defineProperty({__proto__:null,add:pU,adjoint:eU,clone:Q_,copy:J_,create:pE,determinant:tU,equals:xU,exactEquals:vU,frob:hU,fromMat2d:cU,fromMat4:Cd,fromQuat:uU,fromRotation:sU,fromScaling:oU,fromTranslation:iU,fromValues:P_,identity:La,invert:Ed,mul:TU,multiply:yE,multiplyScalar:dU,multiplyScalarAndAdd:yU,normalFromMat4:lU,projection:fU,rotate:rU,scale:aU,set:I_,str:gU,sub:mU,subtract:vE,translate:nU,transpose:dE},Symbol.toStringTag,{value:"Module"}));function vf(){var t=new Lt(16);return Lt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function CU(t){var e=new Lt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function EU(t,e,n,r,i,s,c,u,f,g,d,h,y,v,S,x){var m=new Lt(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=s,m[6]=c,m[7]=u,m[8]=f,m[9]=g,m[10]=d,m[11]=h,m[12]=y,m[13]=v,m[14]=S,m[15]=x,m}function MU(t,e,n,r,i,s,c,u,f,g,d,h,y,v,S,x,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=c,t[6]=u,t[7]=f,t[8]=g,t[9]=d,t[10]=h,t[11]=y,t[12]=v,t[13]=S,t[14]=x,t[15]=m,t}function Ve(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],c=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=c,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Hn(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=e[4],u=e[5],f=e[6],g=e[7],d=e[8],h=e[9],y=e[10],v=e[11],S=e[12],x=e[13],m=e[14],E=e[15],O=n*u-r*c,M=n*f-i*c,w=n*g-s*c,D=r*f-i*u,R=r*g-s*u,B=i*g-s*f,_=d*x-h*S,G=d*m-y*S,z=d*E-v*S,H=h*m-y*x,A=h*E-v*x,$=y*E-v*m,K=O*$-M*A+w*H+D*z-R*G+B*_;return K?(K=1/K,t[0]=(u*$-f*A+g*H)*K,t[1]=(i*A-r*$-s*H)*K,t[2]=(x*B-m*R+E*D)*K,t[3]=(y*R-h*B-v*D)*K,t[4]=(f*z-c*$-g*G)*K,t[5]=(n*$-i*z+s*G)*K,t[6]=(m*w-S*B-E*M)*K,t[7]=(d*B-y*w+v*M)*K,t[8]=(c*A-u*z+g*_)*K,t[9]=(r*z-n*A-s*_)*K,t[10]=(S*R-x*w+E*O)*K,t[11]=(h*w-d*R-v*O)*K,t[12]=(u*G-c*H-f*_)*K,t[13]=(n*H-r*G+i*_)*K,t[14]=(x*M-S*D-m*O)*K,t[15]=(d*D-h*M+y*O)*K,t):null}function wU(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=e[4],u=e[5],f=e[6],g=e[7],d=e[8],h=e[9],y=e[10],v=e[11],S=e[12],x=e[13],m=e[14],E=e[15];return t[0]=u*(y*E-v*m)-h*(f*E-g*m)+x*(f*v-g*y),t[1]=-(r*(y*E-v*m)-h*(i*E-s*m)+x*(i*v-s*y)),t[2]=r*(f*E-g*m)-u*(i*E-s*m)+x*(i*g-s*f),t[3]=-(r*(f*v-g*y)-u*(i*v-s*y)+h*(i*g-s*f)),t[4]=-(c*(y*E-v*m)-d*(f*E-g*m)+S*(f*v-g*y)),t[5]=n*(y*E-v*m)-d*(i*E-s*m)+S*(i*v-s*y),t[6]=-(n*(f*E-g*m)-c*(i*E-s*m)+S*(i*g-s*f)),t[7]=n*(f*v-g*y)-c*(i*v-s*y)+d*(i*g-s*f),t[8]=c*(h*E-v*x)-d*(u*E-g*x)+S*(u*v-g*h),t[9]=-(n*(h*E-v*x)-d*(r*E-s*x)+S*(r*v-s*h)),t[10]=n*(u*E-g*x)-c*(r*E-s*x)+S*(r*g-s*u),t[11]=-(n*(u*v-g*h)-c*(r*v-s*h)+d*(r*g-s*u)),t[12]=-(c*(h*m-y*x)-d*(u*m-f*x)+S*(u*y-f*h)),t[13]=n*(h*m-y*x)-d*(r*m-i*x)+S*(r*y-i*h),t[14]=-(n*(u*m-f*x)-c*(r*m-i*x)+S*(r*f-i*u)),t[15]=n*(u*y-f*h)-c*(r*y-i*h)+d*(r*f-i*u),t}function OU(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],c=t[5],u=t[6],f=t[7],g=t[8],d=t[9],h=t[10],y=t[11],v=t[12],S=t[13],x=t[14],m=t[15],E=e*c-n*s,O=e*u-r*s,M=e*f-i*s,w=n*u-r*c,D=n*f-i*c,R=r*f-i*u,B=g*S-d*v,_=g*x-h*v,G=g*m-y*v,z=d*x-h*S,H=d*m-y*S,A=h*m-y*x;return E*A-O*H+M*z+w*G-D*_+R*B}function Qt(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3],u=e[4],f=e[5],g=e[6],d=e[7],h=e[8],y=e[9],v=e[10],S=e[11],x=e[12],m=e[13],E=e[14],O=e[15],M=n[0],w=n[1],D=n[2],R=n[3];return t[0]=M*r+w*u+D*h+R*x,t[1]=M*i+w*f+D*y+R*m,t[2]=M*s+w*g+D*v+R*E,t[3]=M*c+w*d+D*S+R*O,M=n[4],w=n[5],D=n[6],R=n[7],t[4]=M*r+w*u+D*h+R*x,t[5]=M*i+w*f+D*y+R*m,t[6]=M*s+w*g+D*v+R*E,t[7]=M*c+w*d+D*S+R*O,M=n[8],w=n[9],D=n[10],R=n[11],t[8]=M*r+w*u+D*h+R*x,t[9]=M*i+w*f+D*y+R*m,t[10]=M*s+w*g+D*v+R*E,t[11]=M*c+w*d+D*S+R*O,M=n[12],w=n[13],D=n[14],R=n[15],t[12]=M*r+w*u+D*h+R*x,t[13]=M*i+w*f+D*y+R*m,t[14]=M*s+w*g+D*v+R*E,t[15]=M*c+w*d+D*S+R*O,t}function Mt(t,e,n){var r=n[0],i=n[1],s=n[2],c,u,f,g,d,h,y,v,S,x,m,E;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(c=e[0],u=e[1],f=e[2],g=e[3],d=e[4],h=e[5],y=e[6],v=e[7],S=e[8],x=e[9],m=e[10],E=e[11],t[0]=c,t[1]=u,t[2]=f,t[3]=g,t[4]=d,t[5]=h,t[6]=y,t[7]=v,t[8]=S,t[9]=x,t[10]=m,t[11]=E,t[12]=c*r+d*i+S*s+e[12],t[13]=u*r+h*i+x*s+e[13],t[14]=f*r+y*i+m*s+e[14],t[15]=g*r+v*i+E*s+e[15]),t}function lc(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ir(t,e,n,r){var i=r[0],s=r[1],c=r[2],u=Math.hypot(i,s,c),f,g,d,h,y,v,S,x,m,E,O,M,w,D,R,B,_,G,z,H,A,$,K,ee;return u<Le?null:(u=1/u,i*=u,s*=u,c*=u,f=Math.sin(n),g=Math.cos(n),d=1-g,h=e[0],y=e[1],v=e[2],S=e[3],x=e[4],m=e[5],E=e[6],O=e[7],M=e[8],w=e[9],D=e[10],R=e[11],B=i*i*d+g,_=s*i*d+c*f,G=c*i*d-s*f,z=i*s*d-c*f,H=s*s*d+g,A=c*s*d+i*f,$=i*c*d+s*f,K=s*c*d-i*f,ee=c*c*d+g,t[0]=h*B+x*_+M*G,t[1]=y*B+m*_+w*G,t[2]=v*B+E*_+D*G,t[3]=S*B+O*_+R*G,t[4]=h*z+x*H+M*A,t[5]=y*z+m*H+w*A,t[6]=v*z+E*H+D*A,t[7]=S*z+O*H+R*A,t[8]=h*$+x*K+M*ee,t[9]=y*$+m*K+w*ee,t[10]=v*$+E*K+D*ee,t[11]=S*$+O*K+R*ee,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function xE(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],c=e[5],u=e[6],f=e[7],g=e[8],d=e[9],h=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+g*r,t[5]=c*i+d*r,t[6]=u*i+h*r,t[7]=f*i+y*r,t[8]=g*i-s*r,t[9]=d*i-c*r,t[10]=h*i-u*r,t[11]=y*i-f*r,t}function TE(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],c=e[1],u=e[2],f=e[3],g=e[8],d=e[9],h=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-g*r,t[1]=c*i-d*r,t[2]=u*i-h*r,t[3]=f*i-y*r,t[8]=s*r+g*i,t[9]=c*r+d*i,t[10]=u*r+h*i,t[11]=f*r+y*i,t}function mE(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],c=e[1],u=e[2],f=e[3],g=e[4],d=e[5],h=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+g*r,t[1]=c*i+d*r,t[2]=u*i+h*r,t[3]=f*i+y*r,t[4]=g*i-s*r,t[5]=d*i-c*r,t[6]=h*i-u*r,t[7]=y*i-f*r,t}function SE(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function CE(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DU(t,e,n){var r=n[0],i=n[1],s=n[2],c=Math.hypot(r,i,s),u,f,g;return c<Le?null:(c=1/c,r*=c,i*=c,s*=c,u=Math.sin(e),f=Math.cos(e),g=1-f,t[0]=r*r*g+f,t[1]=i*r*g+s*u,t[2]=s*r*g-i*u,t[3]=0,t[4]=r*i*g-s*u,t[5]=i*i*g+f,t[6]=s*i*g+r*u,t[7]=0,t[8]=r*s*g+i*u,t[9]=i*s*g-r*u,t[10]=s*s*g+f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function RU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function bU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LU(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function EE(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3],u=r+r,f=i+i,g=s+s,d=r*u,h=r*f,y=r*g,v=i*f,S=i*g,x=s*g,m=c*u,E=c*f,O=c*g;return t[0]=1-(v+x),t[1]=h+O,t[2]=y-E,t[3]=0,t[4]=h-O,t[5]=1-(d+x),t[6]=S+m,t[7]=0,t[8]=y+E,t[9]=S-m,t[10]=1-(d+v),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function VU(t,e){var n=new Lt(3),r=-e[0],i=-e[1],s=-e[2],c=e[3],u=e[4],f=e[5],g=e[6],d=e[7],h=r*r+i*i+s*s+c*c;return h>0?(n[0]=(u*c+d*r+f*s-g*i)*2/h,n[1]=(f*c+d*i+g*r-u*s)*2/h,n[2]=(g*c+d*s+u*i-f*r)*2/h):(n[0]=(u*c+d*r+f*s-g*i)*2,n[1]=(f*c+d*i+g*r-u*s)*2,n[2]=(g*c+d*s+u*i-f*r)*2),EE(t,e,n),t}function NU(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function ME(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],c=e[5],u=e[6],f=e[8],g=e[9],d=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,c,u),t[2]=Math.hypot(f,g,d),t}function vp(t,e){var n=new Lt(3);ME(n,e);var r=1/n[0],i=1/n[1],s=1/n[2],c=e[0]*r,u=e[1]*i,f=e[2]*s,g=e[4]*r,d=e[5]*i,h=e[6]*s,y=e[8]*r,v=e[9]*i,S=e[10]*s,x=c+d+S,m=0;return x>0?(m=Math.sqrt(x+1)*2,t[3]=.25*m,t[0]=(h-v)/m,t[1]=(y-f)/m,t[2]=(u-g)/m):c>d&&c>S?(m=Math.sqrt(1+c-d-S)*2,t[3]=(h-v)/m,t[0]=.25*m,t[1]=(u+g)/m,t[2]=(y+f)/m):d>S?(m=Math.sqrt(1+d-c-S)*2,t[3]=(y-f)/m,t[0]=(u+g)/m,t[1]=.25*m,t[2]=(h+v)/m):(m=Math.sqrt(1+S-c-d)*2,t[3]=(u-g)/m,t[0]=(y+f)/m,t[1]=(h+v)/m,t[2]=.25*m),t}function wE(t,e,n,r){var i=e[0],s=e[1],c=e[2],u=e[3],f=i+i,g=s+s,d=c+c,h=i*f,y=i*g,v=i*d,S=s*g,x=s*d,m=c*d,E=u*f,O=u*g,M=u*d,w=r[0],D=r[1],R=r[2];return t[0]=(1-(S+m))*w,t[1]=(y+M)*w,t[2]=(v-O)*w,t[3]=0,t[4]=(y-M)*D,t[5]=(1-(h+m))*D,t[6]=(x+E)*D,t[7]=0,t[8]=(v+O)*R,t[9]=(x-E)*R,t[10]=(1-(h+S))*R,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function BU(t,e,n,r,i){var s=e[0],c=e[1],u=e[2],f=e[3],g=s+s,d=c+c,h=u+u,y=s*g,v=s*d,S=s*h,x=c*d,m=c*h,E=u*h,O=f*g,M=f*d,w=f*h,D=r[0],R=r[1],B=r[2],_=i[0],G=i[1],z=i[2],H=(1-(x+E))*D,A=(v+w)*D,$=(S-M)*D,K=(v-w)*R,ee=(1-(y+E))*R,U=(m+O)*R,q=(S+M)*B,re=(m-O)*B,J=(1-(y+x))*B;return t[0]=H,t[1]=A,t[2]=$,t[3]=0,t[4]=K,t[5]=ee,t[6]=U,t[7]=0,t[8]=q,t[9]=re,t[10]=J,t[11]=0,t[12]=n[0]+_-(H*_+K*G+q*z),t[13]=n[1]+G-(A*_+ee*G+re*z),t[14]=n[2]+z-($*_+U*G+J*z),t[15]=1,t}function Io(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=n+n,u=r+r,f=i+i,g=n*c,d=r*c,h=r*u,y=i*c,v=i*u,S=i*f,x=s*c,m=s*u,E=s*f;return t[0]=1-h-S,t[1]=d+E,t[2]=y-m,t[3]=0,t[4]=d-E,t[5]=1-g-S,t[6]=v+x,t[7]=0,t[8]=y+m,t[9]=v-x,t[10]=1-g-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _U(t,e,n,r,i,s,c){var u=1/(n-e),f=1/(i-r),g=1/(s-c);return t[0]=s*2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*f,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(i+r)*f,t[10]=(c+s)*g,t[11]=-1,t[12]=0,t[13]=0,t[14]=c*s*2*g,t[15]=0,t}function OE(t,e,n,r,i){var s=1/Math.tan(e/2),c;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(c=1/(r-i),t[10]=(i+r)*c,t[14]=2*i*r*c):(t[10]=-1,t[14]=-2*r),t}var UU=OE;function kU(t,e,n,r,i){var s=1/Math.tan(e/2),c;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(c=1/(r-i),t[10]=i*c,t[14]=i*r*c):(t[10]=-1,t[14]=-r),t}function FU(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),c=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),f=2/(c+u),g=2/(i+s);return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=-((c-u)*f*.5),t[9]=(i-s)*g*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function DE(t,e,n,r,i,s,c){var u=1/(e-n),f=1/(r-i),g=1/(s-c);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*g,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*f,t[14]=(c+s)*g,t[15]=1,t}var RE=DE;function GU(t,e,n,r,i,s,c){var u=1/(e-n),f=1/(r-i),g=1/(s-c);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=g,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*f,t[14]=s*g,t[15]=1,t}function bE(t,e,n,r){var i,s,c,u,f,g,d,h,y,v,S=e[0],x=e[1],m=e[2],E=r[0],O=r[1],M=r[2],w=n[0],D=n[1],R=n[2];return Math.abs(S-w)<Le&&Math.abs(x-D)<Le&&Math.abs(m-R)<Le?Ve(t):(d=S-w,h=x-D,y=m-R,v=1/Math.hypot(d,h,y),d*=v,h*=v,y*=v,i=O*y-M*h,s=M*d-E*y,c=E*h-O*d,v=Math.hypot(i,s,c),v?(v=1/v,i*=v,s*=v,c*=v):(i=0,s=0,c=0),u=h*c-y*s,f=y*i-d*c,g=d*s-h*i,v=Math.hypot(u,f,g),v?(v=1/v,u*=v,f*=v,g*=v):(u=0,f=0,g=0),t[0]=i,t[1]=u,t[2]=d,t[3]=0,t[4]=s,t[5]=f,t[6]=h,t[7]=0,t[8]=c,t[9]=g,t[10]=y,t[11]=0,t[12]=-(i*S+s*x+c*m),t[13]=-(u*S+f*x+g*m),t[14]=-(d*S+h*x+y*m),t[15]=1,t)}function zU(t,e,n,r){var i=e[0],s=e[1],c=e[2],u=r[0],f=r[1],g=r[2],d=i-n[0],h=s-n[1],y=c-n[2],v=d*d+h*h+y*y;v>0&&(v=1/Math.sqrt(v),d*=v,h*=v,y*=v);var S=f*y-g*h,x=g*d-u*y,m=u*h-f*d;return v=S*S+x*x+m*m,v>0&&(v=1/Math.sqrt(v),S*=v,x*=v,m*=v),t[0]=S,t[1]=x,t[2]=m,t[3]=0,t[4]=h*m-y*x,t[5]=y*S-d*m,t[6]=d*x-h*S,t[7]=0,t[8]=d,t[9]=h,t[10]=y,t[11]=0,t[12]=i,t[13]=s,t[14]=c,t[15]=1,t}function AU(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function jU(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function HU(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function LE(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function $U(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function WU(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function KU(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function XU(t,e){var n=t[0],r=t[1],i=t[2],s=t[3],c=t[4],u=t[5],f=t[6],g=t[7],d=t[8],h=t[9],y=t[10],v=t[11],S=t[12],x=t[13],m=t[14],E=t[15],O=e[0],M=e[1],w=e[2],D=e[3],R=e[4],B=e[5],_=e[6],G=e[7],z=e[8],H=e[9],A=e[10],$=e[11],K=e[12],ee=e[13],U=e[14],q=e[15];return Math.abs(n-O)<=Le*Math.max(1,Math.abs(n),Math.abs(O))&&Math.abs(r-M)<=Le*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-w)<=Le*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-D)<=Le*Math.max(1,Math.abs(s),Math.abs(D))&&Math.abs(c-R)<=Le*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(u-B)<=Le*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(f-_)<=Le*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(g-G)<=Le*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(d-z)<=Le*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(h-H)<=Le*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(y-A)<=Le*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(v-$)<=Le*Math.max(1,Math.abs(v),Math.abs($))&&Math.abs(S-K)<=Le*Math.max(1,Math.abs(S),Math.abs(K))&&Math.abs(x-ee)<=Le*Math.max(1,Math.abs(x),Math.abs(ee))&&Math.abs(m-U)<=Le*Math.max(1,Math.abs(m),Math.abs(U))&&Math.abs(E-q)<=Le*Math.max(1,Math.abs(E),Math.abs(q))}var xp=Qt,YU=LE;const Tp=Object.freeze(Object.defineProperty({__proto__:null,add:HU,adjoint:wU,clone:CU,copy:$t,create:vf,determinant:OU,equals:XU,exactEquals:KU,frob:jU,fromQuat:Io,fromQuat2:VU,fromRotation:DU,fromRotationTranslation:EE,fromRotationTranslationScale:wE,fromRotationTranslationScaleOrigin:BU,fromScaling:CE,fromTranslation:SE,fromValues:EU,fromXRotation:RU,fromYRotation:bU,fromZRotation:LU,frustum:_U,getRotation:vp,getScaling:ME,getTranslation:NU,identity:Ve,invert:Hn,lookAt:bE,mul:xp,multiply:Qt,multiplyScalar:$U,multiplyScalarAndAdd:WU,ortho:RE,orthoNO:DE,orthoZO:GU,perspective:UU,perspectiveFromFieldOfView:FU,perspectiveNO:OE,perspectiveZO:kU,rotate:ir,rotateX:xE,rotateY:TE,rotateZ:mE,scale:lc,set:MU,str:AU,sub:YU,subtract:LE,targetTo:zU,translate:Mt,transpose:Pe},Symbol.toStringTag,{value:"Module"}));function VE(){var t=new Lt(3);return Lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function qU(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Um(t,e,n){var r=new Lt(3);return r[0]=t,r[1]=e,r[2]=n,r}function ZU(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ql(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ao(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ma(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function xa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function QU(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function JU(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function fc(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function NE(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ph(t,e,n){var r=e[0],i=e[1],s=e[2],c=n[0],u=n[1],f=n[2];return t[0]=i*f-s*u,t[1]=s*c-r*f,t[2]=r*u-i*c,t}function je(t,e,n){var r=e[0],i=e[1],s=e[2],c=n[3]*r+n[7]*i+n[11]*s+n[15];return c=c||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/c,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/c,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/c,t}function km(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Fm(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],c=e[1],u=e[2];return Math.abs(n-s)<=Le*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=Le*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=Le*Math.max(1,Math.abs(i),Math.abs(u))}var mp=Ma,PU=QU,BE=qU;(function(){var t=VE();return function(e,n,r,i,s,c){var u,f;for(n||(n=3),r||(r=0),i?f=Math.min(i*n+r,e.length):f=e.length,u=r;u<f;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],s(t,t,c),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}})();function IU(){var t=new Lt(4);return Lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function e4(t,e,n,r){var i=new Lt(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function t4(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],c=n*n+r*r+i*i+s*s;return c>0&&(c=1/Math.sqrt(c)),t[0]=n*c,t[1]=r*c,t[2]=i*c,t[3]=s*c,t}function No(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*c,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*c,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*c,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*c,t}(function(){var t=IU();return function(e,n,r,i,s,c){var u,f;for(n||(n=4),r||(r=0),i?f=Math.min(i*n+r,e.length):f=e.length,u=r;u<f;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],s(t,t,c),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}})();function Ti(){var t=new Lt(4);return Lt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Md(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function n4(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>Le?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Gm(t,e,n){var r=e[0],i=e[1],s=e[2],c=e[3],u=n[0],f=n[1],g=n[2],d=n[3];return t[0]=r*d+c*u+i*g-s*f,t[1]=i*d+c*f+s*u-r*g,t[2]=s*d+c*g+r*f-i*u,t[3]=c*d-r*u-i*f-s*g,t}function Dl(t,e,n,r){var i=e[0],s=e[1],c=e[2],u=e[3],f=n[0],g=n[1],d=n[2],h=n[3],y,v,S,x,m;return v=i*f+s*g+c*d+u*h,v<0&&(v=-v,f=-f,g=-g,d=-d,h=-h),1-v>Le?(y=Math.acos(v),S=Math.sin(y),x=Math.sin((1-r)*y)/S,m=Math.sin(r*y)/S):(x=1-r,m=r),t[0]=x*i+m*f,t[1]=x*s+m*g,t[2]=x*c+m*d,t[3]=x*u+m*h,t}function r4(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function a4(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var s=(i+1)%3,c=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[c*3+c]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+c]-e[c*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[c]=(e[c*3+i]+e[i*3+c])*r}return t}var zm=e4,_E=t4;(function(){var t=VE(),e=Um(1,0,0),n=Um(0,1,0);return function(r,i,s){var c=NE(i,s);return c<-.999999?(ph(t,e,i),BE(t)<1e-6&&ph(t,n,i),fc(t,t),Md(r,t,Math.PI),r):c>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(ph(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+c,_E(r,r))}})();(function(){var t=Ti(),e=Ti();return function(n,r,i,s,c,u){return Dl(t,r,c,u),Dl(e,i,s,u),Dl(n,t,e,2*u*(1-u)),n}})();(function(){var t=pE();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],_E(e,a4(e,t))}})();var dh,Am;function i4(){return Am||(Am=1,dh=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var c=s[i];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n}),dh}var s4=i4();const UE=Ds(s4);var yh,jm;function kE(){if(jm)return yh;jm=1;var t=Object.prototype.toString;return yh=function(n){var r=t.call(n),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),i},yh}var vh,Hm;function o4(){if(Hm)return vh;Hm=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=kE(),i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),c=i.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(y){var v=y.constructor;return v&&v.prototype===y},g={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=(function(){if(typeof window>"u")return!1;for(var y in window)try{if(!g["$"+y]&&e.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{f(window[y])}catch{return!0}}catch{return!0}return!1})(),h=function(y){if(typeof window>"u"||!d)return f(y);try{return f(y)}catch{return!1}};t=function(v){var S=v!==null&&typeof v=="object",x=n.call(v)==="[object Function]",m=r(v),E=S&&n.call(v)==="[object String]",O=[];if(!S&&!x&&!m)throw new TypeError("Object.keys called on a non-object");var M=c&&x;if(E&&v.length>0&&!e.call(v,0))for(var w=0;w<v.length;++w)O.push(String(w));if(m&&v.length>0)for(var D=0;D<v.length;++D)O.push(String(D));else for(var R in v)!(M&&R==="prototype")&&e.call(v,R)&&O.push(String(R));if(s)for(var B=h(v),_=0;_<u.length;++_)!(B&&u[_]==="constructor")&&e.call(v,u[_])&&O.push(u[_]);return O}}return vh=t,vh}var xh,$m;function c4(){if($m)return xh;$m=1;var t=Array.prototype.slice,e=kE(),n=Object.keys,r=n?function(c){return n(c)}:o4(),i=Object.keys;return r.shim=function(){if(Object.keys){var c=(function(){var u=Object.keys(arguments);return u&&u.length===arguments.length})(1,2);c||(Object.keys=function(f){return e(f)?i(t.call(f)):i(f)})}else Object.keys=r;return Object.keys||r},xh=r,xh}var Th,Wm;function FE(){if(Wm)return Th;Wm=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Th=t,Th}var mh,Km;function u4(){return Km||(Km=1,mh=SyntaxError),mh}var Sh,Xm;function l4(){return Xm||(Xm=1,Sh=TypeError),Sh}var Ch,Ym;function f4(){return Ym||(Ym=1,Ch=Object.getOwnPropertyDescriptor),Ch}var Eh,qm;function g4(){if(qm)return Eh;qm=1;var t=f4();if(t)try{t([],"length")}catch{t=null}return Eh=t,Eh}var Mh,Zm;function h4(){if(Zm)return Mh;Zm=1;var t=FE(),e=u4(),n=l4(),r=g4();return Mh=function(s,c,u){if(!s||typeof s!="object"&&typeof s!="function")throw new n("`obj` must be an object or a function`");if(typeof c!="string"&&typeof c!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var f=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,y=!!r&&r(s,c);if(t)t(s,c,{configurable:d===null&&y?y.configurable:!d,enumerable:f===null&&y?y.enumerable:!f,value:u,writable:g===null&&y?y.writable:!g});else if(h||!f&&!g&&!d)s[c]=u;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},Mh}var wh,Qm;function p4(){if(Qm)return wh;Qm=1;var t=FE(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},wh=e,wh}var Oh,Jm;function GE(){if(Jm)return Oh;Jm=1;var t=c4(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,i=h4(),s=function(g){return typeof g=="function"&&n.call(g)==="[object Function]"},c=p4()(),u=function(g,d,h,y){if(d in g){if(y===!0){if(g[d]===h)return}else if(!s(y)||!y())return}c?i(g,d,h,!0):i(g,d,h)},f=function(g,d){var h=arguments.length>2?arguments[2]:{},y=t(d);e&&(y=r.call(y,Object.getOwnPropertySymbols(d)));for(var v=0;v<y.length;v+=1)u(g,y[v],d[y[v]],h[y[v]])};return f.supportsDescriptors=!!c,Oh=f,Oh}var Bo={exports:{}},Pm;function zE(){return Pm||(Pm=1,typeof self<"u"?Bo.exports=self:typeof window<"u"?Bo.exports=window:Bo.exports=Function("return this")()),Bo.exports}var Dh,Im;function AE(){if(Im)return Dh;Im=1;var t=zE();return Dh=function(){return typeof Ro!="object"||!Ro||Ro.Math!==Math||Ro.Array!==Array?t:Ro},Dh}var Rh,e2;function d4(){if(e2)return Rh;e2=1;var t=GE(),e=AE();return Rh=function(){var r=e();if(t.supportsDescriptors){var i=Object.getOwnPropertyDescriptor(r,"globalThis");(!i||i.configurable&&(i.enumerable||!i.writable||globalThis!==r))&&Object.defineProperty(r,"globalThis",{configurable:!0,enumerable:!1,value:r,writable:!0})}else(typeof globalThis!="object"||globalThis!==r)&&(r.globalThis=r);return r},Rh}var bh,t2;function y4(){if(t2)return bh;t2=1;var t=GE(),e=zE(),n=AE(),r=d4(),i=n(),s=function(){return i};return t(s,{getPolyfill:n,implementation:e,shim:r}),bh=s,bh}var v4=y4();const x4=Ds(v4),Qn=x4(),jE={vtkObject:()=>null};function Pn(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Qn.console&&Qn.console.error&&Qn.console.error("Invalid VTK object"),null;const e=jE[t.vtkClass];if(!e)return Qn.console&&Qn.console.error&&Qn.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(i=>{n[i]&&typeof n[i]=="object"&&n[i].vtkClass&&(n[i]=Pn(n[i]))});const r=e(n);return r&&r.modified&&r.modified(),r}function T4(t,e){jE[t]=e}Pn.register=T4;class Lh extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let Sp=0;const HE=t=>{throw new Error(`Named parameter '${t}' is missing`)},$E=Symbol("void");function m4(){return Sp}const WE={};function ui(){}const S4=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];S4.forEach(t=>{WE[t]=ui});Qn.console=console.hasOwnProperty("log")?console:WE;const Da={debug:ui,error:Qn.console.error||ui,info:Qn.console.info||ui,log:Qn.console.log||ui,warn:Qn.console.warn||ui};function KE(t,e){Da[t]&&(Da[t]=e||ui)}function XE(){Da.log(...arguments)}function YE(){Da.info(...arguments)}function Jl(){Da.debug(...arguments)}function Ee(){Da.error(...arguments)}function xf(){Da.warn(...arguments)}const n2={};function qE(t){n2[t]||(Da.error(t),n2[t]=!0)}const zt=Object.create(null);zt.Float32Array=Float32Array;zt.Float64Array=Float64Array;zt.Uint8Array=Uint8Array;zt.Int8Array=Int8Array;zt.Uint16Array=Uint16Array;zt.Int16Array=Int16Array;zt.Uint32Array=Uint32Array;zt.Int32Array=Int32Array;zt.Uint8ClampedArray=Uint8ClampedArray;try{zt.BigInt64Array=BigInt64Array,zt.BigUint64Array=BigUint64Array}catch{}function Vs(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(zt[t]||Float64Array)(...n)}function wd(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(zt[t]||Float64Array).from(...n)}function Tf(t){return t.charAt(0).toUpperCase()+t.slice(1)}function lt(t){return Tf(t[0]==="_"?t.slice(1):t)}function ZE(t){return t.charAt(0).toLowerCase()+t.slice(1)}function QE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let i=Number(t),s="B";for(;i>n;)i/=n,s=r.pop();return`${i.toFixed(e)} ${s}`}function JE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function PE(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function C4(t){return Object.values(zt).some(e=>t instanceof e)}function E4(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function M4(t,e){return Object.keys(t).find(n=>t[n]===e)}function IE(t){return t&&t.isA?t.getState():t}function Od(t){setTimeout(t,0)}function eM(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function Kt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};PE(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++Sp),!("classHierarchy"in e))e.classHierarchy=new Lh("vtkObject");else if(!(e.classHierarchy instanceof Lh)){const s=new Lh;for(let c=0;c<e.classHierarchy.length;c++)s.push(e.classHierarchy[c]);e.classHierarchy=s}function r(s){n[s]=null}function i(s){function c(){r(s)}return Object.freeze({unsubscribe:c})}return t.isDeleted=()=>!!e.deleted,t.modified=s=>{if(e.deleted){Ee("instance deleted - cannot call any method");return}s&&s<t.getMTime()||(e.mtime=++Sp,n.forEach(c=>c&&c(t)))},t.onModified=s=>{if(e.deleted)return Ee("instance deleted - cannot call any method"),null;const c=n.length;return n.push(s),i(c)},t.getMTime=()=>e.mtime,t.isA=s=>{let c=e.classHierarchy.length;for(;c--;)if(e.classHierarchy[c]===s)return!0;return!1},t.getClassName=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-s]},t.set=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=!1;return Object.keys(s).forEach(g=>{const d=u?null:t[`set${Tf(g)}`];d&&Array.isArray(s[g])&&d.length>1?f=d(...s[g])||f:d?f=d(s[g])||f:(["mtime"].indexOf(g)===-1&&!c&&xf(`Warning: Set value to model directly ${g}, ${s[g]}`),f=e[g]!==s[g]||f,e[g]=s[g])}),f},t.get=function(){for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];if(!c.length)return e;const f={};return c.forEach(g=>{f[g]=e[g]}),f},t.getReferenceByName=s=>e[s],t.delete=()=>{Object.keys(e).forEach(s=>delete e[s]),n.forEach((s,c)=>r(c)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const s={...e,vtkClass:t.getClassName()};Object.keys(s).forEach(u=>{s[u]===null||s[u]===void 0||u[0]==="_"?delete s[u]:s[u].isA?s[u]=s[u].getState():Array.isArray(s[u])?s[u]=s[u].map(IE):C4(s[u])&&(s[u]=Array.from(s[u]))});const c={};return Object.keys(s).sort().forEach(u=>{c[u]=s[u]}),c.mtime&&delete c.mtime,c},t.shallowCopy=function(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(s.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${s.getClassName()} into ${t.getClassName()}`);const u=s.get(),f=Object.keys(e).sort();Object.keys(u).sort().forEach(d=>{const h=f.indexOf(d);h===-1?c&&Jl(`add ${d} in shallowCopy`):f.splice(h,1),e[d]=u[d]}),f.length&&c&&Jl(`Untouched keys: ${f.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const w4={object(t,e,n){return function(){return{...e[n.name]}}}};function En(t,e,n){n.forEach(r=>{if(typeof r=="object"){const i=w4[r.type];i?t[`get${lt(r.name)}`]=i(t,e,r):t[`get${lt(r.name)}`]=()=>e[r.name]}else t[`get${lt(r)}`]=()=>e[r]})}const tM={enum(t,e,n){const r=`_on${lt(n.name)}Changed`;return i=>{if(typeof i=="string"){if(n.enum[i]!==void 0)return e[n.name]!==n.enum[i]?(e[n.name]=n.enum[i],t.modified(),!0):!1;throw Ee(`Set Enum with invalid argument ${n}, ${i}`),new RangeError("Set Enum with invalid string argument")}if(typeof i=="number"){if(e[n.name]!==i){if(Object.keys(n.enum).map(s=>n.enum[s]).indexOf(i)!==-1){const s=e[n.name];return e[n.name]=i,e[r]?.(t,e,i,s),t.modified(),!0}throw Ee(`Set Enum outside numeric range ${n}, ${i}`),new RangeError("Set Enum outside numeric range")}return!1}throw Ee(`Set Enum with invalid argument (String/Number) ${n}, ${i}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){n.params?.length===1&&xf('Setter of type "object" with a single "param" field is not supported');const r=`_on${lt(n.name)}Changed`;return function(){for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];let u;if(s.length>1&&n.params?.length?u=n.params.reduce((f,g,d)=>Object.assign(f,{[g]:s[d]}),{}):u=s[0],!UE(e[n.name],u)){const f=e[n.name];return e[n.name]=u,e[r]?.(t,e,u,f),t.modified(),!0}return!1}}};function r2(t){if(typeof t=="object"){const e=tM[t.type];if(e)return(n,r)=>e(n,r,t);throw Ee(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const i=`_on${lt(t)}Changed`;return function(c){if(r.deleted)return Ee("instance deleted - cannot call any method"),!1;if(r[t]!==c){const u=r[t.name];return r[t]=c,r[i]?.(n,r,c,u),n.modified(),!0}return!1}}}function Mc(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${lt(r.name)}`]=r2(r)(t,e):t[`set${lt(r)}`]=r2(r)(t,e)})}function At(t,e,n){En(t,e,n),Mc(t,e,n)}function Ns(t,e,n){n.forEach(r=>{t[`get${lt(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${lt(r)}ByReference`]=()=>e[r]})}function Dd(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(s=>{if(e[s]&&r&&e[s].length!==r)throw new RangeError(`Invalid initial number of values for array (${s})`);const c=`_on${lt(s)}Changed`;t[`set${lt(s)}`]=function(){if(e.deleted)return Ee("instance deleted - cannot call any method"),!1;for(var u=arguments.length,f=new Array(u),g=0;g<u;g++)f[g]=arguments[g];let d=f,h,y=!1;if(d.length===1&&(d[0]==null||d[0].length>=0)&&(d=d[0],y=!0),d==null)h=e[s]!==d;else{if(r&&d.length!==r)if(d.length<r&&i!==void 0)for(d=Array.from(d),y=!1;d.length<r;)d.push(i);else throw new RangeError(`Invalid number of values for array setter (${s})`);h=e[s]==null||e[s].length!==d.length;for(let v=0;!h&&v<d.length;++v)h=e[s][v]!==d[v];h&&y&&(d=Array.from(d))}if(h){const v=e[s.name];e[s]=d,e[c]?.(t,e,d,v),t.modified()}return h},t[`set${lt(s)}From`]=u=>{const f=e[s];u.forEach((g,d)=>{f[d]=g})}})}function Rd(t,e,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;Ns(t,e,n),Dd(t,e,n,r,i)}function wc(t,e,n){for(let r=0;r<n.length;r++){const i=n[r];e[i]!==void 0&&(e[`_${i}`]=e[i],delete e[i])}}function nM(t,e,n,r){e.inputData?e.inputData=e.inputData.map(Pn):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(Pn):e.inputConnection=[],e.output?e.output=e.output.map(Pn):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(Pn):e.inputArrayToProcess=[],e.numberOfInputs=n;function i(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Ee("instance deleted - cannot call any method");return}if(S>=e.numberOfInputs){Ee(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[S]!==v||e.inputConnection[S])&&(e.inputData[S]=v,e.inputConnection[S]=null,t.modified&&t.modified())}function s(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]&&(e.inputData[v]=e.inputConnection[v]()),e.inputData[v]}function c(v){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Ee("instance deleted - cannot call any method");return}if(S>=e.numberOfInputs){let x=`algorithm ${t.getClassName()} only has `;x+=`${e.numberOfInputs}`,x+=" input ports. To add more input ports, use addInputConnection()",Ee(x);return}e.inputData[S]=null,e.inputConnection[S]=v}function u(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]}function f(){let v=e.numberOfInputs;for(;v&&!e.inputData[v-1]&&!e.inputConnection[v-1];)v--;return v===e.numberOfInputs&&e.numberOfInputs++,v}function g(v){if(e.deleted){Ee("instance deleted - cannot call any method");return}c(v,f())}function d(v){if(e.deleted){Ee("instance deleted - cannot call any method");return}i(v,f())}function h(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Ee("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[v])}t.shouldUpdate=()=>{const v=t.getMTime();let S=1/0,x=r;for(;x--;){if(!e.output[x]||e.output[x].isDeleted())return!0;const m=e.output[x].getMTime();if(m<v)return!0;m<S&&(S=m)}for(x=e.numberOfInputs;x--;)if(e.inputConnection[x]?.filter.shouldUpdate()||t.getInputData(x)?.getMTime()>S)return!0;return!1};function y(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const S=()=>h(v);return S.filter=t,S}if(e.numberOfInputs){let v=e.numberOfInputs;for(;v--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=i,t.setInputConnection=c,t.addInputData=d,t.addInputConnection=g,t.getInputData=s,t.getInputConnection=u}r&&(t.getOutputData=h,t.getOutputPort=y),t.update=()=>{const v=[];if(e.numberOfInputs){let S=0;for(;S<e.numberOfInputs;)v[S]=t.getInputData(S),S++}t.requestData&&!t.isDeleted()&&t.shouldUpdate()&&t.requestData(v,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=v=>{const S=e.inputArrayToProcess[v],x=e.inputData[v];return S&&x?x[`get${S.fieldAssociation}`]().getArray(S.arrayName):null},t.setInputArrayToProcess=function(v,S,x){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<v;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[v]={arrayName:S,fieldAssociation:x,attributeType:m}}}const bd=Symbol("Event abort");function rM(t,e,n){const r=[],i=t.delete;let s=1;function c(g){for(let d=0;d<r.length;++d){const[h]=r[d];if(h===g){r.splice(d,1);return}}}function u(g){function d(){c(g)}return Object.freeze({unsubscribe:d})}function f(){if(e.deleted){Ee("instance deleted - cannot call any method");return}const g=r.slice();for(let d=0;d<g.length;++d){const[,h,y]=g[d];if(h){if(y<0)setTimeout(()=>h.apply(t,arguments),1-y);else if(h.apply(t,arguments)===bd)break}}}t[`invoke${lt(n)}`]=f,t[`on${lt(n)}`]=function(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!g.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return Ee("instance deleted - cannot call any method"),null;const h=s++;return r.push([h,g,d]),r.sort((y,v)=>v[2]-y[2]),u(h)},t.delete=()=>{i(),r.forEach(g=>{let[d]=g;return c(d)})}}function et(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i={},s={};return t(s,i,r),Object.freeze(s)};return e&&Pn.register(e,n),n}function aM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.filter(c=>!!c).map(c=>c(...i))}}function Ld(t){return t&&t.isA&&t.isA("vtkObject")}function Pl(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(Ld(t)){if(r.indexOf(t)>=0)return n;r.push(t);const i=e(t);i!==void 0&&n.push(i);const s=t.get();Object.keys(s).forEach(c=>{const u=s[c];Array.isArray(u)?u.forEach(f=>{Pl(f,e,n,r)}):Pl(u,e,n,r)})}return n}function iM(t,e,n){var r=this;let i;const s=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];const g=r,d=()=>{i=null,n||t.apply(g,u)},h=n&&!i;clearTimeout(i),i=setTimeout(d,e),h&&t.apply(g,u)};return s.cancel=()=>clearTimeout(i),s}function sM(t,e){let n=!1,r=null;function i(){n=!1,r!==null&&(s(...r),r=null)}function s(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];if(n){r=u;return}n=!0,t(...u),setTimeout(i,e)}return s}function Vd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,i)=>{e.keystore[r]=i},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let O4=1;const el="__root__";function oM(t,e){Vd(t,e);const n=t.delete;e.proxyId=`${O4++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),En(t,e,["proxyId","proxyGroup","proxyName"]),At(t,e,["proxyManager"]);const r={},i={};function s(g,d){i[d]||(i[d]=[]);const h=i[d];for(let y=0;y<g.length;y++)h.push(g[y].name),r[g[y].name]=g[y],g[y].children&&g[y].children.length&&s(g[y].children,g[y].name)}s(e.ui,el),t.updateUI=g=>{e.ui=JSON.parse(JSON.stringify(g||[])),Object.keys(r).forEach(d=>delete r[d]),Object.keys(i).forEach(d=>delete i[d]),s(e.ui,el),t.modified()};function c(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:el;return i[g]}t.updateProxyProperty=(g,d)=>{const h=r[g];h?Object.assign(h,d):r[g]={...d}},t.activate=()=>{if(e.proxyManager){const g=`setActive${lt(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[g]&&e.proxyManager[g](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(g,d)=>{d in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[d]=[]),e.propertyLinkSubscribers[d].push(g)},t.gcPropertyLinks=g=>{const d=e.propertyLinkSubscribers[g]||[];for(;d.length;)d.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(g){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[g])return e.propertyLinkMap[g];let h=null;const y=[];let v=0,S=!1;function x(w){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(S)return null;const R=[];let B=null;for(v=y.length;v--;){const G=y[v];G.instance===w?B=G:R.push(G)}if(!B)return null;const _=B.instance[`get${lt(B.propertyName)}`]();if(!E4(_,h)||D){for(h=_,S=!0;R.length;){const G=R.pop();G.instance.set({[G.propertyName]:h})}S=!1}return e.propertyLinkMap[g].persistent&&(e.propertyLinkMap[g].value=_),_}function m(w,D){const R=[];for(v=y.length;v--;){const B=y[v];B.instance===w&&(B.propertyName===D||D===void 0)&&(B.subscription.unsubscribe(),R.push(v))}for(;R.length;)y.splice(R.pop(),1)}function E(w,D){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const B=w.onModified(x),_=y[0];return y.push({instance:w,propertyName:D,subscription:B}),R&&(e.propertyLinkMap[g].persistent&&e.propertyLinkMap[g].value!==void 0?w.set({[D]:e.propertyLinkMap[g].value}):_&&x(_.instance,!0)),{unsubscribe:()=>m(w,D)}}function O(){for(;y.length;)y.pop().subscription.unsubscribe()}const M={bind:E,unbind:m,unsubscribe:O,persistent:d};return e.propertyLinkMap[g]=M,M};function u(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:el;const d=[],h=e.proxyId,y=c(g)||[];for(let v=0;v<y.length;v++){const S=y[v],x=t[`get${lt(S)}`],m=x?x():void 0,E={id:h,name:S,value:m},O=u(S);O.length&&(E.children=O),d.push(E)}return d}t.listPropertyNames=()=>u().map(g=>g.name),t.getPropertyByName=g=>u().find(d=>d.name===g),t.getPropertyDomainByName=g=>(r[g]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:u()}),t.delete=()=>{const g=Object.keys(e.propertyLinkMap);let d=g.length;for(;d--;)e.propertyLinkMap[g[d]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function f(){if(e.links)for(let g=0;g<e.links.length;g++){const{link:d,property:h,persistent:y,updateOnBind:v,type:S}=e.links[g];if(S==="application"){const x=e.proxyManager.getPropertyLink(d,y);t.registerPropertyLinkForGC(x,"application"),x.bind(t,h,v)}}}Od(f)}function cM(t,e,n){const r=t.delete,i=[],s=Object.keys(n);let c=s.length;for(;c--;){const u=s[c],{modelKey:f,property:g,modified:d=!0}=n[u],h=lt(g),y=lt(u);t[`get${y}`]=e[f][`get${h}`],t[`set${y}`]=e[f][`set${h}`],d&&i.push(e[f].onModified(t.modified))}t.delete=()=>{for(;i.length;)i.pop().unsubscribe();r()}}function uM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function i(u){const f=Object.keys(u);let g=f.length;for(;g--;){const d=f[g];e[d].set(u[d])}}const s=Object.keys(r);let c=s.length;for(;c--;){const u=s[c];e[u]=r[u];const f=n[u];t[`set${lt(u)}`]=g=>{if(g!==e[u]){e[u]=g;const d=f[g];i(d),t.modified()}}}s.length&&En(t,e,s)}const a2=10,i2=40,s2=800;function lM(t){let e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*a2,i=n*a2,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode===1?(r*=i2,i*=i2):(r*=s2,i*=s2)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:i||r}}var V={algo:nM,capitalize:Tf,chain:aM,debounce:iM,enumToString:M4,event:rM,EVENT_ABORT:bd,formatBytesToProperUnit:QE,formatNumbersWithThousandSeparator:JE,get:En,getArray:Ns,getCurrentGlobalMTime:m4,getStateArrayMapFunc:IE,isVtkObject:Ld,keystore:Vd,measurePromiseExecution:eM,moveToProtected:wc,newInstance:et,newTypedArray:Vs,newTypedArrayFrom:wd,normalizeWheel:lM,obj:Kt,proxy:oM,proxyPropertyMapping:cM,proxyPropertyState:uM,safeArrays:PE,set:Mc,setArray:Dd,setGet:At,setGetArray:Rd,setImmediate:Od,setLoggerFunction:KE,throttle:sM,traverseInstanceTree:Pl,TYPED_ARRAYS:zt,uncapitalize:ZE,VOID:$E,vtkDebugMacro:Jl,vtkErrorMacro:Ee,vtkInfoMacro:YE,vtkLogMacro:XE,vtkOnceErrorMacro:qE,vtkWarningMacro:xf,objectSetterMap:tM,requiredParam:HE},gr=Object.freeze({__proto__:null,requiredParam:HE,VOID:$E,setLoggerFunction:KE,vtkLogMacro:XE,vtkInfoMacro:YE,vtkDebugMacro:Jl,vtkErrorMacro:Ee,vtkWarningMacro:xf,vtkOnceErrorMacro:qE,TYPED_ARRAYS:zt,newTypedArray:Vs,newTypedArrayFrom:wd,capitalize:Tf,_capitalize:lt,uncapitalize:ZE,formatBytesToProperUnit:QE,formatNumbersWithThousandSeparator:JE,setImmediateVTK:Od,measurePromiseExecution:eM,obj:Kt,get:En,set:Mc,setGet:At,getArray:Ns,setArray:Dd,setGetArray:Rd,moveToProtected:wc,algo:nM,EVENT_ABORT:bd,event:rM,newInstance:et,chain:aM,isVtkObject:Ld,traverseInstanceTree:Pl,debounce:iM,throttle:sM,keystore:Vd,proxy:oM,proxyPropertyMapping:cM,proxyPropertyState:uM,normalizeWheel:lM,default:V});const{vtkErrorMacro:D4}=V,R4=["Build","Render"];function b4(t,e){e.classHierarchy.push("vtkViewNode");function n(i,s){for(let c=0;c<e.children.length;++c){const u=(s+1+c)%e.children.length;if(e.children[u]===i)return e.children[u]=e.children[s],e.children[s]=i,!0}return!1}t.build=i=>{},t.render=i=>{},t.traverse=i=>{const s=i.getTraverseOperation(),c=t[s];if(c){c(i);return}t.apply(i,!0);for(let u=0;u<e.children.length;u++)e.children[u].traverse(i);t.apply(i,!1)},t.apply=(i,s)=>{const c=t[i.getOperation()];c&&c(s,i)},t.getViewNodeFor=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(s&&s.renderable===i)return s;if(e.renderable===i)return t;for(let c=0;c<e.children.length;++c){const f=e.children[c].getViewNodeFor(i);if(f)return f}},t.getFirstAncestorOfType=i=>e._parent?e._parent.isA(i)?e._parent:e._parent.getFirstAncestorOfType(i):null,t.getLastAncestorOfType=i=>{if(!e._parent)return null;const s=e._parent.getLastAncestorOfType(i);return s||(e._parent.isA(i)?e._parent:null)},t.addMissingNode=i=>{if(!i)return;const s=e._renderableChildMap.get(i);if(s!==void 0)return s.setVisited(!0),s;const c=t.createViewNode(i);if(c)return c.setParent(t),c.setVisited(!0),e._renderableChildMap.set(i,c),e.children.push(c),c},t.addMissingNodes=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!i||!i.length)return;let c;for(let u=0;u<i.length;++u){const f=i[u],g=t.addMissingNode(f);s&&g!==void 0&&(c===void 0?c=e.children.lastIndexOf(g):e.children[c]!==g&&n(e.children,g),c++)}},t.addMissingChildren=i=>{if(!(!i||!i.length))for(let s=0;s<i.length;++s){const c=i[s];if(e.children.indexOf(c)===-1){c.setParent(t),e.children.push(c);const f=c.getRenderable();f&&e._renderableChildMap.set(f,c)}c.setVisited(!0)}},t.removeNode=i=>{const s=e.children.findIndex(u=>u===i);if(s<0)return!1;const c=i.getRenderable();return c&&e._renderableChildMap.delete(c),i.delete(),e.children.splice(s,1),!0},t.prepareNodes=()=>{for(let i=0;i<e.children.length;++i)e.children[i].setVisited(!1)},t.setVisited=i=>{e.visited=i},t.removeUnusedNodes=()=>{let i=0;for(let s=0;s<e.children.length;++s){const c=e.children[s];if(c.getVisited())e.children[i++]=c,c.setVisited(!1);else{const f=c.getRenderable();f&&e._renderableChildMap.delete(f),c.delete()}}e.children.length=i},t.createViewNode=i=>{if(!e.myFactory)return D4("Cannot create view nodes without my own factory"),null;const s=e.myFactory.createNode(i);return s&&s.setRenderable(i),s};const r=t.delete;t.delete=()=>{for(let i=0;i<e.children.length;i++)e.children[i].delete();r()}}const L4={renderable:null,myFactory:null,children:[],visited:!1};function fM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L4,n),V.obj(t,e),V.event(t,e,"event"),e._renderableChildMap=new Map,V.get(t,e,["visited"]),V.setGet(t,e,["_parent","renderable","myFactory"]),V.getArray(t,e,["children"]),V.moveToProtected(t,e,["parent"]),b4(t,e)}const V4=V.newInstance(fM,"vtkViewNode");var ft={newInstance:V4,extend:fM,PASS_TYPES:R4};function N4(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,i=n.getClassName(r++),s=!1;const c=Object.keys(e.overrides);for(;i&&!s;)c.indexOf(i)!==-1?s=!0:i=n.getClassName(r++);if(!s)return null;const u=e.overrides[i]();return u.setMyFactory(t),u}}const B4={};function gM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B4,n),V.obj(t,e),N4(t,e)}const _4=V.newInstance(gM,"vtkViewNodeFactory");var hM={newInstance:_4,extend:gM};const pM=Object.create(null);function $n(t,e){pM[t]=e}function U4(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const k4={};function dM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k4,n),e.overrides=pM,hM.extend(t,e,n),U4(t,e)}const F4=V.newInstance(dM,"vtkOpenGLViewNodeFactory");var G4={newInstance:F4,extend:dM};function z4(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){$t(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),Cd(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),Ed(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Pe(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();$t(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),Pe(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Qt(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const A4={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function j4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A4,n),ft.extend(t,e,n),e.keyMatrixTime={},Kt(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},At(t,e,["context","keyMatrixTime"]),z4(t,e)}const H4=et(j4);$n("vtkCamera",H4);const{vtkDebugMacro:$4}=gr;function W4(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps(),!0),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||($4("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const i=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=i.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(i.clearDepth(1),r|=i.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const s=t.getTiledSizeAndOrigin();i.enable(i.SCISSOR_TEST),i.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),i.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),i.colorMask(!0,!0,!0,!0),r&&i.clear(r),i.enable(i.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],s=n[1]-r[1],c=e._parent.normalizedDisplayToDisplay(i,s),u=Math.round(c[0]),f=Math.round(c[1]),g=n[2]-r[0],d=n[3]-r[1],h=e._parent.normalizedDisplayToDisplay(g,d);let y=Math.round(h[0])-u,v=Math.round(h[1])-f;return y<0&&(y=0),v<0&&(v=0),{usize:y,vsize:v,lowerLeftU:u,lowerLeftV:f}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const s=e.renderable.getBackgroundByReference();r.clearColor(s[0],s[1],s[2],s[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const K4={context:null,_openGLRenderWindow:null,selector:null};function X4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K4,n),ft.extend(t,e,n),En(t,e,["shaderCache"]),At(t,e,["selector"]),wc(t,e,["openGLRenderWindow"]),W4(t,e)}const Y4=et(X4,"vtkOpenGLRenderer");$n("vtkRenderer",Y4);function q4(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),$t(e.keyMatrices.mcwc,e.renderable.getMatrix()),Pe(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?La(e.keyMatrices.normalMatrix):(Cd(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),Ed(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),dE(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const Z4={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function Q4(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z4,n),ft.extend(t,e,n),e.keyMatrixTime={},Kt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:La(new Float64Array(9)),mcwc:Ve(new Float64Array(16))},At(t,e,["context"]),En(t,e,["activeTextures"]),q4(t,e)}const J4=et(Q4);$n("vtkActor",J4);function P4(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const i=e.children[r];i.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(i)):e.oglmapper=i}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let i=0;i<e.activeTextures.length;i++)e.activeTextures[i].deactivate()}}const I4={context:null,activeTextures:null};function ek(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I4,n),ft.extend(t,e,n),At(t,e,["context"]),En(t,e,["activeTextures"]),P4(t,e)}const tk=et(ek);$n("vtkActor2D",tk);function Rl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function nk(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yM(t){let e,n,r;t.length!==2?(e=Rl,n=(u,f)=>Rl(t(u),f),r=(u,f)=>t(u)-f):(e=t===Rl||t===nk?t:rk,n=t,r=t);function i(u,f,g=0,d=u.length){if(g<d){if(e(f,f)!==0)return d;do{const h=g+d>>>1;n(u[h],f)<0?g=h+1:d=h}while(g<d)}return g}function s(u,f,g=0,d=u.length){if(g<d){if(e(f,f)!==0)return d;do{const h=g+d>>>1;n(u[h],f)<=0?g=h+1:d=h}while(g<d)}return g}function c(u,f,g=0,d=u.length){const h=i(u,f,g,d-1);return h>g&&r(u[h-1],f)>-r(u[h],f)?h-1:h}return{left:i,center:c,right:s}}function rk(){return 0}function ak(t){return t===null?NaN:+t}const ik=yM(Rl),sk=ik.right;yM(ak).center;const ok=Math.sqrt(50),ck=Math.sqrt(10),uk=Math.sqrt(2);function Il(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),c=s>=ok?10:s>=ck?5:s>=uk?2:1;let u,f,g;return i<0?(g=Math.pow(10,-i)/c,u=Math.round(t*g),f=Math.round(e*g),u/g<t&&++u,f/g>e&&--f,g=-g):(g=Math.pow(10,i)*c,u=Math.round(t/g),f=Math.round(e/g),u*g<t&&++u,f*g>e&&--f),f<u&&.5<=n&&n<2?Il(t,e,n*2):[u,f,g]}function lk(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,c]=r?Il(e,t,n):Il(t,e,n);if(!(s>=i))return[];const u=s-i+1,f=new Array(u);if(r)if(c<0)for(let g=0;g<u;++g)f[g]=(s-g)/-c;else for(let g=0;g<u;++g)f[g]=(s-g)*c;else if(c<0)for(let g=0;g<u;++g)f[g]=(i+g)/-c;else for(let g=0;g<u;++g)f[g]=(i+g)*c;return f}function Cp(t,e,n){return e=+e,t=+t,n=+n,Il(t,e,n)[2]}function fk(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Cp(e,t,n):Cp(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function gk(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Nd(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function vM(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Oc(){}var gc=.7,ef=1/gc,ms="\\s*([+-]?\\d+)\\s*",hc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hk=/^#([0-9a-f]{3,8})$/,pk=new RegExp(`^rgb\\(${ms},${ms},${ms}\\)$`),dk=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),yk=new RegExp(`^rgba\\(${ms},${ms},${ms},${hc}\\)$`),vk=new RegExp(`^rgba\\(${lr},${lr},${lr},${hc}\\)$`),xk=new RegExp(`^hsl\\(${hc},${lr},${lr}\\)$`),Tk=new RegExp(`^hsla\\(${hc},${lr},${lr},${hc}\\)$`),o2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nd(Oc,pc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:c2,formatHex:c2,formatHex8:mk,formatHsl:Sk,formatRgb:u2,toString:u2});function c2(){return this.rgb().formatHex()}function mk(){return this.rgb().formatHex8()}function Sk(){return xM(this).formatHsl()}function u2(){return this.rgb().formatRgb()}function pc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hk.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?l2(e):n===3?new un(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?tl(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?tl(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pk.exec(t))?new un(e[1],e[2],e[3],1):(e=dk.exec(t))?new un(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yk.exec(t))?tl(e[1],e[2],e[3],e[4]):(e=vk.exec(t))?tl(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xk.exec(t))?h2(e[1],e[2]/100,e[3]/100,1):(e=Tk.exec(t))?h2(e[1],e[2]/100,e[3]/100,e[4]):o2.hasOwnProperty(t)?l2(o2[t]):t==="transparent"?new un(NaN,NaN,NaN,0):null}function l2(t){return new un(t>>16&255,t>>8&255,t&255,1)}function tl(t,e,n,r){return r<=0&&(t=e=n=NaN),new un(t,e,n,r)}function Ck(t){return t instanceof Oc||(t=pc(t)),t?(t=t.rgb(),new un(t.r,t.g,t.b,t.opacity)):new un}function Ep(t,e,n,r){return arguments.length===1?Ck(t):new un(t,e,n,r??1)}function un(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Nd(un,Ep,vM(Oc,{brighter(t){return t=t==null?ef:Math.pow(ef,t),new un(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gc:Math.pow(gc,t),new un(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new un(xi(this.r),xi(this.g),xi(this.b),tf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f2,formatHex:f2,formatHex8:Ek,formatRgb:g2,toString:g2}));function f2(){return`#${di(this.r)}${di(this.g)}${di(this.b)}`}function Ek(){return`#${di(this.r)}${di(this.g)}${di(this.b)}${di((isNaN(this.opacity)?1:this.opacity)*255)}`}function g2(){const t=tf(this.opacity);return`${t===1?"rgb(":"rgba("}${xi(this.r)}, ${xi(this.g)}, ${xi(this.b)}${t===1?")":`, ${t})`}`}function tf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function di(t){return t=xi(t),(t<16?"0":"")+t.toString(16)}function h2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Jn(t,e,n,r)}function xM(t){if(t instanceof Jn)return new Jn(t.h,t.s,t.l,t.opacity);if(t instanceof Oc||(t=pc(t)),!t)return new Jn;if(t instanceof Jn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),c=NaN,u=s-i,f=(s+i)/2;return u?(e===s?c=(n-r)/u+(n<r)*6:n===s?c=(r-e)/u+2:c=(e-n)/u+4,u/=f<.5?s+i:2-s-i,c*=60):u=f>0&&f<1?0:c,new Jn(c,u,f,t.opacity)}function Mk(t,e,n,r){return arguments.length===1?xM(t):new Jn(t,e,n,r??1)}function Jn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Nd(Jn,Mk,vM(Oc,{brighter(t){return t=t==null?ef:Math.pow(ef,t),new Jn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gc:Math.pow(gc,t),new Jn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new un(Vh(t>=240?t-240:t+120,i,r),Vh(t,i,r),Vh(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Jn(p2(this.h),nl(this.s),nl(this.l),tf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=tf(this.opacity);return`${t===1?"hsl(":"hsla("}${p2(this.h)}, ${nl(this.s)*100}%, ${nl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function p2(t){return t=(t||0)%360,t<0?t+360:t}function nl(t){return Math.max(0,Math.min(1,t||0))}function Vh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Bd=t=>()=>t;function wk(t,e){return function(n){return t+n*e}}function Ok(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Dk(t){return(t=+t)==1?TM:function(e,n){return n-e?Ok(e,n,t):Bd(isNaN(e)?n:e)}}function TM(t,e){var n=e-t;return n?wk(t,n):Bd(isNaN(t)?e:t)}const d2=(function t(e){var n=Dk(e);function r(i,s){var c=n((i=Ep(i)).r,(s=Ep(s)).r),u=n(i.g,s.g),f=n(i.b,s.b),g=TM(i.opacity,s.opacity);return function(d){return i.r=c(d),i.g=u(d),i.b=f(d),i.opacity=g(d),i+""}}return r.gamma=t,r})(1);function Rk(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function bk(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lk(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),c;for(c=0;c<r;++c)i[c]=_d(t[c],e[c]);for(;c<n;++c)s[c]=e[c];return function(u){for(c=0;c<r;++c)s[c]=i[c](u);return s}}function Vk(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function nf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Nk(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=_d(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Mp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nh=new RegExp(Mp.source,"g");function Bk(t){return function(){return t}}function _k(t){return function(e){return t(e)+""}}function Uk(t,e){var n=Mp.lastIndex=Nh.lastIndex=0,r,i,s,c=-1,u=[],f=[];for(t=t+"",e=e+"";(r=Mp.exec(t))&&(i=Nh.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),u[c]?u[c]+=s:u[++c]=s),(r=r[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,f.push({i:c,x:nf(r,i)})),n=Nh.lastIndex;return n<e.length&&(s=e.slice(n),u[c]?u[c]+=s:u[++c]=s),u.length<2?f[0]?_k(f[0].x):Bk(e):(e=f.length,function(g){for(var d=0,h;d<e;++d)u[(h=f[d]).i]=h.x(g);return u.join("")})}function _d(t,e){var n=typeof e,r;return e==null||n==="boolean"?Bd(e):(n==="number"?nf:n==="string"?(r=pc(e))?(e=r,d2):Uk:e instanceof pc?d2:e instanceof Date?Vk:bk(e)?Rk:Array.isArray(e)?Lk:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Nk:nf)(t,e)}function kk(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Fk(t){return function(){return t}}function Gk(t){return+t}var y2=[0,1];function vs(t){return t}function wp(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Fk(isNaN(e)?NaN:.5)}function zk(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ak(t,e,n){var r=t[0],i=t[1],s=e[0],c=e[1];return i<r?(r=wp(i,r),s=n(c,s)):(r=wp(r,i),s=n(s,c)),function(u){return s(r(u))}}function jk(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)i[c]=wp(t[c],t[c+1]),s[c]=n(e[c],e[c+1]);return function(u){var f=sk(t,u,1,r)-1;return s[f](i[f](u))}}function Hk(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $k(){var t=y2,e=y2,n=_d,r,i,s,c=vs,u,f,g;function d(){var y=Math.min(t.length,e.length);return c!==vs&&(c=zk(t[0],t[y-1])),u=y>2?jk:Ak,f=g=null,h}function h(y){return y==null||isNaN(y=+y)?s:(f||(f=u(t.map(r),e,n)))(r(c(y)))}return h.invert=function(y){return c(i((g||(g=u(e,t.map(r),nf)))(y)))},h.domain=function(y){return arguments.length?(t=Array.from(y,Gk),d()):t.slice()},h.range=function(y){return arguments.length?(e=Array.from(y),d()):e.slice()},h.rangeRound=function(y){return e=Array.from(y),n=kk,d()},h.clamp=function(y){return arguments.length?(c=y?!0:vs,d()):c!==vs},h.interpolate=function(y){return arguments.length?(n=y,d()):n},h.unknown=function(y){return arguments.length?(s=y,h):s},function(y,v){return r=y,i=v,d()}}function Wk(){return $k()(vs,vs)}function Kk(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function rf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Es(t){return t=rf(Math.abs(t)),t?t[1]:NaN}function Xk(t,e){return function(n,r){for(var i=n.length,s=[],c=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),s.push(n.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[c=(c+1)%t.length];return s.reverse().join(e)}}function Yk(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var qk=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function af(t){if(!(e=qk.exec(t)))throw new Error("invalid format: "+t);var e;return new Ud({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}af.prototype=Ud.prototype;function Ud(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ud.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Zk(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var mM;function Qk(t,e){var n=rf(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(mM=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=r.length;return s===c?r:s>c?r+new Array(s-c+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+rf(t,Math.max(0,e+s-1))[0]}function v2(t,e){var n=rf(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const x2={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Kk,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return v2(t*100,e)},r:v2,s:Qk,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function T2(t){return t}var m2=Array.prototype.map,S2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jk(t){var e=t.grouping===void 0||t.thousands===void 0?T2:Xk(m2.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal+"",s=t.numerals===void 0?T2:Yk(m2.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",u=t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function g(h){h=af(h);var y=h.fill,v=h.align,S=h.sign,x=h.symbol,m=h.zero,E=h.width,O=h.comma,M=h.precision,w=h.trim,D=h.type;D==="n"?(O=!0,D="g"):x2[D]||(M===void 0&&(M=12),w=!0,D="g"),(m||y==="0"&&v==="=")&&(m=!0,y="0",v="=");var R=x==="$"?n:x==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",B=x==="$"?r:/[%p]/.test(D)?c:"",_=x2[D],G=/[defgprs%]/.test(D);M=M===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function z(H){var A=R,$=B,K,ee,U;if(D==="c")$=_(H)+$,H="";else{H=+H;var q=H<0||1/H<0;if(H=isNaN(H)?f:_(Math.abs(H),M),w&&(H=Zk(H)),q&&+H==0&&S!=="+"&&(q=!1),A=(q?S==="("?S:u:S==="-"||S==="("?"":S)+A,$=(D==="s"?S2[8+mM/3]:"")+$+(q&&S==="("?")":""),G){for(K=-1,ee=H.length;++K<ee;)if(U=H.charCodeAt(K),48>U||U>57){$=(U===46?i+H.slice(K+1):H.slice(K))+$,H=H.slice(0,K);break}}}O&&!m&&(H=e(H,1/0));var re=A.length+H.length+$.length,J=re<E?new Array(E-re+1).join(y):"";switch(O&&m&&(H=e(J+H,J.length?E-$.length:1/0),J=""),v){case"<":H=A+H+$+J;break;case"=":H=A+J+H+$;break;case"^":H=J.slice(0,re=J.length>>1)+A+H+$+J.slice(re);break;default:H=J+A+H+$;break}return s(H)}return z.toString=function(){return h+""},z}function d(h,y){var v=g((h=af(h),h.type="f",h)),S=Math.max(-8,Math.min(8,Math.floor(Es(y)/3)))*3,x=Math.pow(10,-S),m=S2[8+S/3];return function(E){return v(x*E)+m}}return{format:g,formatPrefix:d}}var rl,SM,CM;Pk({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Pk(t){return rl=Jk(t),SM=rl.format,CM=rl.formatPrefix,rl}function Ik(t){return Math.max(0,-Es(Math.abs(t)))}function e5(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Es(e)/3)))*3-Es(Math.abs(t)))}function t5(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Es(e)-Es(t))+1}function n5(t,e,n,r){var i=fk(t,e,n),s;switch(r=af(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=e5(i,c))&&(r.precision=s),CM(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=t5(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ik(i))&&(r.precision=s-(r.type==="%")*2);break}}return SM(r)}function r5(t){var e=t.domain;return t.ticks=function(n){var r=e();return lk(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return n5(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,c=r[i],u=r[s],f,g,d=10;for(u<c&&(g=c,c=u,u=g,g=i,i=s,s=g);d-- >0;){if(g=Cp(c,u,n),g===f)return r[i]=c,r[s]=u,e(r);if(g>0)c=Math.floor(c/g)*g,u=Math.ceil(u/g)*g;else if(g<0)c=Math.ceil(c*g)/g,u=Math.floor(u*g)/g;else break;f=g}return t},t}function kd(){var t=Wk();return t.copy=function(){return Hk(t,kd())},gk.apply(t,arguments),r5(t)}var bl={exports:{}},a5=bl.exports,C2;function i5(){return C2||(C2=1,(function(t){(function(e,n,r){function i(f){var g=this,d=u();g.next=function(){var h=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=h-(g.c=h|0)},g.c=1,g.s0=d(" "),g.s1=d(" "),g.s2=d(" "),g.s0-=d(f),g.s0<0&&(g.s0+=1),g.s1-=d(f),g.s1<0&&(g.s1+=1),g.s2-=d(f),g.s2<0&&(g.s2+=1),d=null}function s(f,g){return g.c=f.c,g.s0=f.s0,g.s1=f.s1,g.s2=f.s2,g}function c(f,g){var d=new i(f),h=g&&g.state,y=d.next;return y.int32=function(){return d.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,h&&(typeof h=="object"&&s(h,d),y.state=function(){return s(d,{})}),y}function u(){var f=4022871197,g=function(d){d=String(d);for(var h=0;h<d.length;h++){f+=d.charCodeAt(h);var y=.02519603282416938*f;f=y>>>0,y-=f,y*=f,f=y>>>0,y-=f,f+=y*4294967296}return(f>>>0)*23283064365386963e-26};return g}n&&n.exports?n.exports=c:this.alea=c})(a5,t)})(bl)),bl.exports}var Ll={exports:{}},s5=Ll.exports,E2;function o5(){return E2||(E2=1,(function(t){(function(e,n,r){function i(u){var f=this,g="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var h=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^h^h>>>8},u===(u|0)?f.x=u:g+=u;for(var d=0;d<g.length+64;d++)f.x^=g.charCodeAt(d)|0,f.next()}function s(u,f){return f.x=u.x,f.y=u.y,f.z=u.z,f.w=u.w,f}function c(u,f){var g=new i(u),d=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,S=(y+v)/(1<<21);while(S===0);return S},h.int32=g.next,h.quick=h,d&&(typeof d=="object"&&s(d,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=c:this.xor128=c})(s5,t)})(Ll)),Ll.exports}var Vl={exports:{}},c5=Vl.exports,M2;function u5(){return M2||(M2=1,(function(t){(function(e,n,r){function i(u){var f=this,g="";f.next=function(){var h=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^(h^h<<1))|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,u===(u|0)?f.x=u:g+=u;for(var d=0;d<g.length+64;d++)f.x^=g.charCodeAt(d)|0,d==g.length&&(f.d=f.x<<10^f.x>>>4),f.next()}function s(u,f){return f.x=u.x,f.y=u.y,f.z=u.z,f.w=u.w,f.v=u.v,f.d=u.d,f}function c(u,f){var g=new i(u),d=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,S=(y+v)/(1<<21);while(S===0);return S},h.int32=g.next,h.quick=h,d&&(typeof d=="object"&&s(d,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=c:this.xorwow=c})(c5,t)})(Vl)),Vl.exports}var Nl={exports:{}},l5=Nl.exports,w2;function f5(){return w2||(w2=1,(function(t){(function(e,n,r){function i(u){var f=this;f.next=function(){var d=f.x,h=f.i,y,v;return y=d[h],y^=y>>>7,v=y^y<<24,y=d[h+1&7],v^=y^y>>>10,y=d[h+3&7],v^=y^y>>>3,y=d[h+4&7],v^=y^y<<7,y=d[h+7&7],y=y^y<<13,v^=y^y<<9,d[h]=v,f.i=h+1&7,v};function g(d,h){var y,v=[];if(h===(h|0))v[0]=h;else for(h=""+h,y=0;y<h.length;++y)v[y&7]=v[y&7]<<15^h.charCodeAt(y)+v[y+1&7]<<13;for(;v.length<8;)v.push(0);for(y=0;y<8&&v[y]===0;++y);for(y==8?v[7]=-1:v[y],d.x=v,d.i=0,y=256;y>0;--y)d.next()}g(f,u)}function s(u,f){return f.x=u.x.slice(),f.i=u.i,f}function c(u,f){u==null&&(u=+new Date);var g=new i(u),d=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,S=(y+v)/(1<<21);while(S===0);return S},h.int32=g.next,h.quick=h,d&&(d.x&&s(d,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=c:this.xorshift7=c})(l5,t)})(Nl)),Nl.exports}var Bl={exports:{}},g5=Bl.exports,O2;function h5(){return O2||(O2=1,(function(t){(function(e,n,r){function i(u){var f=this;f.next=function(){var d=f.w,h=f.X,y=f.i,v,S;return f.w=d=d+1640531527|0,S=h[y+34&127],v=h[y=y+1&127],S^=S<<13,v^=v<<17,S^=S>>>15,v^=v>>>12,S=h[y]=S^v,f.i=y,S+(d^d>>>16)|0};function g(d,h){var y,v,S,x,m,E=[],O=128;for(h===(h|0)?(v=h,h=null):(h=h+"\0",v=0,O=Math.max(O,h.length)),S=0,x=-32;x<O;++x)h&&(v^=h.charCodeAt((x+32)%h.length)),x===0&&(m=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,x>=0&&(m=m+1640531527|0,y=E[x&127]^=v+m,S=y==0?S+1:0);for(S>=128&&(E[(h&&h.length||0)&127]=-1),S=127,x=512;x>0;--x)v=E[S+34&127],y=E[S=S+1&127],v^=v<<13,y^=y<<17,v^=v>>>15,y^=y>>>12,E[S]=v^y;d.w=m,d.X=E,d.i=S}g(f,u)}function s(u,f){return f.i=u.i,f.w=u.w,f.X=u.X.slice(),f}function c(u,f){u==null&&(u=+new Date);var g=new i(u),d=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,S=(y+v)/(1<<21);while(S===0);return S},h.int32=g.next,h.quick=h,d&&(d.X&&s(d,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=c:this.xor4096=c})(g5,t)})(Bl)),Bl.exports}var _l={exports:{}},p5=_l.exports,D2;function d5(){return D2||(D2=1,(function(t){(function(e,n,r){function i(u){var f=this,g="";f.next=function(){var h=f.b,y=f.c,v=f.d,S=f.a;return h=h<<25^h>>>7^y,y=y-v|0,v=v<<24^v>>>8^S,S=S-h|0,f.b=h=h<<20^h>>>12^y,f.c=y=y-v|0,f.d=v<<16^y>>>16^S,f.a=S-h|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,u===Math.floor(u)?(f.a=u/4294967296|0,f.b=u|0):g+=u;for(var d=0;d<g.length+20;d++)f.b^=g.charCodeAt(d)|0,f.next()}function s(u,f){return f.a=u.a,f.b=u.b,f.c=u.c,f.d=u.d,f}function c(u,f){var g=new i(u),d=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,S=(y+v)/(1<<21);while(S===0);return S},h.int32=g.next,h.quick=h,d&&(typeof d=="object"&&s(d,g),h.state=function(){return s(g,{})}),h}n&&n.exports?n.exports=c:this.tychei=c})(p5,t)})(_l)),_l.exports}var Ul={exports:{}};const y5={},v5=Object.freeze(Object.defineProperty({__proto__:null,default:y5},Symbol.toStringTag,{value:"Module"})),x5=Pb(v5);var T5=Ul.exports,R2;function m5(){return R2||(R2=1,(function(t){(function(e,n,r){var i=256,s=6,c=52,u="random",f=r.pow(i,s),g=r.pow(2,c),d=g*2,h=i-1,y;function v(w,D,R){var B=[];D=D==!0?{entropy:!0}:D||{};var _=E(m(D.entropy?[w,M(n)]:w??O(),3),B),G=new S(B),z=function(){for(var H=G.g(s),A=f,$=0;H<g;)H=(H+$)*i,A*=i,$=G.g(1);for(;H>=d;)H/=2,A/=2,$>>>=1;return(H+$)/A};return z.int32=function(){return G.g(4)|0},z.quick=function(){return G.g(4)/4294967296},z.double=z,E(M(G.S),n),(D.pass||R||function(H,A,$,K){return K&&(K.S&&x(K,G),H.state=function(){return x(G,{})}),$?(r[u]=H,A):H})(z,_,"global"in D?D.global:this==r,D.state)}function S(w){var D,R=w.length,B=this,_=0,G=B.i=B.j=0,z=B.S=[];for(R||(w=[R++]);_<i;)z[_]=_++;for(_=0;_<i;_++)z[_]=z[G=h&G+w[_%R]+(D=z[_])],z[G]=D;(B.g=function(H){for(var A,$=0,K=B.i,ee=B.j,U=B.S;H--;)A=U[K=h&K+1],$=$*i+U[h&(U[K]=U[ee=h&ee+A])+(U[ee]=A)];return B.i=K,B.j=ee,$})(i)}function x(w,D){return D.i=w.i,D.j=w.j,D.S=w.S.slice(),D}function m(w,D){var R=[],B=typeof w,_;if(D&&B=="object")for(_ in w)try{R.push(m(w[_],D-1))}catch{}return R.length?R:B=="string"?w:w+"\0"}function E(w,D){for(var R=w+"",B,_=0;_<R.length;)D[h&_]=h&(B^=D[h&_]*19)+R.charCodeAt(_++);return M(D)}function O(){try{var w;return y&&(w=y.randomBytes)?w=w(i):(w=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(w)),M(w)}catch{var D=e.navigator,R=D&&D.plugins;return[+new Date,e,R,e.screen,M(n)]}}function M(w){return String.fromCharCode.apply(0,w)}if(E(r.random(),n),t.exports){t.exports=v;try{y=x5}catch{}}else r["seed"+u]=v})(typeof self<"u"?self:T5,[],Math)})(Ul)),Ul.exports}var Bh,b2;function S5(){if(b2)return Bh;b2=1;var t=i5(),e=o5(),n=u5(),r=f5(),i=h5(),s=d5(),c=m5();return c.alea=t,c.xor128=e,c.xorwow=n,c.xorshift7=r,c.xor4096=i,c.tychei=s,Bh=c,Bh}var C5=S5();const E5=Ds(C5),M5=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w5=[1,0,0,0,1,0,0,0,1],Fd=1e-6,Gd=1e-12,{vtkErrorMacro:EM,vtkWarningMacro:mi}=V;let MM=0;const L2=20;function Dc(t){return()=>EM(`vtkMath::${t} - NOT IMPLEMENTED`)}function ec(t,e,n,r){let i;for(let s=0;s<e;s++)i=t[n*e+s],t[n*e+s]=t[r*e+s],t[r*e+s]=i}function jo(t,e,n,r){let i;for(let s=0;s<e;s++)i=t[s*e+n],t[s*e+n]=t[s*e+r],t[s*e+r]=i}function qe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const O5=()=>Math.PI;function D5(t,e){return e>1023?t*2**1023*2**(e-1023):e<-1074?t*2**-1074*2**(e+1074):t*2**e}function ct(t){return t/180*Math.PI}function Ms(t){return t*180/Math.PI}const{round:Ho,floor:R5,ceil:b5,min:L5,max:V5}=Math;function N5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0;for(let i=e,s=t.length;i<s;i+=n)t[i]<r&&(r=t[i]);return r}function B5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0;for(let i=e,s=t.length;i<s;i+=n)r<t[i]&&(r=t[i]);return r}function _5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,i=-1/0;for(let s=e,c=t.length;s<c;s+=n)t[s]<r&&(r=t[s]),i<t[s]&&(i=t[s]);return[r,i]}const U5=Dc("ceilLog2"),k5=Dc("factorial");function Gn(t){let e=1;for(;e<t;)e*=2;return e}function $o(t){return t===Gn(t)}function F5(t,e){let n=1;for(let r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function G5(t,e){if(t<e)return 0;const n=qe(e);for(let r=0;r<e;++r)n[r]=r;return n}function z5(t,e,n){let r=0;for(let i=e-1;i>=0;--i)if(n[i]<t-e+i){let s=n[i]+1;for(;i<e;)n[i++]=s++;r=1;break}return r}function A5(t){E5(`${t}`,{global:!0}),MM=t}function j5(){return MM}function H5(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+n*Math.random()}const $5=Dc("gaussian");function ws(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function wt(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function wM(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function OM(t,e){return t[0]*=e,t[1]*=e,t}function Op(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function W5(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function ye(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function K5(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function It(t,e,n){const r=t[1]*e[2]-t[2]*e[1],i=t[2]*e[0]-t[0]*e[2],s=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=i,n[2]=s,n}function Sn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function Cn(t){const e=Sn(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function X5(t){const e=Sn(t,3);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e),e}function Y5(t,e,n,r){const i=t[0]*t[0],s=t[1]*t[1],c=t[2]*t[2],u=Math.sqrt(i+s+c);let f,g,d;i>s&&i>c?(f=0,g=1,d=2):s>c?(f=1,g=2,d=0):(f=2,g=0,d=1);const h=t[f]/u,y=t[g]/u,v=t[d]/u,S=Math.sqrt(h*h+v*v);if(r!==0){const x=Math.sin(r),m=Math.cos(r);e&&(e[f]=(v*m-h*y*x)/S,e[g]=x*S,e[d]=(-(h*m)-y*v*x)/S),n&&(n[f]=(-(v*x)-h*y*m)/S,n[g]=m*S,n[d]=(h*x-y*v*m)/S)}else e&&(e[f]=v/S,e[g]=0,e[d]=-h/S),n&&(n[f]=-h*y/S,n[g]=S,n[d]=-y*v/S)}function q5(t,e,n){const r=ye(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;const i=ye(t,e)/r;for(let s=0;s<3;s++)n[s]=e[s];return wM(n,i),!0}function Dp(t,e){return t[0]*e[0]+t[1]*e[1]}function Z5(t,e,n){const r=Dp(e,e);if(r===0)return n[0]=0,n[1]=0,!1;const i=Dp(t,e)/r;for(let s=0;s<2;s++)n[s]=e[s];return OM(n,i),!0}function mn(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function Q5(t,e){const n=[0,0,0];return It(t,e,n),Math.atan2(Sn(n),ye(t,e))}function J5(t,e,n){const r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(r**2)/(2*e))}function P5(t,e,n){const r=Math.abs(t-n);return Math.exp(-(r**2)/(2*e))}function I5(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function DM(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function RM(t){const e=DM(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function at(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function eF(t,e){let n,r,i;const s=[0,0,0];for(let c=0;c<3;c++)i=Math.abs(t[c*3]),(r=Math.abs(t[c*3+1]))>i&&(i=r),(r=Math.abs(t[c*3+2]))>i&&(i=r),s[c]=1/i;i=s[0]*Math.abs(t[0]),n=0,(r=s[1]*Math.abs(t[3]))>=i&&(i=r,n=1),(r=s[2]*Math.abs(t[6]))>=i&&(n=2),n!==0&&(ec(t,3,n,0),s[n]=s[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],i=s[1]*Math.abs(t[4]),n=1,(r=s[2]*Math.abs(t[7]))>=i&&(n=2,ec(t,3,1,2),s[2]=s[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function tF(t,e,n){let r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function nF(t,e,n){const r=t[0],i=t[1],s=t[2],c=t[3],u=t[4],f=t[5],g=t[6],d=t[7],h=t[8],y=+at(u,d,f,h),v=-at(c,g,f,h),S=+at(c,g,u,d),x=-at(i,d,s,h),m=+at(r,g,s,h),E=-at(r,g,i,d),O=+at(i,u,s,f),M=-at(r,c,s,f),w=+at(r,c,i,u),D=r*y+i*v+s*S,R=y*e[0]+x*e[1]+O*e[2],B=v*e[0]+m*e[1]+M*e[2],_=S*e[0]+E*e[1]+w*e[2];n[0]=R/D,n[1]=B/D,n[2]=_/D}function rF(t,e,n){const r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],i=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],s=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=i,n[2]=s}function Rp(t,e,n){const r=[...t],i=[...e];for(let s=0;s<3;s++)n[s]=r[0]*i[s]+r[1]*i[s+3]+r[2]*i[s+6],n[s+3]=r[3]*i[s]+r[4]*i[s+3]+r[5]*i[s+6],n[s+6]=r[6]*i[s]+r[7]*i[s+3]+r[8]*i[s+6]}function aF(t,e,n,r,i,s,c){r!==i&&EM("Number of columns of A must match number of rows of B.");const u=[...t],f=[...e];for(let g=0;g<n;g++)for(let d=0;d<s;d++){c[g*s+d]=0;for(let h=0;h<r;h++)c[g*s+d]+=u[g*r+h]*f[d+s*h]}}function Ss(t,e){let n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function iF(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],c=t[4],u=t[5],f=t[6],g=t[7],d=t[8],h=+at(c,g,u,d),y=-at(s,f,u,d),v=+at(s,f,c,g),S=-at(r,g,i,d),x=+at(n,f,i,d),m=-at(n,f,r,g),E=+at(r,c,i,u),O=-at(n,s,i,u),M=+at(n,s,r,c),w=n*h+r*y+i*v;w===0&&mi("Matrix has 0 determinant"),e[0]=h/w,e[3]=y/w,e[6]=v/w,e[1]=S/w,e[4]=x/w,e[7]=m/w,e[2]=E/w,e[5]=O/w,e[8]=M/w}function mf(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function bM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Fd;if(t.length!==e.length)return!1;function r(i,s){return Math.abs(i-e[s])<=n}return t.every(r)}const dc=bM;function LM(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function VM(t,e){for(let n=0;n<t;n++){for(let r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function sF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fd;return dc(t,M5,e)}function oF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Fd;return dc(t,w5,e)}function NM(t,e){const n=t[0]*t[0],r=t[0]*t[1],i=t[0]*t[2],s=t[0]*t[3],c=t[1]*t[1],u=t[2]*t[2],f=t[3]*t[3],g=t[1]*t[2],d=t[1]*t[3],h=t[2]*t[3],y=c+u+f;let v=1/(n+y);const S=(n-y)*v;v*=2,e[0]=c*v+S,e[3]=(g+s)*v,e[6]=(d-i)*v,e[1]=(g-s)*v,e[4]=u*v+S,e[7]=(h+r)*v,e[2]=(d+i)*v,e[5]=(h-r)*v,e[8]=f*v+S}function kl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function bp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=kl(t[0],n),e[1]=kl(t[1],n),e[2]=kl(t[2],n),e}function Rc(t,e,n,r){let i,s,c,u,f,g,d,h,y,v,S,x,m,E,O,M;const w=qe(e),D=qe(e),R=(_,G,z)=>{E=_[G],m=_[z],_[G]=E-x*(m+E*v),_[z]=m+x*(E-m*v)};for(VM(e,r),f=0;f<e;f++)w[f]=n[f]=t[f+f*e],D[f]=0;for(i=0;i<L2;i++){for(S=0,f=0;f<e-1;f++)for(u=f+1;u<e;u++)S+=Math.abs(t[f*e+u]);if(S===0)break;for(i<3?d=.2*S/(e*e):d=0,f=0;f<e-1;f++)for(u=f+1;u<e;u++)if(E=100*Math.abs(t[f*e+u]),i>3&&Math.abs(n[f])+E===Math.abs(n[f])&&Math.abs(n[u])+E===Math.abs(n[u]))t[f*e+u]=0;else if(Math.abs(t[f*e+u])>d){for(m=n[u]-n[f],Math.abs(m)+E===Math.abs(m)?y=t[f*e+u]/m:(h=.5*m/t[f*e+u],y=1/(Math.abs(h)+Math.sqrt(1+h*h)),h<0&&(y=-y)),O=1/Math.sqrt(1+y*y),x=y*O,v=x/(1+O),m=y*t[f*e+u],D[f]-=m,D[u]+=m,n[f]-=m,n[u]+=m,t[f*e+u]=0,s=0;s<=f-1;s++)R(t,s*e+f,s*e+u);for(s=f+1;s<=u-1;s++)R(t,f*e+s,s*e+u);for(s=u+1;s<e;s++)R(t,f*e+s,u*e+s);for(s=0;s<e;s++)R(r,s*e+f,s*e+u)}for(f=0;f<e;f++)w[f]+=D[f],n[f]=w[f],D[f]=0}if(i>=L2)return mi("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(s=0;s<e-1;s++){for(c=s,M=n[c],i=s+1;i<e;i++)(n[i]>=M||Math.abs(n[i]-M)<Gd)&&(c=i,M=n[c]);c!==s&&(n[c]=n[s],n[s]=M,jo(r,e,s,c))}const B=(e>>1)+(e&1);for(g=0,i=0;i<e*e;i++)r[i]>=0&&g++;if(g<B)for(i=0;i<e;i++)r[i*e+s]*=-1;return 1}function BM(t,e){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],s=[...n];Rc(s,4,i,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function cF(t,e,n){const r=t[0]*e[0],i=t[0]*e[1],s=t[0]*e[2],c=t[0]*e[3],u=t[1]*e[0],f=t[1]*e[1],g=t[1]*e[2],d=t[1]*e[3],h=t[2]*e[0],y=t[2]*e[1],v=t[2]*e[2],S=t[2]*e[3],x=t[3]*e[0],m=t[3]*e[1],E=t[3]*e[2],O=t[3]*e[3];n[0]=r-f-v-O,n[1]=i+u+S-E,n[2]=s-d+h+m,n[3]=c+g-y+x}function _M(t,e){for(let y=0;y<9;y++)e[y]=t[y];const n=qe(3),r=qe(3);let i;for(let y=0;y<3;y++){const v=Math.abs(e[y*3]),S=Math.abs(e[y*3+1]),x=Math.abs(e[y*3+2]);i=S>v?S:v,i=x>i?x:i,n[y]=1,i!==0&&(n[y]/=i)}const s=Math.abs(e[0])*n[0],c=Math.abs(e[3])*n[1],u=Math.abs(e[6])*n[2];r[0]=0,i=s,c>=i&&(i=c,r[0]=1),u>=i&&(r[0]=2),r[0]!==0&&(jo(e,3,r[0],0),n[r[0]]=n[0]);const f=Math.abs(e[4])*n[1],g=Math.abs(e[7])*n[2];r[1]=1,i=f,g>=i&&(r[1]=2,jo(e,3,1,2)),r[2]=2;let d=0;if(mf(e)<0){d=1;for(let y=0;y<9;y++)e[y]=-e[y]}const h=qe(4);if(BM(e,h),NM(h,e),d)for(let y=0;y<9;y++)e[y]=-e[y];r[1]!==1&&jo(e,3,r[1],1),r[0]!==0&&jo(e,3,r[0],0)}function UM(t,e,n){let r,i,s,c,u,f;const g=[...t];if(Rc(g,3,e,n),e[0]===e[1]&&e[0]===e[2]){LM(n);return}for(Ss(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(f=Math.abs(n[r*3]),c=0,i=1;i<3;i++)f<(u=Math.abs(n[r*3+i]))&&(f=u,c=i);c!==r&&(u=e[c],e[c]=e[r],e[r]=u,ec(n,3,r,c)),n[c*3+c]<0&&(n[c*3]=-n[c*3],n[c*3+1]=-n[c*3+1],n[c*3+2]=-n[c*3+2]),i=(c+1)%3,s=(c+2)%3,n[i*3]=0,n[i*3+1]=0,n[i*3+2]=0,n[i*3+i]=1;const d=It([n[c*3],n[c*3+1],n[c*3+2]],[n[i*3],n[i*3+1],n[i*3+2]],[]);Cn(d);const h=It(d,[n[c*3],n[c*3+1],n[c*3+2]],[]);for(let y=0;y<3;y++)n[s*3+y]=d[y],n[i*3+y]=h[y];Ss(n,n);return}for(f=Math.abs(n[0]),c=0,r=1;r<3;r++)f<(u=Math.abs(n[r*3]))&&(f=u,c=r);if(c!==0){const d=e[c];e[c]=e[0],e[0]=d,ec(n,3,c,0)}if(Math.abs(n[4])<Math.abs(n[7])){const d=e[2];e[2]=e[1],e[1]=d,ec(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);mf(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),Ss(n,n)}function uF(t,e,n,r){let i;const s=[...t],c=mf(s);if(c<0)for(i=0;i<9;i++)s[i]=-s[i];_M(s,e),Ss(s,s),Rp(s,e,r),UM(r,n,r),Rp(e,r,e),Ss(r,r),c<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function zd(t,e,n){let r,i,s,c,u=0,f,g,d;const h=qe(n);for(r=0;r<n;r++){for(c=0,i=0;i<n;i++)(d=Math.abs(t[r*n+i]))>c&&(c=d);if(c===0)return mi("Unable to factor linear system"),0;h[r]=1/c}for(i=0;i<n;i++){for(r=0;r<i;r++){for(f=t[r*n+i],s=0;s<r;s++)f-=t[r*n+s]*t[s*n+i];t[r*n+i]=f}for(c=0,r=i;r<n;r++){for(f=t[r*n+i],s=0;s<i;s++)f-=t[r*n+s]*t[s*n+i];t[r*n+i]=f,(g=h[r]*Math.abs(f))>=c&&(c=g,u=r)}if(i!==u){for(s=0;s<n;s++)g=t[u*n+s],t[u*n+s]=t[i*n+s],t[i*n+s]=g;h[u]=h[i]}if(e[i]=u,Math.abs(t[i*n+i])<=Gd)return mi("Unable to factor linear system"),0;if(i!==n-1)for(g=1/t[i*n+i],r=i+1;r<n;r++)t[r*n+i]*=g}return 1}function Ad(t,e,n,r){let i,s,c,u,f;for(c=-1,i=0;i<r;i++){if(u=e[i],f=n[u],n[u]=n[i],c>=0)for(s=c;s<=i-1;s++)f-=t[i*r+s]*n[s];else f!==0&&(c=i);n[i]=f}for(i=r-1;i>=0;i--){for(f=n[i],s=i+1;s<r;s++)f-=t[i*r+s]*n[s];n[i]=f/t[i*r+i]}}function kM(t,e,n){if(n===2){const i=qe(2),s=at(t[0],t[1],t[2],t[3]);return s===0?0:(i[0]=(t[3]*e[0]-t[1]*e[1])/s,i[1]=(-(t[2]*e[0])+t[0]*e[1])/s,e[0]=i[0],e[1]=i[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=qe(n);return zd(t,r,n)===0?0:(Ad(t,r,e,n),1)}function jd(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const s=r||qe(n),c=i||qe(n);if(zd(t,s,n)===0)return null;for(let u=0;u<n;u++){for(let f=0;f<n;f++)c[f]=0;c[u]=1,Ad(t,s,c,n);for(let f=0;f<n;f++)e[f*n+u]=c[f]}return e}function lF(t,e){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let i=0;i<e;i++)for(let s=i;s<e;s++)Math.abs(t[i*e+s])>r&&(r=Math.abs(t[i*e+s]));for(let i=0;i<e;i++)Math.abs(t[i*e+i])<n&&(n=Math.abs(t[i*e+i]));return n===0?Number.MAX_VALUE:r/n}function fF(t,e,n){return Rc(t,3,e,n)}function Lp(t,e,n,r){if(t<n)return mi("Insufficient number of samples. Underdetermined."),0;let i,s,c;const u=qe(n*n),f=qe(n),g=qe(n*n);for(c=0;c<t;c++)for(i=0;i<n;i++)for(s=i;s<n;s++)u[i*n+s]+=e[c*n+i]*e[c*n+s];for(i=0;i<n;i++)for(s=0;s<i;s++)u[i*n+s]=u[s*n+i];for(Rc(u,n,f,g),i=0;i<n;i++)r[i]=g[i*n+n-1];return 1}function gF(t,e,n,r,i,s){let c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<i)return mi("Insufficient number of samples. Underdetermined."),0;const u=qe(i);let f=1,g,d=0,h,y,v,S=0;if(c){for(y=0;y<i;y++)u[y]=1;for(h=0;h<t;h++)for(y=0;y<i;y++)Math.abs(r[h*i+y])>Gd&&(f=0,u[y]=0);if(f&&i===1)return mi("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),Lp(t,e,n,s);if(f)S=1;else for(y=0;y<i;y++)u[y]&&(S=1)}S&&(g=qe(n),d=Lp(t,e,n,g));const x=qe(n*n),m=qe(n*n),E=qe(n*i);for(v=0;v<t;v++)for(h=0;h<n;h++){for(y=h;y<n;y++)x[h*n+y]+=e[v*n+h]*e[v*n+y];for(y=0;y<i;y++)E[h*i+y]+=e[v*n+h]*r[v*i+y]}for(h=0;h<n;h++)for(y=0;y<h;y++)x[h*n+y]=x[y*n+h];const O=jd(x,m,n);if(O)for(h=0;h<n;h++)for(y=0;y<i;y++)for(s[h*i+y]=0,v=0;v<n;v++)s[h*i+y]+=m[h*n+v]*E[v*i+y];if(S){for(y=0;y<i;y++)if(u[y])for(h=0;h<n;h++)s[h*i+y]=g[h*i]}return S?d&&O:O}function hF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function pF(t,e){let n,r;const[i,s,c]=t,u=1/3,f=1/6,g=2/3;let d=i,h=i;s>d?d=s:s<h&&(h=s),c>d?d=c:c<h&&(h=c);const y=d;y>0?r=(d-h)/d:r=0,r>0?(i===d?n=f*(s-c)/(d-h):s===d?n=u+f*(c-i)/(d-h):n=g+f*(i-s)/(d-h),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=y}function FM(t,e){const[n,r,i]=t,s=1/3,c=1/6,u=2/3,f=5/6;let g,d,h;n>c&&n<=s?(d=1,g=(s-n)/c,h=0):n>s&&n<=.5?(d=1,h=(n-s)/c,g=0):n>.5&&n<=u?(h=1,d=(u-n)/c,g=0):n>u&&n<=f?(h=1,g=(n-u)/c,d=0):n>f&&n<=1?(g=1,h=(1-n)/c,d=0):(g=1,d=n/c,h=0),g=r*g+(1-r),d=r*d+(1-r),h=r*h+(1-r),g*=i,d*=i,h*=i,e[0]=g,e[1]=d,e[2]=h}function GM(t,e){const[n,r,i]=t;let s=(n+16)/116,c=r/500+s,u=s-i/200;s**3>.008856?s**=3:s=(s-16/116)/7.787,c**3>.008856?c**=3:c=(c-16/116)/7.787,u**3>.008856?u**=3:u=(u-16/116)/7.787;const f=.9505,g=1,d=1.089;e[0]=f*c,e[1]=g*s,e[2]=d*u}function zM(t,e){const[n,r,i]=t,s=.9505,c=1,u=1.089;let f=n/s,g=r/c,d=i/u;f>.008856?f**=1/3:f=7.787*f+16/116,g>.008856?g**=1/3:g=7.787*g+16/116,d>.008856?d**=1/3:d=7.787*d+16/116,e[0]=116*g-16,e[1]=500*(f-g),e[2]=200*(g-d)}function AM(t,e){const[n,r,i]=t;let s=n*3.2406+r*-1.5372+i*-.4986,c=n*-.9689+r*1.8758+i*.0415,u=n*.0557+r*-.204+i*1.057;s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92,c>.0031308?c=1.055*c**(1/2.4)-.055:c*=12.92,u>.0031308?u=1.055*u**(1/2.4)-.055:u*=12.92;let f=s;f<c&&(f=c),f<u&&(f=u),f>1&&(s/=f,c/=f,u/=f),s<0&&(s=0),c<0&&(c=0),u<0&&(u=0),e[0]=s,e[1]=c,e[2]=u}function jM(t,e){let[n,r,i]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,i>.04045?i=((i+.055)/1.055)**2.4:i/=12.92,e[0]=n*.4124+r*.3576+i*.1805,e[1]=n*.2126+r*.7152+i*.0722,e[2]=n*.0193+r*.1192+i*.9505}function dF(t,e){const n=[0,0,0];jM(t,n),zM(n,e)}function yF(t,e){const n=[0,0,0];GM(t,n),AM(n,e)}function Hd(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function Fl(t){return!(t[1]-t[0]<0)}function vF(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function Gl(t,e,n){return t<e?e:t>n?n:t}function Vp(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=Gl(t[0],e[0],n[0]),r[1]=Gl(t[1],e[1],n[1]),r[2]=Gl(t[2],e[2],n[2]),r}function xF(t,e){let n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}const TF=Dc("GetScalarTypeFittingRange"),mF=Dc("GetAdjustedScalarRange");function SF(t,e){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function CF(t,e,n){if(!t||!e)return 0;for(let r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function EF(t,e,n){if(!t||!e||!n)return 0;for(let r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function MF(t,e,n,r){const i=qe(3),s=qe(3),c=qe(3),u=qe(3),f=qe(3),g=qe(3);for(let w=0;w<3;++w)i[w]=t[w]-e[w],s[w]=e[w]-n[w],c[w]=n[w]-t[w],u[w]=-i[w],f[w]=-s[w],g[w]=-c[w];const d=Sn(u),h=Sn(f),y=Sn(c),v=qe(3);It(i,s,v);const S=Sn(v),x=d*h*y/(2*S),m=2*S*S,E=h*h*ye(i,g)/m,O=y*y*ye(u,s)/m,M=d*d*ye(c,f)/m;for(let w=0;w<3;++w)r[w]=E*t[w]+O*e[w]+M*n[w];return x}const wF=1/0,OF=-1/0,DF=t=>!Number.isFinite(t),{isFinite:RF,isNaN:Np}=Number,HM=Np;function Sf(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function bF(t){let e=-1,n=-1;for(let r=0;r<t.length;r++){const i=Math.abs(t[r]);i>e&&(n=r,e=i)}return n}function LF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const n=new Array(e),r=new Array(e);for(let s=0;s<e;++s)n[s]=s,r[s]=s;for(let s=e-1;s>0;s--){let c=-1/0,u=0,f=0;for(let g=0;g<=s;++g){const d=n[g];for(let h=0;h<=s;++h){const y=r[h],v=Math.abs(t[d+e*y]);v>c&&(c=v,u=g,f=h)}}[n[s],n[u]]=[n[u],n[s]],[r[s],r[f]]=[r[f],r[s]]}const i=new Array(e*e).fill(0);for(let s=0;s<e;++s){const c=n[s]+e*r[s];i[c]=t[c]<0?-1:1}return i}function $M(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function VF(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map($M).join("")}`}function al(t){return Math.round(t*255)}function NF(t){return t.length===3?`rgb(${t.map(al).join(", ")})`:`rgba(${al(t[0]||0)}, ${al(t[1]||0)}, ${al(t[2]||0)}, ${t[3]||0})`}var V2={Pi:O5,ldexp:D5,radiansFromDegrees:ct,degreesFromRadians:Ms,round:Ho,floor:R5,ceil:b5,ceilLog2:U5,min:L5,max:V5,arrayMin:N5,arrayMax:B5,arrayRange:_5,isPowerOfTwo:$o,nearestPowerOfTwo:Gn,factorial:k5,binomial:F5,beginCombination:G5,nextCombination:z5,randomSeed:A5,getSeed:j5,random:H5,gaussian:$5,add:ws,subtract:wt,multiplyScalar:wM,multiplyScalar2D:OM,multiplyAccumulate:Op,multiplyAccumulate2D:W5,dot:ye,outer:K5,cross:It,norm:Sn,normalize:Cn,perpendiculars:Y5,projectVector:q5,projectVector2D:Z5,distance2BetweenPoints:mn,angleBetweenVectors:Q5,gaussianAmplitude:J5,gaussianWeight:P5,dot2D:Dp,outer2D:I5,norm2D:DM,normalize2D:RM,determinant2x2:at,LUFactor3x3:eF,LUSolve3x3:tF,linearSolve3x3:nF,multiply3x3_vect3:rF,multiply3x3_mat3:Rp,multiplyMatrix:aF,transpose3x3:Ss,invert3x3:iF,identity3x3:LM,identity:VM,isIdentity:sF,isIdentity3x3:oF,determinant3x3:mf,quaternionToMatrix3x3:NM,areEquals:bM,areMatricesEqual:dc,roundNumber:kl,roundVector:bp,matrix3x3ToQuaternion:BM,multiplyQuaternion:cF,orthogonalize3x3:_M,diagonalize3x3:UM,singularValueDecomposition3x3:uF,solveLinearSystem:kM,invertMatrix:jd,luFactorLinearSystem:zd,luSolveLinearSystem:Ad,estimateMatrixCondition:lF,jacobi:fF,jacobiN:Rc,solveHomogeneousLeastSquares:Lp,solveLeastSquares:gF,hex2float:hF,rgb2hsv:pF,hsv2rgb:FM,lab2xyz:GM,xyz2lab:zM,xyz2rgb:AM,rgb2xyz:jM,rgb2lab:dF,lab2rgb:yF,uninitializeBounds:Hd,areBoundsInitialized:Fl,computeBoundsFromPoints:vF,clampValue:Gl,clampVector:Vp,clampAndNormalizeValue:xF,getScalarTypeFittingRange:TF,getAdjustedScalarRange:mF,extentIsWithinOtherExtent:SF,boundsIsWithinOtherBounds:CF,pointIsWithinBounds:EF,solve3PointCircle:MF,inf:wF,negInf:OF,isInf:DF,isNan:Np,isNaN:Np,isFinite:RF,createUninitializedBounds:Sf,getMajorAxisIndex:bF,getSparseOrthogonalMatrix:LF,floatToHex2:$M,floatRGB2HexCode:VF,float2CssRGBA:NF};function BF(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{V.vtkErrorMacro("not implemented")}}const _F={};function WM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_F,n),V.obj(t,e),V.setGet(t,e,["transform"]),BF(t,e)}const UF=V.newInstance(WM,"vtkImplicitFunction");var kF={newInstance:UF,extend:WM};const Bp=1e-6,KM="coincide",XM="disjoint";function FF(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function YM(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function qM(t,e,n,r){const i=[];wt(t,e,i);const s=ye(n,i);r[0]=t[0]-s*n[0],r[1]=t[1]-s*n[1],r[2]=t[2]-s*n[2]}function ZM(t,e,n){const r=ye(t,e);let i=ye(e,e);return i===0&&(i=1),n[0]=t[0]-r*e[0]/i,n[1]=t[1]-r*e[1]/i,n[2]=t[2]-r*e[2]/i,n}function QM(t,e,n,r){const i=[];wt(t,e,i);const s=ye(n,i),c=ye(n,n);c!==0?(r[0]=t[0]-s*n[0]/c,r[1]=t[1]-s*n[1]/c,r[2]=t[2]-s*n[2]/c):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function JM(t,e,n,r){const i={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},s=[],c=[];wt(e,t,s),wt(n,t,c);const u=ye(r,c),f=ye(r,s);let g,d;return f<0?g=-f:g=f,u<0?d=-u*Bp:d=u*Bp,g<=d||(i.t=u/f,i.x[0]=t[0]+i.t*s[0],i.x[1]=t[1]+i.t*s[1],i.x[2]=t[2]+i.t*s[2],i.intersection=!0,i.betweenPoints=i.t>=0&&i.t<=1),i}function PM(t,e,n,r){const i={intersection:!1,l0:[],l1:[],error:null},s=[];It(e,r,s);const c=s.map(h=>Math.abs(h));if(c[0]+c[1]+c[2]<Bp){const h=[];return wt(t,n,h),ye(e,h)===0?i.error=KM:i.error=XM,i}let u;c[0]>c[1]&&c[0]>c[2]?u="x":c[1]>c[2]?u="y":u="z";const f=[],g=-ye(e,t),d=-ye(r,n);switch(u){case"x":f[0]=0,f[1]=(d*e[2]-g*r[2])/s[0],f[2]=(g*r[1]-d*e[1])/s[0];break;case"y":f[0]=(g*r[2]-d*e[2])/s[1],f[1]=0,f[2]=(d*e[0]-g*r[0])/s[1];break;case"z":f[0]=(d*e[1]-g*r[1])/s[2],f[1]=(g*r[0]-d*e[0])/s[2],f[2]=0;break}return i.l0=f,ws(f,s,i.l1),i.intersection=!0,i}const GF={evaluate:FF,distanceToPlane:YM,projectPoint:qM,projectVector:ZM,generalizedProjectPoint:QM,intersectWithLine:JM,intersectWithPlane:PM,DISJOINT:XM,COINCIDE:KM};function zF(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>YM(n,e.origin,e.normal),t.projectPoint=(n,r)=>{qM(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>ZM(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{QM(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,i)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(i-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>JM(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>PM(n,r,e.origin,e.normal)}const AF={normal:[0,0,1],origin:[0,0,0]};function IM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AF,n),kF.extend(t,e,n),V.setGetArray(t,e,["normal","origin"],3),zF(t,e)}const jF=V.newInstance(IM,"vtkPlane");var Ra={newInstance:jF,extend:IM,...GF};const Cf=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function ew(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Gr(t){return t?.length>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function $d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Wd(t){return $d(t,Cf)}function sf(t,e,n,r){const[i,s,c,u,f,g]=t;return t[0]=i<e?i:e,t[1]=s>e?s:e,t[2]=c<n?c:n,t[3]=u>n?u:n,t[4]=f<r?f:r,t[5]=g>r?g:r,t}function Kd(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)sf(t,...e[n]);else for(let n=0;n<e.length;n+=3)sf(t,...e.slice(n,n+3));return t}function tw(t,e,n,r,i,s,c){const[u,f,g,d,h,y]=t;return c===void 0?(t[0]=Math.min(e[0],u),t[1]=Math.max(e[1],f),t[2]=Math.min(e[2],g),t[3]=Math.max(e[3],d),t[4]=Math.min(e[4],h),t[5]=Math.max(e[5],y)):(t[0]=Math.min(e,u),t[1]=Math.max(n,f),t[2]=Math.min(r,g),t[3]=Math.max(i,d),t[4]=Math.min(s,h),t[5]=Math.max(c,y)),t}function nw(t,e,n,r){const[i,s,c,u,f,g]=t;return t[0]=e,t[1]=e>s?e:s,t[2]=n,t[3]=n>u?n:u,t[4]=r,t[5]=r>g?r:g,i!==e||c!==n||f!==r}function rw(t,e,n,r){const[i,s,c,u,f,g]=t;return t[0]=e<i?e:i,t[1]=e,t[2]=n<c?n:c,t[3]=n,t[4]=r<f?r:f,t[5]=r,s!==e||u!==n||g!==r}function Xd(t,e){return e==null?HF(t):(t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t)}function HF(t){const e=[0,0,0];let n=-1,r=0,i=0;for(let s=0;s<3;++s)i=t[s*2+1]-t[s*2],i>r&&(r=i,n=s),e[s]=i>0?1:0;if(n<0)return Xd(t,.5);for(let s=0;s<3;++s)if(!e[s]){const c=.005*r;t[s*2]-=c,t[s*2+1]+=c}return t}function Yd(t,e,n,r){return Gr(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function qd(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function $F(t,e,n,r){if(!Gr(t))return!1;const i=qd(t);return t[0]-=i[0],t[1]-=i[0],t[2]-=i[1],t[3]-=i[1],t[4]-=i[2],t[5]-=i[2],Yd(t,e,n,r),t[0]+=i[0],t[1]+=i[0],t[2]+=i[1],t[3]+=i[1],t[4]+=i[2],t[5]+=i[2],!0}function tc(t,e){return t[e*2+1]-t[e*2]}function bc(t){return[tc(t,0),tc(t,1),tc(t,2)]}function aw(t){return t.slice(0,2)}function iw(t){return t.slice(2,4)}function sw(t){return t.slice(4,6)}function ow(t){const e=bc(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function Zd(t){if(Gr(t)){const e=bc(t);return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}return null}function cw(t){const e=Zd(t);return e!==null?Math.sqrt(e):null}function Ef(t){return[t[0],t[2],t[4]]}function Mf(t){return[t[1],t[3],t[5]]}function il(t,e){return t<=0&&e>=0||t>=0&&e<=0}function Qd(t,e){return e[0]=[t[0],t[2],t[4]],e[1]=[t[0],t[2],t[5]],e[2]=[t[0],t[3],t[4]],e[3]=[t[0],t[3],t[5]],e[4]=[t[1],t[2],t[4]],e[5]=[t[1],t[2],t[5]],e[6]=[t[1],t[3],t[4]],e[7]=[t[1],t[3],t[5]],e}function uw(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function lw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=Qd(t,[]);for(let i=0;i<r.length;++i)je(r[i],r[i],e);return Wd(n),Kd(n,r)}function fw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function gw(t,e,n,r){const i=[].concat(Cf),s=t.getData();for(let c=0;c<s.length;c+=3){const u=[s[c],s[c+1],s[c+2]],f=ye(u,e);i[0]=Math.min(f,i[0]),i[1]=Math.max(f,i[1]);const g=ye(u,n);i[2]=Math.min(g,i[2]),i[3]=Math.max(g,i[3]);const d=ye(u,r);i[4]=Math.min(d,i[4]),i[5]=Math.max(d,i[5])}return i}function hw(t,e,n,r,i){let s=!0;const c=[];let u=0;const f=[],g=[0,0,0],d=0,h=1,y=2;for(let v=0;v<3;v++)e[v]<t[2*v]?(c[v]=h,g[v]=t[2*v],s=!1):e[v]>t[2*v+1]?(c[v]=d,g[v]=t[2*v+1],s=!1):c[v]=y;if(s)return r[0]=e[0],r[1]=e[1],r[2]=e[2],i[0]=0,1;for(let v=0;v<3;v++)c[v]!==y&&n[v]!==0?f[v]=(g[v]-e[v])/n[v]:f[v]=-1;for(let v=0;v<3;v++)f[u]<f[v]&&(u=v);if(f[u]>1||f[u]<0)return 0;i[0]=f[u];for(let v=0;v<3;v++)if(u!==v){if(r[v]=e[v]+f[u]*n[v],r[v]<t[2*v]||r[v]>t[2*v+1])return 0}else r[v]=g[v];return 1}function pw(t,e,n){const r=[];let i=0,s=1,c=1;for(let u=4;u<=5;++u){r[2]=t[u];for(let f=2;f<=3;++f){r[1]=t[f];for(let g=0;g<=1;++g)if(r[0]=t[g],i=Ra.evaluate(n,e,r),c&&(s=i>=0?1:-1,c=0),i===0||s>0&&i<0||s<0&&i>0)return 1}}return 0}function dw(t,e){if(!(Gr(t)&&Gr(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let i=0;i<3;i++)if(r=!1,e[i*2]>=t[i*2]&&e[i*2]<=t[i*2+1]?(r=!0,n[i*2]=e[i*2]):t[i*2]>=e[i*2]&&t[i*2]<=e[i*2+1]&&(r=!0,n[i*2]=t[i*2]),e[i*2+1]>=t[i*2]&&e[i*2+1]<=t[i*2+1]?(r=!0,n[i*2+1]=e[2*i+1]):t[i*2+1]>=e[i*2]&&t[i*2+1]<=e[i*2+1]&&(r=!0,n[i*2+1]=t[i*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function of(t,e){if(!(Gr(t)&&Gr(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function cf(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function WF(t,e){return!(!of(t,e)||!cf(t,...Ef(e))||!cf(t,...Mf(e)))}function yw(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],i=[0,0,0,0,0,0,0,0];let s=0;for(let h=0;h<2;h++)for(let y=2;y<4;y++)for(let v=4;v<6;v++){const S=[t[h],t[y],t[v]];i[s++]=Ra.evaluate(n,e,S)}let c=2;for(;c--&&!(il(i[r[c][0]],i[r[c][4]])&&il(i[r[c][1]],i[r[c][5]])&&il(i[r[c][2]],i[r[c][6]])&&il(i[r[c][3]],i[r[c][7]])););if(c<0)return!1;const u=Math.sign(n[c]),f=Math.abs((t[c*2+1]-t[c*2])*n[c]);let g=u>0?1:0;for(let h=0;h<4;h++){if(f===0)continue;const y=Math.abs(i[r[c][h]])/f;u>0&&y<g&&(g=y),u<0&&y>g&&(g=y)}const d=(1-g)*t[c*2]+g*t[c*2+1];return u>0?t[c*2]=d:t[c*2+1]=d,!0}function vw(t,e){for(let r=0;r<3;++r)e[r]=e[r]<1?1:e[r];let n=e[0]*e[1]*e[2];for(;n>t;){for(let r=0;r<3;++r)e[r]=e[r]>1?e[r]-1:1;n=e[0]*e[1]*e[2]}}function xw(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];e=e<=0?1:e;let i=0;const s=[0,0,0];let c=-1,u=0;const f=bc(t),g=f[0]+f[1]+f[2],d=g*(.001/3);for(let x=0;x<3;++x)f[x]>u&&(c=x,u=f[x]),f[x]>d?(s[x]=1,i++):s[x]=0;const h=Ef(t),y=Mf(t);if(i<1)return n[0]=1,n[1]=1,n[2]=1,r[0]=h[0]-.5,r[1]=y[0]+.5,r[2]=h[1]-.5,r[3]=y[1]+.5,r[4]=h[2]-.5,r[5]=y[2]+.5,1;let v=e;v/=s[0]?f[0]/g:1,v/=s[1]?f[1]/g:1,v/=s[2]?f[2]/g:1,v**=1/i;for(let x=0;x<3;++x)n[x]=s[x]?Math.floor(v*f[x]/g):1,n[x]=n[x]<1?1:n[x];vw(e,n);const S=.5*f[c]/n[c];for(let x=0;x<3;++x)s[x]?(r[2*x]=h[x],r[2*x+1]=y[x]):(r[2*x]=h[x]-S,r[2*x+1]=y[x]+S);return n[0]*n[1]*n[2]}function Tw(t,e){if(t[0]>=e[0]&&t[0]<=e[1]&&t[1]>=e[2]&&t[1]<=e[3]&&t[2]>=e[4]&&t[2]<=e[5])return 0;const n=[0,0,0];return t[0]<e[0]?n[0]=e[0]-t[0]:t[0]>e[1]&&(n[0]=t[0]-e[1]),t[1]<e[2]?n[1]=e[2]-t[1]:t[1]>e[3]&&(n[1]=t[1]-e[3]),t[2]<e[4]?n[2]=e[4]-t[2]:t[2]>e[5]&&(n[2]=t[2]-e[5]),ye(n,n)}class KF{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(Cf))}getBounds(){return this.bounds}equals(e){return ew(this.bounds,e)}isValid(){return Gr(this.bounds)}setBounds(e){return $d(this.bounds,e)}reset(){return Wd(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sf(this.bounds,...n)}addPoints(e){return Kd(this.bounds,e)}addBounds(e,n,r,i,s,c){return tw(this.bounds,e,n,r,i,s,c)}setMinPoint(e,n,r){return nw(this.bounds,e,n,r)}setMaxPoint(e,n,r){return rw(this.bounds,e,n,r)}inflate(e){return Xd(this.bounds,e)}scale(e,n,r){return Yd(this.bounds,e,n,r)}getCenter(){return qd(this.bounds)}getLength(e){return tc(this.bounds,e)}getLengths(){return bc(this.bounds)}getMaxLength(){return ow(this.bounds)}getDiagonalLength(){return cw(this.bounds)}getDiagonalLength2(){return Zd(this.bounds)}getMinPoint(){return Ef(this.bounds)}getMaxPoint(){return Mf(this.bounds)}getXRange(){return aw(this.bounds)}getYRange(){return iw(this.bounds)}getZRange(){return sw(this.bounds)}getCorners(e){return Qd(this.bounds,e)}computeCornerPoints(e,n){return uw(this.bounds,e,n)}computeLocalBounds(e,n,r){return gw(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return lw(this.bounds,e,n)}computeScale3(e){return fw(this.bounds,e)}cutWithPlane(e,n){return yw(this.bounds,e,n)}intersectBox(e,n,r,i){return hw(this.bounds,e,n,r,i)}intersectPlane(e,n){return pw(this.bounds,e,n)}intersect(e){return dw(this.bounds,e)}intersects(e){return of(this.bounds,e)}containsPoint(e,n,r){return cf(this.bounds,e,n,r)}contains(e){return of(this.bounds,e)}computeDivisions(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return xw(this.bounds,e,n,r)}distance2ToBounds(e){return Tw(e,this.bounds)}}function XF(t){const e=t&&t.bounds;return new KF(e)}const YF={equals:ew,isValid:Gr,setBounds:$d,reset:Wd,addPoint:sf,addPoints:Kd,addBounds:tw,setMinPoint:nw,setMaxPoint:rw,inflate:Xd,scale:Yd,scaleAboutCenter:$F,getCenter:qd,getLength:tc,getLengths:bc,getMaxLength:ow,getDiagonalLength:cw,getDiagonalLength2:Zd,getMinPoint:Ef,getMaxPoint:Mf,getXRange:aw,getYRange:iw,getZRange:sw,getCorners:Qd,computeCornerPoints:uw,computeLocalBounds:gw,transformBounds:lw,computeScale3:fw,cutWithPlane:yw,intersectBox:hw,intersectPlane:pw,intersect:dw,intersects:of,containsPoint:cf,contains:WF,computeDivisions:xw,clampDivisions:vw,distance2ToBounds:Tw,INIT_BOUNDS:Cf};var Ne={newInstance:XF,...YF};const qF={DISPLAY:0,WORLD:1};var mw={CoordinateSystem:qF};const{CoordinateSystem:_p}=mw;function N2(t){return()=>V.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function ZF(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const i=e.textures[r].getMTime();i>n&&(n=i)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=N2("pick"),t.hasKey=N2("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(i=>i!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(_p.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(_p.DISPLAY)}const QF={allocatedRenderTime:10,coordinateSystem:_p.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Sw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QF,n),V.obj(t,e),V.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),V.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),V.moveToProtected(t,e,["parentProp"]),ZF(t,e)}const JF=V.newInstance(Sw,"vtkProp");var Lc={newInstance:JF,extend:Sw,...mw};const PF=1e-6;function IF(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((i,s)=>i+r[s]),t.modified()},t.getOrientationWXYZ=()=>{const r=Ti();vp(r,e.rotation);const i=new Float64Array(3),s=n4(i,r);return[Ms(s),i[0],i[1],i[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return vp(r,e.rotation)},t.rotateX=r=>{r!==0&&(xE(e.rotation,e.rotation,ct(r)),t.modified())},t.rotateY=r=>{r!==0&&(TE(e.rotation,e.rotation,ct(r)),t.modified())},t.rotateZ=r=>{r!==0&&(mE(e.rotation,e.rotation,ct(r)),t.modified())},t.rotateWXYZ=(r,i,s,c)=>{if(r===0||i===0&&s===0&&c===0)return;const u=ct(r),f=Ti();Md(f,[i,s,c],u);const g=new Float64Array(16);Io(g,f),Qt(e.rotation,e.rotation,g),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-PF)return;const i=Io(new Float64Array(16),r);Qt(e.rotation,e.rotation,i),t.modified()},t.setOrientation=(r,i,s)=>r===e.orientation[0]&&i===e.orientation[1]&&s===e.orientation[2]?!1:(e.orientation=[r,i,s],Ve(e.rotation),t.rotateZ(s),t.rotateX(r),t.rotateY(i),t.modified(),!0),t.setOrientationFromQuaternion=r=>{const i=vf();return Io(i,r),dc(i,e.rotation)?!1:(e.rotation=i,t.modified(),!0)},t.setUserMatrix=r=>dc(e.userMatrix,r)?!1:($t(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Ve(e.matrix),e.userMatrix&&Qt(e.matrix,e.matrix,e.userMatrix),Mt(e.matrix,e.matrix,e.origin),Mt(e.matrix,e.matrix,e.position),Qt(e.matrix,e.matrix,e.rotation),lc(e.matrix,e.matrix,e.scale),Mt(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),Pe(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let i=0;i<4;++i)(r===i?1:0)!==e.matrix[r+i*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getBoundsByReference=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r,e.bounds=[...Ne.INIT_BOUNDS],e.boundsMTime.modified(),r;if(!e.mapperBounds||!r.every((i,s)=>r[s]===e.mapperBounds[s])||t.getMTime()>e.boundsMTime.getMTime()){V.vtkDebugMacro("Recomputing bounds..."),e.mapperBounds=r,t.computeMatrix();const i=new Float64Array(16);Pe(i,e.matrix),Ne.transformBounds(r,i,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBounds=()=>{const r=t.getBoundsByReference();try{return[...r]}catch{return r}},t.getCenter=()=>Ne.getCenter(e.bounds),t.getLength=()=>Ne.getLength(e.bounds),t.getXRange=()=>Ne.getXRange(e.bounds),t.getYRange=()=>Ne.getYRange(e.bounds),t.getZRange=()=>Ne.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n),t.getProperty=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.properties[r]==null&&(e.properties[r]=t.makeProperty?.()),e.properties[r]},t.getProperties=()=>(e.properties.length===0&&(e.properties[0]=t.makeProperty?.()),e.properties),t.setProperty=(r,i)=>{const s=Number.isInteger(r),[c,u]=s?[r,i]:[0,r];return e.properties[c]===u?!1:(e.properties[c]=u,!0)},t.getMTime=()=>{let r=e.mtime;return e.properties.forEach(i=>{if(i!==null){const s=i.getMTime();r=s>r?s:r}}),r}}const eG={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[...Ne.INIT_BOUNDS],properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Cw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eG,n),Lc.extend(t,e,n),e.matrixMTime={},V.obj(e.matrixMTime),V.get(t,e,["isIdentity"]),V.getArray(t,e,["orientation"]),V.setGetArray(t,e,["origin","position","scale"],3),V.setGet(t,e,["properties"]),e.matrix=Ve(new Float64Array(16)),e.rotation=Ve(new Float64Array(16)),e.userMatrix=Ve(new Float64Array(16)),e.transform=null,IF(t,e)}const tG=V.newInstance(Cw,"vtkProp3D");var nG={newInstance:tG,extend:Cw};const Ew={FLAT:0,GOURAUD:1,PHONG:2},An={POINTS:0,WIREFRAME:1,SURFACE:2},rG=Ew;var Mw={Shading:Ew,Representation:An,Interpolation:rG};const{Representation:Wo,Interpolation:Ko}=Mw;function B2(t){return()=>V.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function aG(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,i)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==i)&&(e.color[0]=n,e.color[1]=r,e.color[2]=i,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=B2("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=B2("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Ko.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Ko.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Ko.PHONG),t.getInterpolationAsString=()=>V.enumToString(Ko,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(Wo.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Wo.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Wo.POINTS),t.getRepresentationAsString=()=>V.enumToString(Wo,e.representation)}const iG={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Ko.GOURAUD,representation:Wo.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function sG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iG,n),V.obj(t,e),V.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),V.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),aG(t,e)}const oG=V.newInstance(sG,"vtkProperty");var Vc={newInstance:oG,...Mw};function cG(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.properties[0]||t.getProperty();let r=e.properties[0].getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.properties[0]||t.getProperty(),!t.getIsOpaque()),t.makeProperty=Vc.newInstance,t.getMTime=()=>{let r=n.getMTime();if(e.backfaceProperty!==null){const i=e.backfaceProperty.getMTime();r=i>r?i:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let i=e.mapper.getMTime();r=i>r?i:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),i=e.mapper.getInput().getMTime(),r=i>r?i:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,i)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,i)}}const uG={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function ww(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uG,n),nG.extend(t,e,n),e.boundsMTime={},V.obj(e.boundsMTime),V.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),cG(t,e)}const lG=V.newInstance(ww,"vtkActor");var Si={newInstance:lG,extend:ww};const fG={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},bt={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},gG=bt.FLOAT;var Ow={DefaultDataType:gG,DataTypeByteSize:fG,VtkDataTypes:bt};const{vtkErrorMacro:hG}=gr,{DefaultDataType:pG}=Ow,dG=1e-6;function Up(t,e,n){const r=t.length;let i=Number.MAX_VALUE,s=-Number.MAX_VALUE,c,u;for(u=e;u<r;u+=n)if(!Number.isNaN(t[u])){i=t[u],s=i;break}for(;u<r;u+=n)c=t[u],c<i?i=c:c>s&&(s=c);return{min:i,max:s}}function yG(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(i){t>i&&(t=i),e<i&&(e=i),n++,r+=i},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function Dw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const i=t.length/n,s=new Float64Array(i);for(let c=0,u=0;c<i;++c){for(let f=u+n;u<f;++u)s[c]+=t[u]*t[u];s[c]**=.5}return Up(s,0,1)}return Up(t,e<0?0:e,n)}function _2(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function Jd(t){return Object.prototype.toString.call(t).slice(8,-1)}function vG(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let i=0;i<t.getNumberOfTuples();++i){t.getTuple(i,r);const s=Sn(r,e);s>n&&(n=s)}return n}const xG={computeRange:Dw,createRangeHelper:yG,fastComputeRange:Up,getDataType:Jd,getMaxNorm:vG};function TG(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const i=t.getNumberOfComponents(),s=e.values.length/(i>0?i:1);if(r===s)return!0;if(r>s){const c=e.values;return e.values=Vs(e.dataType,(r+s)*i),e.values.set(c),!0}return e.size>r*i&&(e.size=r*i,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.allocate=r=>{n(t.getNumberOfTuples()+r)},t.resize=r=>{n(r);const i=r*t.getNumberOfComponents();return e.size!==i?(e.size=i,t.dataChange(),!0):!1},t.initialize=()=>(t.resize(0),t),t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+i]},t.setComponent=(r,i,s)=>{s!==e.values[r*e.numberOfComponents+i]&&(e.values[r*e.numberOfComponents+i]=s,t.dataChange())},t.getValue=r=>{const i=r/e.numberOfComponents,s=r%e.numberOfComponents;return t.getComponent(i,s)},t.setValue=(r,i)=>{const s=r/e.numberOfComponents,c=r%e.numberOfComponents;t.setComponent(s,c,i)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,i=r;i<0&&(i=e.numberOfComponents===1?0:e.numberOfComponents);let s=null;return e.ranges||(e.ranges=_2(e.ranges,e.numberOfComponents)),s=e.ranges[i],s?(e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple):(s=Dw(t.getData(),r,e.numberOfComponents),e.ranges[i]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple)},t.setRange=(r,i)=>{e.ranges||(e.ranges=_2(e.ranges,e.numberOfComponents));const s={min:r.min,max:r.max};return e.ranges[i]=s,e.rangeTuple[0]=s.min,e.rangeTuple[1]=s.max,e.rangeTuple},t.getRanges=function(){if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0))return structuredClone(e.ranges);const i=[];for(let s=0;s<e.numberOfComponents;s++){const[c,u]=t.getRange(s),f={min:c,max:u};i.push(f)}if(e.numberOfComponents>1){const[s,c]=t.getRange(-1),u={min:s,max:c};i.push(u)}return i},t.setTuple=(r,i)=>{const s=r*e.numberOfComponents;for(let c=0;c<e.numberOfComponents;c++)e.values[s+c]=i[c]},t.setTuples=(r,i)=>{let s=r*e.numberOfComponents;const c=Math.min(i.length,e.size-s);for(let u=0;u<c;)e.values[s++]=i[u++]},t.insertTuple=(r,i)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,i),r),t.insertTuples=(r,i)=>{const s=r+i.length/e.numberOfComponents;return e.size<s*e.numberOfComponents&&(e.size=s*e.numberOfComponents,n(s)),t.setTuples(r,i),s},t.insertNextTuple=r=>{const i=e.size/e.numberOfComponents;return t.insertTuple(i,r)},t.insertNextTuples=r=>{const i=e.size/e.numberOfComponents;return t.insertTuples(i,r)},t.findTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dG;for(let s=0;s<e.size;s+=e.numberOfComponents)if(Math.abs(r[0]-e.values[s])<=i){let c=!0;for(let u=1;u<e.numberOfComponents;++u)if(Math.abs(r[u]-e.values[s+u])>i){c=!1;break}if(c)return s/e.numberOfComponents}return-1},t.getTuple=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const s=e.numberOfComponents||1,c=r*s;switch(s){case 4:i[3]=e.values[c+3];case 3:i[2]=e.values[c+2];case 2:i[1]=e.values[c+1];case 1:i[0]=e.values[c];break;default:for(let u=s-1;u>=0;--u)i[u]=e.values[c+u]}return i},t.getTuples=(r,i)=>{const s=(r??0)*e.numberOfComponents,c=(i??t.getNumberOfTuples())*e.numberOfComponents,u=t.getData().subarray(s,c);return u.length>0?u:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>bw({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,i)=>{e.values=r,e.size=r.length,e.dataType=Jd(r),i&&(e.numberOfComponents=i),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(s=>{r[s]||delete r[s]});const i={};return Object.keys(r).sort().forEach(s=>{i[s]=r[s]}),i.mtime&&delete i.mtime,i},t.deepCopy=r=>{const i=t.getDataType(),s=e.values;t.shallowCopy(r),e.ranges=structuredClone(r.getRanges()),s?.length>=r.getNumberOfValues()&&i===r.getDataType()?(s.set(r.getData()),e.values=s,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,i,s,c,u,f)=>{const g=e.numberOfComponents||1;(g!==i.getNumberOfComponents()||g!==c.getNumberOfComponents())&&hG("numberOfComponents must match");const d=i.getTuple(s),h=c.getTuple(u),y=[];switch(y.length=g,g){case 4:y[3]=d[3]+(h[3]-d[3])*f;case 3:y[2]=d[2]+(h[2]-d[2])*f;case 2:y[1]=d[1]+(h[1]-d[1])*f;case 1:y[0]=d[0]+(h[0]-d[0])*f;break;default:for(let v=0;v<g;v++)y[v]=d[v]+(h[v]-d[v])*f}return t.insertTuple(r,y)}}const mG={name:"",numberOfComponents:1,dataType:pG,rangeTuple:[0,0]};function Rw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,mG,n),Array.isArray(n.values)&&n.dataType===void 0&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=wd(e.dataType,e.values)):e.values=Vs(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=Jd(e.values)),Kt(t,e),Mc(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");TG(t,e)}const bw=et(Rw,"vtkDataArray");var rt={newInstance:bw,extend:Rw,...xG,...Ow};function SG(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let i=0;i<r&&i<6;i++)t.addClippingPlane(n[i])}},t.getClippingPlaneInDataCoords=(n,r,i)=>{const s=e.clippingPlanes,c=n;if(s){const u=s.length;if(r>=0&&r<u){const f=s[r],g=f.getNormal(),d=f.getOrigin(),h=g[0],y=g[1],v=g[2],S=-(h*d[0]+y*d[1]+v*d[2]);i[0]=h*c[0]+y*c[4]+v*c[8]+S*c[12],i[1]=h*c[1]+y*c[5]+v*c[9]+S*c[13],i[2]=h*c[2]+y*c[6]+v*c[10]+S*c[14],i[3]=h*c[3]+y*c[7]+v*c[11]+S*c[15];return}}V.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const CG={clippingPlanes:[]};function EG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CG,n),V.obj(t,e),V.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),SG(t,e)}var MG={extend:EG};function wG(t,e){t.getBounds=()=>(V.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),Sf()),t.getCenter=()=>{const n=t.getBounds();return e.center=Ne.isValid(n)?Ne.getCenter(n):null,e.center?.slice()},t.getLength=()=>{const n=t.getBounds();return Ne.getDiagonalLength(n)}}const OG=t=>({bounds:[...Ne.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function DG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,OG(n)),MG.extend(t,e,n),V.setGet(t,e,["viewSpecificProperties"]),wG(t,e)}var RG={extend:DG};const{vtkErrorMacro:U2,vtkWarningMacro:bG}=V;function LG(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:Pn(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(i=>i),e.arrays=r.getArrays().map(i=>({data:i}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const i=r.getName(),{array:s,index:c}=t.getArrayWithIndex(i);return s!=null?(e.arrays[c]={data:r},c):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const i=e.arrays.findIndex(s=>s.data.getName()===r);return t.removeArrayByIndex(i)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((i,s,c)=>s.data.getName()===r?s.data:i,null),t.getArrayWithIndex=r=>{const i=e.arrays.findIndex(s=>s.data.getName()===r);return{array:i!==-1?e.arrays[i].data:null,index:i}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const i=e.arrays[r];return i?i.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(c=>{const u=t.getFlag(c.getName());if(u!==!1&&!(e.doCopyAllOff&&u!==!0)&&c){let f=t.getArrayByName(c.getName());if(f)if(c.getNumberOfComponents()===f.getNumberOfComponents())if(i>-1&&i<c.getNumberOfTuples()){const g=s>-1?s:i;f.insertTuple(g,c.getTuple(i))}else f.insertTuples(0,c.getTuples());else U2("Unhandled case in passData");else if(i<0||i>c.getNumberOfTuples())t.addArray(c),r.getAttributes(c).forEach(g=>{t.setAttribute(c,g)});else{const g=c.getNumberOfComponents();let d=c.getNumberOfValues();const h=s>-1?s:i;d<=h*g&&(d=(h+1)*g),f=rt.newInstance({name:c.getName(),dataType:c.getDataType(),numberOfComponents:g,values:V.newTypedArray(c.getDataType(),d),size:0}),f.insertTuple(h,c.getTuple(i)),t.addArray(f),r.getAttributes(c).forEach(y=>{t.setAttribute(f,y)})}}})},t.interpolateData=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(f=>{const g=t.getFlag(f.getName());if(g!==!1&&!(e.doCopyAllOff&&g!==!0)&&f){let d=t.getArrayByName(f.getName());if(d)if(f.getNumberOfComponents()===d.getNumberOfComponents())if(i>-1&&i<f.getNumberOfTuples()){const h=c>-1?c:i;d.interpolateTuple(h,f,i,f,s,u),bG("Unexpected case in interpolateData")}else d.insertTuples(f.getTuples());else U2("Unhandled case in interpolateData");else if(i<0||s<0||i>f.getNumberOfTuples())t.addArray(f),r.getAttributes(f).forEach(h=>{t.setAttribute(f,h)});else{const h=f.getNumberOfComponents();let y=f.getNumberOfValues();const v=c>-1?c:i;y<=v*h&&(y=(v+1)*h),d=rt.newInstance({name:f.getName(),dataType:f.getDataType(),numberOfComponents:h,values:V.newTypedArray(f.getDataType(),y),size:0}),d.interpolateTuple(v,f,i,f,s,u),t.addArray(d),r.getAttributes(f).forEach(S=>{t.setAttribute(d,S)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(i=>{const s=i.newClone();return s.deepCopy(i),{data:s}})},t.copyFlags=r=>r.getCopyFieldFlags().map(i=>i),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,i)=>i.data.getMTime()>r?i.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,i)=>r+i.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(i=>({data:i.data.getState()}))),r}}const VG={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Lw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VG,n),V.obj(t,e),LG(t,e)}const NG=V.newInstance(Lw,"vtkFieldData");var BG={newInstance:NG,extend:Lw};const _G={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},UG={MAX:0,EXACT:1,NOLIMIT:2},kG={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},FG={DUPLICATEPOINT:1,HIDDENPOINT:2},GG={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},zG="vtkGhostType",AG={DEFAULT:0,SINGLE:1,DOUBLE:2};var Vw={AttributeCopyOperations:GG,AttributeLimitTypes:UG,AttributeTypes:_G,CellGhostTypes:kG,DesiredOutputPrecision:AG,PointGhostTypes:FG,ghostArrayName:zG};const{AttributeTypes:ga,AttributeCopyOperations:Ia}=Vw,{vtkWarningMacro:sl}=V;function jG(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(c){let u=n.find(f=>ga[f.toUpperCase()]===c||typeof c!="number"&&f.toLowerCase()===c.toLowerCase());return typeof u>"u"&&(u=null),u}e.classHierarchy.push("vtkDataSetAttributes");const i={...t};t.checkNumberOfComponents=c=>!0,t.setAttribute=(c,u)=>{const f=r(u);if(c&&f.toUpperCase()==="PEDIGREEIDS"&&!c.isA("vtkDataArray"))return sl(`Cannot set attribute ${f}. The attribute must be a vtkDataArray.`),-1;if(c&&!t.checkNumberOfComponents(c,f))return sl(`Cannot set attribute ${f}. Incorrect number of components.`),-1;if(c){const g=t.addArray(c);e[`active${f}`]=g}else e[`active${f}`]=-1;return t.modified(),e[`active${f}`]},t.getAttributes=c=>n.filter(u=>t[`get${u}`]()===c),t.setActiveAttributeByName=(c,u)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(c).index,u),t.setActiveAttributeByIndex=(c,u)=>{const f=r(u);if(c>=0&&c<e.arrays.length){if(f.toUpperCase()!=="PEDIGREEIDS"){const g=t.getArrayByIndex(c);if(!g.isA("vtkDataArray"))return sl(`Cannot set attribute ${f}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(g,f))return sl(`Cannot set attribute ${f}. Incorrect number of components.`),-1}return e[`active${f}`]=c,t.modified(),c}return c===-1&&(e[`active${f}`]=c,t.modified()),-1},t.getActiveAttribute=c=>{const u=r(c);return t[`get${u}`]()},t.removeAllArrays=()=>{n.forEach(c=>{e[`active${c}`]=-1}),i.removeAllArrays()},t.removeArrayByIndex=c=>(c!==-1&&n.forEach(u=>{c===e[`active${u}`]?e[`active${u}`]=-1:c<e[`active${u}`]&&(e[`active${u}`]-=1)}),i.removeArrayByIndex(c)),n.forEach(c=>{const u=`active${c}`;t[`get${c}`]=()=>t.getArrayByIndex(e[u]),t[`set${c}`]=f=>t.setAttribute(f,c),t[`setActive${c}`]=f=>t.setActiveAttributeByIndex(t.getArrayWithIndex(f).index,c),t[`copy${c}Off`]=()=>{const f=c.toUpperCase();e.copyAttributeFlags[Ia.PASSDATA][ga[f]]=!1},t[`copy${c}On`]=()=>{const f=c.toUpperCase();e.copyAttributeFlags[Ia.PASSDATA][ga[f]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(Ia).filter(c=>c!=="ALLCOPY").forEach(c=>{e.copyAttributeFlags[Ia[c]]=Object.keys(ga).filter(u=>u!=="NUM_ATTRIBUTES").reduce((u,f)=>(u[ga[f]]=!0,u),[])}),e.copyAttributeFlags[Ia.COPYTUPLE][ga.GLOBALIDS]=!1,e.copyAttributeFlags[Ia.INTERPOLATE][ga.GLOBALIDS]=!1,e.copyAttributeFlags[Ia.COPYTUPLE][ga.PEDIGREEIDS]=!1},t.initialize=V.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(c=>{!e.dataArrays[c].ref&&e.dataArrays[c].type==="vtkDataArray"&&t.addArray(rt.newInstance(e.dataArrays[c]))});const s=t.shallowCopy;t.shallowCopy=(c,u)=>{s(c,u),e.arrays=c.getArrays().map(f=>{const g=f.newClone();return g.shallowCopy(f,u),{data:g}})},t.initializeAttributeCopyFlags()}const HG={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function Nw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HG,n),BG.extend(t,e,n),V.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),jG(t,e)}const $G=V.newInstance(Nw,"vtkDataSetAttributes");var k2={newInstance:$G,extend:Nw,...Vw};const WG={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},KG={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var XG={FieldDataTypes:WG,FieldAssociations:KG};const Xo=["pointData","cellData","fieldData"];function YG(t,e){e.classHierarchy.push("vtkDataSet"),Xo.forEach(i=>{e[i]?e[i]=Pn(e[i]):e[i]=k2.newInstance()}),t.computeBounds=()=>{if(e.modifiedTime&&e.computeTime&&e.modifiedTime>e.computeTime||!e.computeTime){const i=t.getPoints();i?.getNumberOfPoints()?Ne.setBounds(e.bounds,i.getBoundsByReference()):e.bounds=V2.createUninitializedBounds(),e.computeTime=V.getCurrentGlobalMTime()}},t.getLength2=()=>{const i=t.getBoundsByReference();return!i||i.length!==6?0:Ne.getDiagonalLength2(i)},t.getLength=()=>Math.sqrt(t.getLength2()),t.getCenter=()=>{const i=t.getBoundsByReference();return!i||i.length!==6?[0,0,0]:Ne.getCenter(i)},t.getCellBounds=i=>{const s=t.getCell(i);return s?s.getBounds():V2.createUninitializedBounds()},t.getBounds=V.chain(()=>t.computeBounds,t.getBounds),t.getBoundsByReference=V.chain(()=>t.computeBounds,t.getBoundsByReference);const n=t.shallowCopy;t.shallowCopy=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(i,s),Xo.forEach(c=>{e[c]=k2.newInstance(),e[c].shallowCopy(i.getReferenceByName(c))})};const r=t.getMTime;t.getMTime=()=>Xo.reduce((i,s)=>Math.max(i,e[s]?.getMTime()??i),r()),t.initialize=()=>(Xo.forEach(i=>e[i]?.initialize()),t)}const qG={};function Bw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qG,n),V.obj(t,e),V.setGet(t,e,Xo),V.getArray(t,e,["bounds"],6),YG(t,e)}const ZG=V.newInstance(Bw,"vtkDataSet");var Bs={newInstance:ZG,extend:Bw,...XG};const Fn={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var _w={StructuredType:Fn};const{StructuredType:Vr}=_w;function QG(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?Vr.EMPTY:e===3?Vr.XYZ_GRID:e===2?t[0]===t[1]?Vr.YZ_PLANE:t[2]===t[3]?Vr.XZ_PLANE:Vr.XY_PLANE:e===1?t[0]<t[1]?Vr.X_LINE:t[2]<t[3]?Vr.Y_LINE:Vr.Z_LINE:Vr.SINGLE_POINT}var JG={getDataDescriptionFromExtent:QG,..._w};const{vtkErrorMacro:ei}=V;function PG(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return ei("instance deleted - cannot call any method"),!1;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];const c=i.length===1?i[0]:i;if(c.length!==6)return!1;const u=e.extent.some((f,g)=>f!==c[g]);return u&&(e.extent=c.slice(),e.dataDescription=JG.getDataDescriptionFromExtent(e.extent),t.modified()),u},t.setDimensions=function(){let r,i,s;if(e.deleted){ei("instance deleted - cannot call any method");return}if(arguments.length===1){const c=arguments.length<=0?void 0:arguments[0];r=c[0],i=c[1],s=c[2]}else if(arguments.length===3)r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],s=arguments.length<=2?void 0:arguments[2];else{ei("Bad dimension specification");return}t.setExtent(0,r-1,0,i-1,0,s-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const r=t.getDimensions();let i=1;for(let s=0;s<3;s++){if(r[s]===0)return 0;r[s]>1&&(i*=r[s]-1)}return i},t.getNumberOfPoints=()=>{const r=t.getDimensions();return r[0]*r[1]*r[2]},t.getPoint=r=>{const i=t.getDimensions();if(i[0]===0||i[1]===0||i[2]===0)return ei("Requesting a point from an empty image."),null;const s=new Float64Array(3);switch(e.dataDescription){case Fn.EMPTY:return null;case Fn.SINGLE_POINT:break;case Fn.X_LINE:s[0]=r;break;case Fn.Y_LINE:s[1]=r;break;case Fn.Z_LINE:s[2]=r;break;case Fn.XY_PLANE:s[0]=r%i[0],s[1]=r/i[0];break;case Fn.YZ_PLANE:s[1]=r%i[1],s[2]=r/i[1];break;case Fn.XZ_PLANE:s[0]=r%i[0],s[2]=r/i[0];break;case Fn.XYZ_GRID:s[0]=r%i[0],s[1]=r/i[0]%i[1],s[2]=r/(i[0]*i[1]);break;default:ei("Invalid dataDescription");break}const c=[0,0,0];return t.indexToWorld(s,c),c},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=r=>Ne.transformBounds(r,e.indexToWorld),t.getSpatialExtent=()=>Ne.inflate([...e.extent],.5),t.computeTransforms=()=>{SE(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],lc(e.indexToWorld,e.indexToWorld,e.spacing),Hn(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return je(i,r,e.indexToWorld),i},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return je(i,r,e.worldToIndex),i},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ne.transformBounds(r,e.indexToWorld,i)},t.worldToIndexBounds=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Ne.transformBounds(r,e.worldToIndex,i)},e._onOriginChanged=t.computeTransforms,e._onDirectionChanged=t.computeTransforms,e._onSpacingChanged=t.computeTransforms,t.computeTransforms(),t.getCenter=()=>Ne.getCenter(t.getBounds()),t.computeHistogram=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const s=[0,0,0,0,0,0];t.worldToIndexBounds(r,s);const c=[0,0,0],u=[0,0,0];Ne.computeCornerPoints(s,c,u),bp(c,c),bp(u,u);const f=t.getDimensions();Vp(c,[0,0,0],[f[0]-1,f[1]-1,f[2]-1],c),Vp(u,[0,0,0],[f[0]-1,f[1]-1,f[2]-1],u);const g=f[0],d=f[0]*f[1],h=t.getPointData().getScalars().getData();let y=-1/0,v=1/0,S=0,x=0,m=0;for(let w=c[2];w<=u[2];w++)for(let D=c[1];D<=u[1];D++){let R=c[0]+D*g+w*d;for(let B=c[0];B<=u[0];B++){if(!i||i([B,D,w],s)){const _=h[R];_>y&&(y=_),_<v&&(v=_),S+=_*_,x+=_,m+=1}++R}}const E=m>0?x/m:0,O=m?Math.abs(S/m-E*E):0,M=Math.sqrt(O);return{minimum:v,maximum:y,average:E,variance:O,sigma:M,count:m}},t.computeIncrements=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const s=[];let c=i;for(let u=0;u<3;++u)s[u]=c,c*=r[u*2+1]-r[u*2]+1;return s},t.computeOffsetIndex=r=>{let[i,s,c]=r;const u=t.getExtent(),f=t.getPointData().getScalars().getNumberOfComponents(),g=t.computeIncrements(u,f);return Math.floor((Math.round(i)-u[0])*g[0]+(Math.round(s)-u[2])*g[1]+(Math.round(c)-u[4])*g[2])},t.getOffsetIndexFromWorld=r=>{const i=t.getExtent(),s=t.worldToIndex(r);for(let c=0;c<3;++c)if(s[c]<i[c*2]||s[c]>i[c*2+1])return ei(`GetScalarPointer: Pixel ${s} is not in memory. Current extent = ${i}`),NaN;return t.computeOffsetIndex(s)},t.getScalarValueFromWorld=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=t.getPointData().getScalars().getNumberOfComponents();if(i<0||i>=s)return ei(`GetScalarPointer: Scalar Component ${i} is not within bounds. Current Scalar numberOfComponents: ${s}`),NaN;const c=t.getOffsetIndexFromWorld(r);return Number.isNaN(c)?c:t.getPointData().getScalars().getComponent(c,i)};const n=t.initialize;t.initialize=()=>(t.set({direction:La(e.direction),spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Fn.EMPTY}),n())}const IG={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Fn.EMPTY};function Uw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IG,n),Bs.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=La(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),V.get(t,e,["indexToWorld","worldToIndex"]),V.setGetArray(t,e,["origin","spacing"],3),V.setGetArray(t,e,["direction"],9),V.getArray(t,e,["extent"],6),PG(t,e)}const ez=V.newInstance(Uw,"vtkImageData");var tz={newInstance:ez,extend:Uw};const nz={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},kp={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},rz={LINEAR:0,LOG10:1};var Pd={VectorMode:nz,ScalarMappingTarget:kp,Scale:rz};const az={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},iz={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},sz={BY_ID:0,BY_NAME:1};var Id={ColorMode:az,GetArray:sz,ScalarMode:iz};const{ScalarMappingTarget:F2,Scale:oz,VectorMode:sr}=Pd,{VtkDataTypes:ha}=rt,{ColorMode:ol}=Id,{vtkErrorMacro:G2}=V;function cz(t){return t}function z2(t){return Math.floor(t*255+.5)}function uz(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(sr.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(sr.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(sr.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){G2("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const i=r.length;for(let s=0;s<i;s++)e.annotationArray.push({value:n[s],annotation:String(r[s])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let i=t.checkForAnnotatedValue(n),s=!1;return i>=0?e.annotationArray[i].annotation!==r&&(e.annotationArray[i].annotation=r,s=!0):(e.annotationArray.push({value:n,annotation:r}),i=e.annotationArray.length-1,s=!0),s&&(t.updateAnnotatedValueMap(),t.modified()),i},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),i=r>=0;return i&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),i},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const i=t.getAnnotatedValueIndex(n);t.getIndexedColor(i,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,i)=>{const s=n.getNumberOfComponents();let c=null;if(r===ol.DEFAULT&&(n.getDataType()===ha.UNSIGNED_CHAR||n.getDataType()===ha.UNSIGNED_CHAR_CLAMPED)||r===ol.DIRECT_SCALARS&&n)c=t.convertToRGBA(n,s,n.getNumberOfTuples());else{const u={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:ha.UNSIGNED_CHAR},f=V.newTypedArray(u.dataType,4*n.getNumberOfTuples());u.values=f,u.size=f.length,c=rt.newInstance(u);let g=i;g<0&&s>1?t.mapVectorsThroughTable(n,c,F2.RGBA,-1,-1):(g<0&&(g=0),g>=s&&(g=s-1),t.mapScalarsThroughTable(n,c,F2.RGBA,g))}return c},t.mapVectorsToMagnitude=(n,r,i)=>{const s=n.getNumberOfTuples(),c=n.getNumberOfComponents(),u=r.getData(),f=n.getData();for(let g=0;g<s;g++){let d=0;for(let h=0;h<i;h++)d+=f[g*c+h]*f[g*c+h];u[g]=Math.sqrt(d)}},t.mapVectorsThroughTable=(n,r,i,s,c)=>{let u=t.getVectorMode(),f=c,g=s;const d=n.getNumberOfComponents();u===sr.COMPONENT?(g===-1&&(g=t.getVectorComponent()),g<0&&(g=0),g>=d&&(g=d-1)):(f===-1&&(f=t.getVectorSize()),f<=0?(g=0,f=d):(g<0&&(g=0),g>=d&&(g=d-1),g+f>d&&(f=d-g)),u===sr.MAGNITUDE&&(d===1||f===1)&&(u=sr.COMPONENT));let h=0;switch(g>0&&(h=g),u){case sr.COMPONENT:{t.mapScalarsThroughTable(n,r,i,h);break}case sr.RGBCOLORS:break;case sr.MAGNITUDE:default:{const y=rt.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,y,f),t.mapScalarsThroughTable(y,r,i,0);break}}},t.luminanceToRGBA=(n,r,i,s)=>{const c=s(i),u=r.getData(),f=n.getData(),g=u.length,d=0,h=1;let y=0;for(let v=d;v<g;v+=h){const S=s(u[v]);f[y*4]=S,f[y*4+1]=S,f[y*4+2]=S,f[y*4+3]=c,y++}},t.luminanceAlphaToRGBA=(n,r,i,s)=>{const c=r.getData(),u=n.getData(),f=c.length,g=0,d=2;let h=0;for(let y=g;y<f;y+=d){const v=s(c[y]);u[h]=v,u[h+1]=v,u[h+2]=v,u[h+3]=s(c[y+1])*i,h+=4}},t.rGBToRGBA=(n,r,i,s)=>{const c=z2(i),u=r.getData(),f=n.getData(),g=u.length,d=0,h=3;let y=0;for(let v=d;v<g;v+=h)f[y*4]=s(u[v]),f[y*4+1]=s(u[v+1]),f[y*4+2]=s(u[v+2]),f[y*4+3]=c,y++},t.rGBAToRGBA=(n,r,i,s)=>{const c=r.getData(),u=n.getData(),f=c.length,g=0,d=4;let h=0;for(let y=g;y<f;y+=d)u[h*4]=s(c[y]),u[h*4+1]=s(c[y+1]),u[h*4+2]=s(c[y+2]),u[h*4+3]=s(c[y+3])*i,h++},t.convertToRGBA=(n,r,i)=>{let{alpha:s}=e;if(r===4&&s>=1&&n.getDataType()===ha.UNSIGNED_CHAR)return n;const c=rt.newInstance({numberOfComponents:4,empty:!0,size:4*i,dataType:ha.UNSIGNED_CHAR});if(i<=0)return c;s=s>0?s:0,s=s<1?s:1;let u=cz;switch((n.getDataType()===ha.FLOAT||n.getDataType()===ha.DOUBLE)&&(u=z2),r){case 1:t.luminanceToRGBA(c,n,s,u);break;case 2:t.luminanceAlphaToRGBA(c,n,u);break;case 3:t.rGBToRGBA(c,n,s,u);break;case 4:t.rGBAToRGBA(c,n,s,u);break;default:return G2("Cannot convert colors"),null}return c},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,i)=>{if(!n)return t.isOpaque();const s=n.getNumberOfComponents();return r===ol.DEFAULT&&n.getDataType()===ha.UNSIGNED_CHAR||r===ol.DIRECT_SCALARS?s===3||s===1?e.alpha>=1:n.getRange(s-1)[0]===255:!0}}const lz={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:sr.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:oz.LINEAR};function kw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lz,n),V.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],V.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),V.setArray(t,e,["mappingRange"],2),V.getArray(t,e,["mappingRange"]),uz(t,e)}const fz=V.newInstance(kw,"vtkScalarsToColors");var Fw={newInstance:fz,extend:kw,...Pd};const{vtkErrorMacro:A2}=V,j2=0,H2=1,_h=2;function gz(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let i=0;const s=Number(n);return s<r.range[0]?i=r.maxIndex+j2+1.5:s>r.range[1]?i=r.maxIndex+H2+1.5:(i=(s+r.shift)*r.scale,i=i<r.maxIndex?i:r.maxIndex),Math.floor(i)},t.linearLookup=(n,r,i)=>{let s=0;HM(n)?s=Math.floor(i.maxIndex+1.5+_h):s=t.linearIndexLookup(n,i);const c=4*s;return r.slice(c,c+4)},t.indexedLookupFunction=(n,r,i)=>{let s=t.getAnnotatedValueIndexInternal(n);s===-1&&(s=e.numberOfColors+_h);const c=4*s;return[r[c],r[c+1],r[c+2],r[c+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,i,s)=>{let c=t.linearLookup;e.indexedLookup&&(c=t.indexedLookupFunction);const u=t.getMappingRange(),f={maxIndex:t.getNumberOfColors()-1,range:u,shift:0,scale:0};t.lookupShiftAndScale(u,f);const g=t.getAlpha(),d=n.getNumberOfTuples(),h=n.getNumberOfComponents(),y=r.getData(),v=n.getData();if(g>=1){if(i===kp.RGBA)for(let S=0;S<d;S++){const x=c(v[S*h+s],e.table,f);y[S*4]=x[0],y[S*4+1]=x[1],y[S*4+2]=x[2],y[S*4+3]=x[3]}}else if(i===kp.RGBA)for(let S=0;S<d;S++){const x=c(v[S*h+s],e.table,f);y[S*4]=x[0],y[S*4+1]=x[1],y[S*4+2]=x[2],y[S*4+3]=Math.floor(x[3]*g+.5)}},t.forceBuild=()=>{let n=0,r=0,i=0,s=0;const c=e.numberOfColors-1;c&&(n=(e.hueRange[1]-e.hueRange[0])/c,r=(e.saturationRange[1]-e.saturationRange[0])/c,i=(e.valueRange[1]-e.valueRange[0])/c,s=(e.alphaRange[1]-e.alphaRange[0])/c),e.table.length=4*c+16;const u=[],f=[];for(let g=0;g<=c;g++)u[0]=e.hueRange[0]+g*n,u[1]=e.saturationRange[0]+g*r,u[2]=e.valueRange[0]+g*i,FM(u,f),f[3]=e.alphaRange[0]+g*s,e.table[g*4]=f[0]*255+.5,e.table[g*4+1]=f[1]*255+.5,e.table[g*4+2]=f[2]*255+.5,e.table[g*4+3]=f[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const i=n[0].length;e.numberOfColors=n.length;const s=4-i;let c=0;for(let u=0;u<e.numberOfColors;u++)e.table[u*4]=255,e.table[u*4+1]=255,e.table[u*4+2]=255,e.table[u*4+3]=255;for(let u=0;u<n.length;u++){const f=n[u];for(let g=0;g<i;g++)e.table[c++]=f[g];c+=s}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return A2("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==bt.UNSIGNED_CHAR)return A2("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let i=0;i<r.length;i++)e.table[i]=r[i];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let i=(n+j2)*4;e.useBelowRangeColor||n===0?(r[i]=e.belowRangeColor[0]*255+.5,r[i+1]=e.belowRangeColor[1]*255+.5,r[i+2]=e.belowRangeColor[2]*255+.5,r[i+3]=e.belowRangeColor[3]*255+.5):(r[i]=r[0],r[i+1]=r[1],r[i+2]=r[2],r[i+3]=r[3]),i=(n+H2)*4,e.useAboveRangeColor||n===0?(r[i]=e.aboveRangeColor[0]*255+.5,r[i+1]=e.aboveRangeColor[1]*255+.5,r[i+2]=e.aboveRangeColor[2]*255+.5,r[i+3]=e.aboveRangeColor[3]*255+.5):(r[i]=r[4*(n-1)+0],r[i+1]=r[4*(n-1)+1],r[i+2]=r[4*(n-1)+2],r[i+3]=r[4*(n-1)+3]),i=(n+_h)*4,r[i]=e.nanColor[0]*255+.5,r[i+1]=e.nanColor[1]*255+.5,r[i+2]=e.nanColor[2]*255+.5,r[i+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const hz={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Gw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hz,n),Fw.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},V.obj(e.buildTime),e.opaqueFlagBuildTime={},V.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},V.obj(e.insertTime,{mtime:0}),V.get(t,e,["buildTime"]),V.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),V.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),V.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),V.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),gz(t,e)}const pz=V.newInstance(Gw,"vtkLookupTable");var dz={newInstance:pz,extend:Gw};const Va={Off:0,PolygonOffset:1};let Fp=Va.PolygonOffset,uf=Va.Off;const yz=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function vz(){return Fp}function xz(t){const e=Fp===t;return Fp=t,e}function Tz(){return uf}function wf(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=uf===t;return uf=t,e}function mz(){return wf(Va.Off)}function Sz(){return wf(Va.Off)}function Cz(){return wf(Va.PolygonOffset)}function Ez(){return yz[uf]}var Gp={Resolve:Va,getResolveCoincidentTopologyAsString:Ez,getResolveCoincidentTopologyPolygonOffsetFaces:vz,getResolveCoincidentTopology:Tz,setResolveCoincidentTopology:wf,setResolveCoincidentTopologyPolygonOffsetFaces:xz,setResolveCoincidentTopologyToDefault:mz,setResolveCoincidentTopologyToOff:Sz,setResolveCoincidentTopologyToPolygonOffset:Cz};function zw(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=V.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const e1=["Polygon","Line","Point"],Mz={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},wz=()=>{},li={modified:wz};zw(li,Mz,e1.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function Oz(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),V.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Gp).forEach(n=>{t[n]=Gp[n]}),Object.keys(li).filter(n=>n!=="modified").forEach(n=>{t[n]=li[n]}),zw(t,e.topologyOffset,e1.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=li.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=li.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=li.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var Aw={implementCoincidentTopologyMethods:Oz,staticOffsetAPI:li,otherStaticMethods:Gp,CATEGORIES:e1,Resolve:Va};const Zt={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var jw={PassTypes:Zt};const{FieldAssociations:$2}=Bs,{staticOffsetAPI:Dz,otherStaticMethods:Rz}=Aw,{ColorMode:cl,ScalarMode:ti,GetArray:Uh}=Id,{VectorMode:bz}=Pd,{VtkDataTypes:Lz}=rt;function _o(t){return()=>V.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function Vz(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function Nz(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function W2(t,e,n){const r=Math.floor(e),i=r%(2*n[0]);let s,c;i<n[0]?(t[0]=i,s=1,c=t[0]===n[0]-1):(t[0]=2*n[0]-1-i,s=-1,c=t[0]===0);const u=Math.floor(r/n[0]),f=u%(2*n[1]);let g,d;f<n[1]?(t[1]=f,g=1,d=t[1]===n[1]-1):(t[1]=2*n[1]-1-f,g=-1,d=t[1]===0),t[2]=Math.floor(u/n[1]);const h=e-r;c?d?t[2]+=h:t[1]+=g*h:t[0]+=s*h,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const K2=new WeakMap;function Bz(t,e,n,r,i,s,c){const u=new Array(arguments.length);for(let A=0;A<arguments.length;++A){const $=arguments[A];u[A]=$.getMTime?.()??$}const f=u.join("/"),g=K2.get(t);if(g&&g.stringHash===f)return g.textureCoordinates;const d=(n[1]-n[0])/(i-1),[h,y]=[n[0]-d,n[1]+d],v=h-.5*d,S=1/(y-h+d),x=h,m=(i+1)/(y-h),E=t.getData(),O=t.getNumberOfTuples(),M=t.getNumberOfComponents(),w=e<0||e>=M,D=s[2]<=1?2:3,R=rt.newInstance({numberOfComponents:D,values:new Float32Array(O*D)}),B=R.getData(),_=[0,0,0];W2(_,i+2,s);let G=0,z=0;const H=[.5,.5,.5];for(let A=0;A<O;++A){let $;if(w){let K=0;for(let ee=0;ee<M;++ee){const U=Number(E[G+ee]);K+=U*U}$=Math.sqrt(K)}else $=Number(E[G+e]);if(r&&($=Math.log10($)),G+=M,HM($))H[0]=_[0],H[1]=_[1],H[2]=_[2];else if(c){let K=($-x)*m;K<1?K=0:K>i&&(K=i+1),W2(H,K,s)}else{H[1]=.49;const K=($-v)*S;K>1e3?H[0]=1e3:K<-1e3?H[0]=-1e3:H[0]=K}for(let K=0;K<D;++K)B[z++]=H[K]}return K2.set(t,{stringHash:f,textureCoordinates:R}),R}function _z(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=Sf(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=dz.newInstance()},t.getColorModeAsString=()=>V.enumToString(cl,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>V.enumToString(ti,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,i,s,c)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let u=null,f=!1;if(r===ti.DEFAULT)u=n.getPointData().getScalars(),u||(u=n.getCellData().getScalars(),f=!0);else if(r===ti.USE_POINT_DATA)u=n.getPointData().getScalars();else if(r===ti.USE_CELL_DATA)u=n.getCellData().getScalars(),f=!0;else if(r===ti.USE_POINT_FIELD_DATA){const g=n.getPointData();i===Uh.BY_ID?u=g.getArrayByIndex(s):u=g.getArrayByName(c)}else if(r===ti.USE_CELL_FIELD_DATA){const g=n.getCellData();f=!0,i===Uh.BY_ID?u=g.getArrayByIndex(s):u=g.getArrayByName(c)}else if(r===ti.USE_FIELD_DATA){const g=n.getFieldData();i===Uh.BY_ID?u=g.getArrayByIndex(s):u=g.getArrayByName(c)}return{scalars:u,cellFlag:f}},t.mapScalars=(n,r)=>{const{scalars:i,cellFlag:s}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=s,!i){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const c=`${t.getMTime()}${i.getMTime()}${r}`;if(e.colorBuildString!==c){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(i,s))e.mapScalarsToTexture(i,s,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const u=t.getLookupTable();u&&(u.build(),e.colorMapColors=u.mapScalars(i,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${i.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,i)=>{const s=e.lookupTable.getRange(),c=e.lookupTable.usingLogScale(),u=e.lookupTable.getAlpha(),f=c?[Math.log10(s[0]),Math.log10(s[1])]:s;if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==i){e.lookupTable.setAlpha(i),e.colorTextureMap=null,e.lookupTable.build();const d=e.lookupTable.getNumberOfAvailableColors(),h=2048,y=h**3-3,S=4096-2,x=2,m=r?y:S;e.numberOfColorsInRange=Math.min(Math.max(d,x),m);const E=e.numberOfColorsInRange+3,O=e.numberOfColorsInRange+2,M=r?[Math.min(Math.ceil(E/h**0),h),Math.min(Math.ceil(E/h**1),h),Math.min(Math.ceil(E/h**2),h)]:[O,2,1],w=M[0]*M[1]*M[2],D=new Float64Array(w);D.fill(NaN);const R=e.numberOfColorsInRange,B=R+2,_=[0,0,0],G=f[0],z=f[1]-f[0];for(let $=0;$<B;++$){const K=Nz(_,M),ee=G+z*($-1)/(R-1),U=c?10**ee:ee;D[K]=U,Vz(_,M)}const H=rt.newInstance({numberOfComponents:1,values:D}),A=e.lookupTable.mapScalars(H,e.colorMode,0);e.colorTextureMap=tz.newInstance(),e.colorTextureMap.setDimensions(M),e.colorTextureMap.getPointData().setScalars(A),e.lookupTable.setAlpha(u)}const g=e.lookupTable.getVectorMode()===bz.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=Bz(n,g,f,c,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),r)},t.getIsOpaque=()=>{const n=t.getInputData(),i=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||i==null)return!0;const s=t.getLookupTable();return s?(s.build(),s.areScalarsOpaque(i,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==cl.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===cl.DEFAULT&&n.getDataType()===Lz.UNSIGNED_CHAR||e.colorMode===cl.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=_o("AcquireInvertibleLookupTable"),t.valueToColor=_o("ValueToColor"),t.colorToValue=_o("ColorToValue"),t.useInvertibleColorFor=_o("UseInvertibleColorFor"),t.clearInvertibleColor=_o("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const i=n.getRawPixelBuffer(Zt.ID_LOW24),s=n.getRawPixelBuffer(Zt.ID_HIGH24),c=n.getCurrentPass(),u=n.getFieldAssociation();let f=null;u===$2.FIELD_ASSOCIATION_POINTS?f=e.selectionWebGLIdsToVTKIds.points:u===$2.FIELD_ASSOCIATION_CELLS&&(f=e.selectionWebGLIdsToVTKIds.cells),f&&r.forEach(g=>{if(c===Zt.ID_LOW24){let d=0;s&&(d+=s[g],d*=256),d+=i[g+2],d*=256,d+=i[g+1],d*=256,d+=i[g];const h=f[d],y=n.getPixelBuffer(Zt.ID_LOW24);y[g]=h&255,y[g+1]=(h&65280)>>8,y[g+2]=(h&16711680)>>16}else if(c===Zt.ID_HIGH24&&s){let d=0;d+=s[g],d*=256,d+=i[g+2],d*=256,d+=i[g+1],d*=256,d+=i[g];const h=f[d],y=n.getPixelBuffer(Zt.ID_HIGH24);y[g]=(h&4278190080)>>24}})}}const Uz={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function Hw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Uz,n),RG.extend(t,e,n),V.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),V.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),V.setGetArray(t,e,["scalarRange"],2),Aw.implementCoincidentTopologyMethods(t,e),_z(t,e)}const kz=V.newInstance(Hw,"vtkMapper");var Ci={newInstance:kz,extend:Hw,...Dz,...Rz,...Id};const{isVtkObject:Fz}=V;function $w(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function Ww(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const Gz={extractCellSizes:$w,getNumberOfCells:Ww};function zz(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=Ww(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=$w(t.getData())),e.cellSizes),t.resize=r=>{const i=t.getNumberOfTuples();n.resize(r);const s=t.getNumberOfTuples();s<i&&(s===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let i=r;const s=e.values[i++];return e.values.subarray(i,i+s)},t.insertNextCell=r=>{let i;Fz(r)?i=r.getPointsIds():i=r;const s=t.getNumberOfCells();return t.insertNextTuples([i.length,...i]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(i.length),s},t.getMaxCellSize=()=>t.getCellSizes().reduce((r,i)=>Math.max(r,i),0)}function Az(t){return{empty:!0,numberOfComponents:1,dataType:bt.UNSIGNED_INT,...t}}function Kw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rt.extend(t,e,Az(n)),zz(t,e)}const jz=V.newInstance(Kw,"vtkCellArray");var X2={newInstance:jz,extend:Kw,...Gz};const{vtkErrorMacro:Hz}=V;function $z(t,e){let n=0;e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==s&&(e.size=s*c,e.values=V.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(c),t.modified())},t.setPoint=function(s){for(var c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];t.setTuple(s,u)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(s,c,u)=>t.insertNextTuple([s,c,u]),t.insertPoint=(s,c)=>t.insertTuple(s,c);const r=t.getBounds;t.getBounds=()=>(n<e.mtime&&t.computeBounds(),r());const i=t.getBoundsByReference;t.getBoundsByReference=()=>(n<e.mtime&&t.computeBounds(),i()),t.computeBounds=()=>{if(t.getNumberOfComponents()===3){const s=t.getRange(0);e.bounds[0]=s[0],e.bounds[1]=s[1];const c=t.getRange(1);e.bounds[2]=c[0],e.bounds[3]=c[1];const u=t.getRange(2);e.bounds[4]=u[0],e.bounds[5]=u[1]}else if(t.getNumberOfComponents()===2){const s=t.getRange(0);e.bounds[0]=s[0],e.bounds[1]=s[1];const c=t.getRange(1);e.bounds[2]=c[0],e.bounds[3]=c[1],e.bounds[4]=0,e.bounds[5]=0}else Hz(`getBounds called on an array with components of ${t.getNumberOfComponents()}`),Hd(e.bounds);n=V.getCurrentGlobalMTime()},t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const Wz={empty:!0,numberOfComponents:3,dataType:bt.FLOAT,bounds:[1,-1,1,-1,1,-1]};function Xw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Wz,n),rt.extend(t,e,n),V.getArray(t,e,["bounds"],6),$z(t,e)}const Kz=V.newInstance(Xw,"vtkPoints");var yc={newInstance:Kz,extend:Xw};function Xz(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let i=e.points.getData();i.length!==3*e.pointsIds.length&&(i=V.newTypedArray(n.getDataType(),3*e.pointsIds.length));const s=n.getData();e.pointsIds.forEach((c,u)=>{let f=3*c,g=3*u;i[g]=s[f],i[++g]=s[++f],i[++g]=s[++f]}),e.points.setData(i)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let i=n.getNumberOfPoints()-1;i>=0;--i)e.pointsIds[i]=i}},t.getBounds=()=>e.points.getBounds(),t.getLength2=()=>{const n=Ne.getLengths(t.getBounds());return n[0]*n[0]+n[1]*n[1]+n[2]*n[2]},t.getParametricDistance=n=>{let r,i=0;for(let s=0;s<3;s++)n[s]<0?r=-n[s]:n[s]>1?r=n[s]-1:r=0,r>i&&(i=r);return i},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,i,s,c,u,f)=>{},t.evaluatePosition=(n,r,i,s,c,u)=>{V.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const Yz={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Yw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Yz,n),V.obj(t,e),e.points||(e.points=yc.newInstance()),V.get(t,e,["points","pointsIds"]),Xz(t,e)}const qz=V.newInstance(Yw,"vtkCell");var Ei={newInstance:qz,extend:Yw};function Zz(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function Qz(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),i=n.getNumberOfCells(),s=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let c=0;c<i;++c){const{cellPointIds:u}=n.getCellPoints(c);u.forEach(f=>{t.incrementLinkCount(f)})}t.allocateLinks(r),e.maxId=r-1;for(let c=0;c<i;++c){const{cellPointIds:u}=n.getCellPoints(c);u.forEach(f=>{t.insertCellReference(f,s[f]++,c)})}}else{for(let c=0;c<i;c++)Ei.newInstance().getPointsIds().forEach(f=>{t.incrementLinkCount(f)});t.allocateLinks(r),e.maxId=r-1;for(let c=0;c<i;++c)Ei.newInstance().getPointsIds().forEach(f=>{t.insertCellReference(f,s[f]++,c)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(i=>i!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{Zz(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,i)=>{e.array[n].cells[r]=i}}const Jz={array:null,maxId:0,extend:0};function qw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Jz,n),V.obj(t,e),Qz(t,e)}const Pz=V.newInstance(qw,"vtkCellLinks");var Iz={newInstance:Pz,extend:qw};const Ue={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_QUAD:9,VTK_QUADRATIC_EDGE:21,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42},zp=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function e6(t){return t<zp.length?zp[t]:"UnknownClass"}function t6(t){return zp.findIndex(t)}function n6(t){return t<Ue.VTK_QUADRATIC_EDGE||t===Ue.VTK_CONVEX_POINT_SET||t===Ue.VTK_POLYHEDRON}function r6(t){return t===Ue.VTK_TRIANGLE_STRIP||t===Ue.VTK_POLY_LINE||t===Ue.VTK_POLY_VERTEX}const a6={getClassNameFromTypeId:e6,getTypeIdFromClassName:t6,isLinear:n6,hasSubCells:r6};function i6(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,i)=>{e.typeArray[n]=r,e.locationArray[n]=i,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,i)=>{e.size=n,e.typeArray=r,e.locationArray=i,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Ue.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let i=0;i<r;++i)if(n===t.getCellType(i))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const s6={size:0,maxId:-1,extend:1e3};function Zw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s6,n),V.obj(t,e),V.get(t,e,["size","maxId","extend"]),V.getArray(t,e,["typeArray","locationArray"]),i6(t,e)}const o6=V.newInstance(Zw,"vtkCellTypes");var c6={newInstance:o6,extend:Zw,...a6};const Qw={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var Jw={IntersectionState:Qw};const{IntersectionState:zl}=Jw;function xs(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const i={t:Number.MIN_VALUE,distance:0},s=[];let c;s[0]=n[0]-e[0],s[1]=n[1]-e[1],s[2]=n[2]-e[2];const u=s[0]*(t[0]-e[0])+s[1]*(t[1]-e[1])+s[2]*(t[2]-e[2]),f=ye(s,s);let g=1e-5*u;return f!==0&&(i.t=u/f),g<0&&(g=-g),-g<f&&f<g||f<=0||i.t<0?c=e:i.t>1?c=n:(c=s,s[0]=e[0]+i.t*s[0],s[1]=e[1]+i.t*s[1],s[2]=e[2]+i.t*s[2]),r&&(r[0]=c[0],r[1]=c[1],r[2]=c[2]),i.distance=mn(c,t),i}function Pw(t,e,n,r,i,s){const c=[],u=[],f=[];i[0]=0,s[0]=0,wt(e,t,c),wt(r,n,u),wt(n,t,f);const g=[ye(c,c),-ye(c,u),-ye(c,u),ye(u,u)],d=[];if(d[0]=ye(c,f),d[1]=-ye(u,f),kM(g,d,2)===0){let h=Number.MAX_VALUE;const y=[t,e,n,r],v=[n,n,t,t],S=[r,r,e,e];s[0],s[0],i[0],i[0],i[0],i[0],s[0],s[0];let x;for(let m=0;m<4;m++)x=xs(y[m],v[m],S[m]),x.distance<h&&(h=x.distance,x.t);return zl.ON_LINE}return i[0]=d[0],s[0]=d[1],i[0]>=0&&i[0]<=1&&s[0]>=0&&s[0]<=1?zl.YES_INTERSECTION:zl.NO_INTERSECTION}const u6={distanceToLine:xs,intersection:Pw};function l6(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,i,s,c,u)=>{const f={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};u[1]=0,u[2]=0;const g=[],d=[],h=[];e.points.getPoint(0,d),e.points.getPoint(1,h);const y=[],v=[],S=Pw(r,i,d,h,y,v);if(f.t=y[0],f.betweenPoints=n(f.t),u[0]=v[0],S===zl.YES_INTERSECTION){for(let x=0;x<3;x++)c[x]=d[x]+u[0]*(h[x]-d[x]),g[x]=r[x]+f.t*(i[x]-r[x]);if(mn(c,g)<=s*s)return f.intersect=1,f}else{let x;if(f.t<0)return x=xs(r,d,h,c),x.distance<=s*s&&(f.t=0,f.intersect=1,f.betweenPoints=!0),f;if(f.t>1)return x=xs(i,d,h,c),x.distance<=s*s&&(f.t=1,f.intersect=1,f.betweenPoints=!0),f;if(u[0]<0)return u[0]=0,x=xs(d,r,i,c),f.t=x.t,x.distance<=s*s&&(f.intersect=1),f;if(u[0]>1)return u[0]=1,x=xs(h,r,i,c),f.t=x.t,x.distance<=s*s&&(f.intersect=1),f}return f},t.evaluateLocation=(r,i,s)=>{const c=[],u=[];e.points.getPoint(0,c),e.points.getPoint(1,u);for(let f=0;f<3;f++)i[f]=c[f]+r[0]*(u[f]-c[f]);s[0]=1-r[0],s[1]=r[0]},t.evaluateOrientation=(r,i,s)=>e.orientations?(Dl(i,e.orientations[0],e.orientations[1],r[0]),s[0]=1-r[0],s[1]=r[0],!0):!1}const f6={orientations:null};function Iw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f6,n),Ei.extend(t,e,n),V.setGet(t,e,["orientations"]),l6(t,e)}const g6=V.newInstance(Iw,"vtkLine");var Ht={newInstance:g6,extend:Iw,...u6,...Jw};function h6(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=Pn(e.points):e.points=yc.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(s){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(s,c),e.points=yc.newInstance(),e.points.shallowCopy(s.getPoints())};const r=t.getMTime;t.getMTime=()=>{const s=r();return Math.max(s,e.points?.getMTime()??s)};const i=t.initialize;t.initialize=()=>(e.points?.initialize(),i())}const p6={};function eO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p6,n),Bs.extend(t,e,n),V.setGet(t,e,["points"]),h6(t,e)}const d6=V.newInstance(eO,"vtkPointSet");var y6={newInstance:d6,extend:eO};function v6(t,e){e.classHierarchy.push("vtkPolyLine");const n=Ht.newInstance();n.getPoints().setNumberOfPoints(2),t.getCellDimension=()=>1,t.intersectWithLine=(r,i,s,c,u,f,g)=>{const d={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null},h=t.getNumberOfPoints()-1;let y=Number.MAX_VALUE;for(let v=0;v<h;v++){const S=[0,0,0];n.getPoints().getData().set(e.points.getData().subarray(3*v,3*(v+2)));const x=n.intersectWithLine(s,c,u,f,g);if(x.intersect===1&&x.t<=d.t+u&&x.t>=r&&x.t<=i){d.intersect=1;const m=n.getParametricDistance(S);if(m<y||m===y&&x.t<d.t){d.subId=v,d.t=x.t,y=m;for(let E=0;E<3;E++)f[E],S[E]}}}return d},t.evaluateLocation=(r,i,s,c)=>(n.getPoints().getData().set(e.points.getData().subarray(3*r,3*(r+2))),n.evaluateLocation(i,s,c)),t.evaluateOrientation=(r,i,s,c)=>(e.orientations?n.setOrientations([e.orientations[r],e.orientations[r+1]]):n.setOrientations(null),n.evaluateOrientation(i,s,c)),t.getDistancesToFirstPoint=()=>{const r=e.distancesTime.getMTime();if(r<e.points.getMTime()||r<t.getMTime()){const i=t.getNumberOfPoints();if(e.distances?e.distances.length=i:e.distances=new Array(i),i>0){const s=new Array(3),c=new Array(3);let u=0;e.distances[0]=u,e.points.getPoint(0,s);for(let f=1;f<i;++f)e.points.getPoint(f,c),u+=e.distanceFunction(s,c),e.distances[f]=u,ZU(s,c)}e.distancesTime.modified()}return e.distances},t.findPointIdAtDistanceFromFirstPoint=r=>{const i=t.getDistancesToFirstPoint();if(i.length<2)return-1;let s=0,c=i.length-1;if(r<i[s]||r>i[c]||i[c]===0)return-1;for(;c-s>1;){const u=Math.floor((s+c)/2);i[u]<=r?s=u:c=u}return s}}const x6={orientations:null,distanceFunction:PU};function tO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x6,n),Ei.extend(t,e,n),V.setGet(t,e,["orientations","distanceFunction"]),e.distancesTime={},V.obj(e.distancesTime,{mtime:0}),v6(t,e)}const T6=V.newInstance(tO,"vtkPolyLine");var m6={newInstance:T6,extend:tO};function S6(t,e){e.classHierarchy.push("vtkPriorityQueue"),t.push=(n,r)=>{const i=e.elements.findIndex(s=>s.priority>n);e.elements.splice(i,0,{priority:n,element:r})},t.pop=()=>e.elements.length>0?e.elements.shift().element:null,t.deleteById=n=>{e.elements=e.elements.filter(r=>{let{element:i}=r;return i.id!==n})},t.length=()=>e.elements.length}const C6={elements:[]};function nO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,C6,n),V.obj(t,e),S6(t,e)}const E6=V.newInstance(nO,"vtkPriorityQueue");var M6={newInstance:E6,extend:nO};const ul=1e-6,Y2=11920929e-14,w6=1e-8,oi={FAILURE:-1,OUTSIDE:0,INSIDE:1,INTERSECTION:2,ON_LINE:3};function q2(t,e,n,r,i){return(r[t]-n[t])*(i[e]-n[e])-(i[t]-n[t])*(r[e]-n[e])}function O6(t,e,n,r){if(t[0]<n[0]||t[0]>n[1]||t[1]<n[2]||t[1]>n[3]||t[2]<n[4]||t[2]>n[5])return oi.OUTSIDE;if(Cn(r)<=Y2)return oi.FAILURE;let i=w6*((n[1]-n[0])*(n[1]-n[0])+(n[3]-n[2])*(n[3]-n[2])+(n[5]-n[4])*(n[5]-n[4]));i*=i,i=i===0?Y2:i;const s=[],c=[];for(let d=0;d<e.length;){if(s[0]=e[d++],s[1]=e[d++],s[2]=e[d++],mn(t,s)<=i)return oi.INSIDE;const{distance:h,t:y}=Ht.distanceToLine(t,s,c);if(h<=i&&y>0&&y<1)return oi.INSIDE}let u,f;Math.abs(r[0])>Math.abs(r[1])?Math.abs(r[0])>Math.abs(r[2])?(u=1,f=2):(u=0,f=1):Math.abs(r[1])>Math.abs(r[2])?(u=0,f=2):(u=0,f=1);let g=0;for(let d=0;d<e.length;)s[0]=e[d++],s[1]=e[d++],s[2]=e[d++],d<e.length?(c[0]=e[d],c[1]=e[d+1],c[2]=e[d+2]):(c[0]=e[0],c[1]=e[1],c[2]=e[2]),s[f]<=t[f]?c[f]>t[f]&&q2(u,f,s,c,t)>0&&++g:c[f]<=t[f]&&q2(u,f,s,c,t)<0&&--g;return g===0?oi.OUTSIDE:oi.INSIDE}function D6(t,e,n){const r=t.length,i=[];e.getPoint(t[0],i),n[0]=i[0],n[1]=i[0],n[2]=i[1],n[3]=i[1],n[4]=i[2],n[5]=i[2];for(let c=1;c<r;c++)e.getPoint(t[c],i),Ne.addPoint(n,...i);const s=Ne.getLengths(n);return ye(s,s)}function R6(t,e,n){n.length=3,n[0]=0,n[1]=0,n[2]=0;const r=[];let i=[],s=[];const c=[],u=[];e.getPoint(t[0],r),e.getPoint(t[1],i);for(let f=2;f<t.length;f++){e.getPoint(t[f],s),wt(s,i,c),wt(r,i,u);const g=[0,0,0];It(c,u,g),ws(n,g,n),[i,s]=[s,i]}return Cn(n)}function b6(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];n[0]=0,n[1]=0,n[2]=0;const r=t.length,i=[];for(let s=0;s<r;s++)e.getPoint(t[s],i),n[0]+=i[0],n[1]+=i[1],n[2]+=i[2];return n[0]/=r,n[1]/=r,n[2]/=r,n}const L6={PolygonWithPointIntersectionState:oi,pointInPolygon:O6,getBounds:D6,getNormal:R6,computeCentroid:b6};function V6(t,e){e.classHierarchy.push("vtkPolygon");function n(){const u=[0,0,0],f=[0,0,0];e.normal=[0,0,0];const g=[...e.firstPoint.point];let d=e.firstPoint;for(let h=0;h<e.pointCount;h++){wt(d.point,g,u),wt(d.next.point,g,f);const y=[0,0,0];It(u,f,y),ws(e.normal,y,e.normal),d=d.next}return Cn(e.normal)}function r(u){const f=[0,0,0],g=[0,0,0],d=[0,0,0],h=[0,0,0];wt(u.point,u.previous.point,f),wt(u.next.point,u.point,g),wt(u.previous.point,u.next.point,d),It(f,g,h);const y=ye(h,e.normal);if(y<=0)return-1;const v=Sn(f)+Sn(g)+Sn(d);return v*v/y}function i(u){if(e.pointCount<=3)return!0;const f=u.previous,g=u.next,d=[0,0,0];wt(g.point,f.point,d);const h=[0,0,0];if(It(d,e.normal,h),Cn(h),Sn(h)===0)return!1;let y=Ra.evaluate(h,f.point,g.next.point),v=y>ul?1:y<-ul?-1:0,S=v<0?1:0;for(let x=g.next.next;x.id!==f.id;x=x.next){const m=x.previous;y=Ra.evaluate(h,f.point,x.point);const E=y>ul?1:y<-ul?-1:0;if(E!==v){if(S||(S=E<=0?1:0),Ht.intersection(f.point,g.point,x.point,m.point,[0],[0])===Qw.YES_INTERSECTION)return!1;v=E}}return S===1}function s(u,f){e.pointCount-=1;const g=u.previous,d=u.next;e.tris=e.tris.concat(u.point),e.tris=e.tris.concat(d.point),e.tris=e.tris.concat(g.point),g.next=d,d.previous=g,f.deleteById(g.id),f.deleteById(d.id);const h=r(g);h>0&&f.push(h,g);const y=r(d);y>0&&f.push(y,d),u.id===e.firstPoint.id&&(e.firstPoint=d)}function c(){n();const u=M6.newInstance();let f=e.firstPoint;for(let g=0;g<e.pointCount;g++){const d=r(f);d>0&&u.push(d,f),f=f.next}for(;e.pointCount>2&&u.length()>0;)if(e.pointCount===u.length()){const g=u.pop();s(g,u)}else{const g=u.pop();i(g)&&s(g,u)}return e.pointCount<=2}t.triangulate=()=>e.firstPoint?c():null,t.setPoints=u=>{e.pointCount=u.length,e.firstPoint={id:0,point:u[0],next:null,previous:null};let f=e.firstPoint;for(let g=1;g<e.pointCount;g++)f.next={id:g,point:u[g],next:null,previous:f},f=f.next;e.firstPoint.previous=f,f.next=e.firstPoint},t.getPointArray=()=>e.tris}const N6={firstPoint:null,pointCount:0,tris:[]};function rO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N6,n),V.obj(t,e),V6(t,e)}const B6=V.newInstance(rO,"vtkPolygon");var _6={newInstance:B6,extend:rO,...L6};function t1(t,e,n,r){const i=n[0]-e[0],s=n[1]-e[1],c=n[2]-e[2],u=t[0]-e[0],f=t[1]-e[1],g=t[2]-e[2];r[0]=s*g-c*f,r[1]=c*u-i*g,r[2]=i*f-s*u}function vc(t,e,n,r){t1(t,e,n,r);const i=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);i!==0&&(r[0]/=i,r[1]/=i,r[2]/=i)}function aO(t){t[0]=-1,t[1]=1,t[2]=0,t[3]=-1,t[4]=0,t[5]=1}function U6(t,e,n,r,i,s){let c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,u=!1;const f=[],g=[],d=[],h=[],y=[];vc(t,e,n,h),vc(r,i,s,y);const v=-ye(h,t),S=-ye(y,r),x=[ye(y,t)+S,ye(y,e)+S,ye(y,n)+S];if(x[0]*x[1]>c&&x[0]*x[2]>c)return{intersect:!1,coplanar:u,pt1:f,pt2:g,surfaceId:d};const m=[ye(h,r)+v,ye(h,i)+v,ye(h,s)+v];if(m[0]*m[1]>c&&m[0]*m[2]>c)return{intersect:!1,coplanar:u,pt1:f,pt2:g,surfaceId:d};if(Math.abs(h[0]-y[0])<1e-9&&Math.abs(h[1]-y[1])<1e-9&&Math.abs(h[2]-y[2])<1e-9&&Math.abs(v-S)<1e-9)return u=!0,{intersect:!1,coplanar:u,pt1:f,pt2:g,surfaceId:d};const E=[t,e,n],O=[r,i,s],M=ye(h,y),w=(v-S*M)/(M*M-1),D=(S-v*M)/(M*M-1),R=[w*h[0]+D*y[0],w*h[1]+D*y[1],w*h[2]+D*y[2]],B=It(h,y,[]);Cn(B);let _=0,G=0;const z=[],H=[];let A=50,$=50;for(let U=0;U<3;U++){const q=U,re=(U+1)%3,J=Ra.intersectWithLine(E[q],E[re],r,y);J.intersection&&J.t>0-c&&J.t<1+c&&(J.t<1+c&&J.t>1-c&&(A=_),z[_++]=ye(J.x,B)-ye(R,B));const oe=Ra.intersectWithLine(O[q],O[re],t,h);oe.intersection&&oe.t>0-c&&oe.t<1+c&&(oe.t<1+c&&oe.t>1-c&&($=G),H[G++]=ye(oe.x,B)-ye(R,B))}if(_>2){_--;const U=z[2];z[2]=z[A],z[A]=U}if(G>2){G--;const U=H[2];H[2]=H[$],H[$]=U}if(_!==2||G!==2)return{intersect:!1,coplanar:u,pt1:f,pt2:g,surfaceId:d};if(Number.isNaN(z[0])||Number.isNaN(z[1])||Number.isNaN(H[0])||Number.isNaN(H[1]))return{intersect:!1,coplanar:u,pt1:f,pt2:g,surfaceId:d};if(z[0]>z[1]){const U=z[1];z[1]=z[0],z[0]=U}if(H[0]>H[1]){const U=H[1];H[1]=H[0],H[0]=U}let K,ee;return z[1]<H[0]||H[1]<z[0]?{intersect:!1,coplanar:u,pt1:f,pt2:g,surfaceId:d}:(z[0]<H[0]?z[1]<H[1]?(d[0]=2,d[1]=1,K=H[0],ee=z[1]):(d[0]=2,d[1]=2,K=H[0],ee=H[1]):z[1]<H[1]?(d[0]=1,d[1]=1,K=z[0],ee=z[1]):(d[0]=1,d[1]=2,K=z[0],ee=H[1]),Op(R,B,K,f),Op(R,B,ee,g),{intersect:!0,coplanar:u,pt1:f,pt2:g,surfaceId:d})}const k6={computeNormalDirection:t1,computeNormal:vc,interpolationDerivs:aO,intersectWithTriangle:U6};function F6(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,i,s,c)=>{const u={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};c[2]=0;const f=[],g=i*i,d=[],h=[],y=[];e.points.getPoint(0,d),e.points.getPoint(1,h),e.points.getPoint(2,y);const v=[],S=[];if(vc(d,h,y,v),v[0]!==0||v[1]!==0||v[2]!==0){const M=Ra.intersectWithLine(n,r,d,v);if(u.betweenPoints=M.betweenPoints,u.t=M.t,s[0]=M.x[0],s[1]=M.x[1],s[2]=M.x[2],!M.intersection)return c[0]=0,c[1]=0,u.intersect=0,u;const w=t.evaluatePosition(s,f,c,S);if(w.evaluation>=0)return w.dist2<=g?(u.intersect=1,u):(u.intersect=w.evaluation,u)}const x=mn(d,h),m=mn(h,y),E=mn(y,d);e.line||(e.line=Ht.newInstance()),x>m&&x>E?(e.line.getPoints().setPoint(0,d),e.line.getPoints().setPoint(1,h)):m>E&&m>x?(e.line.getPoints().setPoint(0,h),e.line.getPoints().setPoint(1,y)):(e.line.getPoints().setPoint(0,y),e.line.getPoints().setPoint(1,d));const O=e.line.intersectWithLine(n,r,i,s,c);if(u.betweenPoints=O.betweenPoints,u.t=O.t,O.intersect){const M=[],w=[],D=[];for(let R=0;R<3;R++)M[R]=d[R]-y[R],w[R]=h[R]-y[R],D[R]=s[R]-y[R];return c[0]=ye(D,M)/E,c[1]=ye(D,w)/m,u.intersect=1,u}return c[0]=0,c[1]=0,u.intersect=0,u},t.evaluatePosition=(n,r,i,s)=>{const c={subId:0,dist2:0,evaluation:-1};let u,f;const g=[],d=[],h=[],y=[];let v;const S=[],x=[],m=[];let E=0,O=0;const M=[];let w,D,R,B=[];const _=[],G=[],z=[];c.subId=0,i[2]=0,e.points.getPoint(1,g),e.points.getPoint(2,d),e.points.getPoint(0,h),t1(g,d,h,y),Ra.generalizedProjectPoint(n,g,y,z);let H=0;for(u=0;u<3;u++)y[u]<0?v=-y[u]:v=y[u],v>H&&(H=v,O=u);for(f=0,u=0;u<3;u++)u!==O&&(M[f++]=u);for(u=0;u<2;u++)S[u]=z[M[u]]-h[M[u]],x[u]=g[M[u]]-h[M[u]],m[u]=d[M[u]]-h[M[u]];if(E=at(x,m),E===0)return i[0]=0,i[1]=0,c.evaluation=-1,c;if(i[0]=at(S,m)/E,i[1]=at(x,S)/E,s[0]=1-(i[0]+i[1]),s[1]=i[0],s[2]=i[1],s[0]>=0&&s[0]<=1&&s[1]>=0&&s[1]<=1&&s[2]>=0&&s[2]<=1)r&&(c.dist2=mn(z,n),r[0]=z[0],r[1]=z[1],r[2]=z[2]),c.evaluation=1;else{let A;if(r){if(s[1]<0&&s[2]<0)for(w=mn(n,h),D=Ht.distanceToLine(n,g,h,A,_),R=Ht.distanceToLine(n,h,d,A,G),w<D?(c.dist2=w,B=h):(c.dist2=D,B=_),R<c.dist2&&(c.dist2=R,B=G),u=0;u<3;u++)r[u]=B[u];else if(s[2]<0&&s[0]<0)for(w=mn(n,g),D=Ht.distanceToLine(n,g,h,A,_),R=Ht.distanceToLine(n,g,d,A,G),w<D?(c.dist2=w,B=g):(c.dist2=D,B=_),R<c.dist2&&(c.dist2=R,B=G),u=0;u<3;u++)r[u]=B[u];else if(s[1]<0&&s[0]<0)for(w=mn(n,d),D=Ht.distanceToLine(n,d,h,A,_),R=Ht.distanceToLine(n,g,d,A,G),w<D?(c.dist2=w,B=d):(c.dist2=D,B=_),R<c.dist2&&(c.dist2=R,B=G),u=0;u<3;u++)r[u]=B[u];else if(s[0]<0){const $=Ht.distanceToLine(n,g,d,r);c.dist2=$.distance}else if(s[1]<0){const $=Ht.distanceToLine(n,d,h,r);c.dist2=$.distance}else if(s[2]<0){const $=Ht.distanceToLine(n,g,h,r);c.dist2=$.distance}}c.evaluation=0}return c},t.evaluateLocation=(n,r,i)=>{const s=[],c=[],u=[];e.points.getPoint(0,s),e.points.getPoint(1,c),e.points.getPoint(2,u);const f=1-n[0]-n[1];for(let g=0;g<3;g++)r[g]=s[g]*f+c[g]*n[0]+u[g]*n[1];i[0]=f,i[1]=n[0],i[2]=n[1]},t.getParametricDistance=n=>{let r,i=0;const s=[];s[0]=n[0],s[1]=n[1],s[2]=1-n[0]-n[1];for(let c=0;c<3;c++)s[c]<0?r=-s[c]:s[c]>1?r=s[c]-1:r=0,r>i&&(i=r);return i},t.derivatives=(n,r,i,s,c)=>{const u=e.points.getPoint(0),f=e.points.getPoint(1),g=e.points.getPoint(2),d=[],h=[],y=[],v=[];vc(u,f,g,d),wt(f,u,h),wt(g,u,v),It(d,h,y);const S=Cn(h);if(S<=0||Cn(y)<=0){for(let D=0;D<s;D++)for(let R=0;R<3;R++)c[D*s+R]=0;return}const x=[0,0],m=[S,0],E=[ye(v,h),ye(v,y)],O=new Array(6);aO(O);const M=[m[0]-x[0],m[1]-x[1],E[0]-x[0],E[1]-x[1]],w=V.newTypedArray(zt.Float64Array,4);jd(M,w,2);for(let D=0;D<s;D++){let R=0,B=0;for(let z=0;z<3;z++)R+=O[z]*i[s*z+D],B+=O[3+z]*i[s*z+D];const _=R*w[0]+B*w[1],G=R*w[2]+B*w[3];c[3*D]=_*h[0]+G*y[0],c[3*D+1]=_*h[1]+G*y[1],c[3*D+2]=_*h[2]+G*y[2]}},t.cellBoundary=(n,r,i)=>{const s=r[0]-r[1],c=.5*(1-r[0])-r[1],u=2*r[0]+r[1]-1;return s>=0&&c>=0?(i[0]=e.pointsIds[0],i[1]=e.pointsIds[1]):c<0&&u>=0?(i[0]=e.pointsIds[1],i[1]=e.pointsIds[2]):(i[0]=e.pointsIds[2],i[1]=e.pointsIds[0]),!(r[0]<0||r[1]<0||r[0]>1||r[1]>1||1-r[0]-r[1]<0)}}const G6={};function iO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G6,n),Ei.extend(t,e,n),F6(t,e)}const z6=V.newInstance(iO,"vtkTriangle");var n1={newInstance:z6,extend:iO,...k6};function Z2(){return{intersected:!1,subId:-1,x:[0,0,0],pCoords:[0,0,0],t:-1}}function A6(t,e){e.classHierarchy.push("vtkQuad"),t.getCellDimension=()=>2,t.getCellType=()=>Ue.VTK_QUAD,t.getNumberOfEdges=()=>4,t.getNumberOfFaces=()=>0,t.intersectWithLine=(n,r,i,s,c)=>{let u={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1},f;const g=e.points.getPoint(0,[]),d=e.points.getPoint(1,[]),h=e.points.getPoint(2,[]),y=e.points.getPoint(3,[]),v=mn(g,h),S=mn(d,y);if(v===S){let R,B=0,_=0;for(let G=0;G<4;G++)R=e.pointsIds[G],R>B&&(B=R,_=G);_===0||_===2?f=0:f=1}else v<S?f=0:f=1;let x=null;e.triangle?x=e.triangle.getPoints():(e.triangle=n1.newInstance(),x=yc.newInstance(),x.setNumberOfPoints(3),e.triangle.initialize(x));let m;const E=Z2();let O;const M=Z2();let w,D;switch(f){case 0:x.setPoint(0,...g),x.setPoint(1,...d),x.setPoint(2,...h),m=e.triangle.intersectWithLine(n,r,i,E.x,E.pCoords),x.setPoint(0,...h),x.setPoint(1,...y),x.setPoint(2,...g),O=e.triangle.intersectWithLine(n,r,i,M.x,M.pCoords),w=m.intersect&&O.intersect?m.t<=O.t:m.intersect,D=m.intersect&&O.intersect?O.t<m.t:O.intersect,w?(u=m,s[0]=E.x[0],s[1]=E.x[1],s[2]=E.x[2],c[0]=E.pCoords[0]+E.pCoords[1],c[1]=E.pCoords[1],c[2]=E.pCoords[2]):D&&(u=O,s[0]=M.x[0],s[1]=M.x[1],s[2]=M.x[2],c[0]=1-(M.pCoords[0]+M.pCoords[1]),c[1]=1-M.pCoords[1],c[2]=M.pCoords[2]);break;case 1:x.setPoint(0,...g),x.setPoint(1,...d),x.setPoint(2,...y),m=e.triangle.intersectWithLine(n,r,i,E.x,E.pCoords),x.setPoint(0,...h),x.setPoint(1,...y),x.setPoint(2,...d),O=e.triangle.intersectWithLine(n,r,i,M.x,M.pCoords),w=m.intersect&&O.intersect?m.t<=O.t:m.intersect,D=m.intersect&&O.intersect?O.t<m.t:O.intersect,w?(u=m,s[0]=E.x[0],s[1]=E.x[1],s[2]=E.x[2],c[0]=E.pCoords[0],c[1]=E.pCoords[1],c[2]=E.pCoords[2]):D&&(u=O,s[0]=M.x[0],s[1]=M.x[1],s[2]=M.x[2],c[0]=1-M.pCoords[0],c[1]=1-M.pCoords[1],c[2]=M.pCoords[2]);break}return u},t.interpolationFunctions=(n,r)=>{const i=1-n[0],s=1-n[1];r[0]=i*s,r[1]=n[0]*s,r[2]=n[0]*n[1],r[3]=i*n[1]},t.evaluateLocation=(n,r,i)=>{const s=[];t.interpolationFunctions(n,i),r[0]=0,r[1]=0,r[2]=0;for(let c=0;c<4;c++){e.points.getPoint(c,s);for(let u=0;u<3;u++)r[u]+=s[u]*i[c]}}}const j6={};function sO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j6,n),Ei.extend(t,e,n),A6(t,e)}const H6=V.newInstance(sO,"vtkQuad");var $6={newInstance:H6,extend:sO};const{vtkErrorMacro:oO}=V;function Q2(t){return()=>oO(`vtkTriangleStrip.${t} - NOT IMPLEMENTED`)}function W6(t,e){if(!Array.isArray(t)||t.length<3){oO("decomposeStrip - Invalid points array");return}let n=t[0],r=t[1];for(let i=0;i<t.length-2;i++){const s=t[i+2];i%2?e.insertNextCell([r,n,s]):e.insertNextCell([n,r,s]),n=r,r=s}}const K6={decomposeStrip:W6};function X6(t,e){e.classHierarchy.push("vtkTriangleStrip");const n=t.initialize;t.initialize=(r,i)=>{e.triangle.initialize(r,i),n(r,i)},t.getCellType=()=>Ue.VTK_TRIANGLE_STRIP,t.getCellDimension=()=>2,t.getNumberOfEdges=()=>e.pointsIds.length,t.getNumberOfFaces=()=>0,t.evaluatePosition=(r,i,s,c,u)=>{const f=[0,0,0];let g=Number.MAX_VALUE,d=0;const h=[],y=[],v=[];s[2]=0,y[0]=0,y[1]=0,y[2]=0;const S=e.triangle.getPoints();S.setNumberOfPoints(3);const m=e.triangle.getPointsIds().length;for(let E=0;E<m;E++)u[E]=0;for(let E=0;E<m-2;E++){const O=[];S.getPoint(E,O);const M=[];S.getPoint(E+1,M);const w=[];S.getPoint(E+2,w),S.setData(Float32Array.from([...O,...M,...w]),3);const D=e.triangle.evaluatePosition(r,v,f,h),R=D.dist2;D.evaluation>=0&&(R<g||R===g&&d===0)&&(d=D,i&&(i[0]=v[0],i[1]=v[1],i[2]=v[2]),s[0]=f[0],s[1]=f[1],g=R,y[0]=h[0],y[1]=h[1],y[2]=h[2])}return c[0]=g,u[0]=y[0],u[1]=y[1],u[2]=y[2],d},t.evaluateLocation=(r,i,s,c)=>{const u=[[0,1,2],[1,0,2]],f=r%2,g=e.pointsIds.length;for(let S=0;S<g;S++)c[S]=0;const d=1-i[0]-i[1];c[r]=d,c[r+1]=i[0],c[r+2]=i[1];const h=[];e.points.getPoint(r+u[f][0],h);const y=[];e.points.getPoint(r+u[f][1],y);const v=[];e.points.getPoint(r+u[f][2],v);for(let S=0;S<3;S++)s[S]=h[S]*c[r]+y[S]*c[r+1]+v[S]*c[r+2]},t.cellBoundary=(r,i,s)=>{const c=[[0,1,2],[1,0,2]],u=r%2,f=e.triangle.getPointsIds();return f[0]=e.pointsIds[c[u][0]],f[1]=e.pointsIds[c[u][1]],f[2]=e.pointsIds[c[u][2]],e.triangle.cellBoundary(0,i,s)},t.getEdge=r=>{let i,s;const c=e.pointsIds.length;return r===0?(i=0,s=1):r===c-1?(i=r-1,s=r):(i=r-1,s=r+1),e.line.getPointsIds()[0]=e.pointsIds[i],e.line.getPointsIds()[1]=e.pointsIds[s],e.line.getPoints().setPoint(0,e.points.getPoint(i)),e.line.getPoints().setPoint(1,e.points.getPoint(s)),e.line},t.intersectWithLine=(r,i,s,c,u)=>{const f=e.pointsIds.length-2,g=e.triangle.getPoints();g.setNumberOfPoints(3);for(let d=0;d<f;d++){const h=[];e.points.getPoint(e.pointsIds[d],h);const y=[];e.points.getPoint(e.pointsIds[d+1],y);const v=[];e.points.getPoint(e.pointsIds[d+2],v),g.setData(Float32Array.from([...h,...y,...v]),3);const S=e.triangle.intersectWithLine(r,i,s,c,u);if(S.intersect)return S}return!1},t.triangulate=()=>{const r=e.points.getNumberOfPoints()-2;e.tris=new Array(3*r);const i=[[0,1,2],[1,0,2]];for(let s=0;s<r;s++){const c=s%2;for(let u=0;u<3;u++)e.tris[s*3+u]=s+i[c][u]}return!0},t.getPointArray=()=>e.tris,t.derivatives=(r,i,s,c,u)=>{const f=[];e.points.getPoint(r,f);const g=[];e.points.getPoint(r+1,g);const d=[];e.points.getPoint(r+2,d);const h=e.triangle.getPoints();h.setPoint(0,...f),h.setPoint(1,...g),h.setPoint(2,...d),e.triangle.derivatives(0,i,s,c,u)},t.getParametricCenter=r=>(r[0]=.333333,r[1]=.333333,r[2]=0,Math.floor((e.pointsIds.length-2)/2)),t.contour=(r,i,s,c,u,f,g,d,h,y,v)=>Q2("contour")(),t.clip=(r,i,s,c,u,f,g,d,h,y)=>Q2("clip")()}const Y6={line:null,triangle:null,tris:null};function cO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y6,n),Ei.extend(t,e,n),e.line||(e.line=Ht.newInstance()),e.triangle||(e.triangle=n1.newInstance()),X6(t,e)}const q6=V.newInstance(cO,"vtkTriangleStrip");var Z6={newInstance:q6,extend:cO,...K6};const us=["verts","lines","polys","strips"],{vtkWarningMacro:J2}=V,Q6={[Ue.VTK_LINE]:Ht,[Ue.VTK_QUAD]:$6,[Ue.VTK_POLY_LINE]:Ht,[Ue.VTK_TRIANGLE]:n1,[Ue.VTK_TRIANGLE_STRIP]:Z6,[Ue.VTK_POLY_LINE]:m6,[Ue.VTK_POLYGON]:_6};function J6(t,e){e.classHierarchy.push("vtkPolyData");function n(u){return u.replace(/(?:^\w|[A-Z]|\b\w)/g,f=>f.toUpperCase()).replace(/\s+/g,"")}function r(){e.cells=void 0,e.links=void 0}us.forEach(u=>{t[`getNumberOf${n(u)}`]=()=>e[u].getNumberOfCells(),e[u]?e[u]=Pn(e[u]):e[u]=X2.newInstance(),e[`_on${n(u)}Changed`]=r}),t.getNumberOfCells=()=>us.reduce((u,f)=>u+e[f].getNumberOfCells(),0);const i=t.shallowCopy;t.shallowCopy=function(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i(u,f),us.forEach(g=>{e[g]=X2.newInstance(),e[g].shallowCopy(u.getReferenceByName(g))})};const s=t.getMTime;t.getMTime=()=>us.reduce((u,f)=>Math.max(u,e[f]?.getMTime()??u),s());const c=t.initialize;t.initialize=()=>(us.forEach(u=>e[u]?.initialize()),r(),c()),t.buildCells=()=>{const u=t.getNumberOfVerts(),f=t.getNumberOfLines(),g=t.getNumberOfPolys(),d=t.getNumberOfStrips(),h=u+f+g+d,y=new Uint8Array(h);let v=y;const S=new Uint32Array(h);let x=S;if(u){let m=0;e.verts.getCellSizes().forEach((E,O)=>{x[O]=m,v[O]=E>1?Ue.VTK_POLY_VERTEX:Ue.VTK_VERTEX,m+=E+1}),x=x.subarray(u),v=v.subarray(u)}if(f){let m=0;e.lines.getCellSizes().forEach((E,O)=>{x[O]=m,v[O]=E>2?Ue.VTK_POLY_LINE:Ue.VTK_LINE,E===1&&J2("Building VTK_LINE ",O," with only one point, but VTK_LINE needs at least two points. Check the input."),m+=E+1}),x=x.subarray(f),v=v.subarray(f)}if(g){let m=0;e.polys.getCellSizes().forEach((E,O)=>{switch(x[O]=m,E){case 3:v[O]=Ue.VTK_TRIANGLE;break;case 4:v[O]=Ue.VTK_QUAD;break;default:v[O]=Ue.VTK_POLYGON;break}E<3&&J2("Building VTK_TRIANGLE ",O," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),m+=E+1}),x+=x.subarray(g),v+=v.subarray(g)}if(d){let m=0;v.fill(Ue.VTK_TRIANGLE_STRIP,0,d),e.strips.getCellSizes().forEach((E,O)=>{x[O]=m,m+=E+1})}e.cells=c6.newInstance(),e.cells.setCellTypes(h,y,S)},t.buildLinks=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells==null&&t.buildCells(),e.links=Iz.newInstance(),u>0?e.links.allocate(u):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=u=>e.cells.getCellType(u),t.getCellPoints=u=>{const f=t.getCellType(u);let g=null;switch(f){case Ue.VTK_VERTEX:case Ue.VTK_POLY_VERTEX:g=e.verts;break;case Ue.VTK_LINE:case Ue.VTK_POLY_LINE:g=e.lines;break;case Ue.VTK_TRIANGLE:case Ue.VTK_QUAD:case Ue.VTK_POLYGON:g=e.polys;break;case Ue.VTK_TRIANGLE_STRIP:g=e.strips;break;default:return g=null,{type:0,cellPointIds:null}}const d=e.cells.getCellLocation(u),h=g.getCell(d);return{cellType:f,cellPointIds:h}},t.getPointCells=u=>e.links.getCells(u),t.getCellEdgeNeighbors=(u,f,g)=>{const d=e.links.getLink(f),h=e.links.getLink(g);return d.cells.filter(y=>y!==u&&h.cells.indexOf(y)!==-1)},t.getCell=function(u){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const g=t.getCellPoints(u),d=f||Q6[g.cellType].newInstance();return d.initialize(t.getPoints(),g.cellPointIds),d},t.getMaxCellSize=()=>us.reduce((u,f)=>Math.max(u,e[f]?.getMaxCellSize?.()??0),0)}const P6={};function uO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P6,n),y6.extend(t,e,n),V.get(t,e,["cells","links"]),V.setGet(t,e,["verts","lines","polys","strips"]),J6(t,e)}const I6=V.newInstance(uO,"vtkPolyData");var Os={newInstance:I6,extend:uO};function eA(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.imageBitmap=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setImageBitmap=n=>{e.imageBitmap!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.jsImageData=null),e.imageBitmap=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.imageBitmap=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null,e.imageBitmap=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,i=1;if(t.getInputData()){const c=t.getInputData();n=c.getDimensions()[0],r=c.getDimensions()[1],i=c.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),e.imageBitmap&&(n=e.imageBitmap.width,r=e.imageBitmap.height),(n>1)+(r>1)+(i>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData;if(e.imageBitmap)return e.imageBitmap;if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=e.image.width,r=e.image.height,s=new OffscreenCanvas(n,r).getContext("2d");return s.translate(0,r),s.scale(1,-1),s.drawImage(e.image,0,0,n,r),s.getImageData(0,0,n,r)}return null}}const tA=(t,e,n)=>{const i=t.createShaderModule({code:`
    @group(0) @binding(0) var inputTexture: texture_2d<f32>;
    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;

    @compute @workgroup_size(8, 8)
    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
      let texelCoord = vec2<i32>(global_id.xy);
      let outputSize = textureDimensions(outputTexture);

      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {
        return;
      }

      let inputSize = textureDimensions(inputTexture);
      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);

      // Compute the floating-point source coordinate
      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;

      // Get integer coordinates for the four surrounding texels
      let x0 = i32(floor(srcCoord.x));
      let x1 = min(x0 + 1, i32(inputSize.x) - 1);
      let y0 = i32(floor(srcCoord.y));
      let y1 = min(y0 + 1, i32(inputSize.y) - 1);

      // Compute the weights
      let wx = srcCoord.x - f32(x0);
      let wy = srcCoord.y - f32(y0);

      // Fetch the four texels
      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);
      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);
      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);
      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);

      // Bilinear interpolation
      let color = mix(
        mix(c00, c10, wx),
        mix(c01, c11, wx),
        wy
      );

      textureStore(outputTexture, texelCoord, color);
    }
  `}),s=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),c=t.createPipelineLayout({bindGroupLayouts:[s]}),u=t.createComputePipeline({label:"ComputeMipmapPipeline",layout:c,compute:{module:i,entryPoint:"main"}}),f=t.createSampler({magFilter:"linear",minFilter:"linear"});for(let g=1;g<n;g++){const d=e.createView({baseMipLevel:g-1,mipLevelCount:1}),h=e.createView({baseMipLevel:g,mipLevelCount:1}),y=t.createBindGroup({layout:u.getBindGroupLayout(0),entries:[{binding:0,resource:d},{binding:1,resource:h},{binding:2,resource:f}]}),v=t.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),S=v.beginComputePass();S.setPipeline(u),S.setBindGroup(0,y);const x=Math.max(1,e.width>>g),m=Math.max(1,e.height>>g),E=Math.ceil(x/8),O=Math.ceil(m/8);S.dispatchWorkgroups(E,O),S.end(),t.queue.submit([v.finish()])}},nA={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function lO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nA,n),V.obj(t,e),V.algo(t,e,6,0),V.get(t,e,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),V.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),eA(t,e)}const rA=V.newInstance(lO,"vtkTexture"),aA={generateMipmaps:tA};var xc={newInstance:rA,extend:lO,...aA};const iA=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],P2=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],ll=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],I2=[0,1,0,1,0,1,0,1,2,2,2,2],nt=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],ve=new Float64Array(3),fl=new Float64Array(3),Ge=new Float64Array(3),fi=new Float64Array(3),ni=new Float64Array(3),gl=new Float64Array(3),kh=new Float64Array(16);function Fh(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function fO(t){const e=[],n=[];for(let r=0;r<3;r++){const i=kd().domain([t[r*2],t[r*2+1]]);e[r]=i.ticks(5);const s=i.tickFormat(5);n[r]=e[r].map(s)}return{ticks:e,tickStrings:n}}function sA(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,i,s,c,u,f)=>{const g=e.renderable.get_tmAtlas().get(n);if(!g)return;const d=e.renderable.getTextPolyData().getPoints().getData(),h=e.lastSize;ve[0]=d[r*3],ve[1]=d[r*3+1],ve[2]=d[r*3+2],je(Ge,ve,i),Ge[0]+=.1,je(fl,Ge,s),Ma(ni,fl,ve),Ge[0]-=.1,Ge[1]+=.1,je(fl,Ge,s),Ma(gl,fl,ve);for(let S=0;S<3;S++)ni[S]/=.5*.1*h[0],gl[S]/=.5*.1*h[1];let y=f.ptIdx,v=f.cellIdx;ve[0]=d[r*3],ve[1]=d[r*3+1],ve[2]=d[r*3+2],c[0]<-.5?xa(Ge,ni,c[0]*u-g.width):c[0]>.5?xa(Ge,ni,c[0]*u):xa(Ge,ni,c[0]*u-g.width/2),Ao(ve,ve,Ge),xa(Ge,gl,c[1]*u-g.height/2),Ao(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[0],f.tcoords[y*2+1]=g.tcoords[1],y++,xa(Ge,ni,g.width),Ao(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[2],f.tcoords[y*2+1]=g.tcoords[3],y++,xa(Ge,gl,g.height),Ao(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[4],f.tcoords[y*2+1]=g.tcoords[5],y++,xa(Ge,ni,g.width),Ma(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[6],f.tcoords[y*2+1]=g.tcoords[7],y++,f.polys[v*4]=3,f.polys[v*4+1]=y-4,f.polys[v*4+2]=y-3,f.polys[v*4+3]=y-2,v++,f.polys[v*4]=3,f.polys[v*4+1]=y-4,f.polys[v*4+2]=y-2,f.polys[v*4+3]=y-1,f.ptIdx+=4,f.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);Pe(n,n);const r=e.renderable.getTextValues().length,i=r*4,s=r*2,c=new Float64Array(i*3),u=new Uint16Array(s*4),f=new Float32Array(i*2);Hn(kh,n);const g={ptIdx:0,cellIdx:0,polys:u,points:c,tcoords:f};let d=0,h=0,y=0;const v=e.renderable.getTextPolyData().getPoints().getData(),S=e.renderable.getTextValues();for(;d<v.length/3;){ve[0]=v[d*3],ve[1]=v[d*3+1],ve[2]=v[d*3+2],je(Ge,ve,n),ve[0]=v[d*3+3],ve[1]=v[d*3+4],ve[2]=v[d*3+5],je(fi,ve,n),Ma(Ge,Ge,fi);const m=[Ge[0],Ge[1]];RM(m),t.createPolyDataForOneLabel(S[h],d,n,kh,m,e.renderable.getAxisTitlePixelOffset(),g),d+=2,h++;for(let E=0;E<e.renderable.getTickCounts()[y];E++)t.createPolyDataForOneLabel(S[h],d,n,kh,m,e.renderable.getTickLabelPixelOffset(),g),d++,h++;y++}const x=rt.newInstance({numberOfComponents:2,values:f,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(x),e.tmPolyData.getPoints().setData(c,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(u,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,i)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const oA=V.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),V.obj(t,e),e.tmPolyData=Os.newInstance(),e.tmMapper=Ci.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=Si.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),V.setGet(t,e,["renderable"]),V.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},V.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},V.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],sA(t,e)},"vtkCubeAxesActorHelper");function cA(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();Pe(r,r);let i=!1;const s=Ne.getDiagonalLength(e.dataBounds),c=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let u=0;u<6;u++){let f=!1;const g=Math.floor(u/2),d=(g+1)%3,h=(g+2)%3;e.dataBounds[d*2]!==e.dataBounds[d*2+1]&&e.dataBounds[h*2]!==e.dataBounds[h*2+1]&&(ve[g]=e.dataBounds[u]-.1*s*iA[u][g],ve[d]=.5*(e.dataBounds[d*2]+e.dataBounds[d*2+1]),ve[h]=.5*(e.dataBounds[h*2]+e.dataBounds[h*2+1]),je(Ge,ve,r),ve[g]=e.dataBounds[u],je(fi,ve,r),Ma(Ge,fi,Ge),fc(Ge,Ge),f=Ge[2]>c,e.camera.getParallelProjection()||(fc(fi,fi),f=NE(fi,Ge)>c)),f!==e.lastFacesToDraw[u]&&(e.lastFacesToDraw[u]=f,i=!0)}return i},t.updatePolyData=(r,i,s)=>{let c=0,u=0;c+=8;let f=0;for(let v=0;v<12;v++)i[v]>0&&f++;if(u+=f,e.gridLines)for(let v=0;v<6;v++)r[v]&&(c+=s[nt[v][0]].length*2+s[nt[v][1]].length*2,u+=s[nt[v][0]].length+s[nt[v][1]].length);const g=new Float64Array(c*3),d=new Uint32Array(u*3);let h=0,y=0;for(let v=0;v<2;v++)for(let S=0;S<2;S++)for(let x=0;x<2;x++)g[h*3]=e.dataBounds[x],g[h*3+1]=e.dataBounds[2+S],g[h*3+2]=e.dataBounds[4+v],h++;for(let v=0;v<12;v++)i[v]>0&&(d[y*3]=2,d[y*3+1]=ll[v][0],d[y*3+2]=ll[v][1],y++);if(e.gridLines){for(let v=0;v<6;v++)if(r[v]){const S=Math.floor(v/2);let x=s[nt[v][0]];for(let m=0;m<x.length;m++)g[h*3+S]=e.dataBounds[v],g[h*3+nt[v][0]]=x[m],g[h*3+nt[v][1]]=e.dataBounds[nt[v][1]*2],h++,g[h*3+S]=e.dataBounds[v],g[h*3+nt[v][0]]=x[m],g[h*3+nt[v][1]]=e.dataBounds[nt[v][1]*2+1],h++,d[y*3]=2,d[y*3+1]=h-2,d[y*3+2]=h-1,y++;x=s[nt[v][1]];for(let m=0;m<x.length;m++)g[h*3+S]=e.dataBounds[v],g[h*3+nt[v][1]]=x[m],g[h*3+nt[v][0]]=e.dataBounds[nt[v][0]*2],h++,g[h*3+S]=e.dataBounds[v],g[h*3+nt[v][1]]=x[m],g[h*3+nt[v][0]]=e.dataBounds[nt[v][0]*2+1],h++,d[y*3]=2,d[y*3+1]=h-2,d[y*3+2]=h-1,y++}}e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(d,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,i,s,c)=>{let u=0;for(let v=0;v<12;v++)i[v]===1&&(u+=2,u+=s[I2[v]].length);const f=e.polyData.getPoints().getData(),g=new Float64Array(u*3);let d=0,h=0,y=0;for(let v=0;v<6;v++)if(r[v])for(let S=0;S<4;S++){const x=P2[v][S];if(i[x]===1){const m=I2[x],E=ll[x][0]*3,O=ll[x][1]*3;g[d*3]=.5*(f[E]+f[O]),g[d*3+1]=.5*(f[E+1]+f[O+1]),g[d*3+2]=.5*(f[E+2]+f[O+2]),d++;const M=Math.floor(v/2);g[d*3+M]=e.dataBounds[v],g[d*3+nt[v][0]]=.5*(e.dataBounds[nt[v][0]*2]+e.dataBounds[nt[v][0]*2+1]),g[d*3+nt[v][1]]=.5*(e.dataBounds[nt[v][1]*2]+e.dataBounds[nt[v][1]*2+1]),d++,e.textValues[h]=e.axisLabels[m],h++;const w=(m+1)%3,D=(m+2)%3,R=s[m],B=c[m];e.tickCounts[y]=R.length;for(let _=0;_<R.length;_++)g[d*3+m]=R[_],g[d*3+w]=f[E+w],g[d*3+D]=f[E+D],d++,e.textValues[h]=B[_],h++;y++}}e.textPolyData.getPoints().setData(g,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),i=e.lastFacesToDraw;let s=!1;for(let c=0;c<6;c++)e.dataBounds[c]!==e.lastTickBounds[c]&&(s=!0,e.lastTickBounds[c]=e.dataBounds[c]);if(r||s||e.forceUpdate){const c=new Array(12).fill(0);for(let f=0;f<6;f++)if(i[f])for(let g=0;g<4;g++)c[P2[f][g]]++;const u=e.generateTicks(e.dataBounds);t.updatePolyData(i,c,u.ticks),t.updateTextData(i,c,u.ticks,u.tickStrings),(s||e.forceUpdate)&&t.updateTextureAtlas(u.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let i=0,s=1;for(let c=0;c<3;c++){if(!e._tmAtlas.has(e.axisLabels[c])){Fh(e.tmContext,e.axisTextStyle);const u=e.tmContext.measureText(e.axisLabels[c]),f={height:u.actualBoundingBoxAscent+2,startingHeight:s,width:u.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[c],f),s+=f.height,i<f.width&&(i=f.width)}Fh(e.tmContext,e.tickTextStyle);for(let u=0;u<r[c].length;u++)if(!e._tmAtlas.has(r[c][u])){const f=e.tmContext.measureText(r[c][u]),g={height:f.actualBoundingBoxAscent+2,startingHeight:s,width:f.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[c][u],g),s+=g.height,i<g.width&&(i=g.width)}}i=Gn(i),s=Gn(s),e._tmAtlas.forEach(c=>{c.tcoords=[0,(s-c.startingHeight-c.height)/s,c.width/i,(s-c.startingHeight-c.height)/s,c.width/i,(s-c.startingHeight)/s,0,(s-c.startingHeight)/s]}),e.tmCanvas.width=i,e.tmCanvas.height=s,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,i,s),e._tmAtlas.forEach((c,u)=>{Fh(e.tmContext,c.textStyle),e.tmContext.fillText(u,1,c.startingHeight+c.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),Ne.setBounds(e.bounds,e.gridActor.getBounds()),Ne.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=V.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function uA(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...Ne.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:fO,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n?.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n?.tickTextStyle}}}function gO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Si.extend(t,e,uA(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=xc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=Ci.newInstance(),e.polyData=Os.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=Si.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=Os.newInstance(),V.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),V.setGetArray(t,e,["dataBounds"],6),V.setGetArray(t,e,["axisLabels"],3),V.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),cA(t,e)}const lA=V.newInstance(gO,"vtkCubeAxesActor");var hO={newInstance:lA,extend:gO,newCubeAxesActorHelper:oA,defaultGenerateTicks:fO};function fA(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e._openGLRenderWindow.getRenderable())}}}const gA={};function hA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gA,n),ft.extend(t,e,n),e.CubeAxesActorHelper=hO.newCubeAxesActorHelper(),fA(t,e)}const pA=et(hA,"vtkOpenGLCubeAxesActor");$n("vtkCubeAxesActor",pA);const nc={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var pO={ObjectType:nc};const{ObjectType:Al}=pO,dA={};function yA(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(u){switch(u){case Al.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case Al.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case Al.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,i=null,s=!0,c="";t.getType=()=>r,t.setType=u=>{r=u},t.getHandle=()=>i,t.isReady=()=>s===!1,t.generateBuffer=u=>{const f=n(u);return i===null&&(i=e.context.createBuffer(),r=u),n(r)===f},t.upload=(u,f)=>t.generateBuffer(f)?(e.context.bindBuffer(n(r),i),e.context.bufferData(n(r),u,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=u.length*u.BYTES_PER_ELEMENT,s=!1,!0):(c="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>i?(e.context.bindBuffer(n(r),i),!0):!1,t.release=()=>i?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{i!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(i),i=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=u=>{e._openGLRenderWindow!==u&&(t.releaseGraphicsResources(),e._openGLRenderWindow=u,e.context=null,u&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>c}const vA={objectType:Al.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function dO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vA,n),V.obj(t,e),V.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),V.moveToProtected(t,e,["openGLRenderWindow"]),yA(t,e)}const xA=V.newInstance(dO);var yO={newInstance:xA,extend:dO,...dA,...pO};function TA(t){let e=0,n=0;for(let i=0;i<3;++i){const s=t.getRange(i),c=s[1]-s[0];e+=c*c;const u=.5*(s[1]+s[0]);n+=u*u}const r=e>0&&(Math.abs(n)/e>1e6||Math.abs(Math.log10(e))>3||e===0&&n>1e6);if(r){const i=new Float64Array(3),s=new Float64Array(3);for(let c=0;c<3;++c){const u=t.getRange(c),f=u[1]-u[0];i[c]=.5*(u[1]+u[0]),s[c]=f>0?1/f:1}return{useShiftAndScale:r,coordShift:i,coordScale:s}}return{useShiftAndScale:r,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}function mA(t,e){const n=new Float64Array(3);JU(n,e);const r=new Float64Array(16);return wE(r,Ti(),t,n),r}const{vtkErrorMacro:eS}=V;function SA(t,e){return t===null||e===null?!1:!(km(t,[0,0,0])&&km(e,[1,1,1]))}function CA(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(nc.ARRAY_BUFFER),t.createVBO=function(n,r,i,s){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const u=s.points.getData();let f=null,g=null,d=null;const h=s.colors?s.colors.getNumberOfComponents():0,y=s.tcoords?s.tcoords.getNumberOfComponents():0;s.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,f=s.normals.getData()),s.customAttributes&&s.customAttributes.forEach(J=>{J&&(e.customData.push({data:J.getData(),offset:4*e.blockSize,components:J.getNumberOfComponents(),name:J.getName()}),e.blockSize+=J.getNumberOfComponents())}),s.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=y,e.blockSize+=y,g=s.tcoords.getData()),s.colors?(e.colorComponents=s.colors.getNumberOfComponents(),e.colorOffset=0,d=s.colors.getData(),e.colorBO||(e.colorBO=yO.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let v=0,S=0,x=0,m=0,E=0,O=0,M;const w={anythingToPoints(J,oe,k,Z){for(let te=0;te<J;++te)M(oe[k+te],Z)},linesToWireframe(J,oe,k,Z){for(let te=0;te<J-1;++te)M(oe[k+te],Z),M(oe[k+te+1],Z)},polysToWireframe(J,oe,k,Z){if(J>2)for(let te=0;te<J;++te)M(oe[k+te],Z),M(oe[k+(te+1)%J],Z)},stripsToWireframe(J,oe,k,Z){if(J>2){for(let te=0;te<J-1;++te)M(oe[k+te],Z),M(oe[k+te+1],Z);for(let te=0;te<J-2;te++)M(oe[k+te],Z),M(oe[k+te+2],Z)}},polysToSurface(J,oe,k,Z){for(let te=0;te<J-2;te++)M(oe[k+0],Z),M(oe[k+te+1],Z),M(oe[k+te+2],Z)},stripsToSurface(J,oe,k,Z){for(let te=0;te<J-2;te++)M(oe[k+te],Z),M(oe[k+te+1+te%2],Z),M(oe[k+te+1+(te+1)%2],Z)}},D={anythingToPoints(J,oe){return J},linesToWireframe(J,oe){return J>1?(J-1)*2:0},polysToWireframe(J,oe){return J>2?J*2:0},stripsToWireframe(J,oe){return J>2?J*4-6:0},polysToSurface(J,oe){return J>2?(J-2)*3:0},stripsToSurface(J,oe,k){return J>2?(J-2)*3:0}};let R=null,B=null;i===An.POINTS||r==="verts"?(R=w.anythingToPoints,B=D.anythingToPoints):i===An.WIREFRAME||r==="lines"?(R=w[`${r}ToWireframe`],B=D[`${r}ToWireframe`]):(R=w[`${r}ToSurface`],B=D[`${r}ToSurface`]);const _=n.getData(),G=_.length;let z=0;for(let J=0;J<G;)z+=B(_[J],_),J+=_[J]+1;let H=null;const A=new Float32Array(z*e.blockSize);d&&(H=new Uint8Array(z*4));let $=0,K=0;const{useShiftAndScale:ee,coordShift:U,coordScale:q}=TA(s.points);if(ee?t.setCoordShiftAndScale(U,q):e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null),c)if(!c.points&&!c.cells)c.points=new Int32Array(z),c.cells=new Int32Array(z);else{const J=new Int32Array(z+c.points.length);J.set(c.points),c.points=J;const oe=new Int32Array(z+c.cells.length);oe.set(c.cells),c.cells=oe}let re=s.vertexOffset;M=function(oe,k){if(c&&(c.points[re]=oe,c.cells[re]=O+s.cellOffset),++re,v=oe*3,e.coordShiftAndScaleEnabled?(A[$++]=(u[v++]-e.coordShift[0])*e.coordScale[0],A[$++]=(u[v++]-e.coordShift[1])*e.coordScale[1],A[$++]=(u[v++]-e.coordShift[2])*e.coordScale[2]):(A[$++]=u[v++],A[$++]=u[v++],A[$++]=u[v++]),f!==null&&(s.haveCellNormals?S=(O+s.cellOffset)*3:S=oe*3,A[$++]=f[S++],A[$++]=f[S++],A[$++]=f[S++]),e.customData.forEach(Z=>{E=oe*Z.components;for(let te=0;te<Z.components;++te)A[$++]=Z.data[E++]}),g!==null){s.useTCoordsPerCell?x=k*y:x=oe*y;for(let Z=0;Z<y;++Z)A[$++]=g[x++]}d!==null&&(s.haveCellScalars?m=(O+s.cellOffset)*h:m=oe*h,H[K++]=d[m++],H[K++]=d[m++],H[K++]=d[m++],H[K++]=h===4?d[m++]:255)};for(let J=0;J<G;J+=_[J]+1,O++)R(_[J],_,J+1,O+s.cellOffset);return e.elementCount=z,t.upload(A,nc.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(H,nc.ARRAY_BUFFER)),O},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){eS("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){eS("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!Fm(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!Fm(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=SA(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=mA(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const EA={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function vO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EA,n),yO.extend(t,e,n),V.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),V.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),CA(t,e)}const MA=V.newInstance(vO);var wA={newInstance:MA,extend:vO};const{vtkErrorMacro:OA}=V;function DA(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;if(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType==="Fragment"?n=e.context.FRAGMENT_SHADER:n=e.context.VERTEX_SHADER,e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const i=e.context.getShaderInfoLog(e.handle);return OA(`Error compiling shader '${e.source}': ${i}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const RA={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function xO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,RA,n),V.obj(t,e),V.setGet(t,e,["shaderType","source","error","handle","context"]),DA(t,e)}const bA=V.newInstance(xO,"vtkShader");var Gh={newInstance:bA,extend:xO};const{vtkErrorMacro:rr}=V;function LA(t,e,n,r){const i=typeof n=="string"?n:n.join(`
`),s=r===!1?e:new RegExp(e,"g"),c=t.replace(s,i);return{replace:c!==i,result:c}}function VA(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(rr(e.error),0):t.link()?(t.setCompiled(!0),1):(rr(`Links failed: ${e.error}`),0):(rr(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),rr(e.fragmentShader.getError()),0):(rr(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),rr(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return rr(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix4fv(i,!1,s),!0},t.setUniformMatrix3x3=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const s=new Float32Array(r);return e.context.uniformMatrix3fv(i,!1,s),!0},t.setUniformf=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(i,r),!0)},t.setUniformfv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(i,r),!0)},t.setUniformi=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(i,r),!0)},t.setUniformiv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(i,r),!0)},t.setUniform2f=(n,r,i)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(s,r,i),!0},t.setUniform2fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(i,r),!0)},t.setUniform2i=(n,r,i)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(s,r,i),!0},t.setUniform2iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(i,r),!0)},t.setUniform3f=(n,r,i,s)=>{const c=t.findUniform(n);if(c===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(s===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(c,r,i,s),!0},t.setUniform3fArray=(n,r)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(i,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(i,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];let u=s;if(u.length===1&&Array.isArray(u[0])&&(u=u[0]),u.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,u[0],u[1],u[2]),!0},t.setUniform3iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(i,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];let u=s;if(u.length===1&&Array.isArray(u[0])&&(u=u[0]),u.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,u[0],u[1],u[2],u[3]),!0},t.setUniform4fv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(i,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];let u=s;if(u.length===1&&Array.isArray(u[0])&&(u=u[0]),u.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,u[0],u[1],u[2],u[3]),!0},t.setUniform4iv=(n,r)=>{const i=t.findUniform(n);return i===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(i,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(rr("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return rr("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const NA={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function TO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NA,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=Gh.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=Gh.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=Gh.newInstance(),e.geometryShader.setShaderType("Geometry"),V.obj(t,e),V.get(t,e,["lastCameraMTime"]),V.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),VA(t,e)}const BA=V.newInstance(TO,"vtkShaderProgram");var se={newInstance:BA,extend:TO,substitute:LA};function _A(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let s=0;s<i.attributes.length;++s){const c=i.attributes[s],u=c.isMatrix?c.size:1;for(let f=0;f<u;++f)n.enableVertexAttribArray(c.index+f),n.vertexAttribPointer(c.index+f,c.size,c.type,c.normalize,c.stride,c.offset+c.stride*f/c.size),c.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(c.index+f,1):n.vertexAttribDivisor(c.index+f,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,i.buffer);for(let s=0;s<i.attributes.length;++s){const c=i.attributes[s],u=c.isMatrix?c.size:1;for(let f=0;f<u;++f)n.enableVertexAttribArray(c.index+f),n.vertexAttribPointer(c.index+f,c.size,c.type,c.normalize,c.stride,c.offset+c.stride*f/c.size),c.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(c.index+f,0):n.vertexAttribDivisor(c.index+f,0)),n.disableVertexAttribArray(c.index+f)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,i,s,c,u,f,g)=>t.addAttributeArrayWithDivisor(n,r,i,s,c,u,f,g,0,!1),t.addAttributeArrayWithDivisor=(n,r,i,s,c,u,f,g,d,h)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==nc.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const y=e.context,v={};if(v.name=i,v.index=y.getAttribLocation(e.handleProgram,i),v.offset=s,v.stride=c,v.type=u,v.size=f,v.normalize=g,v.isMatrix=h,v.divisor=d,v.Index===-1)return!1;if(r.bind(),y.enableVertexAttribArray(v.index),y.vertexAttribPointer(v.index,v.size,v.type,v.normalize,v.stride,v.offset),d>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(v.index,1):y.vertexAttribDivisor(v.index,1)),v.buffer=r.getHandle(),!e.supported){let S=!1;for(let x=0;x<e.buffers.length;++x){const m=e.buffers[x];if(m.buffer===v.buffer){S=!0;let E=!1;for(let O=0;O<m.attributes.length;++O)m.attributes[O].name===i&&(E=!0,m.attributes[O]=v);E||m.attributes.push(v)}}S||e.buffers.push({buffer:v.buffer,attributes:[v]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,i,s,c,u,f,g,d)=>{const h=t.addAttributeArrayWithDivisor(n,r,i,s,c,u,f,g,d,!0);if(!h)return h;const y=e.context,v=y.getAttribLocation(e.handleProgram,i);for(let S=1;S<f;S++)y.enableVertexAttribArray(v+S),y.vertexAttribPointer(v+S,f,u,g,c,s+c*S/f),d>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(v+S,1):y.vertexAttribDivisor(v+S,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const i=e.buffers[r];for(let s=0;s<i.attributes.length;++s)if(i.attributes[s].name===n)return i.attributes.splice(s,1),i.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const UA={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function mO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UA,n),e.buffers=[],V.obj(t,e),V.get(t,e,["supported"]),V.setGet(t,e,["forceEmulation"]),_A(t,e)}const kA=V.newInstance(mO,"vtkOpenGLVertexArrayObject");var SO={newInstance:kA,extend:mO};const Ta={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function FA(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,i,s)=>{if(e.CABO.getElementCount()){const c=t.getOpenGLMode(i),u=t.haveWideLines(n,r),f=e.context,g=f.getParameter(f.DEPTH_WRITEMASK);e.pointPicking&&f.depthMask(!1),c===f.LINES&&u?(t.updateShaders(n,r,s),f.drawArraysInstanced(c,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(f.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,s),f.drawArrays(c,0,e.CABO.getElementCount()),f.lineWidth(1));const h=(c===f.POINTS?1:0)||(c===f.LINES?2:3);return e.pointPicking&&f.depthMask(g),e.CABO.getElementCount()/h}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===An.POINTS||r===Ta.Points?e.context.POINTS:n===An.WIREFRAME||r===Ta.Lines||r===Ta.TrisEdges||r===Ta.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,i)=>!!(i.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<i.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,i)=>{if(t.getNeedToRebuildShaders(n,r,i)){const s={Vertex:null,Fragment:null,Geometry:null};i.buildShaders(s,n,r);const c=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);c!==t.getProgram()&&(t.setProgram(c),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),i.setMapperShaderParameters(t,n,r),i.setPropertyShaderParameters(t,n,r),i.setCameraShaderParameters(t,n,r),i.setLightingShaderParameters(t,n,r),i.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,i)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",i.usize,i.vsize);const s=parseFloat(r.getProperty().getLineWidth()),c=s/2;t.getProgram().setUniformf("lineWidthStepSize",s/Math.ceil(s)),t.getProgram().setUniformf("halfLineWidth",c)}e.primitiveType===Ta.Points||r.getProperty().getRepresentation()===An.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,i)=>{let s=n.Vertex;s=se.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,s=se.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,i)&&(s=se.substitute(s,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,s=se.substitute(s,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=s},t.getPointPickingPrimitiveSize=()=>e.primitiveType===Ta.Points?2:e.primitiveType===Ta.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const GA={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function CO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GA,n),V.obj(t,e),e.shaderSourceTime={},V.obj(e.shaderSourceTime),e.attributeUpdateTime={},V.obj(e.attributeUpdateTime),V.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=se.newInstance(),e.VAO=SO.newInstance(),e.CABO=wA.newInstance(),FA(t,e)}const zA=V.newInstance(CO);var _s={newInstance:zA,extend:CO,primTypes:Ta};const AA={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Ap={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var EO={Wrap:AA,Filter:Ap};const MO=new Float32Array(1),jA=new Int32Array(MO.buffer);function HA(t){MO[0]=t;const e=jA[0];let n=e>>16&32768,r=e>>12&2047;const i=e>>23&255;return i<103?n:i>142?(n|=31744,n|=(i===255?0:1)&&e&8388607,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=r&1,n)}function $A(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var gi={fromHalf:$A,toHalf:HA};function WA(){try{const r=new Int16Array([0,32767]),i=[1,1],s=document.createElement("canvas");s.width=4,s.height=4;const c=s.getContext("webgl2");if(!c)return!1;const u=c.getExtension("EXT_texture_norm16");if(!u)return!1;const f=`#version 300 es
    void main() {
      gl_PointSize = ${4 .toFixed(1)};
      gl_Position = vec4(0, 0, 0, 1);
    }
  `,g=`#version 300 es
    precision highp float;
    precision highp int;
    precision highp sampler2D;

    uniform sampler2D u_image;

    out vec4 color;

    void main() {
        vec4 intColor = texture(u_image, gl_PointCoord.xy);
        color = vec4(vec3(intColor.rrr), 1);
    }
    `,d=c.createShader(c.VERTEX_SHADER);if(c.shaderSource(d,f),c.compileShader(d),!c.getShaderParameter(d,c.COMPILE_STATUS))return!1;const h=c.createShader(c.FRAGMENT_SHADER);if(c.shaderSource(h,g),c.compileShader(h),!c.getShaderParameter(h,c.COMPILE_STATUS))return!1;const y=c.createProgram();if(c.attachShader(y,d),c.attachShader(y,h),c.linkProgram(y),!c.getProgramParameter(y,c.LINK_STATUS))return!1;const v=c.createTexture();c.bindTexture(c.TEXTURE_2D,v),c.texImage2D(c.TEXTURE_2D,0,u.R16_SNORM_EXT,2,1,0,c.RED,c.SHORT,r),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.useProgram(y),c.drawArrays(c.POINTS,0,1);const S=new Uint8Array(4);c.readPixels(i[0],i[1],1,1,c.RGBA,c.UNSIGNED_BYTE,S);const[x,m,E]=S,O=c.getExtension("WEBGL_lose_context");return O&&O.loseContext(),x===m&&m===E&&x!==0}catch{return!1}}let zh;function KA(){return zh===void 0&&(zh=WA()),zh}const{Wrap:Br,Filter:Tt}=EO,{VtkDataTypes:Ce}=rt,{vtkDebugMacro:Ah,vtkErrorMacro:ri,vtkWarningMacro:tS,requiredParam:Me}=gr,{toHalf:XA}=gi;function YA(t,e){e.classHierarchy.push("vtkOpenGLTexture");function n(){return{internalFormat:e.internalFormat,format:e.format,openGLDataType:e.openGLDataType,width:e.width,height:e.height}}t.render=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(S?e._openGLRenderWindow=S:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(Tt.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(Tt.LINEAR),t.setMagnificationFilter(Tt.LINEAR)):(t.setMinificationFilter(Tt.NEAREST),t.setMagnificationFilter(Tt.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(Br.REPEAT),t.setWrapS(Br.REPEAT),t.setWrapT(Br.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImageBitmap()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Tt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImageBitmap()&&e.renderable.getImageLoaded()&&(t.create2DFromImageBitmap(e.renderable.getImageBitmap()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Tt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Tt.LINEAR_MIPMAP_LINEAR));const m=e.renderable.getCanvas();t.create2DFromRaw({width:m.width,height:m.height,numComps:4,dataType:Ce.UNSIGNED_CHAR,data:m,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const m=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Tt.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw({width:m.width,height:m.height,numComps:4,dataType:Ce.UNSIGNED_CHAR,data:m.data,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const x=e.renderable.getInputData(0);if(x&&x.getPointData().getScalars()){const m=x.getExtent(),E=x.getPointData().getScalars(),O=[];for(let M=0;M<e.renderable.getNumberOfInputPorts();++M){const w=e.renderable.getInputData(M),D=w?w.getPointData().getScalars().getData():null;D&&O.push(D)}e.renderable.getInterpolate()&&E.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(Tt.LINEAR_MIPMAP_LINEAR)),O.length%6===0?t.createCubeFromRaw({width:m[1]-m[0]+1,height:m[3]-m[2]+1,numComps:E.getNumberOfComponents(),dataType:E.getDataType(),data:O}):t.create2DFromRaw({width:m[1]-m[0]+1,height:m[3]-m[2]+1,numComps:E.getNumberOfComponents(),dataType:E.getDataType(),data:E.getData()}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()};const r=()=>{if(!((e.minificationFilter===Tt.LINEAR||e.magnificationFilter===Tt.LINEAR)&&!KA()))return e.oglNorm16Ext};t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=S=>{S&&e.handle&&(S.activateTexture(t),S.deactivateTexture(t),e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(S),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let S=!1;if(e.context&&e.handle){let x=0;e.target===e.context.TEXTURE_2D?x=e.context.TEXTURE_BINDING_2D:tS("impossible case"),S=e.context.getIntegerv(x)===e.handle}return S},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(S,x)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(S,x)),e.internalFormat||Ah(`Unable to find suitable internal format for T=${S} NC= ${x}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&tS("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(S,x)=>{let m=0;return m=e._openGLRenderWindow.getDefaultTextureInternalFormat(S,x,r(),t.useHalfFloat()),m||(m||(Ah("Unsupported internal texture type!"),Ah(`Unable to find suitable internal format for T=${S} NC= ${x}`)),m)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=S=>{e._forceInternalFormat=!0,S!==e.internalFormat&&(e.internalFormat=S,t.modified())},t.getFormat=(S,x)=>(e.format=t.getDefaultFormat(S,x),e.format),t.getDefaultFormat=(S,x)=>{if(e._openGLRenderWindow.getWebgl2())switch(x){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(x){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e._prevTexParams=null,e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=S=>{const x=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(S){case Ce.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(r()&&!x&&Ce.SHORT):return e.context.SHORT;case(r()&&!x&&Ce.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(x&&Ce.SHORT):return e.context.HALF_FLOAT;case(x&&Ce.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case Ce.FLOAT:case Ce.VOID:default:return e.context.FLOAT}switch(S){case Ce.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case Ce.FLOAT:case Ce.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const m=e.context.getExtension("OES_texture_half_float");if(m&&e.context.getExtension("OES_texture_half_float_linear"))return m.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(S){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||x)&&(e.openGLDataType=t.getDefaultDataType(S)),e.openGLDataType},t.getShiftAndScale=()=>{let S=0,x=1;switch(e.openGLDataType){case e.context.BYTE:x=127.5,S=x-128;break;case e.context.UNSIGNED_BYTE:x=255,S=0;break;case e.context.SHORT:x=32767.5,S=x-32768;break;case e.context.UNSIGNED_SHORT:x=65536,S=0;break;case e.context.INT:x=21474836475e-1,S=x-2147483648;break;case e.context.UNSIGNED_INT:x=4294967295,S=0;break;case e.context.FLOAT:}return{shift:S,scale:x}},t.getOpenGLFilterMode=S=>{switch(S){case Tt.NEAREST:return e.context.NEAREST;case Tt.LINEAR:return e.context.LINEAR;case Tt.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case Tt.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case Tt.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case Tt.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=S=>{switch(S){case Br.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case Br.REPEAT:return e.context.REPEAT;case Br.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function i(S){const[x,m,E,O,M,w]=S;return[m-x+1,O-E+1,w-M+1]}function s(S){const[x,m,E]=i(S);return x*m*E}function c(S,x,m,E,O){const[M,w,D,R,B,_]=m,[G,z]=x,H=G*z;let A=O;for(let $=B;$<=_;$++){const K=$*H;for(let ee=D;ee<=R;ee++){const U=K+ee*G;for(let q=U+M,re=U+w;q<=re;q++,A++)E[A]=S[q]}}}function u(S,x){const E=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:null)||S.constructor,O=x.reduce((R,B)=>R+s(B),0),M=new E(O),w=[e.width,e.height,e.depth];let D=0;return x.forEach(R=>{c(S,w,R,M,D),D+=s(R)}),M}t.updateArrayDataTypeForGL=function(S,x){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const O=[];let M=e.width*e.height*e.components;m&&(M*=e.depth);const w=!!E.length;if(S!==Ce.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let R=0;R<x.length;R++)if(x[R])if(w)O.push(u(x[R],E,Float32Array));else{const B=x[R].length>M?x[R].subarray(0,M):x[R];O.push(new Float32Array(B))}else O.push(null);if(S!==Ce.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let R=0;R<x.length;R++)if(x[R])if(w)O.push(u(x[R],E,Uint8Array));else{const B=x[R].length>M?x[R].subarray(0,M):x[R];O.push(new Uint8Array(B))}else O.push(null);let D=!1;if(e._openGLRenderWindow.getWebgl2())D=e.openGLDataType===e.context.HALF_FLOAT;else{const R=e.context.getExtension("OES_texture_half_float");D=R&&e.openGLDataType===R.HALF_FLOAT_OES}if(D)for(let R=0;R<x.length;R++)if(x[R]){const B=w?u(x[R],E):x[R],_=new Uint16Array(w?B.length:M),G=_.length;for(let z=0;z<G;z++)_[z]=XA(B[z]);O.push(_)}else O.push(null);if(O.length===0)for(let R=0;R<x.length;R++)O.push(w&&x[R]?u(x[R],E):x[R]);return O};function f(S){if(e._openGLRenderWindow.getWebgl2())return S;const x=[],m=e.width,E=e.height,O=e.components;if(S&&(!$o(m)||!$o(E))){const M=e.context.getExtension("OES_texture_half_float"),w=Gn(m),D=Gn(E),R=w*D*e.components;for(let B=0;B<S.length;B++)if(S[B]!==null){let _=null;const G=E/D,z=m/w;let H=!1;e.openGLDataType===e.context.FLOAT?_=new Float32Array(R):M&&e.openGLDataType===M.HALF_FLOAT_OES?(_=new Uint16Array(R),H=!0):_=new Uint8Array(R);for(let A=0;A<D;A++){const $=A*w*O,K=A*G;let ee=Math.floor(K),U=Math.ceil(K);U>=E&&(U=E-1);const q=K-ee,re=1-q;ee=ee*m*O,U=U*m*O;for(let J=0;J<w;J++){const oe=J*O,k=J*z;let Z=Math.floor(k),te=Math.ceil(k);te>=m&&(te=m-1);const ce=k-Z;Z*=O,te*=O;for(let he=0;he<O;he++)H?_[$+oe+he]=gi.toHalf(gi.fromHalf(S[B][ee+Z+he])*re*(1-ce)+gi.fromHalf(S[B][ee+te+he])*re*ce+gi.fromHalf(S[B][U+Z+he])*q*(1-ce)+gi.fromHalf(S[B][U+te+he])*q*ce):_[$+oe+he]=S[B][ee+Z+he]*re*(1-ce)+S[B][ee+te+he]*re*ce+S[B][U+Z+he]*q*(1-ce)+S[B][U+te+he]*q*ce}}x.push(_),e.width=w,e.height=D}else x.push(null)}if(x.length===0)for(let M=0;M<S.length;M++)x.push(S[M]);return x}function g(S){return e._openGLRenderWindow?e.resizable||e.renderable?.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&r()&&(S===Ce.UNSIGNED_SHORT||S===Ce.SHORT)):!1:!1}t.create2DFromRaw=function(){let{width:S=Me("width"),height:x=Me("height"),numComps:m=Me("numComps"),dataType:E=Me("dataType"),data:O=Me("data"),flip:M=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(E,!0),t.getInternalFormat(E,m),t.getFormat(E,m),!e.internalFormat||!e.format||!e.openGLDataType)return ri("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=m,e.width=S,e.height=x,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const w=[O],D=t.updateArrayDataTypeForGL(E,w),R=f(D);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,M),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(E)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),R[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,R[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,R[0]),e.generateMipmap&&e.context.generateMipmap(e.target),M&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*m*e._openGLRenderWindow.getDefaultTextureByteSize(E,r(),t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=function(){let{width:S=Me("width"),height:x=Me("height"),numComps:m=Me("numComps"),dataType:E=Me("dataType"),data:O=Me("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(E),t.getInternalFormat(E,m),t.getFormat(E,m),!e.internalFormat||!e.format||!e.openGLDataType)return ri("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=m,e.width=S,e.height=x,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=O.length/6-1,t.createTexture(),t.bind();const M=t.updateArrayDataTypeForGL(E,O),w=f(M),D=[];let R=e.width,B=e.height;for(let _=0;_<w.length;_++){_%6===0&&_!==0&&(R/=2,B/=2),D[_]=Vs(E,B*R*e.components);for(let G=0;G<B;++G){const z=G*R*e.components,H=(B-G-1)*R*e.components;D[_].set(w[_].slice(H,H+R*e.components),z)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(E)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let _=0;_<6;_++){let G=0,z=e.width,H=e.height;for(;z>=1&&H>=1;){let A=null;G<=e.maxLevel&&(A=D[6*G+_]),g(E)?A!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+_,G,0,0,z,H,e.format,e.openGLDataType,A):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+_,G,e.internalFormat,z,H,0,e.format,e.openGLDataType,A),G++,z/=2,H/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*m*e._openGLRenderWindow.getDefaultTextureByteSize(E,r(),t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=function(){let{width:S=Me("width"),height:x=Me("height"),dataType:m=Me("dataType"),data:E=Me("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.getOpenGLDataType(m),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?m===Ce.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(ri("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=S,e.height=x,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(m)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),E!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,E)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,E),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(m,r(),t.useHalfFloat()),t.deactivate(),!0)},t.create2DFromImage=S=>{if(t.getOpenGLDataType(Ce.UNSIGNED_CHAR),t.getInternalFormat(Ce.UNSIGNED_CHAR,4),t.getFormat(Ce.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return ri("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const x=!e._openGLRenderWindow.getWebgl2()&&(!$o(S.width)||!$o(S.height));let m=S,E=S.width,O=S.height,M=!0;const w=window.chrome;if(x||w){const D=new OffscreenCanvas(Gn(S.width),Gn(S.height));E=D.width,O=D.height;const R=D.getContext("2d");R.translate(0,D.height),R.scale(1,-1),R.drawImage(S,0,0,S.width,S.height,0,0,D.width,D.height),m=D,M=!1}return e.width=E,e.height=O,e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,M),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(Ce.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,m)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,m),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ce.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0},t.create2DFromImageBitmap=S=>(t.getOpenGLDataType(Ce.UNSIGNED_CHAR),t.getInternalFormat(Ce.UNSIGNED_CHAR,4),t.getFormat(Ce.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType?(ri("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),e.width=S.width,e.height=S.height,g(Ce.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,S)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,S),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ce.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0));function d(S,x,m){const E=new Array(m),O=new Array(m);for(let M=0;M<m;++M)E[M]=S[M],O[M]=x[M]-S[M]||1;return{scale:O,offset:E}}function h(S,x){for(let m=0;m<S.length;m++){const E=S[m],O=x[m]+E;if(E<-2048||E>2048||O<-2048||O>2048)return!1}return!0}function y(S,x,m,E){t.getOpenGLDataType(S);const O=h(x,m)||E;let M=!1;if(e._openGLRenderWindow.getWebgl2())M=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&O||e.openGLDataType===e.context.HALF_FLOAT;else{const w=e.context.getExtension("OES_texture_half_float");M=w&&e.openGLDataType===w.HALF_FLOAT_OES}e.canUseHalfFloat=M&&O}function v(S,x){const m=S.getNumberOfComponents(),E=S.getDataType(),O=S.getData(),M=new Array(m),w=new Array(m);for(let R=0;R<m;++R){const[B,_]=S.getRange(R);M[R]=B,w[R]=_}const D=d(M,w,m);return y(E,D.offset,D.scale,x),t.useHalfFloat()||t.getOpenGLDataType(E,!0),{numComps:m,dataType:E,data:O,scaleOffsets:D}}t.create2DFilterableFromRaw=function(){let{width:S=Me("width"),height:x=Me("height"),numComps:m=Me("numComps"),dataType:E=Me("dataType"),data:O=Me("data"),preferSizeOverAccuracy:M=!1,ranges:w=void 0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create2DFilterableFromDataArray({width:S,height:x,dataArray:rt.newInstance({numberOfComponents:m,dataType:E,values:O,ranges:w}),preferSizeOverAccuracy:M})},t.create2DFilterableFromDataArray=function(){let{width:S=Me("width"),height:x=Me("height"),dataArray:m=Me("dataArray"),preferSizeOverAccuracy:E=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:O,dataType:M,data:w}=v(m,E);t.create2DFromRaw({width:S,height:x,numComps:O,dataType:M,data:w})},t.updateVolumeInfoForGL=(S,x)=>{let m=!1;const E=t.useHalfFloat();(!e.volumeInfo?.scale||!e.volumeInfo?.offset)&&(e.volumeInfo={scale:new Array(x),offset:new Array(x)});for(let O=0;O<x;++O)e.volumeInfo.scale[O]=1,e.volumeInfo.offset[O]=0;if(r()&&!E&&S===Ce.SHORT){for(let O=0;O<x;++O)e.volumeInfo.scale[O]=32767;m=!0}if(r()&&!E&&S===Ce.UNSIGNED_SHORT){for(let O=0;O<x;++O)e.volumeInfo.scale[O]=65535;m=!0}if(S===Ce.UNSIGNED_CHAR){for(let O=0;O<x;++O)e.volumeInfo.scale[O]=255;m=!0}return(S===Ce.FLOAT||E&&(S===Ce.SHORT||S===Ce.UNSIGNED_SHORT))&&(m=!0),m},t.create3DFromRaw=function(){let{width:S=Me("width"),height:x=Me("height"),depth:m=Me("depth"),numComps:E=Me("numComps"),dataType:O=Me("dataType"),data:M=Me("data"),updatedExtents:w=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=O,R=M;if(!t.updateVolumeInfoForGL(D,E)&&R){const $=S*x*m,K=structuredClone(e.volumeInfo),ee=new Float32Array($*E);e.volumeInfo.offset=K.offset,e.volumeInfo.scale=K.scale;let U=0;const q=K.scale.map(re=>1/re);for(let re=0;re<$;re++)for(let J=0;J<E;J++)ee[U]=(R[U]-K.offset[J])*q[J],U++;D=Ce.FLOAT,R=ee}if(t.getOpenGLDataType(D),t.getInternalFormat(D,E),t.getFormat(D,E),!e.internalFormat||!e.format||!e.openGLDataType)return ri("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=E,e.width=S,e.height=x,e.depth=m,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const B=w.length>0,_=!B||!UE(e._prevTexParams,n()),G=[R],H=t.updateArrayDataTypeForGL(D,G,!0,_?[]:w),A=f(H);if(e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),_)g(D)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),A[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,A[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,A[0]),e._prevTexParams=n();else if(B){const $=A[0];let K=0;for(let ee=0;ee<w.length;ee++){const U=w[ee],q=i(U),re=s(U),J=new $.constructor($.buffer,K,re);K+=J.byteLength,e.context.texSubImage3D(e.target,0,U[0],U[2],U[4],q[0],q[1],q[2],e.format,e.openGLDataType,J)}}return e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(D,r(),t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(){let{width:S=Me("width"),height:x=Me("height"),depth:m=Me("depth"),numComps:E=Me("numComps"),dataType:O=Me("dataType"),data:M=Me("data"),preferSizeOverAccuracy:w=!1,ranges:D=void 0,updatedExtents:R=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create3DFilterableFromDataArray({width:S,height:x,depth:m,dataArray:rt.newInstance({numberOfComponents:E,dataType:O,values:M,ranges:D}),preferSizeOverAccuracy:w,updatedExtents:R})},t.create3DFilterableFromDataArray=function(){let{width:S=Me("width"),height:x=Me("height"),depth:m=Me("depth"),dataArray:E=Me("dataArray"),preferSizeOverAccuracy:O=!1,updatedExtents:M=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:w,dataType:D,data:R,scaleOffsets:B}=v(E,O),_=[],G=[];for(let fe=0;fe<w;++fe)_[fe]=0,G[fe]=1;if(e.volumeInfo={scale:G,offset:_,dataComputedScale:B.scale,dataComputedOffset:B.offset,width:S,height:x,depth:m},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw({width:S,height:x,depth:m,numComps:w,dataType:D,data:R,updatedExtents:M});const z=S*x*m,H=structuredClone(B);let A=(fe,Te,Ze,Fe,en)=>{fe[Te]=Ze},$=Ce.UNSIGNED_CHAR;if(D===Ce.UNSIGNED_CHAR)for(let fe=0;fe<w;++fe)H.offset[fe]=0,H.scale[fe]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?($=Ce.FLOAT,A=(fe,Te,Ze,Fe,en)=>{fe[Te]=(Ze-Fe)/en}):($=Ce.UNSIGNED_CHAR,A=(fe,Te,Ze,Fe,en)=>{fe[Te]=255*(Ze-Fe)/en});if(t.getOpenGLDataType($),t.getInternalFormat($,w),t.getFormat($,w),!e.internalFormat||!e.format||!e.openGLDataType)return ri("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=w,e.depth=1,e.numberOfDimensions=2;let K=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);K>4096&&($===Ce.FLOAT||w>=3)&&(K=4096);let ee=1,U=1;z>K*K&&(ee=Math.ceil(Math.sqrt(z/(K*K))),U=ee);let q=Math.sqrt(z)/ee;q=Gn(q);const re=Math.floor(q*ee/S),J=Math.ceil(m/re),oe=Gn(x*J/U);e.width=q,e.height=oe,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=re,e.volumeInfo.yreps=J,e.volumeInfo.xstride=ee,e.volumeInfo.ystride=U,e.volumeInfo.offset=H.offset,e.volumeInfo.scale=H.scale;let k;const Z=q*oe*w;$===Ce.FLOAT?k=new Float32Array(Z):k=new Uint8Array(Z);let te=0;const ce=Math.floor(S/ee),he=Math.floor(x/U);for(let fe=0;fe<J;fe++){const Te=Math.min(re,m-fe*re),Ze=w*(e.width-Te*Math.floor(S/ee));for(let Fe=0;Fe<he;Fe++){for(let en=0;en<Te;en++){const Mi=w*((fe*re+en)*S*x+U*Fe*S);for(let Na=0;Na<ce;Na++)for(let Ar=0;Ar<w;Ar++)A(k,te,R[Mi+ee*Na*w+Ar],H.offset[Ar],H.scale[Ar]),te++}te+=Ze}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g($)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),k!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,k)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,k),t.deactivate(),!0},t.setOpenGLRenderWindow=S=>{e._openGLRenderWindow!==S&&(t.releaseGraphicsResources(),e._openGLRenderWindow=S,e.context=null,S&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=S=>S&&S.isCurrent()?S.getIntegerv(S.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=S=>{e.enableUseHalfFloat=S}}const qA={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Br.CLAMP_TO_EDGE,wrapT:Br.CLAMP_TO_EDGE,wrapR:Br.CLAMP_TO_EDGE,minificationFilter:Tt.NEAREST,magnificationFilter:Tt.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function wO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qA,n),ft.extend(t,e,n),e.sendParametersTime={},Kt(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},Kt(e.textureBuildTime,{mtime:0}),Mc(t,e,["format","openGLDataType"]),At(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),En(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),wc(t,e,["openGLRenderWindow"]),YA(t,e)}const OO=et(wO,"vtkOpenGLTexture");var kr={newInstance:OO,extend:wO,...EO};$n("vtkTexture",OO);var ZA=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,QA=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function JA(t,e){t.replaceShaderCoincidentOffset=(n,r,i)=>{const s=t.getCoincidentParameters(r,i);if(s&&(s.factor!==0||s.offset!==0)){let c=n.Fragment;c=se.substitute(c,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(s.factor!==0?(c=se.substitute(c,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,c=se.substitute(c,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):c=se.substitute(c,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(s.factor!==0?(c=se.substitute(c,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,c=se.substitute(c,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):c=se.substitute(c,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=c}}}function PA(t,e){t.applyShaderReplacements=(n,r,i)=>{let s=null;if(r&&(s=r.ShaderReplacements),s)for(let c=0;c<s.length;c++){const u=s[c];if(i&&u.replaceFirst||!i&&!u.replaceFirst){const f=u.shaderType,g=n[f],d=se.substitute(g,u.originalValue,u.replacementValue,u.replaceAll);n[f]=d.result}}},t.buildShaders=(n,r,i)=>{t.getReplacedShaderTemplate(n,r,i),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const s=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,s,!0),t.replaceShaderValues(n,r,i),t.applyShaderReplacements(n,s)},t.getReplacedShaderTemplate=(n,r,i)=>{const s=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,i);let c=n.Vertex;if(s){const g=s.VertexShaderCode;g!==void 0&&g!==""&&(c=g)}n.Vertex=c;let u=n.Fragment;if(s){const g=s.FragmentShaderCode;g!==void 0&&g!==""&&(u=g)}n.Fragment=u;let f=n.Geometry;if(s){const g=s.GeometryShaderCode;g!==void 0&&(f=g)}n.Geometry=f}}var lf={implementReplaceShaderCoincidentOffset:JA,implementBuildShadersWithReplacements:PA};const{FieldAssociations:jh}=Bs,{primTypes:Ct}=_s,{Representation:ls,Shading:nS}=Vc,{ScalarMode:hl}=Ci,{Filter:rS,Wrap:aS}=kr,{vtkErrorMacro:ai}=gr,IA={type:"StartEvent"},ej={type:"EndEvent"},{CoordinateSystem:tj}=Lc;function nj(t){const e=t.getSelector();return e?e.getCurrentPass():Zt.MIN_KNOWN_PASS-1}function rj(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera))},t.translucentPass=(r,i)=>{r&&(e.currentRenderPass=i,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let c=Ct.Start;c<Ct.End;c++)e.primitives[c].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,i)},t.getShaderTemplate=(r,i,s)=>{r.Vertex=ZA,r.Fragment=QA,r.Geometry=""},t.replaceShaderColor=(r,i,s)=>{let c=r.Vertex,u=r.Geometry,f=r.Fragment;const g=e.lastBoundBO.getReferenceByName("lastLightComplexity");let d=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];g&&(d=d.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let h=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];g&&(h=h.concat(["  vec3 specularColor;","  float specularPower;"])),h=h.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),g&&(h=h.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(d=d.concat(["varying vec4 vertexColorVSOutput;"]),c=se.substitute(c,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,c=se.substitute(c,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,u=se.substitute(u,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,u=se.substitute(u,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?f=se.substitute(f,"//VTK::Color::Impl",h.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?f=se.substitute(f,"//VTK::Color::Impl",h.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(s.getBackfaceProperty()&&!e.drawingEdges&&(d=d.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),g?(d=d.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),h=h.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):h=h.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(d=d.concat(["uniform samplerBuffer texture1;"])),f=se.substitute(f,"//VTK::Color::Impl",h).result),f=se.substitute(f,"//VTK::Color::Dec",d).result,r.Vertex=c,r.Geometry=u,r.Fragment=f},t.replaceShaderLight=(r,i,s)=>{let c=r.Fragment;const u="",f=e.lastBoundBO.getReferenceByName("lastLightComplexity"),g=e.lastBoundBO.getReferenceByName("lastLightCount");let d=[];switch(f){case 0:c=se.substitute(c,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:c=se.substitute(c,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let h=0;h<g;++h)d=d.concat([`uniform vec3 lightColor${h};`,`uniform vec3 lightDirectionVC${h}; // normalized`,`uniform vec3 lightHalfAngleVC${h}; // normalized`]);c=se.substitute(c,"//VTK::Light::Dec",d).result,d=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let h=0;h<g;++h)d=d.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${h}));`,`  diffuseL += ((df${u}) * lightColor${h});`,`  if (dot(normalVCVSOutput, lightDirectionVC${h}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${h},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${u} * lightColor${h});`,"    }"]);d=d.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),c=se.substitute(c,"//VTK::Light::Impl",d,!1).result;break;case 3:for(let h=0;h<g;++h)d=d.concat([`uniform vec3 lightColor${h};`,`uniform vec3 lightDirectionVC${h}; // normalized`,`uniform vec3 lightHalfAngleVC${h}; // normalized`,`uniform vec3 lightPositionVC${h};`,`uniform vec3 lightAttenuation${h};`,`uniform float lightConeAngle${h};`,`uniform float lightExponent${h};`,`uniform int lightPositional${h};`]);c=se.substitute(c,"//VTK::Light::Dec",d).result,d=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let h=0;h<g;++h)d=d.concat(["  attenuation = 1.0;",`  if (lightPositional${h} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${h};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${h};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${h}.x`,`       + lightAttenuation${h}.y * distanceVC`,`       + lightAttenuation${h}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${h} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${h});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${h})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${h});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${u}) * lightColor${h});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${h},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${u}) * lightColor${h});`,"    }"]);d=d.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),c=se.substitute(c,"//VTK::Light::Impl",d,!1).result;break;default:ai("bad light complexity")}r.Fragment=c},t.replaceShaderNormal=(r,i,s)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let u=r.Vertex,f=r.Geometry,g=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(u=se.substitute(u,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,u=se.substitute(u,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,f=se.substitute(f,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,f=se.substitute(f,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,g=se.substitute(g,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,g=se.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(g=se.substitute(g,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,g=se.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(s.getProperty().getRepresentation())===e.context.LINES?(g=se.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=se.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(g=se.substitute(g,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,g=se.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=se.substitute(g,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=u,r.Geometry=f,r.Fragment=g}},t.replaceShaderPositionVC=(r,i,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,s);let c=r.Vertex,u=r.Geometry,f=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(c=se.substitute(c,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,c=se.substitute(c,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,c=se.substitute(c,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,u=se.substitute(u,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,u=se.substitute(u,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,f=se.substitute(f,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,f=se.substitute(f,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(c=se.substitute(c,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,c=se.substitute(c,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=c,r.Geometry=u,r.Fragment=f},t.replaceShaderTCoord=(r,i,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let c=r.Vertex,u=r.Geometry,f=r.Fragment;if(e.drawingEdges)return;c=se.substitute(c,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const g=e.openGLActor.getActiveTextures();let d=2,h=2;if(g&&g.length>0&&(d=g[0].getComponents(),g[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(h=3)),e.renderable.getColorTextureMap()&&(d=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),h=2),h===2){if(c=se.substitute(c,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,u=se.substitute(u,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,u=se.substitute(u,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,f=se.substitute(f,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,g&&g.length>=1)switch(d){case 1:f=se.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:f=se.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:f=se.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(c=se.substitute(c,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,u=se.substitute(u,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,u=se.substitute(u,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,f=se.substitute(f,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,d){case 1:f=se.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:f=se.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:f=se.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=c,r.Geometry=u,r.Fragment=f}},t.replaceShaderClip=(r,i,s)=>{let c=r.Vertex,u=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const f=e.renderable.getNumberOfClippingPlanes();c=se.substitute(c,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${f}];`,`varying float clipDistancesVSOutput[${f}];`]).result,c=se.substitute(c,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${f}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,u=se.substitute(u,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${f}];`]).result,u=se.substitute(u,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${f}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=c,r.Fragment=u},t.getCoincidentParameters=(r,i)=>{let s={factor:0,offset:0};const c=i.getProperty();if(e.renderable.getResolveCoincidentTopology()==Va.PolygonOffset||c.getEdgeVisibility()&&c.getRepresentation()===ls.SURFACE){const f=e.lastBoundBO.getPrimitiveType();f===Ct.Points||c.getRepresentation()===ls.POINTS?s=e.renderable.getCoincidentTopologyPointOffsetParameter():f===Ct.Lines||c.getRepresentation()===ls.WIREFRAME?s=e.renderable.getCoincidentTopologyLineOffsetParameters():(f===Ct.Tris||f===Ct.TriStrips)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(f===Ct.TrisEdges||f===Ct.TriStripsEdges)&&(s=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),s.factor/=2,s.offset/=2)}const u=e._openGLRenderer.getSelector();return u&&u.getFieldAssociation()===jh.FIELD_ASSOCIATION_POINTS&&(s.offset-=2),s},t.replaceShaderPicking=(r,i,s)=>{let c=r.Fragment,u=r.Vertex;if(c=se.substitute(c,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Zt.ID_LOW24||e.lastSelectionState===Zt.ID_HIGH24)&&(u=se.substitute(u,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,u=se.substitute(u,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,c=se.substitute(c,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,c=se.substitute(c,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Zt.ID_LOW24:c=se.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Zt.ID_HIGH24:c=se.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:c=se.substitute(c,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,c=se.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=c,r.Vertex=u}},t.replaceShaderValues=(r,i,s)=>{if(t.replaceShaderColor(r,i,s),t.replaceShaderNormal(r,i,s),t.replaceShaderLight(r,i,s),t.replaceShaderTCoord(r,i,s),t.replaceShaderPicking(r,i,s),t.replaceShaderClip(r,i,s),t.replaceShaderCoincidentOffset(r,i,s),t.replaceShaderPositionVC(r,i,s),e.haveSeenDepthRequest){let c=r.Fragment;c=se.substitute(c,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,c=se.substitute(c,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=c}},t.getNeedToRebuildShaders=(r,i,s)=>{let c=0,u=0;const f=r.getPrimitiveType(),g=e.currentInput;let d=!1;const h=g.getPointData().getNormals(),y=g.getCellData().getNormals(),v=s.getProperty().getInterpolation()===nS.FLAT,S=s.getProperty().getRepresentation(),x=r.getOpenGLMode(S,f);if((x===e.context.TRIANGLES||y&&!h||!v&&h||!v&&x===e.context.LINES)&&(d=!0),s.getProperty().getLighting()&&d){c=0;const M=i.getLightsByReference();for(let w=0;w<M.length;++w){const D=M[w];D.getSwitch()>0&&(u++,c===0&&(c=1)),c===1&&(u>1||D.getIntensity()!==1||!D.lightTypeIsHeadLight())&&(c=2),c<3&&D.getPositional()&&(c=3)}}let m=!1;const E=e.lastBoundBO.getReferenceByName("lastLightComplexity"),O=e.lastBoundBO.getReferenceByName("lastLightCount");return(E!==c||O!==u)&&(e.lastBoundBO.set({lastLightComplexity:c},!0),e.lastBoundBO.set({lastLightCount:u},!0),m=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(m=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||m?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,i,s)=>{const c=e.renderable.getViewSpecificProperties().ShadersCallbacks;c&&c.forEach(u=>{u.callback(u.userData,r,i,s)})},t.setMapperShaderParameters=(r,i,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const f=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||ai("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&f>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||ai("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((g,d)=>{r.getProgram().isAttributeUsed(`${g}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${g}MC`,r.getCABO().getCustomData()[d].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[d].components,!1)||ai(`Error setting ${g}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||ai("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||ai("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const f=e.renderable.getNumberOfClippingPlanes(),g=[],h=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,y=h?$t(e.tmpMat4,s.getMatrix()):s.getMatrix();h&&(Pe(y,y),Qt(y,y,h),Pe(y,y));for(let v=0;v<f;v++){const S=[];e.renderable.getClippingPlaneInDataCoords(y,v,S);for(let x=0;x<4;x++)g.push(S[x])}r.getProgram().setUniformi("numClipPlanes",f),r.getProgram().setUniform4fv("clipPlanes",g)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const c=e.openGLActor.getActiveTextures();if(c)for(let f=0;f<c.length;++f){const d=c[f].getTextureUnit(),h=`texture${d+1}`;r.getProgram().isUniformUsed(h)&&r.getProgram().setUniformi(h,d)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const f=t.getCoincidentParameters(i,s);r.getProgram().setUniformf("coffset",f.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",f.factor)}r.setMapperShaderParameters(i,s,e._openGLRenderer.getTiledSizeAndOrigin());const u=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,i,s)=>{const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(c<2)return;const u=r.getProgram();let f=0;const g=i.getLightsByReference();for(let y=0;y<g.length;++y){const v=g[y];if(v.getSwitch()>0){const x=v.getColorByReference(),m=v.getIntensity();e.lightColor[0]=x[0]*m,e.lightColor[1]=x[1]*m,e.lightColor[2]=x[2]*m;const E=v.getDirection(),O=i.getActiveCamera().getViewMatrix(),M=[...E];v.lightTypeIsSceneLight()&&(M[0]=O[0]*E[0]+O[1]*E[1]+O[2]*E[2],M[1]=O[4]*E[0]+O[5]*E[1]+O[6]*E[2],M[2]=O[8]*E[0]+O[9]*E[1]+O[10]*E[2],Cn(M)),e.lightDirection[0]=M[0],e.lightDirection[1]=M[1],e.lightDirection[2]=M[2],Cn(e.lightDirection),u.setUniform3fArray(`lightColor${f}`,e.lightColor),u.setUniform3fArray(`lightDirectionVC${f}`,e.lightDirection),f++}}if(c<3)return;const h=i.getActiveCamera().getViewMatrix();Pe(h,h),f=0;for(let y=0;y<g.length;++y){const v=g[y];if(v.getSwitch()>0){const x=v.getTransformedPosition(),m=new Float64Array(3);je(m,x,h),u.setUniform3fArray(`lightAttenuation${f}`,v.getAttenuationValuesByReference()),u.setUniformi(`lightPositional${f}`,v.getPositional()),u.setUniformf(`lightExponent${f}`,v.getExponent()),u.setUniformf(`lightConeAngle${f}`,v.getConeAngle()),u.setUniform3fArray(`lightPositionVC${f}`,[m[0],m[1],m[2]]),f++}}};function n(r,i,s){return i.identity(s),r.reduce((c,u,f)=>f===0?u?i.copy(c,u):i.identity(c):u?i.multiply(c,c,u):c,s)}t.setCameraShaderParameters=(r,i,s)=>{const c=r.getProgram(),u=e.openGLCamera.getKeyMatrices(i),f=i.getActiveCamera(),g=e.openGLCamera.getKeyMatrixTime().getMTime(),d=c.getLastCameraMTime(),y=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,v=s.getIsIdentity(),S=v?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(s.getCoordinateSystem()===tj.DISPLAY){const x=e._openGLRenderer.getTiledSizeAndOrigin();Ve(e.tmpMat4),e.tmpMat4[0]=2/x.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/x.vsize,e.tmpMat4[13]=-1,Qt(e.tmpMat4,e.tmpMat4,y),c.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else c.setUniformMatrix("MCPCMatrix",n([u.wcpc,S.mcwc,y],Tp,e.tmpMat4));c.isUniformUsed("MCVCMatrix")&&c.setUniformMatrix("MCVCMatrix",n([u.wcvc,S.mcwc,y],Tp,e.tmpMat4)),c.isUniformUsed("normalMatrix")&&c.setUniformMatrix3x3("normalMatrix",n([u.normalMatrix,S.normalMatrix],SU,e.tmpMat3)),d!==g&&(c.isUniformUsed("cameraParallel")&&c.setUniformi("cameraParallel",f.getParallelProjection()),c.setLastCameraMTime(g)),v||c.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,i,s)=>{const c=r.getProgram();let u=s.getProperty(),f=u.getOpacity(),g=e.drawingEdges?u.getEdgeColorByReference():u.getAmbientColorByReference(),d=e.drawingEdges?u.getEdgeColorByReference():u.getDiffuseColorByReference(),h=e.drawingEdges?1:u.getAmbient(),y=e.drawingEdges?0:u.getDiffuse(),v=e.drawingEdges?0:u.getSpecular();const S=u.getSpecularPower();c.setUniformf("opacityUniform",f),c.setUniform3fArray("ambientColorUniform",g),c.setUniform3fArray("diffuseColorUniform",d),c.setUniformf("ambient",h),c.setUniformf("diffuse",y);const x=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(x<1)return;let m=u.getSpecularColorByReference();if(c.setUniform3fArray("specularColorUniform",m),c.setUniformf("specularPowerUniform",S),c.setUniformf("specular",v),c.isUniformUsed("ambientIntensityBF")){if(u=s.getBackfaceProperty(),f=u.getOpacity(),g=u.getAmbientColor(),h=u.getAmbient(),d=u.getDiffuseColor(),y=u.getDiffuse(),m=u.getSpecularColor(),v=u.getSpecular(),c.setUniformf("ambientIntensityBF",h),c.setUniformf("diffuseIntensityBF",y),c.setUniformf("opacityUniformBF",f),c.setUniform3fArray("ambientColorUniformBF",g),c.setUniform3fArray("diffuseColorUniformBF",d),x<1)return;c.setUniformf("specularIntensityBF",v),c.setUniform3fArray("specularColorUniformBF",m),c.setUniformf("specularPowerUniformBF",S)}},t.updateMaximumPointCellIds=(r,i)=>{const s=e._openGLRenderer.getSelector();if(!s)return;if(e.selectionWebGLIdsToVTKIds?.points?.length){const u=e.selectionWebGLIdsToVTKIds.points.length;s.setMaximumPointId(u-1)}if(e.selectionWebGLIdsToVTKIds?.cells?.length){const u=e.selectionWebGLIdsToVTKIds.cells.length;s.setMaximumCellId(u-1)}s.getFieldAssociation()===jh.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,i)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const s=nj(e._openGLRenderer);e.lastSelectionState!==s&&(e.selectionStateChanged.modified(),e.lastSelectionState=s),e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().renderProp(i),t.updateBufferObjects(r,i),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,i)=>{const s=i.getProperty().getRepresentation(),c=i.getProperty().getEdgeVisibility()&&s===ls.SURFACE,u=e._openGLRenderer.getSelector(),f=u&&u.getFieldAssociation()===jh.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Zt.ID_LOW24||e.lastSelectionState===Zt.ID_HIGH24);for(let g=Ct.Start;g<Ct.End;g++)e.primitives[g].setPointPicking(f),e.primitives[g].getCABO().getElementCount()&&(e.drawingEdges=c&&(g===Ct.TrisEdges||g===Ct.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[g],e.primitiveIDOffset+=e.primitives[g].drawArrays(r,i,s,t),e.vertexIDOffset+=e.primitives[g].getCABO().getElementCount()))},t.renderPieceFinish=(r,i)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,i)=>{if(t.invokeEvent(IA),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(ej),!e.currentInput){ai("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context,c=i.getProperty().getBackfaceCulling(),u=i.getProperty().getFrontfaceCulling();!c&&!u?e._openGLRenderWindow.disableCullFace():u?(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.FRONT)):(e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK)),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,i)=>{const s=e.VBOBuildTime.getMTime();return s<t.getMTime()||s<e.renderable.getMTime()||s<i.getMTime()||s<e.currentInput.getMTime()},t.buildBufferObjects=(r,i)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,1);const c=e.renderable.getColorMapColors();e.haveCellScalars=!1;const u=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(u===hl.USE_CELL_DATA||u===hl.USE_CELL_FIELD_DATA||u===hl.USE_FIELD_DATA||!s.getPointData().getScalars())&&u!==hl.USE_POINT_FIELD_DATA&&c&&(e.haveCellScalars=!0);let f=i.getProperty().getInterpolation()!==nS.FLAT?s.getPointData().getNormals():null;f===null&&s.getCellData().getNormals()&&(e.haveCellNormals=!0,f=s.getCellData().getNormals());const g=i.getProperty().getRepresentation();let d=s.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(d=null);let h=!1;if(e.renderable.getColorCoordinates()){d=e.renderable.getColorCoordinates(),h=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=kr.newInstance({resizable:!0}));const v=e.internalColorTexture;v.setMinificationFilter(rS.NEAREST),v.setMagnificationFilter(rS.NEAREST),v.setWrapS(aS.CLAMP_TO_EDGE),v.setWrapT(aS.CLAMP_TO_EDGE),v.setOpenGLRenderWindow(e._openGLRenderWindow);const S=e.renderable.getColorTextureMap(),x=S.getExtent(),m=S.getPointData().getScalars();v.create2DFromRaw({width:x[1]-x[0]+1,height:x[3]-x[2]+1,numComps:m.getNumberOfComponents(),dataType:m.getDataType(),data:m.getData()}),v.activate(),v.sendParameters(),v.deactivate()}const y=`${s.getMTime()}A${g}B${s.getMTime()}C${f?f.getMTime():1}D${c?c.getMTime():1}E${i.getProperty().getEdgeVisibility()}F${d?d.getMTime():1}`;if(e.VBOBuildString!==y){const S={points:s.getPoints(),normals:f,tcoords:d,colors:c,cellOffset:0,vertexOffset:0,useTCoordsPerCell:h,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(E=>s.getPointData().getArrayByName(E))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const x=[{inRep:"verts",cells:s.getVerts()},{inRep:"lines",cells:s.getLines()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()},{inRep:"polys",cells:s.getPolys()},{inRep:"strips",cells:s.getStrips()}],m=i.getProperty().getEdgeVisibility()&&g===ls.SURFACE;for(let E=Ct.Start;E<Ct.End;E++)E!==Ct.TrisEdges&&E!==Ct.TriStripsEdges?(S.cellOffset+=e.primitives[E].getCABO().createVBO(x[E].cells,x[E].inRep,g,S,e.selectionWebGLIdsToVTKIds),S.vertexOffset+=e.primitives[E].getCABO().getElementCount()):m?e.primitives[E].getCABO().createVBO(x[E].cells,x[E].inRep,ls.WIREFRAME,{...S,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[E].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=y}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const aj={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Zt.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function ij(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aj,n),ft.extend(t,e,n),lf.implementReplaceShaderCoincidentOffset(t,e,n),lf.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Ct,e.tmpMat3=La(new Float64Array(9)),e.tmpMat4=Ve(new Float64Array(16));for(let r=Ct.Start;r<Ct.End;r++)e.primitives[r]=_s.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);At(t,e,["context"]),e.VBOBuildTime={},Kt(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},Kt(e.selectionStateChanged,{mtime:0}),rj(t,e)}const sj=et(ij,"vtkOpenGLPolyDataMapper");$n("vtkMapper",sj);var oj=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,cj=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const DO={BACKGROUND:0,FOREGROUND:1};var RO={DisplayLocation:DO};const{primTypes:Zn}=_s,{Filter:iS,Wrap:sS}=kr,{vtkErrorMacro:Uo}=gr,uj={type:"StartEvent"},lj={type:"EndEvent"};function fj(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,i,s)=>{r.Vertex=cj,r.Fragment=oj,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let c=Zn.Start;c<Zn.End;c++)e.primitives[c].setOpenGLRenderWindow(e._openGLRenderWindow)}const i=e.openGLActor2D.getRenderable(),s=e._openGLRenderer.getRenderable();t.renderPiece(s,i)},t.renderPiece=(r,i)=>{if(t.invokeEvent(uj),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(lj),!e.currentInput){Uo("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const s=e.context;e._openGLRenderWindow.enableCullFace(),s.cullFace(s.BACK),t.renderPieceStart(r,i),t.renderPieceDraw(r,i),t.renderPieceFinish(r,i)},t.renderPieceStart=(r,i)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(i)}e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),t.updateBufferObjects(r,i),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,i,s)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,i)=>{t.getNeedToRebuildBufferObjects(r,i)&&t.buildBufferObjects(r,i)},t.getNeedToRebuildBufferObjects=(r,i)=>{const s=e.VBOBuildTime.getMTime();return!!(s<t.getMTime()||s<e._openGLRenderWindow.getMTime()||s<e.renderable.getMTime()||s<i.getMTime()||s<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&s<r.getMTime())},t.buildBufferObjects=(r,i)=>{const s=e.currentInput;if(s===null)return;e.renderable.mapScalars(s,i.getProperty().getOpacity());const c=e.renderable.getColorMapColors(),u=i.getProperty().getRepresentation();let f=s.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(f=null);let g=!1;if(e.renderable.getColorCoordinates()){f=e.renderable.getColorCoordinates(),g=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=kr.newInstance({resizable:!0}));const S=e.internalColorTexture;S.setMinificationFilter(iS.NEAREST),S.setMagnificationFilter(iS.NEAREST),S.setWrapS(sS.CLAMP_TO_EDGE),S.setWrapT(sS.CLAMP_TO_EDGE),S.setOpenGLRenderWindow(e._openGLRenderWindow);const x=e.renderable.getColorTextureMap(),m=x.getExtent(),E=x.getPointData().getScalars();S.create2DFromRaw({width:m[1]-m[0]+1,height:m[3]-m[2]+1,numComps:E.getNumberOfComponents(),dataType:E.getDataType(),data:E.getData()}),S.activate(),S.sendParameters(),S.deactivate()}const d=e.renderable.getTransformCoordinate(),y=r.getRenderWindow().getViews()[0].getViewportSize(r),v=`${s.getMTime()}A${u}B${s.getMTime()}C${c?c.getMTime():1}D${f?f.getMTime():1}E${d?r.getMTime():1}F${y}`;if(e.VBOBuildString!==v){let S=s.getPoints();if(d){const m=yc.newInstance(),E=S.getNumberOfPoints();m.setNumberOfPoints(E);const O=[];for(let M=0;M<E;++M){S.getPoint(M,O),d.setValue(O);const w=d.getComputedDoubleViewportValue(r);m.setPoint(M,w[0],w[1],0)}S=m}const x={points:S,tcoords:f,colors:c,cellOffset:0,useTCoordsPerCell:g,haveCellScalars:e.renderable.getAreScalarsMappedFromCells(),customAttributes:e.renderable.getCustomShaderAttributes().map(m=>s.getPointData().getArrayByName(m))};x.cellOffset+=e.primitives[Zn.Points].getCABO().createVBO(s.getVerts(),"verts",u,x),x.cellOffset+=e.primitives[Zn.Lines].getCABO().createVBO(s.getLines(),"lines",u,x),x.cellOffset+=e.primitives[Zn.Tris].getCABO().createVBO(s.getPolys(),"polys",u,x),x.cellOffset+=e.primitives[Zn.TriStrips].getCABO().createVBO(s.getStrips(),"strips",u,x),e.VBOBuildTime.modified(),e.VBOBuildString=v}},t.renderPieceDraw=(r,i)=>{const s=i.getProperty().getRepresentation();e.context.depthMask(!0);for(let u=Zn.Start;u<Zn.End;u++)e.primitives[u].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[u],e.primitiveIDOffset+=e.primitives[u].drawArrays(r,i,s,t))},t.renderPieceFinish=(r,i)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.replaceShaderValues=(r,i,s)=>{t.replaceShaderColor(r,i,s),t.replaceShaderTCoord(r,i,s),t.replaceShaderPicking(r,i,s),t.replaceShaderPositionVC(r,i,s)},t.replaceShaderColor=(r,i,s)=>{let c=r.Vertex,u=r.Geometry,f=r.Fragment,g=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],d=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];e.lastBoundBO.getCABO().getColorComponents()!==0?(g=g.concat(["varying vec4 vertexColorVSOutput;"]),c=se.substitute(c,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,c=se.substitute(c,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,u=se.substitute(u,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,u=se.substitute(u,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,f=se.substitute(f,"//VTK::Color::Impl",d.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):e.renderable.getAreScalarsMappedFromCells()&&(d=d.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),d=d.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),f=se.substitute(f,"//VTK::Color::Dec",g).result,f=se.substitute(f,"//VTK::Color::Impl",d).result,r.Vertex=c,r.Geometry=u,r.Fragment=f},t.replaceShaderTCoord=(r,i,s)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let c=r.Vertex,u=r.Geometry,f=r.Fragment;const g=e.lastBoundBO.getCABO().getTCoordComponents();g===1?(c=se.substitute(c,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,c=se.substitute(c,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,u=se.substitute(u,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,u=se.substitute(u,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,f=se.substitute(f,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,f=se.substitute(f,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):g===2&&(c=se.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,c=se.substitute(c,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,u=se.substitute(u,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,u=se.substitute(u,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,f=se.substitute(f,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,f=se.substitute(f,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.renderable.getAreScalarsMappedFromCells()&&(u=se.substitute(u,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=c,r.Geometry=u,r.Fragment=f}},t.replaceShaderPicking=(r,i,s)=>{let c=r.Fragment;c=se.substitute(c,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,c=se.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=c},t.replaceShaderPositionVC=(r,i,s)=>{e.lastBoundBO.replaceShaderPositionVC(r,i,s)},t.invokeShaderCallbacks=(r,i,s)=>{const c=e.renderable.getViewSpecificProperties().ShadersCallbacks;c&&c.forEach(u=>{u.callback(u.userData,r,i,s)})},t.setMapperShaderParameters=(r,i,s)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Uo("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((f,g)=>{r.getProgram().isAttributeUsed(`${f}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${f}MC`,r.getCABO().getCustomData()[g].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[g].components,!1)||Uo(`Error setting ${f}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Uo("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||Uo("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&e.internalColorTexture.getTextureUnit()>-1&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const c=e.openGLActor2D.getActiveTextures();if(c)for(let f=0;f<c.length;++f){const d=c[f].getTextureUnit(),h=`texture${d+1}`;r.getProgram().isUniformUsed(h)&&r.getProgram().setUniformi(h,d)}r.setMapperShaderParameters(i,s,e._openGLRenderer.getTiledSizeAndOrigin());const u=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,i,s)=>{const c=e.renderable.getColorMapColors();if(!c||c.getNumberOfComponents()===0){const u=r.getProgram(),f=s.getProperty(),g=f.getOpacity();u.setUniformf("opacityUniform",g);const d=f.getColor();u.setUniform3fArray("diffuseColorUniform",d)}},t.setLightingShaderParameters=(r,i,s)=>{};function n(r,i,s){return i.identity(s),r.reduce((c,u,f)=>f===0?u?i.copy(c,u):i.identity(c):u?i.multiply(c,c,u):c,s)}t.setCameraShaderParameters=(r,i,s)=>{const c=r.getProgram(),f=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,d=i.getRenderWindow().getViews()[0].getViewportSize(i),h=i.getViewport(),y=s.getActualPositionCoordinate().getComputedDoubleViewportValue(i),v=[0,0,1,1],S=[0,0,1,1];if(S[0]=h[0]>=v[0]?h[0]:v[0],S[1]=h[1]>=v[1]?h[1]:v[1],S[2]=h[2]<=v[2]?h[2]:v[2],S[3]=h[3]<=v[3]?h[3]:v[3],S[0]>=S[2]||S[1]>=S[3])return;d[0]=Ho(d[0]*(S[2]-S[0])/(h[2]-h[0])),d[1]=Ho(d[1]*(S[3]-S[1])/(h[3]-h[1]));const x=e._openGLRenderer.getParent().getSize(),m=Ho(y[0]-(S[0]-h[0])*x[0]),E=Ho(y[1]-(S[1]-h[1])*x[1]),O=-m;let M=-m+d[0];const w=-E;let D=-E+d[1];O===M&&(M=O+1),w===D&&(D=w+1);const R=Ve(new Float64Array(16));R[0]=2/(M-O),R[5]=2/(D-w),R[3]=-1*(M+O)/(M-O),R[7]=-1*(D+w)/(D-w),R[10]=0,R[11]=s.getProperty().getDisplayLocation()===DO.FOREGROUND?-1:1,R[15]=1,Pe(R,R),c.setUniformMatrix("WCVCMatrix",n([R,f],Tp,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(i=>{r+=i.getAllocatedGPUMemoryInBytes()}),r}}const gj={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function hj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gj,n),ft.extend(t,e,n),lf.implementReplaceShaderCoincidentOffset(t,e,n),lf.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Zn,e.tmpMat4=Ve(new Float64Array(16));for(let r=Zn.Start;r<Zn.End;r++)e.primitives[r]=_s.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);At(t,e,["context"]),e.VBOBuildTime={},Kt(e.VBOBuildTime,{mtime:0}),fj(t,e)}const pj=et(hj,"vtkOpenGLPolyDataMapper2D");$n("vtkMapper2D",pj);const dj={HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"};var bO={Orientation:dj};const{VectorMode:yj}=Fw,{Orientation:ff}=bO;function Hh(t,e,n){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor;const r=e.fontSize??n;t.font=`${e.fontStyle} ${r}px ${e.fontFamily}`}function LO(t,e){return n=>{const r=n.getLastSize(),i=(r[0]/700)**.8,s=(r[1]/700)**.8,c=Math.min(i,s),u=n.getAxisTextStyle(),f=n.getTickTextStyle();Object.assign(u,e.axisTextStyle),Object.assign(f,e.tickTextStyle),u.fontSize===void 0&&(u.fontSize=Math.max(24*c,12)),f.fontSize===void 0&&(n.getLastAspectRatio()>1?f.fontSize=Math.max(20*c,10):f.fontSize=Math.max(16*c,10));const g=n.updateTextureAtlas();n.setTopTitle(!1);const d=n.getBoxSizeByReference();let h=!1;if(e.orientation===ff.VERTICAL?h=!0:e.orientation===ff.HORIZONTAL?h=!1:h=n.getLastAspectRatio()>1,h)n.setTickLabelPixelOffset(.3*f.fontSize),g.titleWidth<=g.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*f.fontSize),d[0]=2*(g.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize)/r[0],n.setBoxPosition([.98-d[0],-.92])):(n.setAxisTitlePixelOffset(.2*f.fontSize),d[0]=2*(g.titleHeight+n.getAxisTitlePixelOffset()+g.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize)/r[0],n.setBoxPosition([.99-d[0],-.92])),d[1]=Math.max(1.2,Math.min(1.84/s,1.84));else{n.setAxisTitlePixelOffset(1.2*f.fontSize),n.setTickLabelPixelOffset(.1*f.fontSize);const y=2*(.8*f.fontSize+g.titleHeight+n.getAxisTitlePixelOffset())/r[1],v=2*g.tickWidth/r[0];d[0]=Math.min(1.9,Math.max(1.4,1.4*v*(n.getTicks().length+3))),d[1]=y,n.setBoxPosition([-.5*d[0],-.97])}n.recomputeBarSegments(g)}}function VO(t,e){return n=>{const r=n.getLastTickBounds(),i=kd().domain([r[0],r[1]]),s=i.ticks(5),c=i.tickFormat(5);n.setTicks(s),n.setTickStrings(s.map(c))}}function vj(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=i=>{e.renderable!==i&&(e.renderable=i,e.barActor.setProperty(i.getProperty()),e.barActor.setParentProp(i),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(i.getProperty()),e.tmActor.setParentProp(i),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=i.generateTicks,e.axisTextStyle={...i.getAxisTextStyle()},e.tickTextStyle={...i.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(i,s,c)=>{(e.lastSize[0]!==i[0]||e.lastSize[1]!==i[1])&&(e.lastSize[0]=i[0],e.lastSize[1]=i[1],e.lastAspectRatio=i[0]/i[1],e.forceUpdate=!0);const u=e.renderable.getScalarsToColors();if(!(!u||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(u),e.camera=s,e.renderWindow=c,e.forceUpdate||Math.max(u.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const f=u.getMappingRange();if(e.lastTickBounds=[...f],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const g=t.updateTextureAtlas();t.recomputeBarSegments(g)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const i={},s=new Map;let c=0,u=1;Hh(e.tmContext,e.axisTextStyle,18);let f=e.tmContext.measureText(e.renderable.getAxisLabel()),g={height:f.actualBoundingBoxAscent+2,startingHeight:u,width:f.width+2,textStyle:e.axisTextStyle};s.set(e.renderable.getAxisLabel(),g),u+=g.height,c=g.width,i.titleWidth=g.width,i.titleHeight=g.height,i.tickWidth=0,i.tickHeight=0,Hh(e.tmContext,e.tickTextStyle,14);const d=[...t.getTickStrings(),"NaN","Below","Above"];for(let h=0;h<d.length;h++)s.has(d[h])||(f=e.tmContext.measureText(d[h]),g={height:f.actualBoundingBoxAscent+2,startingHeight:u,width:f.width+2,textStyle:e.tickTextStyle},s.set(d[h],g),u+=g.height,c<g.width&&(c=g.width),i.tickWidth<g.width&&(i.tickWidth=g.width),i.tickHeight<g.height&&(i.tickHeight=g.height));return c=Gn(c),u=Gn(u),s.forEach(h=>{h.tcoords=[0,(u-h.startingHeight-h.height)/u,h.width/c,(u-h.startingHeight-h.height)/u,h.width/c,(u-h.startingHeight)/u,0,(u-h.startingHeight)/u]}),e.tmCanvas.width=c,e.tmCanvas.height=u,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,c,u),s.forEach((h,y)=>{const v=h.textStyle===e.axisTextStyle?18:14;Hh(e.tmContext,h.textStyle,v),e.tmContext.fillText(y,1,h.startingHeight+h.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=s,i},t.computeBarSize=i=>{e.vertical=e.boxSize[1]>e.boxSize[0];const s=2*i.tickHeight/e.lastSize[1],c=[1,1];if(e.vertical){const u=2*(i.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const f=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-u,e.barSize[1]=e.boxSize[1]-f}else{const f=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-f-u,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+u,e.barPosition[1]=e.boxPosition[1],c[1]=s}else{const u=(2*i.tickWidth-8)/e.lastSize[0],f=2*(i.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-f,e.barPosition[1]=e.boxPosition[1],c[0]=u}return c},t.recomputeBarSegments=i=>{const s=t.computeBarSize(i);e.barSegments=[];const c=[0,0],u=e.vertical?1:0,f=e.vertical?.01:.02;function g(y,v){e.barSegments.push({corners:[[...c],[c[0]+s[0],c[1]],[c[0]+s[0],c[1]+s[1]],[c[0],c[1]+s[1]]],scalars:v,title:y}),c[u]+=s[u]+f}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&g("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&e.renderable.getScalarsToColors().getUseBelowRangeColor?.()&&g("Below",[-.1,-.1,-.1,-.1]);const d=e.renderable.getScalarsToColors().getUseAboveRangeColor?.();c[u]+=f;const h=s[u];s[u]=d?1-2*f-s[u]-c[u]:1-f-c[u],g("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&d&&(s[u]=h,c[u]+=f,g("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(i,s,c,u,f,g)=>{const d=e._tmAtlas.get(i);if(!d)return;let h=g.ptIdx,y=g.cellIdx;n[0]=(.5*s[0]+.5)*e.lastSize[0],n[1]=(.5*s[1]+.5)*e.lastSize[1],n[2]=s[2],n[0]+=f[0],n[1]+=f[1];const v=[],S=u==="vertical"?[1,0]:[0,1];u==="vertical"?(v[0]=d.width,v[1]=-d.height,c[0]==="middle"?n[1]-=d.width/2:c[0]==="right"&&(n[1]-=d.width),c[1]==="middle"?n[0]+=d.height/2:c[1]==="top"&&(n[0]+=d.height)):(v[0]=d.width,v[1]=d.height,c[0]==="middle"?n[0]-=d.width/2:c[0]==="right"&&(n[0]-=d.width),c[1]==="middle"?n[1]-=d.height/2:c[1]==="top"&&(n[1]-=d.height)),g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=d.tcoords[0],g.tcoords[h*2+1]=d.tcoords[1],h++,n[S[0]]+=v[0],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=d.tcoords[2],g.tcoords[h*2+1]=d.tcoords[3],h++,n[S[1]]+=v[1],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=d.tcoords[4],g.tcoords[h*2+1]=d.tcoords[5],h++,n[S[0]]-=v[0],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=d.tcoords[6],g.tcoords[h*2+1]=d.tcoords[7],h++,g.polys[y*4]=3,g.polys[y*4+1]=h-4,g.polys[y*4+2]=h-3,g.polys[y*4+3]=h-2,y++,g.polys[y*4]=3,g.polys[y*4+1]=h-4,g.polys[y*4+2]=h-2,g.polys[y*4+3]=h-1,g.ptIdx+=4,g.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const i=t.getTickStrings().length+e.barSegments.length,s=i*4,c=i*2,u=new Float64Array(s*3),f=new Uint16Array(c*4),g=new Float32Array(s*2),d={ptIdx:0,cellIdx:0,polys:f,points:u,tcoords:g},h=e.vertical?0:1,y=e.vertical?1:0;r[2]=-.99;const v=e.vertical?["right","middle"]:["middle","bottom"];let S=[0,1];const x=[0,0];e.vertical?(x[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],d)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],d)),S=[-1,0]):(x[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],d)),r[h]=e.barPosition[h]+(.5*S[h]+.5)*e.barSize[h],r[y]=e.barPosition[y]+e.barSize[y]*.5;let m=null;for(let B=0;B<e.barSegments.length;B++){const _=e.barSegments[B];_.title==="ticks"?m=_:(r[y]=e.barPosition[y]+.5*e.barSize[y]*(_.corners[2][y]+_.corners[0][y]),t.createPolyDataForOneLabel(_.title,r,v,"horizontal",x,d))}const E=e.barPosition[y]+e.barSize[y]*m.corners[0][y],O=e.barSize[y]*(m.corners[2][y]-m.corners[0][y]),M=t.getTicks(),w=t.getTickStrings(),D=t.getTickPositions();for(let B=0;B<M.length;B++){const _=D?D[B]:(M[B]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[y]=E+O*_,t.createPolyDataForOneLabel(w[B],r,v,"horizontal",x,d)}const R=rt.newInstance({numberOfComponents:2,values:g,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(R),e.tmPolyData.getPoints().setData(u,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(f,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{const i=e.renderable.getScalarsToColors();let s=0;e.renderable.getDrawNanAnnotation()&&i.getNanColor()&&(s+=1),e.renderable.getDrawBelowRangeSwatch()&&i.getUseBelowRangeColor?.()&&(s+=1),e.renderable.getDrawAboveRangeSwatch()&&i.getUseAboveRangeColor?.()&&(s+=1);const c=4*(1+s),u=c;let f=1;i.getVectorMode()===yj.COMPONENT&&(f=i.getVectorComponent()+1);const g=new Float64Array(c*3),d=new Uint16Array(u*5),h=new Float32Array(c*f);let y=0,v=0;for(let x=0;x<e.barSegments.length;x++){const m=e.barSegments[x];for(let E=0;E<4;E++){r[0]=e.barPosition[0]+m.corners[E][0]*e.barSize[0],r[1]=e.barPosition[1]+m.corners[E][1]*e.barSize[1],g[y*3]=(.5*r[0]+.5)*e.lastSize[0],g[y*3+1]=(.5*r[1]+.5)*e.lastSize[1],g[y*3+2]=r[2];for(let O=0;O<f;O++)h[y*f+O]=e.lastTickBounds[0]+m.scalars[E]*(e.lastTickBounds[1]-e.lastTickBounds[0]);y++}d[v*5]=4,d[v*5+1]=y-4,d[v*5+2]=y-3,d[v*5+3]=y-2,d[v*5+4]=y-1,v++}const S=rt.newInstance({numberOfComponents:f,values:h,name:"Scalars"});e.polyData.getPointData().setScalars(S),e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(d,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const xj=V.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),V.obj(t,e),V.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),V.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),V.getArray(t,e,["boxPosition","boxSize"]),V.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},V.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=Ci.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=Os.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=Si.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=Os.newInstance(),e.tmMapper=Ci.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=xc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=Si.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],vj(t,e)},"vtkScalarBarActorHelper");function Tj(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.setOrientationToHorizontal=()=>t.setOrientation(ff.HORIZONTAL),t.setOrientationToVertical=()=>t.setOrientation(ff.VERTICAL),t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(LO(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(VO())}}function mj(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,orientation:null,...t}}function NO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mj(n)),e.autoLayout||(e.autoLayout=LO(t,e)),e.generateTicks||(e.generateTicks=VO()),Si.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),V.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch","orientation"]),V.get(t,e,["axisTextStyle","tickTextStyle"]),V.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),V.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),Tj(t,e)}const Sj=V.newInstance(NO,"vtkScalarBarActor");var BO={newInstance:Sj,extend:NO,newScalarBarActorHelper:xj,...bO};function Cj(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e._openGLRenderWindow.getRenderable())}}}const Ej={};function Mj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ej,n),ft.extend(t,e,n),e.scalarBarActorHelper=BO.newScalarBarActorHelper(),Cj(t,e)}const wj=et(Mj,"vtkOpenGLScalarBarActor");$n("vtkScalarBarActor",wj);const{vtkErrorMacro:oS}=gr;function Oj(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera(),e.openGLCamera)}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const i=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",i);const s=e._openGLRenderer.getRenderable(),c=e.openGLCamera.getKeyMatrices(s),u=new Float64Array(16);if(Hn(u,c.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",u),e.lastFormat==="box"){const f=s.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",f[0],f[1],f[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let u=0;u<4;u++)r[u*3]=u%2*2-1,r[u*3+1]=u>1?1:-1,r[u*3+2]=1;const i=rt.newInstance({numberOfComponents:3,values:r});i.setName("points");const s=new Uint16Array(8);s[0]=3,s[1]=0,s[2]=1,s[3]=3,s[4]=3,s[5]=0,s[6]=3,s[7]=2;const c=rt.newInstance({numberOfComponents:1,values:s});e.tris.getCABO().createVBO(c,"polys",An.SURFACE,{points:i,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||oS("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||oS("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const Dj={context:null};function Rj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Dj,n),ft.extend(t,e,n),e.openGLTexture=kr.newInstance(),e.tris=_s.newInstance(),e.keyMatrixTime={},Kt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:La(new Float64Array(9)),mcwc:Ve(new Float64Array(16))},At(t,e,["context"]),En(t,e,["activeTextures"]),Oj(t,e)}const bj=et(Rj);$n("vtkSkybox",bj);const{vtkDebugMacro:Lj}=gr;function Vj(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const i=e._openGLRenderer.getAspectRatio(),s=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,c=e._openGLRenderer.getTiledSizeAndOrigin();let u=null;if(e.renderable.getUseZValues()){const f=r.getZBufferTexture(),g=Math.floor(f.getWidth()),d=Math.floor(f.getHeight()),h=e._openGLRenderWindow.getContext();f.bind();const y=r.getFramebuffer();y?y.saveCurrentBindingsAndBuffers():Lj("No framebuffer to save/restore");const v=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,v),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,f.getHandle(),0),h.checkFramebufferStatus(h.FRAMEBUFFER)===h.FRAMEBUFFER_COMPLETE&&(u=new Uint8Array(g*d*4),h.viewport(0,0,g,d),h.readPixels(0,0,g,d,h.RGBA,h.UNSIGNED_BYTE,u)),y&&y.restorePreviousBindingsAndBuffers(),h.deleteFramebuffer(v)}e.renderable.invokeCallback(e.renderable.getInputData(),s,i,c,u)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const Nj={};function Bj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Nj,n),ft.extend(t,e,n),Vj(t,e)}const _j=et(Bj,"vtkOpenGLPixelSpaceCallbackMapper");$n("vtkPixelSpaceCallbackMapper",_j);const _O=Object.create(null);function zr(t,e){_O[t]=e}function Uj(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const kj={};function Fj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kj,n),e.overrides=_O,hM.extend(t,e,n),Uj(t,e)}V.newInstance(Fj,"vtkWebGPUViewNodeFactory");function Gj(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,i,s)=>{if(Ve(n),e.renderable.getParallelProjection()){const c=e.renderable.getParallelScale(),u=c*r,f=c,g=(s[0]-1)*u,d=(s[0]+1)*u,h=(s[1]-1)*f,y=(s[1]+1)*f,v=1/(d-g),S=1/(y-h);n[0]=2*v,n[5]=2*S,n[10]=1/(i[1]-i[0]),n[12]=(d+g)*v,n[13]=(y+h)*S,n[14]=i[1]/(i[1]-i[0])}else{const c=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let u,f;e.renderable.getUseHorizontalViewAngle()===!0?(u=i[0]*c,f=i[0]*c/r):(u=i[0]*c*r,f=i[0]*c);const g=(s[0]-1)*u,d=(s[0]+1)*u,h=(s[1]-1)*f,y=(s[1]+1)*f;n[0]=2*i[0]/(d-g),n[5]=2*i[0]/(y-h),n[12]=(g+d)/(d-g),n[13]=(h+y)/(y-h),n[10]=0,n[14]=i[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let i=-r[0]/n;return i=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(i*(r[1]-r[0])),.5*i+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),i=n.getParent();if(Math.max(i.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const s=e.renderable.getViewMatrix();$t(e.keyMatrices.normalMatrix,s),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,Hn(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Pe(e.keyMatrices.wcvc,s);const c=n.getStabilizedCenterByReference();Mt(e.keyMatrices.scvc,e.keyMatrices.wcvc,c);const u=n.getAspectRatio(),f=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,u,f,e.renderable.getWindowCenterByReference()),Qt(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),Hn(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const zj={keyMatrixTime:null,keyMatrices:null};function Aj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zj,n),ft.extend(t,e,n),e.keyMatrixTime={},V.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},V.setGet(t,e,["keyMatrixTime"]),Gj(t,e)}const jj=V.newInstance(Aj);zr("vtkCamera",jj);function Hj(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let i=0;i<e.bindables.length;i++)e.bindables[i]!==n[i]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let i=0;i<e.bindables.length;i++){const s=e.bindables[i].getBindGroupLayoutEntry();s.binding=i,r.push(s)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let s=0;s<e.bindables.length;s++){const c=e.bindables[s].getBindGroupTime().getMTime();r=c>r?c:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const i=[];for(let s=0;s<e.bindables.length;s++){const c=e.bindables[s].getBindGroupEntry();c.binding=s,i.push(c)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:i,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],i=n.getBindGroupLayoutCount(e.label);for(let s=0;s<e.bindables.length;s++)r.push(e.bindables[s].getShaderCode(s,i));return r.join(`
`)}}const $j={device:null,handle:null,label:null};function UO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$j,n),V.obj(t,e),e.bindables=[],e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),V.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),V.setGet(t,e,["label","device","arrayInformation"]),Hj(t,e)}const Wj=V.newInstance(UO);var kO={newInstance:Wj,extend:UO};function Kj(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const Xj={device:null,handle:null};function FO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Xj,n),V.obj(t,e),V.get(t,e,["lastCameraMTime"]),V.setGet(t,e,["device","handle"]),Kj(t,e)}const Yj=V.newInstance(FO,"vtkWebGPUShaderModule");var qj={newInstance:Yj,extend:FO};function Zj(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const i=Array.isArray(n)?n.join(`
`):n;let s=!1;t.search(e)!==-1&&(s=!0);let c="";r&&(c="g");const u=new RegExp(e,c),f=t.replace(u,i);return{replace:s,result:f}}function Qj(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),i=n.getHash(),s=e._shaderModules.keys();for(let u=0;u<s.length;u++){const f=s[u];if(f.getHash()===i&&f.getType()===r)return e._shaderModules.get(f)}const c=qj.newInstance();return c.initialize(e.device,n),e._shaderModules.set(n,c),c}}const Jj={shaderModules:null,device:null,window:null};function GO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Jj,n),e._shaderModules=new Map,V.obj(t,e),V.setGet(t,e,["device","window"]),Qj(t,e)}const Pj=V.newInstance(GO,"vtkWebGPUShaderCache");var Ye={newInstance:Pj,extend:GO,substitute:Zj};function Ij(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const i=[];for(let s=0;s<e.layouts.length;s++)i.push(e.layouts[s].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:i}),e.pipelineDescription.layout=e.pipelineLayout;for(let s=0;s<e.shaderDescriptions.length;s++){const c=e.shaderDescriptions[s],u=n.getShaderModule(c);c.getType()==="vertex"&&(e.pipelineDescription.vertex.module=u.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),c.getType()==="fragment"&&(e.pipelineDescription.fragment.module=u.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const e8={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function zO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e8,n),Kt(t,e),e.layouts=[],e.shaderDescriptions=[],En(t,e,["handle","pipelineDescription"]),At(t,e,["device","renderEncoder","topology","vertexState"]),Ij(t,e)}const t8=et(zO,"vtkWebGPUPipeline");var n8={newInstance:t8,extend:zO};function r8(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(i)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const i=[];let s=[];if(r&&i.push(r.getShaderCode()),n||e.builtinInputNames.length){const c=[];if(c.push(`struct ${e.type}Input
{`),n){const u=n.getOutputNamesByReference(),f=n.getOutputTypesByReference(),g=n.getOutputInterpolationsByReference();for(let d=0;d<u.length;d++)g[d]!==void 0?c.push(`  @location(${d}) @interpolate(${g[d]}) ${u[d]} : ${f[d]},`):c.push(`  @location(${d}) ${u[d]} : ${f[d]},`)}for(let u=0;u<e.builtinInputNames.length;u++)c.push(`  ${e.builtinInputNames[u]} : ${e.builtinInputTypes[u]},`);c.length>1&&(c.push("};"),s=c,i[i.length-1]+=",",i.push(`input: ${e.type}Input`))}if(i.length&&(e.code=Ye.substitute(e.code,"//VTK::IOStructs::Input",i).result),e.outputNames.length+e.builtinOutputNames.length){const c=[`struct ${e.type}Output
{`];for(let u=0;u<e.outputNames.length;u++)e.outputInterpolations[u]!==void 0?c.push(`  @location(${u}) @interpolate(${e.outputInterpolations[u]}) ${e.outputNames[u]} : ${e.outputTypes[u]},`):c.push(`  @location(${u}) ${e.outputNames[u]} : ${e.outputTypes[u]},`);for(let u=0;u<e.builtinOutputNames.length;u++)c.push(`  ${e.builtinOutputNames[u]} : ${e.builtinOutputTypes[u]},`);c.push("};"),s=s.concat(c),e.code=Ye.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=Ye.substitute(e.code,"//VTK::IOStructs::Dec",s).result}}const a8={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function AO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,a8,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],V.obj(t,e),V.setGet(t,e,["type","hash","code"]),V.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),r8(t,e)}const i8=V.newInstance(AO,"vtkWebGPUShaderDescription");var cS={newInstance:i8,extend:AO};const uS={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function s8(t){return!t||t.length<6?0:t in uS?uS[t]:(Ee(`unknown format ${t}`),null)}function o8(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return Ee(`unknown format ${t}`),0;const i=5-r/2;return e*i}function c8(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function u8(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{Ee(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){Ee(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function l8(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{Ee(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function f8(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function g8(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";Ee(`unknown format ${t}`)}}var Gt={getDetailsFromTextureFormat:s8,getByteStrideFromBufferFormat:o8,getNumberOfComponentsFromBufferFormat:c8,getNativeTypeFromBufferFormat:u8,getShaderTypeFromBufferFormat:l8,getByteStrideFromShaderFormat:f8,getNativeTypeFromShaderFormat:g8};function h8(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function p8(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",s=r;Array.isArray(s)||(s=[s]);for(let c=0;c<e.inputs.length;c++)if(h8(e.inputs[c].names,s)){if(e.inputs[c].buffer===n)return;e.inputs[c].buffer=n;return}e.inputs.push({buffer:n,stepMode:i,names:s}),e.inputs=e.inputs.sort((c,u)=>c.names[0]<u.names[0]?-1:c.names[0]>u.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let i=0;i<e.inputs.length;i++)for(let s=0;s<e.inputs[i].names.length;s++){const c=e.inputs[i].buffer.getArrayInformation()[s],u=Gt.getShaderTypeFromBufferFormat(c.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[i].names[s]} : ${u}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let i=0;for(let s=0;s<e.inputs.length;s++){const c=e.inputs[s].buffer,u={arrayStride:c.getStrideInBytes(),stepMode:e.inputs[s].stepMode,attributes:[]},f=c.getArrayInformation();for(let g=0;g<e.inputs[s].names.length;g++)u.attributes.push({shaderLocation:i,offset:f[g].offset,format:f[g].format}),i++;r.push(u)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const d8={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function jO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d8,n),Kt(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],At(t,e,["created","device","handle","indexBuffer"]),p8(t,e)}const y8=et(jO,"vtkWebGPUVertexInput");var v8={newInstance:y8,extend:jO};const x8=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,T8=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function m8(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,i)=>{const s=cS.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),c=cS.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),u=r.getShaderDescriptions();u.push(s),u.push(c);const f=e.vertexShaderTemplate+e.fragmentShaderTemplate,g=new RegExp("//VTK::[^:]*::","g"),h=f.match(g).filter((y,v,S)=>S.indexOf(y)===v).map(y=>`replaceShader${y.substring(7,y.length-2)}`);for(let y=0;y<h.length;y++){const v=h[y];v!=="replaceShaderIOStructs"&&e.shaderReplacements.has(v)&&e.shaderReplacements.get(v)(n,r,i)}t.replaceShaderIOStructs(n,r,i)},t.replaceShaderIOStructs=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.replaceShaderCode(null,i),r.getShaderDescription("fragment").replaceShaderCode(s)},t.replaceShaderRenderEncoder=(n,r,i)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,i)=>{if(!e.WebGPURenderer)return;const s=e.WebGPURenderer.getBindGroup().getShaderCode(r),c=r.getShaderDescription("vertex");let u=c.getCode();u=Ye.substitute(u,"//VTK::Renderer::Dec",[s]).result,c.setCode(u);const f=r.getShaderDescription("fragment");u=f.getCode(),u=Ye.substitute(u,"//VTK::Renderer::Dec",[s]).result,f.setCode(u)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,i)=>{const s=e.bindGroup.getShaderCode(r),c=r.getShaderDescription("vertex");let u=c.getCode();u=Ye.substitute(u,"//VTK::Mapper::Dec",[s]).result,c.setCode(u);const f=r.getShaderDescription("fragment");f.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),u=f.getCode(),u=Ye.substitute(u,"//VTK::Mapper::Dec",[s]).result,f.setCode(u)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let c=s.getCode();c=Ye.substitute(c,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,s.setCode(c)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,i)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const i=e.vertexInput.getIndexBuffer();i?n.drawIndexed(i.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const i=e.textureViews[r].getSampler();i&&n.push(i)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=n8.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const S8={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function HO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S8,n),ft.extend(t,e,n),e.textureViews=[],e.vertexInput=v8.newInstance(),e.bindGroup=kO.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||T8,e.vertexShaderTemplate=e.vertexShaderTemplate||x8,e.shaderReplacements=new Map,V.get(t,e,["pipeline","vertexInput"]),V.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),m8(t,e)}const C8=V.newInstance(HO,"vtkWebGPUSimpleMapper");var $O={newInstance:C8,extend:HO};function E8(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.addOutput("vec4<f32>","vertexVC");let c=s.getCode();c=Ye.substitute(c,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,s.setCode(c)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const M8={};function WO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M8,n),$O.extend(t,e,n),E8(t,e)}const w8=V.newInstance(WO,"vtkWebGPUFullScreenQuad");var lS={newInstance:w8,extend:WO};const O8={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},D8={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var Nc={BufferUsage:O8,PrimitiveTypes:D8};const $h=["getMappedRange","mapAsync","unmap"];function R8(t,e,n,r){const i=r.byteLength,s=t.createBuffer({size:i,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),c=s.getMappedRange(0,i);new Uint8Array(c).set(new Uint8Array(r)),s.unmap();const u=t.createCommandEncoder();u.copyBufferToBuffer(s,0,e,n,i);const f=u.finish();t.queue.submit([f]),s.destroy()}function b8(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{R8(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{const i=Math.ceil(n.byteLength/4)*4;e.handle=e.device.getHandle().createBuffer({size:i,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=i,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<$h.length;n++)t[$h[n]]=function(){return e.handle[$h[n]](...arguments)}}const L8={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function KO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L8,n),V.obj(t,e),V.get(t,e,["handle","sizeInBytes","usage"]),V.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),b8(t,e)}const V8=V.newInstance(KO);var jp={newInstance:V8,extend:KO,...Nc};const{Representation:fS}=Vc,{PrimitiveTypes:Sa}=Nc;class N8{constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function B8(t){switch(t){case Sa.Points:return"points";case Sa.Lines:return"lines";case Sa.Triangles:case Sa.TriangleEdges:return"polys";case Sa.TriangleStripEdges:case Sa.TriangleStrips:return"strips";default:return""}}function pl(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function _8(t,e,n){const r=t.length;for(let c=0;c<r;c++){let u=t[c];if(n.cellProvokedMap.has(u)){n.ibo[n.iboId++]=n.cellProvokedMap.get(u);for(let f=c+1;f<c+r;f++){u=t[f%r];const g=pl(n,u,e);n.ibo[n.iboId++]=g}return}}for(let c=0;c<r;c++){let u=t[c];if(!n.provokedPointIds[u]){let f=pl(n,u,e);n.provokedPointIds[u]=1,n.cellProvokedMap.set(u,f),n.flatIdToCellId[f]=e,n.ibo[n.iboId++]=f;for(let g=c+1;g<c+r;g++)u=t[g%r],f=pl(n,u,e),n.ibo[n.iboId++]=f;return}}let i=t[0],s=n.flatId;n.cellProvokedMap.set(i,s),n.flatIdToPointId[n.flatId]=i,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=s;for(let c=1;c<r;c++)i=t[c],s=pl(n,i,e),n.ibo[n.iboId++]=s}function U8(t,e,n){const r=t.length;n.iboSize+=r;for(let i=0;i<r;i++){const s=t[i];if(n.cellProvokedMap.has(s))return}for(let i=0;i<r;i++){const s=t[i];if(!n.provokedPointIds[s]){n.provokedPointIds[s]=1,n.cellProvokedMap.set(s,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Nr;const gS=new Uint32Array(1),_n=new Uint32Array(2),pa=new Uint32Array(3),Wh={anythingToPoints(t,e,n,r,i){for(let s=0;s<t;++s)gS[0]=e[n+s],Nr(gS,r,i)},linesToWireframe(t,e,n,r,i){for(let s=0;s<t-1;++s)_n[0]=e[n+s],_n[1]=e[n+s+1],Nr(_n,r,i)},polysToWireframe(t,e,n,r,i){if(t>2)for(let s=0;s<t;++s)_n[0]=e[n+s],_n[1]=e[n+(s+1)%t],Nr(_n,r,i)},stripsToWireframe(t,e,n,r,i){if(t>2){for(let s=0;s<t-1;++s)_n[0]=e[n+s],_n[1]=e[n+s+1],Nr(_n,r,i);for(let s=0;s<t-2;s++)_n[0]=e[n+s],_n[1]=e[n+s+2],Nr(_n,r,i)}},polysToSurface(t,e,n,r,i){for(let s=0;s<t-2;s++)pa[0]=e[n],pa[1]=e[n+s+1],pa[2]=e[n+s+2],Nr(pa,r,i)},stripsToSurface(t,e,n,r,i){for(let s=0;s<t-2;s++)pa[0]=e[n+s],pa[1]=e[n+s+1+s%2],pa[2]=e[n+s+1+(s+1)%2],Nr(pa,r,i)}};function k8(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,i=n.primitiveType,s=n.representation,c=n.cellOffset,u=r.getData(),f=u.length,g=B8(i),d=n.numberOfPoints,h={provokedPointIds:new Uint8Array(d),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new N8};let y=null;s===fS.POINTS||i===Sa.Points?y=Wh.anythingToPoints:s===fS.WIREFRAME||i===Sa.Lines?y=Wh[`${g}ToWireframe`]:y=Wh[`${g}ToSurface`],Nr=U8;let v=c||0;for(let S=0;S<f;)h.cellProvokedMap.clear(),y(u[S],u,S+1,v,h),S+=u[S]+1,v++;d<=65535?h.flatIdToPointId=new Uint16Array(d+h.extraPoints):h.flatIdToPointId=new Uint32Array(d+h.extraPoints),d+h.extraPoints<36863?h.pointIdToFlatId=new Int16Array(d):h.pointIdToFlatId=new Int32Array(d),d+h.extraPoints<=65535?(h.ibo=new Uint16Array(h.iboSize),n.format="uint16"):(h.ibo=new Uint32Array(h.iboSize),n.format="uint32"),v<=65535?h.flatIdToCellId=new Uint16Array(d+h.extraPoints):h.flatIdToCellId=new Uint32Array(d+h.extraPoints),h.pointIdToFlatId.fill(-1),h.provokedPointIds.fill(0),Nr=_8,v=c||0;for(let S=0;S<f;)h.cellProvokedMap.clear(),y(u[S],u,S+1,v,h),S+=u[S]+1,v++;delete h.provokedPointIds,delete h.pointIdToFlatId,n.nativeArray=h.ibo,e.flatIdToPointId=h.flatIdToPointId,e.flatIdToCellId=h.flatIdToCellId,e.flatSize=h.flatId,e.indexCount=h.iboId}}const F8={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function XO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F8,n),jp.extend(t,e,n),V.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),k8(t,e)}const G8=V.newInstance(XO);var z8={newInstance:G8,extend:XO,...Nc};const{BufferUsage:da}=Nc,{vtkErrorMacro:A8}=gr,{VtkDataTypes:ii}=rt,j8={};function H8(t){let e;switch(t.getDataType()){case ii.UNSIGNED_CHAR:e="uint8";break;case ii.FLOAT:e="float32";break;case ii.UNSIGNED_INT:e="uint32";break;case ii.INT:e="sint32";break;case ii.DOUBLE:e="float32";break;case ii.UNSIGNED_SHORT:e="uint16";break;case ii.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||A8(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function hS(t,e,n,r,i){const s={},c=t.getFlatSize();if(!c)return s;let u=[0,0,0,0];i.shift&&(i.shift.length?u=i.shift:u.fill(i.shift));let f=[1,1,1,1];i.scale&&(i.scale.length?f=i.scale:f.fill(i.scale));const g=Object.prototype.hasOwnProperty.call(i,"packExtra")?i.packExtra:!1;let d,h=0;const y=n+(g?1:0),v=Vs(r,c*y);let S=t.getFlatIdToPointId();i.cellData&&(S=t.getFlatIdToCellId()),n===1?d=function(m){v[h++]=f[0]*e[m]+u[0]}:n===2?d=function(m){v[h++]=f[0]*e[m]+u[0],v[h++]=f[1]*e[m+1]+u[1]}:n===3&&!g?d=function(m){v[h++]=f[0]*e[m]+u[0],v[h++]=f[1]*e[m+1]+u[1],v[h++]=f[2]*e[m+2]+u[2]}:n===3&&g?d=function(m){v[h++]=f[0]*e[m]+u[0],v[h++]=f[1]*e[m+1]+u[1],v[h++]=f[2]*e[m+2]+u[2],v[h++]=f[3]*1+u[3]}:n===4&&(d=function(m){v[h++]=f[0]*e[m]+u[0],v[h++]=f[1]*e[m+1]+u[1],v[h++]=f[2]*e[m+2]+u[2],v[h++]=f[3]*e[m+3]+u[3]});for(let x=0;x<c;x++){const m=n*S[x];d(m)}return s.nativeArray=v,s}function $8(t,e,n,r){const i=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],s=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],c=[];return It(i,s,c),Cn(c),c}function W8(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const i=new Int8Array(t.getNumberOfCells()*4),s=r.length;let c=0;for(let u=0;u<s;){const f=$8(n,r[u+1],r[u+2],r[u+3]);i[c++]=127*f[0],i[c++]=127*f[1],i[c++]=127*f[2],i[c++]=127,u+=r[u]+1}return i}function K8(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let i,s;if(r.usage===da.Index&&(i=z8.newInstance({label:r.label}),i.setDevice(e.device),s=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,i.buildIndexBuffer(r),i.createAndWrite(r.nativeArray,s),i.setArrayInformation([{format:r.format}])),i||(i=jp.newInstance({label:r.label}),i.setDevice(e.device)),r.usage===da.UniformArray&&(s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,s)),r.usage===da.Storage&&(s=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,i.createAndWrite(r.nativeArray,s)),r.usage===da.Texture&&(s=GPUBufferUsage.COPY_SRC,i.createAndWrite(r.nativeArray,s)),r.usage===da.PointArray){s=GPUBufferUsage.VERTEX;const c=Gt.getNativeTypeFromBufferFormat(r.format),u=hS(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),c,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});i.createAndWrite(u.nativeArray,s),i.setStrideInBytes(Gt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===da.NormalsFromPoints){s=GPUBufferUsage.VERTEX;const c=Gt.getNativeTypeFromBufferFormat(r.format),u=W8(r.cells,r.dataArray),f=hS(r.indexBuffer,u,4,c,{cellData:!0});i.createAndWrite(f.nativeArray,s),i.setStrideInBytes(Gt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===da.RawVertex&&(s=GPUBufferUsage.VERTEX,i.createAndWrite(r.nativeArray,s),i.setStrideInBytes(Gt.getByteStrideFromBufferFormat(r.format)),i.setArrayInformation([{offset:0,format:r.format}])),i.setSourceTime(r.time),i}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,i)=>{const s=H8(r),c={hash:`${r.getMTime()}I${i.getMTime()}${s}`,usage:da.PointArray,format:s,dataArray:r,indexBuffer:i};return t.getBuffer(c)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=jp.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const X8={device:null,fullScreenQuadBuffer:null};function Y8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X8,n),Kt(t,e),At(t,e,["device"]),K8(t,e)}et(Y8);var Bc={...j8,...Nc};const{BufferUsage:q8}=Bc,{vtkErrorMacro:fs}=V;function Z8(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){fs(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const i=Gt.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:i,offset:e.sizeInBytes,nativeType:Gt.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=i},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:q8.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=V.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,i)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){fs(`entry named ${n} not found in UBO`);return}const c=e.bufferEntries[s];t.createView(c.nativeType);const u=e[c.nativeType];u[(c.offset+r*e.sizeInBytes)/u.BYTES_PER_ELEMENT]=i},t.setArray=(n,r,i)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){fs(`entry named ${n} not found in UBO`);return}const c=e.bufferEntries[s];t.createView(c.nativeType);const u=e[c.nativeType],f=(c.offset+r*e.sizeInBytes)/u.BYTES_PER_ELEMENT;for(let g=0;g<i.length;g++)u[f+g]=i[g]},t.setAllInstancesFromArray=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){fs(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const c=e[s.nativeType],u=r.length/e.numberOfInstances;for(let f=0;f<e.numberOfInstances;f++){const g=(s.offset+f*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let d=0;d<u;d++)c[g+d]=r[f*u+d]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){fs(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const c=e[s.nativeType],u=r.length/e.numberOfInstances;for(let f=0;f<e.numberOfInstances;f++){const g=(s.offset+f*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let d=0;d<u;d++)c[g+d]=r[f*u+d]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){fs(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const c=e[s.nativeType],u=9;for(let f=0;f<e.numberOfInstances;f++){const g=(s.offset+f*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let d=0;d<3;d++)for(let h=0;h<3;h++)c[g+d*4+h]=r[f*u+d*3+h]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const i=[`struct ${e.label}StructEntry
{`];for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];i.push(`  ${c.name}: ${c.type},`)}return i.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),i.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const Q8={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function YO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q8,n),V.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},V.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},V.get(t,e,["bindGroupTime"]),V.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),Z8(t,e)}const J8=V.newInstance(YO,"vtkWebGPUStorageBuffer");var P8={newInstance:J8,extend:YO};const{BufferUsage:I8}=Bc,{vtkErrorMacro:Kh}=V;function eH(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){Kh(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:Gt.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Gt.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let i=4;for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];c.sizeInBytes%16===0&&(i=Math.max(16,i)),c.sizeInBytes%8===0&&(i=Math.max(8,i))}for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];c.packed===!1&&c.sizeInBytes%16===0&&(c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];if(c.packed===!1&&c.sizeInBytes===12)for(let u=0;u<e.bufferEntries.length;u++){const f=e.bufferEntries[u];if(f.packed===!1&&f.sizeInBytes===4){c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];if(!c.packed&&c.sizeInBytes%8===0)for(let u=s+1;u<e.bufferEntries.length;u++){const f=e.bufferEntries[u];if(!f.packed&&f.sizeInBytes%8===0){c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes;break}}}for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];if(!c.packed&&c.sizeInBytes%8===0){let u=!1;for(let f=0;!u&&f<e.bufferEntries.length;f++){const g=e.bufferEntries[f];if(!g.packed&&g.sizeInBytes===4)for(let d=f+1;d<e.bufferEntries.length;d++){const h=e.bufferEntries[d];if(!h.packed&&h.sizeInBytes===4){c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,g.packed=!0,g.offset=n,r.push(g),n+=g.sizeInBytes,h.packed=!0,h.offset=n,r.push(h),n+=h.sizeInBytes,u=!0;break}}}}}for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];!c.packed&&c.sizeInBytes>4&&(c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes)}for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];c.packed||(c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let s=0;s<e.bufferEntries.length;s++)e._bufferEntryNames.set(e.bufferEntries[s].name,s);e.sizeInBytes=n,e.sizeInBytes=i*Math.ceil(e.sizeInBytes/i),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:I8.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=V.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){Kh(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const c=e[s.nativeType];s.lastValue!==r&&(c[s.offset/c.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),s.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const i=e._bufferEntryNames.get(n);if(i===void 0){Kh(`entry named ${n} not found in UBO`);return}const s=e.bufferEntries[i];t.createView(s.nativeType);const c=e[s.nativeType];let u=!1;for(let f=0;f<r.length;f++)(!s.lastValue||s.lastValue[f]!==r[f])&&(c[s.offset/c.BYTES_PER_ELEMENT+f]=r[f],u=!0);u&&(e.sendDirty=!0,s.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const i=[`struct ${e.label}Struct
{`];for(let s=0;s<e.bufferEntries.length;s++){const c=e.bufferEntries[s];i.push(`  ${c.name}: ${c.type},`)}return i.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),i.join(`
`)}}const tH={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function qO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,tH,n),V.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},V.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,V.get(t,e,["binding","bindGroupTime"]),V.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),eH(t,e)}const nH=V.newInstance(qO,"vtkWebGPUUniformBuffer");var rc={newInstance:nH,extend:qO};const{vtkDebugMacro:rH}=gr,pS=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,aH=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,dl=new Float64Array(16),dS=new Float64Array(16);function iH(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function sH(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera,e.webgpuCamera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),i=e.camera.getDirectionOfProjectionByReference(),s=[],c=[];xa(c,i,.5*(n[0]+n[1])),Ao(s,r,c),mp(c,s,e.stabilizedCenter),BE(c)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=s,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let i=0;i<r.length;++i)r[i].getSwitch()>0&&n++;return n||(rH("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const r=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",r.wcvc),e.UBO.setArray("SCPCMatrix",r.scpc),e.UBO.setArray("PCSCMatrix",r.pcsc),e.UBO.setArray("SCVCMatrix",r.scvc),e.UBO.setArray("VCPCMatrix",r.vcpc),e.UBO.setArray("WCVCNormals",r.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",e.renderable.getEnvironmentTexture()?.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const i=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[i.usize,i.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const s=e._parent.getDevice();e.UBO.sendIfNeeded(s)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let i=`${e.renderable.getMTime()}`;for(let s=0;s<n.length;s++)i+=n[s].getMTime();if(i!==e.lightTimeString){const s=new Float32Array(n.length*4),c=new Float32Array(n.length*4),u=new Float32Array(n.length*4),f=new Float32Array(n.length*4);for(let d=0;d<n.length;d++){const h=d*4,y=n[d].getPosition();je(y,y,r.wcvc),s[h]=y[0],s[h+1]=y[1],s[h+2]=y[2],s[h+3]=0,c[h]=-n[d].getDirection()[0],c[h+1]=-n[d].getDirection()[1],c[h+2]=-n[d].getDirection()[2],c[h+3]=0,u[h]=n[d].getColor()[0],u[h+1]=n[d].getColor()[1],u[h+2]=n[d].getColor()[2],u[h+3]=n[d].getIntensity()*5,f[h]=iH(n[d]),f[h+1]=Math.cos(ct(n[d].getConeAngle())),f[h+2]=Math.cos(ct(n[d].getConeAngle()+n[d].getConeFalloff())),f[h+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",s),e.SSBO.setAllInstancesFromArray("LightDir",c),e.SSBO.setAllInstancesFromArray("LightColor",u),e.SSBO.setAllInstancesFromArray("LightData",f);const g=e._parent.getDevice();e.SSBO.send(g)}e.lightTimeString=i},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=lS.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(pS);const s=rc.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(s),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&e.backgroundTex?.getImageLoaded()){e.clearFSQ.setFragmentShaderTemplate(aH);const s=rc.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(s);const c=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex,"EnvironmentTexture");if(c.getReady()){const u=c.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([u]),e.backgroundTexLoaded=!0;const f=e.backgroundTex.getInterpolate()?"linear":"nearest";u.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:f,magFilter:f,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=lS.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(pS);const s=rc.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(s)}const r=e.webgpuCamera.getKeyMatrices(t),i=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",i),Pe(dS,r.normalMatrix),xp(dl,r.scvc,r.pcsc),xp(dl,dS,dl),e.clearFSQ.getUBO().setArray("FSQMatrix",dl),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],i=n[0]-r[0],s=n[1]-r[1],c=e._parent.normalizedDisplayToDisplay(i,s),u=Math.round(c[0]),f=Math.round(c[1]),g=n[2]-r[0],d=n[3]-r[1],h=e._parent.normalizedDisplayToDisplay(g,d);let y=Math.round(h[0])-u,v=Math.round(h[1])-f;return y<0&&(y=0),v<0&&(v=0),{usize:y,vsize:v,lowerLeftU:u,lowerLeftV:f}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const oH={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function cH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,oH,n),ft.extend(t,e,n),e.UBO=rc.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=P8.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=kO.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=Ve(new Float64Array(16)),e.stabilizedTime={},Kt(e.stabilizedTime,{mtime:0}),En(t,e,["bindGroup","stabilizedTime"]),Ns(t,e,["stabilizedCenter"]),At(t,e,["renderEncoder","selector","suppressClear","UBO"]),sH(t,e)}const uH=et(cH,"vtkWebGPURenderer");zr("vtkRenderer",uH);const{CoordinateSystem:yS}=Lc;function lH(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const i=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===yS.WORLD&&(e.bufferShift[0]-=i[0],e.bufferShift[1]-=i[1],e.bufferShift[2]-=i[2]),Pe(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?Ve(e.keyMatrices.normalMatrix):($t(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,Hn(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Pe(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),Mt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===yS.WORLD?Mt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-i[0],-i[1],-i[2]]):$t(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const fH={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function gH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fH,n),ft.extend(t,e,n),e.keyMatricesTime={},V.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},V.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],lH(t,e)}const hH=V.newInstance(gH);zr("vtkActor",hH);const{CoordinateSystem:vS}=Lc;function pH(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===vS.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),Ve(e.keyMatrices.bcwc),Ve(e.keyMatrices.normalMatrix),Mt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===vS.WORLD?Mt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):$t(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const dH={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function yH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dH,n),ft.extend(t,e,n),e.keyMatricesTime={},V.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},V.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],pH(t,e)}const vH=V.newInstance(yH);zr("vtkActor2D",vH);function xH(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const TH={};function mH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TH,n),ft.extend(t,e,n),e.CubeAxesActorHelper=hO.newCubeAxesActorHelper(),xH(t,e)}const SH=et(mH,"vtkWebGPUCubeAxesActor");zr("vtkCubeAxesActor",SH);const{DisplayLocation:Hp}=RO;function CH(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(Hp.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(Hp.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(An.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(An.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(An.POINTS),t.getRepresentationAsString=()=>V.enumToString(An,e.representation)}const EH={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:An.SURFACE,displayLocation:Hp.FOREGROUND};function MH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EH,n),V.obj(t,e),V.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),V.setGetArray(t,e,["color"],3),CH(t,e)}V.newInstance(MH,"vtkProperty2D");var wH={...RO};const{BufferUsage:Rt,PrimitiveTypes:Yt}=Bc,{Representation:yl}=Vc,{ScalarMode:vl}=Ci,{CoordinateSystem:OH}=Lc,{DisplayLocation:xS}=wH,DH=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,RH=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

struct Material {
  ior: f32,
  roughness: f32,
  metallic: f32,
  base: vec3<f32>,
};

struct DirectionalLight {
  direction: vec3<f32>,
  color: vec3<f32>,
};

struct PointLight {
  position: vec3<f32>,
  color: vec3<f32>,
};

struct SpotLight {
  position: vec3<f32>,
  direction: vec3<f32>,
  cones: vec2<f32>,
  color: vec3<f32>,
};

const pi: f32 = 3.14159265359;

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;

  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {
  var L: vec3<f32> = normalize(light.direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = light.color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf * incoming * angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V);
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);

  var theta: f32 = mdot(normalize(light.direction), L);
  var epsilon: f32 = light.cones.x - light.cones.y;
  var intensity: f32 = (theta - light.cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist * dist;

  var incoming: vec3<f32> = light.color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;
  var ior: f32 = mapperUBO.BaseIOR;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  // Use texture alpha for transparency
  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;
  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function TS(t){return t.indexOf("edge")>=0}function bH(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==OH.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{const r=e.WebGPUActor.getRenderable().getProperty(),i=e.UBO.getSendTime();if(t.getMTime()<=i&&r.getMTime()<=i&&e.renderable.getMTime()<=i)return;const s=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",s.bcwc),e.UBO.setArray("BCSCMatrix",s.bcsc),e.UBO.setArray("MCWCNormals",s.normalMatrix),e.is2D){const u=r.getDisplayLocation?.()??xS.BACKGROUND;e.UBO.setValue("ZValue",u===xS.FOREGROUND?1:0);const f=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[...f,1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[...r.getAmbientColorByReference(),1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),e.UBO.setArray("DiffuseColor",[...r.getDiffuseColorByReference(),1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),r.getSpecularColorByReference()&&e.UBO.setArray("SpecularColor",[...r.getSpecularColorByReference(),1]);const c=r.getEdgeColorByReference?.();c&&e.UBO.setArray("EdgeColor",[...c,1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID()),e.UBO.sendIfNeeded(e.WebGPURenderWindow.getDevice())},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===Yt.Verts?!1:e.primitiveType===Yt.Triangles||e.primitiveType===Yt.TriangleStrips?r===yl.WIREFRAME:!0},t.replaceShaderPosition=(n,r,i)=>{const s=r.getShaderDescription("vertex");s.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");let c=s.getCode();e.useRendererMatrix?(c=Ye.substitute(c,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(c=Ye.substitute(c,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(c=Ye.substitute(c,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(c=Ye.substitute(c,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(s.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),c=Ye.substitute(c,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),c=Ye.substitute(c,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,s.setCode(c)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,i)=>{const s=i.getBuffer("normalMC"),c=e.WebGPUActor.getRenderable();if(s){const u=r.getShaderDescription("vertex");u.hasOutput("normalVC")||u.addOutput("vec3<f32>","normalVC",s.getArrayInformation()[0].interpolation),u.hasOutput("tangentVC")||u.addOutput("vec3<f32>","tangentVC",s.getArrayInformation()[0].interpolation),u.hasOutput("bitangentVC")||u.addOutput("vec3<f32>","bitangentVC",s.getArrayInformation()[0].interpolation);let f=u.getCode();f=Ye.substitute(f,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,u.setCode(f);const g=r.getShaderDescription("fragment");f=g.getCode(),c.getProperty().getNormalTexture()?f=Ye.substitute(f,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:f=Ye.substitute(f,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,g.setCode(f)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,i)=>{if(n.includes("sel"))return;const s=r.getShaderDescription("vertex");s.hasOutput("vertexVC")||s.addOutput("vec4<f32>","vertexVC");const c=e.WebGPURenderer.getRenderable(),u=r.getShaderDescription("fragment");let f=u.getCode();if(f.includes("var normal:")&&e.useRendererMatrix&&!TS(n)&&!e.is2D&&!n.includes("sel")){const g=["  let fragPos = vec3<f32>(input.vertexVC.xyz);","  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;","  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  let metallic = mapperUBO.Metallic * _metallicMap.r;","  let alpha = roughness * roughness;","  let k = alpha * alpha / 2.0;","  var diffuse = vec3<f32>(0.);","  var specular = vec3<f32>(0.);","  let emission = _emissionMap.rgb * mapperUBO.Emission;","","  // Material struct","  let mat = Material(ior, roughness, metallic, baseColor);","","  {","    var i = 0;","    loop {","      if (!(i < rendererUBO.LightCount)) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let pointLight = PointLight(pos, color);","           let result = calcPointLight(normal, V, fragPos, mat, pointLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","          }","         // Directional light","         case 1 {","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let dirLight = DirectionalLight(dir, color);","           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         // Spot Light","         case 2 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           let spotLight = SpotLight(pos, dir, cones, color);","           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));","  let kD = (1.0 - kS) * (1.0 - metallic);","  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;","  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);"];c.getEnvironmentTexture()?.getImageLoaded()&&g.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  let VreflN = normalize(reflect(-V, normal));","  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  let specularCoords = vecToRectCoord(reflectionIBLCoords);","  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution * kS, 0);","  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;","  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);"),f=Ye.substitute(f,"//VTK::Light::Impl",g).result,u.setCode(f)}else f=Ye.substitute(f,"//VTK::Light::Impl",["  let diffuse = diffuseColor.rgb;","  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,u.setCode(f)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,i)=>{if(TS(n)){const g=r.getShaderDescription("fragment");let d=g.getCode();d=Ye.substitute(d,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,g.setCode(d);return}const s=i.getBuffer("colorVI");if(!s)return;const c=r.getShaderDescription("vertex");c.addOutput("vec4<f32>","color",s.getArrayInformation()[0].interpolation);let u=c.getCode();u=Ye.substitute(u,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,c.setCode(u);const f=r.getShaderDescription("fragment");u=f.getCode(),u=Ye.substitute(u,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,f.setCode(u)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,i)=>{if(!i.hasAttribute("tcoord"))return;const s=r.getShaderDescription("vertex"),c=i.getBuffer("tcoord"),u=Gt.getNumberOfComponentsFromBufferFormat(c.getArrayInformation()[0].format);let f=s.getCode();s.addOutput(`vec${u}<f32>`,"tcoordVS"),f=Ye.substitute(f,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,s.setCode(f);const g=r.getShaderDescription("fragment");f=g.getCode();const d=e.WebGPUActor.getRenderable(),h=d.getProperty(),y=R=>R?R.getDimensionality()===u:!1,v=[],S=h.getDiffuseTexture?.();(S?.getImageLoaded()||d.getTextures()[0]||e.colorTexture)&&(y(S)||y(d.getTextures()[0])||y(e.colorTexture))&&v.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);");const x=h.getORMTexture?.(),m=h.getRMTexture?.(),E=h.getRoughnessTexture?.(),O=h.getMetallicTexture?.(),M=h.getAmbientOcclusionTexture?.(),w=h.getEmissionTexture?.(),D=h.getNormalTexture?.();x?.getImageLoaded()?y(x)&&v.push("_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;","_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;"):m?.getImageLoaded()?y(m)&&v.push("_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;"):(E?.getImageLoaded()&&y(E)&&v.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;"),O?.getImageLoaded()&&y(O)&&v.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;"),M?.getImageLoaded()&&y(M)&&v.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;")),w?.getImageLoaded()&&y(w)&&v.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),D?.getImageLoaded()&&y(D)&&v.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),f=Ye.substitute(f,"//VTK::TCoord::Impl",v).result,g.setCode(f)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,i)=>{if(n.includes("sel")){const s=r.getShaderDescription("fragment");let c=s.getCode();c=Ye.substitute(c,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,s.setCode(c)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===yl.POINTS||r===Yt.Points?Rt.Verts:r===Yt.Lines?Rt.Lines:n===yl.WIREFRAME?r===Yt.Triangles?Rt.LinesFromTriangles:Rt.LinesFromStrips:r===Yt.Triangles?Rt.Triangles:r===Yt.TriangleStrips?Rt.Strips:r===Yt.TriangleEdges?Rt.LinesFromTriangles:Rt.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case Rt.Triangles:return"triangle-list";case Rt.Verts:return"point-list";case Rt.Lines:default:return"line-list"}},t.buildVertexInput=()=>{const n=e.currentInput,r=e.cellArray,i=e.primitiveType;let c=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const u=e.WebGPURenderWindow.getDevice();let f=!1;i===Yt.TriangleEdges&&(f=!0,c=yl.WIREFRAME);const g=e.vertexInput,d=n.getPoints();let h=null;if(r?(h=u.getBufferManager().getBuffer({hash:`R${c}P${i}${r.getMTime()}`,usage:Rt.Index,cells:r,numberOfPoints:d.getNumberOfPoints(),primitiveType:i,representation:c}),g.setIndexBuffer(h)):g.setIndexBuffer(null),d){const x=e.WebGPUActor.getBufferShift(e.WebGPURenderer);g.addBuffer(u.getBufferManager().getBuffer({hash:`${d.getMTime()}I${h?.getMTime?.()??0}${x.join()}float32x4`,usage:Rt.PointArray,format:"float32x4",dataArray:d,indexBuffer:h,shift:x,packExtra:!0}),["vertexBC"])}else g.removeBufferIfPresent("vertexBC");const y=t.getUsage(c,i);if(e._usesCellNormals=!1,!e.is2D&&(y===Rt.Triangles||y===Rt.Strips)){const x=n.getPointData().getNormals(),m={format:"snorm8x4",indexBuffer:h,packExtra:!0,shift:0,scale:127};x?(m.hash=`${x.getMTime()}I${h.getMTime()}snorm8x4`,m.dataArray=x,m.usage=Rt.PointArray,g.addBuffer(u.getBufferManager().getBuffer(m),["normalMC"])):i===Yt.Triangles?(e._usesCellNormals=!0,m.hash=`PFN${d.getMTime()}I${h.getMTime()}snorm8x4`,m.dataArray=d,m.cells=r,m.usage=Rt.NormalsFromPoints,g.addBuffer(u.getBufferManager().getBuffer(m),["normalMC"])):g.removeBufferIfPresent("normalMC")}else g.removeBufferIfPresent("normalMC");let v=!1;if(e.renderable.getScalarVisibility()){const x=e.renderable.getColorMapColors();if(x&&!f){const m=e.renderable.getScalarMode(),E=(m===vl.USE_CELL_DATA||m===vl.USE_CELL_FIELD_DATA||m===vl.USE_FIELD_DATA||!n.getPointData().getScalars())&&m!==vl.USE_POINT_FIELD_DATA&&x;g.addBuffer(u.getBufferManager().getBuffer({usage:Rt.PointArray,format:"unorm8x4",hash:`${E}${x.getMTime()}I${h.getMTime()}unorm8x4`,dataArray:x,indexBuffer:h,cellData:E,cellOffset:0}),["colorVI"]),v=!0}}v||g.removeBufferIfPresent("colorVI");let S=null;e.renderable.getInterpolateScalarsBeforeMapping?.()&&e.renderable.getColorCoordinates()?S=e.renderable.getColorCoordinates():S=n.getPointData().getTCoords(),S&&!f?g.addBuffer(u.getBufferManager().getBufferForPointArray(S,g.getIndexBuffer()),["tcoord"]):g.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{const n=[],r=[],i=e.renderable.getColorTextureMap?.();i&&!e.colorTexture&&(e.colorTexture=xc.newInstance({label:"polyDataColor"})),i&&(e.colorTexture.setInputData(i),r.push(["DiffuseTexture",e.colorTexture]));const s=e.WebGPUActor.getRenderable(),c=e.WebGPURenderer.getRenderable();[["DiffuseTexture",s.getProperty().getDiffuseTexture?.()],["DiffuseTexture",s.getTextures()[0]],["DiffuseTexture",e.colorTexture],["ORMTexture",s.getProperty().getORMTexture?.()],["RMTexture",s.getProperty().getRMTexture?.()],["RoughnessTexture",s.getProperty().getRoughnessTexture?.()],["MetallicTexture",s.getProperty().getMetallicTexture?.()],["NormalTexture",s.getProperty().getNormalTexture?.()],["AmbientOcclusionTexture",s.getProperty().getAmbientOcclusionTexture?.()],["EmissionTexture",s.getProperty().getEmissionTexture?.()],["EnvironmentTexture",c.getEnvironmentTexture?.()]].forEach(f=>{let[g,d]=f;d&&((d.getInputData()||d.getJsImageData()||d.getCanvas()||d.getImageBitmap())&&r.push([g,d]),d.getImage()&&d.getImageLoaded()&&r.push([g,d]))}),r.forEach(f=>{let[g,d]=f;const h=e.device.getTextureManager().getTextureForVTKTexture(d,g);if(!h.getReady())return;let y=!1;for(let v=0;v<e.textures.length;++v)if(e.textures[v]===h){y=!0,n[v]=!0;break}if(!y){n[e.textures.length]=!0;const v=h.createView(g);e.textures.push(h),e.textureViews.push(v);const S=d.getInterpolate()?"linear":"nearest";let x=null;d.getEdgeClamp()&&d.getRepeat()?x="mirror-repeat":d.getEdgeClamp()?x="clamp-to-edge":d.getRepeat()&&(x="repeat");let m={addressModeU:x,addressModeV:x,addressModeW:x,minFilter:S,magFilter:S};g==="EnvironmentTexture"&&(m={addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:S,magFilter:S,mipmapFilter:"linear"}),v.addSampler(e.device,m)}});for(let f=e.textures.length-1;f>=0;f--)n[f]||(e.textures.splice(f,1),e.textureViews.splice(f,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===Yt.TriangleEdges||e.primitiveType===Yt.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const i=e.vertexInput.getBuffer("tcoord"),s=Gt.getNumberOfComponentsFromBufferFormat(i.getArrayInformation()[0].format);n+=`t${s}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==Yt.TriangleEdges&&e.primitiveType!==Yt.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const i=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(i.getSizeInBytes()/i.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const s=n.getProperty();t.setNumberOfInstances(Math.ceil(s.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const LH={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function ZO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LH,n),$O.extend(t,e,n),e.fragmentShaderTemplate=RH,e.vertexShaderTemplate=DH,e._tmpMat3=La(new Float64Array(9)),e._tmpMat4=Ve(new Float64Array(16)),e.UBO=rc.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),At(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],bH(t,e)}const VH=et(ZO,"vtkWebGPUCellArrayMapper");var QO={newInstance:VH,extend:ZO};const{PrimitiveTypes:Un}=Bc;function NH(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>QO.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{if(!n){Ee("No input!");return}const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let s=0;for(let c=Un.Points;c<=Un.TriangleStrips;c++)if(r[c].getNumberOfValues()>0){e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const u=e.primitives[c];u.setCellArray(r[c]),u.setCurrentInput(n),u.setCellOffset(s),u.setPrimitiveType(c),u.setRenderable(e.renderable),s+=r[c].getNumberOfCells(),i.push(u)}else e.primitives[c]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()){if(r[Un.Triangles].getNumberOfValues()>0){const c=Un.TriangleEdges;e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const u=e.primitives[c];u.setCellArray(r[Un.Triangles]),u.setCurrentInput(n),u.setCellOffset(e.primitives[Un.Triangles].getCellOffset()),u.setPrimitiveType(c),u.setRenderable(e.renderable),i.push(u)}else e.primitives[Un.TriangleEdges]=null;if(r[Un.TriangleStrips].getNumberOfValues()>0){const c=Un.TriangleStripEdges;e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const u=e.primitives[c];u.setCellArray(r[Un.TriangleStrips]),u.setCurrentInput(n),u.setCellOffset(e.primitives[Un.TriangleStrips].getCellOffset()),u.setPrimitiveType(c),u.setRenderable(e.renderable),i.push(u)}else e.primitives[Un.TriangleStripEdges]=null}t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}const BH={primitives:null};function _H(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BH,n),ft.extend(t,e,n),e.primitives=[],NH(t,e)}const UH=et(_H,"vtkWebGPUPolyDataMapper");zr("vtkMapper",UH);const{PrimitiveTypes:mS}=Bc;function kH(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>QO.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],i=[];let s=0;for(let c=mS.Points;c<=mS.Triangles;c++)if(r[c].getNumberOfValues()>0){e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const u=e.primitives[c];u.setCellArray(r[c]),u.setCurrentInput(n),u.setCellOffset(s),u.setPrimitiveType(c),u.setRenderable(e.renderable),u.setIs2D(!0),s+=r[c].getNumberOfCells(),i.push(u)}else e.primitives[c]=null;t.prepareNodes(),t.addMissingChildren(i),t.removeUnusedNodes()}}function FH(t){return{primitives:[],...t}}function GH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,FH(n)),ft.extend(t,e,n),e.primitives=[],kH(t,e)}const zH=et(GH,"vtkWebGPUPolyDataMapper2D");zr("vtkMapper2D",zH);function AH(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,s=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([s.usize,s.vsize],i,e.WebGPURenderWindow.getRenderable())}}}const jH={};function HH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jH,n),ft.extend(t,e,n),e.scalarBarActorHelper=BO.newScalarBarActorHelper(),AH(t,e)}const $H=et(HH,"vtkWebGPUScalarBarActor");zr("vtkScalarBarActor",$H);function WH(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const KH={device:null,handle:null,label:null,options:null};function JO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KH,n),V.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),V.get(t,e,["bindGroupTime","handle","options"]),V.setGet(t,e,["bindGroupLayoutEntry","device","label"]),WH(t,e)}const XH=V.newInstance(JO);var YH={newInstance:XH,extend:JO};function qH(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Gt.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=i.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const i=Gt.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=i.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let i="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?i="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(i="u32");let s=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${i}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(s=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),s},t.addSampler=(n,r)=>{const i=YH.newInstance({label:`${e.label}Sampler`});i.create(n,r),t.setSampler(i)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const ZH={texture:null,handle:null,sampler:null,label:null};function PO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZH,n),V.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),V.get(t,e,["bindGroupTime","texture"]),V.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),qH(t,e)}const QH=V.newInstance(PO);var JH={newInstance:QH,extend:PO};function PH(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const i=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:i,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,i)=>{e.device=n,e.handle=r,e.width=i.width,e.height=i.height,e.depth=i.depth?i.depth:1,e.format=i.format?i.format:"rgba8unorm",e.usage=i.usage?i.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];const i=h=>{e.device.getHandle().queue.copyExternalImageToTexture({source:h,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0,mipLevel:0,origin:{x:0,y:0,z:0}},[h.width,h.height,e.depth]),t.getDimensionality()!==3&&e.mipLevel>0&&xc.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0};if(n.canvas){i(n.canvas);return}if(n.imageBitmap){n.width=n.imageBitmap.width,n.height=n.imageBitmap.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.imageBitmap);return}if(n.jsImageData){n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.jsImageData);return}if(n.image){n.width=n.image.width,n.height=n.image.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,i(n.image);return}const s=Gt.getDetailsFromTextureFormat(e.format);let c=e.width*s.stride;const u=(h,y,v)=>{const S=s.elementSize===2&&s.sampleType==="float",x=h.BYTES_PER_ELEMENT,m=h.length/(y*v)*x;if(!S&&m%256===0)return[h,m];const E=m/x,O=s.elementSize,M=256*Math.floor((E*O+255)/256),w=M/O,D=V.newTypedArray(S?"Uint16Array":h.constructor.name,w*y*v),R=y*v;if(S)for(let B=0;B<R;B++){const _=B*E,G=B*w;for(let z=0;z<E;z++)D[G+z]=gi.toHalf(h[_+z])}else if(w===E)D.set(h);else for(let B=0;B<R;B++)D.set(h.subarray(B*E,(B+1)*E),B*w);return[D,M]};n.nativeArray&&(r=n.nativeArray);const f=t.getDimensionality()===3,g=u(r,e.height,f?e.depth:1);c=g[1];const d=g[0];e.device.getHandle().queue.writeTexture({texture:e.handle,mipLevel:0,origin:{x:0,y:0,z:0}},d,{offset:0,bytesPerRow:c,rowsPerImage:e.height},{width:e.width,height:e.height,depthOrArrayLayers:f?e.depth:1}),!f&&e.mipLevel>0&&xc.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0},t.getScale=()=>{const n=Gt.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>Gt.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||i!==e.depth)&&(e.width=n,e.height=r,e.depth=i,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const i=JH.newInstance({label:n});return i.create(t,r),i}}const IH={device:null,handle:null,buffer:null,ready:!1,label:null};function e$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IH,n),V.obj(t,e),V.get(t,e,["handle","ready","width","height","depth","format","usage"]),V.setGet(t,e,["device","label"]),PH(t,e)}V.newInstance(e$);function t$(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const i=e.WebGPURenderer.getAspectRatio(),s=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,c=e.WebGPURenderer.getTiledSizeAndOrigin(),u=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),s,i,c,u)}}const n$={};function r$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n$,n),ft.extend(t,e,n),t$(t,e)}const a$=V.newInstance(r$,"vtkWebGPUPixelSpaceCallbackMapper");zr("vtkPixelSpaceCallbackMapper",a$);const i$="WebGL",gf=Object.create(null);function IO(t,e){gf[t]=e}function s$(){return Object.keys(gf)}function eD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return gf[t]&&gf[t](e)}function o$(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return eD(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const i=r.getViewProps(),s=e._views[0].getViewNodeFor(r);i.forEach(c=>{if(c.getVisibility()){n.propCount+=1;const u=c.getMapper&&c.getMapper();if(u&&u.getPrimitiveCount){const f=s.getViewNodeFor(u);if(f){f.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=f.getAllocatedGPUMemoryInBytes()/1e6);const g=u.getPrimitiveCount();Object.keys(g).forEach(d=>{n[d]||(n[d]=0),n[d]+=g[d]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return V.setImmediate(t.render),e._views.map(i=>i.captureNextImage?i.captureNextImage(n,r):void 0).filter(i=>!!i)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(i=>i===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const c$={defaultViewAPI:i$,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function tD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c$,n),V.obj(t,e),V.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),V.get(t,e,["neverRendered"]),V.getArray(t,e,["renderers","childRenderWindows"]),V.moveToProtected(t,e,["views"]),V.event(t,e,"completion"),o$(t,e)}const u$=V.newInstance(tD,"vtkRenderWindow");var l$={newInstance:u$,extend:tD,registerViewConstructor:IO,listViewAPIs:s$,newAPISpecificView:eD};const{vtkDebugMacro:xl}=V;function f$(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),i=new Float64Array([0,1,0]),s=Ve(new Float64Array(16)),c=Ve(new Float64Array(16)),u=new Float64Array(3),f=new Float64Array(3),g=new Float64Array(3),d=Ve(new Float64Array(16)),h=Ve(new Float64Array(16)),y=new Float64Array(3),v=new Float64Array(3);function S(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const x=t.getViewMatrix();e.viewUp[0]=x[4],e.viewUp[1]=x[5],e.viewUp[2]=x[6],t.modified()},t.setPosition=(x,m,E)=>{x===e.position[0]&&m===e.position[1]&&E===e.position[2]||(e.position[0]=x,e.position[1]=m,e.position[2]=E,t.computeDistance(),t.modified())},t.setFocalPoint=(x,m,E)=>{x===e.focalPoint[0]&&m===e.focalPoint[1]&&E===e.focalPoint[2]||(e.focalPoint[0]=x,e.focalPoint[1]=m,e.focalPoint[2]=E,t.computeDistance(),t.modified())},t.setDistance=x=>{if(e.distance===x)return;e.distance=x,e.distance<1e-20&&(e.distance=1e-20,xl("Distance is set to minimum."));const m=e.directionOfProjection;e.focalPoint[0]=e.position[0]+m[0]*e.distance,e.focalPoint[1]=e.position[1]+m[1]*e.distance,e.focalPoint[2]=e.position[2]+m[2]*e.distance,t.modified()},t.computeDistance=()=>{const x=e.focalPoint[0]-e.position[0],m=e.focalPoint[1]-e.position[1],E=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(x*x+m*m+E*E),e.distance<1e-20){e.distance=1e-20,xl("Distance is set to minimum.");const O=e.directionOfProjection;e.focalPoint[0]=e.position[0]+O[0]*e.distance,e.focalPoint[1]=e.position[1]+O[1]*e.distance,e.focalPoint[2]=e.position[2]+O[2]*e.distance}e.directionOfProjection[0]=x/e.distance,e.directionOfProjection[1]=m/e.distance,e.directionOfProjection[2]=E/e.distance,S()},t.dolly=x=>{if(x<=0)return;const m=e.distance/x;t.setPosition(e.focalPoint[0]-m*e.directionOfProjection[0],e.focalPoint[1]-m*e.directionOfProjection[1],e.focalPoint[2]-m*e.directionOfProjection[2])},t.roll=x=>{const m=e.position,E=e.focalPoint,O=e.viewUp,M=new Float64Array([O[0],O[1],O[2],0]);Ve(d);const w=new Float64Array([E[0]-m[0],E[1]-m[1],E[2]-m[2]]);ir(d,d,ct(x),w),No(M,M,d),e.viewUp[0]=M[0],e.viewUp[1]=M[1],e.viewUp[2]=M[2],t.modified()},t.azimuth=x=>{const m=e.focalPoint;Ve(h),Mt(h,h,m),ir(h,h,ct(x),e.viewUp),Mt(h,h,[-m[0],-m[1],-m[2]]),je(y,e.position,h),t.setPosition(y[0],y[1],y[2])},t.yaw=x=>{const m=e.position;Ve(h),Mt(h,h,m),ir(h,h,ct(x),e.viewUp),Mt(h,h,[-m[0],-m[1],-m[2]]),je(v,e.focalPoint,h),t.setFocalPoint(v[0],v[1],v[2])},t.elevation=x=>{const m=e.focalPoint,E=t.getViewMatrix(),O=[-E[0],-E[1],-E[2]];Ve(h),Mt(h,h,m),ir(h,h,ct(x),O),Mt(h,h,[-m[0],-m[1],-m[2]]),je(y,e.position,h),t.setPosition(y[0],y[1],y[2])},t.pitch=x=>{const m=e.position,E=t.getViewMatrix(),O=[E[0],E[1],E[2]];Ve(h),Mt(h,h,m),ir(h,h,ct(x),O),Mt(h,h,[-m[0],-m[1],-m[2]]),je(v,e.focalPoint,h),t.setFocalPoint(...v)},t.zoom=x=>{x<=0||(e.parallelProjection?e.parallelScale/=x:e.viewAngle/=x,t.modified())},t.translate=(x,m,E)=>{const O=[x,m,E];ws(e.position,O,e.position),ws(e.focalPoint,O,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=x=>{const m=[...e.viewUp,1],E=[],O=[],M=[];m[0]+=e.position[0],m[1]+=e.position[1],m[2]+=e.position[2],No(E,[...e.position,1],x),No(O,[...e.focalPoint,1],x),No(M,m,x),M[0]-=E[0],M[1]-=E[1],M[2]-=E[2],t.setPosition(...E.slice(0,3)),t.setFocalPoint(...O.slice(0,3)),t.setViewUp(...M.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=x=>{let m=x;m<1e-20&&(m=1e-20,xl("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+m)},t.setThicknessFromFocalPoint=x=>{let m=x;m<1e-20&&(m=1e-20,xl("Thickness is set to minimum.")),t.setClippingRange(e.distance-m/2,e.distance+m/2)},t.setRoll=x=>{},t.getRoll=()=>{},t.setObliqueAngles=(x,m)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Float64Array(24);const E=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],O=t.getCompositeProjectionMatrix(x,-1,1);for(let M=0;M<6;M++)No(E[M],E[M],O),X5(E[M]),m[4*M+0]=E[M][0],m[4*M+1]=E[M][1],m[4*M+2]=E[M][2],m[4*M+3]=E[M][3];return m},t.getCameraLightTransformMatrix=x=>($t(x,e.cameraLightTransform),x),t.computeCameraLightTransform=()=>{$t(s,t.getViewMatrix()),Hn(s,s),CE(c,[e.distance,e.distance,e.distance]),Qt(s,s,c),Ve(e.cameraLightTransform),Mt(e.cameraLightTransform,s,[0,0,-1])},t.deepCopy=x=>{},t.physicalOrientationToWorldDirection=x=>{const m=zm(x[0],x[1],x[2],x[3]),E=Ti(),O=zm(0,0,1,0);return r4(E,m),Gm(O,m,O),Gm(O,O,E),[O[0],O[1],O[2]]},t.getPhysicalToWorldMatrix=x=>{t.getWorldToPhysicalMatrix(x),Hn(x,x)},t.getWorldToPhysicalMatrix=x=>{Ve(x);const m=[3];It(e.physicalViewNorth,e.physicalViewUp,m),x[0]=m[0],x[1]=m[1],x[2]=m[2],x[4]=e.physicalViewUp[0],x[5]=e.physicalViewUp[1],x[6]=e.physicalViewUp[2],x[8]=-e.physicalViewNorth[0],x[9]=-e.physicalViewNorth[1],x[10]=-e.physicalViewNorth[2],Pe(x,x),Ql(u,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),lc(x,x,u),Mt(x,x,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=x=>{Hn(s,x),je(u,n,s),t.computeDistance();const m=e.distance;t.setPosition(u[0],u[1],u[2]),je(f,r,s),Ma(f,f,u),fc(f,f),t.setDirectionOfProjection(f[0],f[1],f[2]),je(g,i,s),Ma(g,g,u),fc(g,g),t.setViewUp(g[0],g[1],g[2]),t.setDistance(m)},t.computeViewParametersFromPhysicalMatrix=x=>{t.getWorldToPhysicalMatrix(s),Qt(s,x,s),t.computeViewParametersFromViewMatrix(s)},t.setModelTransformMatrix=x=>{e.modelTransformMatrix=x},t.getModelTransformMatrix=()=>e.modelTransformMatrix,t.setViewMatrix=x=>{e.viewMatrix=x,e.viewMatrix&&($t(s,e.viewMatrix),t.computeViewParametersFromViewMatrix(s),Pe(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.modelTransformMatrix?(Qt(s,e.viewMatrix,e.modelTransformMatrix),s):e.viewMatrix;bE(s,e.position,e.focalPoint,e.viewUp),Pe(s,s);const x=new Float64Array(16);return e.modelTransformMatrix?Qt(x,s,e.modelTransformMatrix):$t(x,s),x},t.setProjectionMatrix=x=>{e.projectionMatrix=x},t.getProjectionMatrix=(x,m,E)=>{const O=new Float64Array(16);if(Ve(O),e.projectionMatrix){const D=1/e.physicalScale;return Ql(u,D,D,D),$t(O,e.projectionMatrix),lc(O,O,u),Pe(O,O),O}Ve(s);const M=e.clippingRange[1]-e.clippingRange[0],w=[e.clippingRange[0]+(m+1)*M/2,e.clippingRange[0]+(E+1)*M/2];if(e.parallelProjection){const D=e.parallelScale*x,R=e.parallelScale,B=(e.windowCenter[0]-1)*D,_=(e.windowCenter[0]+1)*D,G=(e.windowCenter[1]-1)*R,z=(e.windowCenter[1]+1)*R;RE(s,B,_,G,z,w[0],w[1]),Pe(s,s)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const D=Math.tan(ct(e.viewAngle)/2);let R,B;e.useHorizontalViewAngle===!0?(R=e.clippingRange[0]*D,B=e.clippingRange[0]*D/x):(R=e.clippingRange[0]*D*x,B=e.clippingRange[0]*D);const _=(e.windowCenter[0]-1)*R,G=(e.windowCenter[0]+1)*R,z=(e.windowCenter[1]-1)*B,H=(e.windowCenter[1]+1)*B,A=w[0],$=w[1];s[0]=2*A/(G-_),s[5]=2*A/(H-z),s[2]=(_+G)/(G-_),s[6]=(z+H)/(H-z),s[10]=-(A+$)/($-A),s[14]=-1,s[11]=-2*A*$/($-A),s[15]=0}}return $t(O,s),O},t.getCompositeProjectionMatrix=(x,m,E)=>{const O=t.getViewMatrix(),M=t.getProjectionMatrix(x,m,E);return Qt(M,O,M),M},t.setDirectionOfProjection=(x,m,E)=>{if(e.directionOfProjection[0]===x&&e.directionOfProjection[1]===m&&e.directionOfProjection[2]===E)return;e.directionOfProjection[0]=x,e.directionOfProjection[1]=m,e.directionOfProjection[2]=E;const O=e.directionOfProjection;e.focalPoint[0]=e.position[0]+O[0]*e.distance,e.focalPoint[1]=e.position[1]+O[1]*e.distance,e.focalPoint[2]=e.position[2]+O[2]*e.distance,S()},t.setDeviceAngles=(x,m,E,O)=>{const M=[3];It(e.physicalViewNorth,e.physicalViewUp,M);const w=Ve(new Float64Array(16));ir(w,w,ct(x),e.physicalViewUp),ir(w,w,ct(m),M),ir(w,w,ct(E),e.physicalViewNorth),ir(w,w,ct(-O),e.physicalViewUp);const D=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),R=new Float64Array(e.physicalViewNorth);je(D,D,w),je(R,R,w),t.setDirectionOfProjection(D[0],D[1],D[2]),t.setViewUp(R[0],R[1],R[2]),t.modified()},t.setOrientationWXYZ=(x,m,E,O)=>{const M=Ve(new Float64Array(16));if(x!==0&&(m!==0||E!==0||O!==0)){const R=ct(x),B=Ti();Md(B,[m,E,O],R),Io(M,B)}const w=new Float64Array(3);je(w,[0,0,-1],M);const D=new Float64Array(3);je(D,[0,1,0],M),t.setDirectionOfProjection(...w),t.setViewUp(...D),t.modified()},t.computeClippingRange=x=>{let m=null,E=null;m=e.viewPlaneNormal,E=e.position;const O=-m[0],M=-m[1],w=-m[2],D=-(O*E[0]+M*E[1]+w*E[2]),R=[O*x[0]+M*x[2]+w*x[4]+D,1e-18];for(let B=0;B<2;B++)for(let _=0;_<2;_++)for(let G=0;G<2;G++){const z=O*x[G]+M*x[2+_]+w*x[4+B]+D;R[0]=z<R[0]?z:R[0],R[1]=z>R[1]?z:R[1]}return R}}const g$={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,modelTransformMatrix:null,cameraLightTransform:vf(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function nD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g$,n),V.obj(t,e),V.get(t,e,["distance"]),V.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),V.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),V.setGetArray(t,e,["clippingRange","windowCenter"],2),V.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),f$(t,e)}const h$=V.newInstance(nD,"vtkCamera");var p$={newInstance:h$,extend:nD};function d$(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?je(n,e.position,e.transformMatrix):Ql(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?je(n,e.focalPoint,e.transformMatrix):Ql(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(mp(e.direction,e.focalPoint,e.position),Cn(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const i=new Float64Array(3);mp(i,e.position,r),e.focalPoint=i},t.setDirectionAngle=(r,i)=>{const s=ct(r),c=ct(i);t.setPosition(Math.cos(s)*Math.sin(c),Math.sin(s),Math.cos(s)*Math.cos(c)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const y$={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function v$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,y$,n),V.obj(t,e),V.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),V.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),d$(t,e)}const x$=V.newInstance(v$,"vtkLight");var T$={newInstance:x$};const{vtkErrorMacro:jl}=V;function m$(t){return()=>jl(`vtkViewport::${t} - NOT IMPLEMENTED`)}function S$(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const i=e.props.filter(s=>s!==r);e.props.length!==i.length&&(e.props=i)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];i.push(r);const s=r.getNestedProps();if(s&&s.length)for(let c=0;c<s.length;c++)n(s[c],i);return i}t.getViewPropsWithNestedProps=()=>{let r=[];e.actors2D=[];for(let i=0;i<e.props.length;i++){const s=e.props[i].getActors2D();s&&(!Array.isArray(s)||s.length>0)?e.actors2D=e.actors2D.concat(s):n(e.props[i],r)}return e.actors2D.sort((i,s)=>i.getLayerNumber()-s.getLayerNumber()),r=r.concat(e.actors2D),r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>jl("call displayToView on your view instead"),t.viewToDisplay=()=>jl("callviewtodisplay on your view instead"),t.getSize=()=>jl("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,i,s)=>{const c=t.normalizedDisplayToNormalizedViewport(r,i,s);return t.normalizedViewportToProjection(c[0],c[1],c[2])},t.normalizedDisplayToNormalizedViewport=(r,i,s)=>{const c=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/c[0],(i-e.viewport[1])/c[1],s]},t.normalizedViewportToProjection=(r,i,s)=>[r*2-1,i*2-1,s*2-1],t.projectionToNormalizedDisplay=(r,i,s)=>{const c=t.projectionToNormalizedViewport(r,i,s);return t.normalizedViewportToNormalizedDisplay(c[0],c[1],c[2])},t.normalizedViewportToNormalizedDisplay=(r,i,s)=>{const c=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*c[0]+e.viewport[0],i*c[1]+e.viewport[1],s]},t.projectionToNormalizedViewport=(r,i,s)=>[(r+1)*.5,(i+1)*.5,(s+1)*.5],t.PickPropFrom=m$("PickPropFrom")}const C$={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function rD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,C$,n),V.obj(t,e),V.event(t,e,"event"),V.setGetArray(t,e,["viewport"],4),V.setGetArray(t,e,["background","background2"],3),S$(t,e)}const E$=V.newInstance(rD,"vtkViewport");var M$={newInstance:E$,extend:rD};const{vtkDebugMacro:ko,vtkErrorMacro:ma,vtkWarningMacro:w$}=gr;function SS(t){return()=>ma(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function O$(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},i={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(ko("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const s=t.getActiveCameraAndResetIfCreated();e.lights.forEach(c=>{c.lightTypeIsSceneLight()||(c.lightTypeIsHeadLight()?(c.setPositionFrom(s.getPositionByReference()),c.setFocalPointFrom(s.getFocalPointByReference()),c.modified(s.getMTime())):c.lightTypeIsCameraLight()?c.setTransformMatrix(s.getCameraLightTransformMatrix(vf())):ma("light has unknown light type",c.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=SS("allocateTime"),t.updateGeometry=SS("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=s=>{ko(t.getClassName(),t,"setting Layer to ",s),e.layer!==s&&(e.layer=s,t.modified()),t.setPreserveColorBuffer(!!s)},t.setActiveCamera=s=>e.activeCamera===s?!1:(e.activeCamera=s,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:s}),!0),t.makeCamera=()=>{const s=p$.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:s}),s},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(s=>{e.actors=e.actors.concat(s.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=s=>{e.actors=e.actors.filter(c=>c!==s),t.removeViewProp(s),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(c=>{t.removeViewProp(c)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(s=>{e.volumes=e.volumes.concat(s.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=s=>{e.volumes=e.volumes.filter(c=>c!==s),t.removeViewProp(s),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(c=>{t.removeViewProp(c)}),e.volumes=[],t.modified()},t.hasLight=s=>e.lights.includes(s),t.addLight=s=>{s&&!t.hasLight(s)&&(e.lights.push(s),t.modified())},t.removeLight=s=>{e.lights=e.lights.filter(c=>c!==s),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=s=>{e.lights=s,t.modified()},t.makeLight=T$.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(s,c,u,f)=>{let g=t.normalizedDisplayToProjection(s,c,u);return g=t.projectionToView(g[0],g[1],g[2],f),t.viewToWorld(g[0],g[1],g[2])},t.worldToNormalizedDisplay=(s,c,u,f)=>{let g=t.worldToView(s,c,u);return g=t.viewToProjection(g[0],g[1],g[2],f),t.projectionToNormalizedDisplay(g[0],g[1],g[2])},t.viewToWorld=(s,c,u)=>{if(e.activeCamera===null)return ma("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const f=e.activeCamera.getViewMatrix();Hn(f,f),Pe(f,f);const g=new Float64Array([s,c,u]);return je(g,g,f),g},t.projectionToView=(s,c,u,f)=>{if(e.activeCamera===null)return ma("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(f,-1,1);Hn(g,g),Pe(g,g);const d=new Float64Array([s,c,u]);return je(d,d,g),d},t.worldToView=(s,c,u)=>{if(e.activeCamera===null)return ma("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const f=e.activeCamera.getViewMatrix();Pe(f,f);const g=new Float64Array([s,c,u]);return je(g,g,f),g},t.viewToProjection=(s,c,u,f)=>{if(e.activeCamera===null)return ma("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(f,-1,1);Pe(g,g);const d=new Float64Array([s,c,u]);return je(d,d,g),d},t.computeVisiblePropBounds=()=>{e.allBounds[0]=Ne.INIT_BOUNDS[0],e.allBounds[1]=Ne.INIT_BOUNDS[1],e.allBounds[2]=Ne.INIT_BOUNDS[2],e.allBounds[3]=Ne.INIT_BOUNDS[3],e.allBounds[4]=Ne.INIT_BOUNDS[4],e.allBounds[5]=Ne.INIT_BOUNDS[5];let s=!0;t.invokeEvent(n);for(let c=0;c<e.props.length;++c){const u=e.props[c];if(u.getVisibility()&&u.getUseBounds()){const f=u.getBounds();f&&Fl(f)&&(s=!1,f[0]<e.allBounds[0]&&(e.allBounds[0]=f[0]),f[1]>e.allBounds[1]&&(e.allBounds[1]=f[1]),f[2]<e.allBounds[2]&&(e.allBounds[2]=f[2]),f[3]>e.allBounds[3]&&(e.allBounds[3]=f[3]),f[4]<e.allBounds[4]&&(e.allBounds[4]=f[4]),f[5]>e.allBounds[5]&&(e.allBounds[5]=f[5]))}}return s&&(Hd(e.allBounds),ko("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const c=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),u=[0,0,0];if(!Fl(c))return ko("Cannot reset camera!"),!1;let f=null;if(t.getActiveCamera())f=e.activeCamera.getViewPlaneNormal();else return ma("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),u[0]=(c[0]+c[1])/2,u[1]=(c[2]+c[3])/2,u[2]=(c[4]+c[5])/2;let g=c[1]-c[0],d=c[3]-c[2],h=c[5]-c[4];g*=g,d*=d,h*=h;let y=g+d+h;y=y===0?1:y,y=Math.sqrt(y)*.5;const v=ct(e.activeCamera.getViewAngle()),S=y,x=y/Math.sin(v*.5),m=e.activeCamera.getViewUp();return Math.abs(ye(m,f))>.999&&(w$("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-m[2],m[0],m[1])),e.activeCamera.setFocalPoint(u[0],u[1],u[2]),e.activeCamera.setPosition(u[0]+x*f[0],u[1]+x*f[1],u[2]+x*f[2]),t.resetCameraClippingRange(c),e.activeCamera.setParallelScale(S),e.activeCamera.setPhysicalScale(y),e.activeCamera.setPhysicalTranslation(-u[0],-u[1],-u[2]),t.invokeEvent(i),!0},t.resetCameraClippingRange=function(){const c=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!Fl(c))return ko("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return ma("Trying to reset clipping range of non-existent camera"),!1;const u=e.activeCamera.computeClippingRange(c);let f=0;if(e.activeCamera.getParallelProjection())f=.2*e.activeCamera.getParallelScale();else{const g=ct(e.activeCamera.getViewAngle());f=.2*Math.tan(g/2)*u[1]}return u[1]-u[0]<f&&(f=f-u[1]+u[0],u[1]+=f/2,u[0]-=f/2),u[0]<0&&(u[0]=0),u[0]=.99*u[0]-(u[1]-u[0])*e.clippingRangeExpansion,u[1]=1.01*u[1]+(u[1]-u[0])*e.clippingRangeExpansion,u[0]=u[0]>=u[1]?.01*u[1]:u[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),u[0]<e.nearClippingPlaneTolerance*u[1]&&(u[0]=e.nearClippingPlaneTolerance*u[1]),e.activeCamera.setClippingRange(u[0],u[1]),t.invokeEvent(r),!1},t.setRenderWindow=s=>{s!==e._renderWindow&&(e._vtkWindow=s,e._renderWindow=s)},t.visibleActorCount=()=>e.props.filter(s=>s.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let s=e.mtime;const c=e.activeCamera?e.activeCamera.getMTime():0;c>s&&(s=c);const u=e._createdLight?e._createdLight.getMTime():0;return u>s&&(s=u),s},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const D$={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Sf(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function aD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,D$,n),M$.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),En(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),At(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),Ns(t,e,["actors","volumes","lights"]),Rd(t,e,["background"],4,1),wc(t,e,["renderWindow"]),O$(t,e)}const R$=et(aD,"vtkRenderer");var b$={newInstance:R$,extend:aD};function L$(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let i=0;i<e.colorBuffers.length;i++)e.colorBuffers[i].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=e.context;if(!i){Ee("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let s=i.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())s+=r;else{Ee("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,i.framebufferTexture2D(i.FRAMEBUFFER,s,i.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){Ee("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let i=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())i+=n;else{Ee("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,i,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else Ee("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else Ee("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){Ee("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=kr.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(Ap.LINEAR),r.setMagnificationFilter(Ap.LINEAR),r.create2DFromRaw({width:e.glFramebuffer.width,height:e.glFramebuffer.height,numComps:4,dataType:bt.UNSIGNED_CHAR,data:null}),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const V$={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function iD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V$,n),Kt(t,e),e.colorBuffers&&Ee("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],Ns(t,e,["colorBuffers"]),L$(t,e)}const N$=et(iD,"vtkFramebuffer");var r1={newInstance:N$,extend:iD};function B$(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${V.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}),e.delegates.forEach(i=>{i.traverse(n,t)}),e.postDelegateOperations.forEach(i=>{t.setCurrentOperation(i),n.traverse(t)}))}}const _$={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function sD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_$,n),V.obj(t,e),V.get(t,e,["currentOperation"]),V.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),V.moveToProtected(t,e,["currentParent"]),B$(t,e)}const U$=V.newInstance(sD,"vtkRenderPass");var a1={newInstance:U$,extend:sD};const{Representation:k$}=Vc,{vtkErrorMacro:CS}=V;function F$(t){const e=se.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const G$=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function z$(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),i=new Uint16Array([4,0,1,3,2]),s=rt.newInstance({numberOfComponents:3,values:n});s.setName("points");const c=rt.newInstance({numberOfComponents:2,values:r});c.setName("tcoords");const u=rt.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(u,"polys",k$.SURFACE,{points:s,tcoords:c,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),i=n.getContext();e.framebuffer=r1.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=kr.newInstance(),e.translucentRGBATexture.setInternalFormat(i.RGBA16F),e.translucentRGBATexture.setFormat(i.RGBA),e.translucentRGBATexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw({width:r[0],height:r[1],numComps:4,dataType:"Float32Array",data:null}),e.translucentRTexture=kr.newInstance(),e.translucentRTexture.setInternalFormat(i.R16F),e.translucentRTexture.setFormat(i.RED),e.translucentRTexture.setOpenGLDataType(i.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw({width:r[0],height:r[1],numComps:1,dataType:"Float32Array",data:null}),e.translucentZTexture=kr.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw({width:r[0],height:r[1],dataType:"Float32Array",data:null}),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),G$,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const i=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||CS("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(i,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||CS("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,i)=>{if(e.deleted)return;const s=n.getSize(),c=n.getContext();if(e._supported=!1,r.getSelector()||!c||!n.getWebgl2()||!c.getExtension("EXT_color_buffer_half_float")&&!c.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const f=e.framebuffer.getSize();f===null||f[0]!==s[0]||f[1]!==s[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}c.drawBuffers([c.COLOR_ATTACHMENT0]),c.clearBufferfv(c.COLOR,0,[0,0,0,0]),c.clearBufferfv(c.DEPTH,0,[1]),c.colorMask(!1,!1,!1,!1),i.getOpaqueActorCount()>0&&(i.setCurrentOperation("opaqueZBufferPass"),r.traverse(i)),c.colorMask(!0,!0,!0,!0),c.drawBuffers([c.COLOR_ATTACHMENT0,c.COLOR_ATTACHMENT1]),c.viewport(0,0,s[0],s[1]),c.scissor(0,0,s[0],s[1]),c.clearBufferfv(c.COLOR,0,[0,0,0,1]),c.clearBufferfv(c.COLOR,1,[0,0,0,0]),c.enable(c.DEPTH_TEST),c.enable(c.BLEND),c.blendFuncSeparate(c.ONE,c.ONE,c.ZERO,c.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),c.drawBuffers([c.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=SO.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),c.depthMask(!1),c.depthFunc(c.ALWAYS),c.viewport(0,0,s[0],s[1]),c.scissor(0,0,s[0],s[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),c.drawArrays(c.TRIANGLES,0,e.tris.getCABO().getElementCount()),c.depthMask(!0),c.depthFunc(c.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const u=r.getTiledSizeAndOrigin();c.scissor(u.lowerLeftU,u.lowerLeftV,u.usize,u.vsize),c.viewport(u.lowerLeftU,u.lowerLeftV,u.usize,u.vsize)},t.getShaderReplacement=()=>e._supported?F$:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const A$={framebuffer:null,copyShader:null,tris:null};function oD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A$,n),a1.extend(t,e,n),e.VBOBuildTime={},V.obj(e.VBOBuildTime,{mtime:0}),e.tris=_s.newInstance(),V.get(t,e,["framebuffer"]),z$(t,e)}const j$=V.newInstance(oD,"vtkOpenGLOrderIndependentTranslucentPass");var H$={newInstance:j$,extend:oD};function $$(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const i=n.getRenderable().getNumberOfLayers(),s=n.getRenderable().getRenderersByReference();for(let c=0;c<i;c++)for(let u=0;u<s.length;u++){const f=s[u],g=n.getViewNodeFor(f);if(f.getDraw()&&f.getLayer()===c){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),g.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const d=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=r1.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const h=e.framebuffer.getSize();(h===null||h[0]!==d[0]||h[1]!==d[1])&&(e.framebuffer.create(d[0],d[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),g.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),g.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),g.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=H$.newInstance()),e.translucentPass.traverse(n,g,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),g.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),g.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const W$={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function cD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W$,n),a1.extend(t,e,n),V.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),$$(t,e)}const K$=V.newInstance(cD,"vtkForwardPass");var X$={newInstance:K$,extend:cD};const{FieldAssociations:Y$}=Bs;function q$(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,i,s,c)=>{},t.selectAsync=async(n,r,i,s,c)=>{const u=await t.getSourceDataAsync(n,r,i,s,c);return u?u.generateSelection(r,i,s,c):[]}}const Z$={fieldAssociation:Y$.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function uD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z$,n),V.obj(t,e),V.setGet(t,e,["fieldAssociation","captureZValues"]),q$(t,e)}const Q$=V.newInstance(uD,"vtkHardwareSelector");var J$={newInstance:Q$,extend:uD};const P$={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},I$={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var e7={SelectionContent:P$,SelectionField:I$};function t7(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const n7={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function lD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n7,n),V.obj(t,e),e.properties={},V.setGet(t,e,["contentType","fieldType","properties","selectionList"]),t7(t,e)}const r7=V.newInstance(lD,"vtkSelectionNode");var fD={newInstance:r7,extend:lD,...e7};const{PassTypes:pt}=jw,{SelectionContent:a7,SelectionField:ES}=fD,{FieldAssociations:ac}=Bs,{vtkErrorMacro:gD}=V,Ca=1;function hD(t){return`${t.propID} ${t.compositeID}`}function pD(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4;return n[i+3]}function _r(t,e,n,r){if(!n)return 0;const i=(e*(r[2]-r[0]+1)+t)*4,s=n[i],c=n[i+1];return(n[i+2]*256+c)*256+s}function dD(t,e){let n=e;return n<<=24,n|=t,n}function i7(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const i=[e[0]-t.area[0],e[1]-t.area[1]],s=_r(i[0],i[1],t.pixBuffer[pt.ACTOR_PASS],t.area);if(s<=0||s-Ca>=t.props.length)return null;const c={};c.valid=!0,c.propID=s-Ca,c.prop=t.props[c.propID];let u=_r(i[0],i[1],t.pixBuffer[pt.COMPOSITE_INDEX_PASS],t.area);if((u<0||u>16777215)&&(u=0),c.compositeID=u-Ca,t.captureZValues){const d=(i[1]*(t.area[2]-t.area[0]+1)+i[0])*4;c.zValue=(256*t.zBuffer[d]+t.zBuffer[d+1])/65535,c.displayPosition=e}if(t.pixBuffer[pt.ID_LOW24]&&pD(i[0],i[1],t.pixBuffer[pt.ID_LOW24],t.area)===0)return c;const f=_r(i[0],i[1],t.pixBuffer[pt.ID_LOW24],t.area),g=_r(i[0],i[1],t.pixBuffer[pt.ID_HIGH24],t.area);return c.attributeID=dD(f,g),c}}function yD(t,e,n,r,i){const s=[];let c=0;return e.forEach((u,f)=>{const g=fD.newInstance();switch(g.setContentType(a7.INDICES),t){case ac.FIELD_ASSOCIATION_CELLS:g.setFieldType(ES.CELL);break;case ac.FIELD_ASSOCIATION_POINTS:g.setFieldType(ES.POINT);break;default:gD("Unknown field association")}g.getProperties().propID=u.info.propID,g.getProperties().prop=u.info.prop,g.getProperties().compositeID=u.info.compositeID,g.getProperties().attributeID=u.info.attributeID,g.getProperties().pixelCount=u.pixelCount,n&&(g.getProperties().displayPosition=[u.info.displayPosition[0],u.info.displayPosition[1],u.info.zValue],g.getProperties().worldPosition=i.displayToWorld(u.info.displayPosition[0],u.info.displayPosition[1],u.info.zValue,r)),g.setSelectionList(u.attributeIDs),s[c]=g,c++}),s}function s7(t,e,n,r,i){const s=Math.floor(e),c=Math.floor(n),u=Math.floor(r),f=Math.floor(i),g=new Map,d=[0,0];for(let h=c;h<=f;h++)for(let y=s;y<=u;y++){const S=i7(t,[y,h],0,d);if(S&&S.valid){const x=hD(S);if(!g.has(x))g.set(x,{info:S,pixelCount:1,attributeIDs:[S.attributeID]});else{const m=g.get(x);m.pixelCount++,t.captureZValues&&S.zValue<m.info.zValue&&(m.info=S),m.attributeIDs.indexOf(S.attributeID)===-1&&m.attributeIDs.push(S.attributeID)}}}return yD(t.fieldAssociation,g,t.captureZValues,t.renderer,t.openGLRenderWindow)}function o7(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer,e._openGLRenderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=r1.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const i=e.framebuffer.getSize();!i||i[0]!==r[0]||i[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===ac.FIELD_ASSOCIATION_POINTS){const i=e._openGLRenderWindow.getContext(),s=i.isEnabled(i.BLEND);i.disable(i.BLEND),e._openGLRenderWindow.traverseAllPasses(),s&&i.enable(i.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,i,s,c,u)=>{if(e._renderer=r,i===void 0){const g=e._openGLRenderWindow.getSize();t.setArea(0,0,g[0]-1,g[1]-1)}else t.setArea(i,s,c,u);if(!t.captureBuffers())return!1;const f={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return f.generateSelection=function(){for(var g=arguments.length,d=new Array(g),h=0;h<g;h++)d[h]=arguments[h];return s7(f,...d)},f},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return gD("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer,e._openGLRenderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const i=[];for(e.currentPass=pt.MIN_KNOWN_PASS;e.currentPass<=pt.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===pt.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),i.push(e.currentPass));return i.forEach(s=>{e.currentPass=s,t.processPixelBuffers()}),e.currentPass=pt.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,i)=>{t.isPropHit(i)&&r.processSelectorPixelBuffers(t,e.propPixels[i])})},t.passRequired=r=>{if(r===pt.ID_HIGH24){if(e.fieldAssociation===ac.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===ac.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const i=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(i),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===pt.ACTOR_PASS){if(e.captureZValues){const i=e._openGLRenderWindow.getRenderPasses();if(typeof i[0].requestDepth=="function"&&typeof i[0].getFramebuffer=="function"){const s=i[0].getFramebuffer();s.saveCurrentBindingsAndBuffers(),s.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),s.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let i=0;for(let s=0;s<=e.area[3]-e.area[1];s++)for(let c=0;c<=e.area[2]-e.area[0];c++){let u=_r(c,s,r,e.area);u>0&&(u--,u in e.hitProps||(e.hitProps[u]=!0,e.propPixels[u]=[]),e.propPixels[u].push(i*4)),++i}},t.renderProp=r=>{e.currentPass===pt.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Ca),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===pt.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+Ca)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>V.enumToString(pt,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,i,s)=>{const c=i<0?0:i;if(console.log("getPixelInformation called",c),c===0){if(s[0]=r[0],s[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;console.log(r),console.log(e.area);const d=[r[0]-e.area[0],r[1]-e.area[1]];console.log("adjusted displayPosition",d);const h=_r(d[0],d[1],e.pixBuffer[pt.ACTOR_PASS],e.area);if(console.log("actorid",h),h<=0||h-Ca>=e.props.length)return null;const y={};y.valid=!0,y.propID=h-Ca,y.prop=e.props[y.propID];let v=_r(d[0],d[1],e.pixBuffer[pt.COMPOSITE_INDEX_PASS],e.area);if((v<0||v>16777215)&&(v=0),y.compositeID=v-Ca,e.captureZValues){const m=(d[1]*(e.area[2]-e.area[0]+1)+d[0])*4;y.zValue=(256*e.zBuffer[m]+e.zBuffer[m+1])/65535,y.displayPosition=r}if(e.pixBuffer[pt.ID_LOW24]&&pD(d[0],d[1],e.pixBuffer[pt.ID_LOW24],e.area)===0)return y;const S=_r(d[0],d[1],e.pixBuffer[pt.ID_LOW24],e.area),x=_r(d[0],d[1],e.pixBuffer[pt.ID_HIGH24],e.area);return y.attributeID=dD(S,x),y}const u=[r[0],r[1]],f=[0,0];let g=t.getPixelInformation(r,0,s);if(g&&g.valid)return g;for(let d=1;d<c;++d){for(let h=u[1]>d?u[1]-d:0;h<=u[1]+d;++h)if(f[1]=h,u[0]>=d&&(f[0]=u[0]-d,g=t.getPixelInformation(f,0,s),g&&g.valid)||(f[0]=u[0]+d,g=t.getPixelInformation(f,0,s),g&&g.valid))return g;for(let h=u[0]>=d?u[0]-(d-1):0;h<=u[0]+(d-1);++h)if(f[0]=h,u[1]>=d&&(f[1]=u[1]-d,g=t.getPixelInformation(f,0,s),g&&g.valid)||(f[1]=u[1]+d,g=t.getPixelInformation(f,0,s),g&&g.valid))return g}return s[0]=r[0],s[1]=r[1],null},t.generateSelection=(r,i,s,c)=>{const u=Math.floor(r),f=Math.floor(i),g=Math.floor(s),d=Math.floor(c),h=new Map,y=[0,0];for(let v=f;v<=d;v++)for(let S=u;S<=g;S++){const x=[S,v],m=t.getPixelInformation(x,0,y);if(m&&m.valid){const E=hD(m);if(!h.has(E))h.set(E,{info:m,pixelCount:1,attributeIDs:[m.attributeID]});else{const O=h.get(E);O.pixelCount++,e.captureZValues&&m.zValue<O.info.zValue&&(O.info=m),O.attributeIDs.indexOf(m.attributeID)===-1&&O.attributeIDs.push(m.attributeID)}}}return yD(e.fieldAssociation,h,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,i)=>{e._openGLRenderWindow=r,e._renderer=i};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const c7={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function vD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c7,n),J$.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),V.setGetArray(t,e,["area"],4),V.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),V.setGetArray(t,e,["propColorValue"],3),V.moveToProtected(t,e,["renderer","openGLRenderWindow"]),V.event(t,e,"event"),o7(t,e)}const u7=V.newInstance(vD,"vtkOpenGLHardwareSelector");var xD={newInstance:u7,extend:vD,...jw},Xh={exports:{}},MS;function l7(){return MS||(MS=1,(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(E,O){var M=E[0],w=E[1],D=E[2],R=E[3];M+=(w&D|~w&R)+O[0]-680876936|0,M=(M<<7|M>>>25)+w|0,R+=(M&w|~M&D)+O[1]-389564586|0,R=(R<<12|R>>>20)+M|0,D+=(R&M|~R&w)+O[2]+606105819|0,D=(D<<17|D>>>15)+R|0,w+=(D&R|~D&M)+O[3]-1044525330|0,w=(w<<22|w>>>10)+D|0,M+=(w&D|~w&R)+O[4]-176418897|0,M=(M<<7|M>>>25)+w|0,R+=(M&w|~M&D)+O[5]+1200080426|0,R=(R<<12|R>>>20)+M|0,D+=(R&M|~R&w)+O[6]-1473231341|0,D=(D<<17|D>>>15)+R|0,w+=(D&R|~D&M)+O[7]-45705983|0,w=(w<<22|w>>>10)+D|0,M+=(w&D|~w&R)+O[8]+1770035416|0,M=(M<<7|M>>>25)+w|0,R+=(M&w|~M&D)+O[9]-1958414417|0,R=(R<<12|R>>>20)+M|0,D+=(R&M|~R&w)+O[10]-42063|0,D=(D<<17|D>>>15)+R|0,w+=(D&R|~D&M)+O[11]-1990404162|0,w=(w<<22|w>>>10)+D|0,M+=(w&D|~w&R)+O[12]+1804603682|0,M=(M<<7|M>>>25)+w|0,R+=(M&w|~M&D)+O[13]-40341101|0,R=(R<<12|R>>>20)+M|0,D+=(R&M|~R&w)+O[14]-1502002290|0,D=(D<<17|D>>>15)+R|0,w+=(D&R|~D&M)+O[15]+1236535329|0,w=(w<<22|w>>>10)+D|0,M+=(w&R|D&~R)+O[1]-165796510|0,M=(M<<5|M>>>27)+w|0,R+=(M&D|w&~D)+O[6]-1069501632|0,R=(R<<9|R>>>23)+M|0,D+=(R&w|M&~w)+O[11]+643717713|0,D=(D<<14|D>>>18)+R|0,w+=(D&M|R&~M)+O[0]-373897302|0,w=(w<<20|w>>>12)+D|0,M+=(w&R|D&~R)+O[5]-701558691|0,M=(M<<5|M>>>27)+w|0,R+=(M&D|w&~D)+O[10]+38016083|0,R=(R<<9|R>>>23)+M|0,D+=(R&w|M&~w)+O[15]-660478335|0,D=(D<<14|D>>>18)+R|0,w+=(D&M|R&~M)+O[4]-405537848|0,w=(w<<20|w>>>12)+D|0,M+=(w&R|D&~R)+O[9]+568446438|0,M=(M<<5|M>>>27)+w|0,R+=(M&D|w&~D)+O[14]-1019803690|0,R=(R<<9|R>>>23)+M|0,D+=(R&w|M&~w)+O[3]-187363961|0,D=(D<<14|D>>>18)+R|0,w+=(D&M|R&~M)+O[8]+1163531501|0,w=(w<<20|w>>>12)+D|0,M+=(w&R|D&~R)+O[13]-1444681467|0,M=(M<<5|M>>>27)+w|0,R+=(M&D|w&~D)+O[2]-51403784|0,R=(R<<9|R>>>23)+M|0,D+=(R&w|M&~w)+O[7]+1735328473|0,D=(D<<14|D>>>18)+R|0,w+=(D&M|R&~M)+O[12]-1926607734|0,w=(w<<20|w>>>12)+D|0,M+=(w^D^R)+O[5]-378558|0,M=(M<<4|M>>>28)+w|0,R+=(M^w^D)+O[8]-2022574463|0,R=(R<<11|R>>>21)+M|0,D+=(R^M^w)+O[11]+1839030562|0,D=(D<<16|D>>>16)+R|0,w+=(D^R^M)+O[14]-35309556|0,w=(w<<23|w>>>9)+D|0,M+=(w^D^R)+O[1]-1530992060|0,M=(M<<4|M>>>28)+w|0,R+=(M^w^D)+O[4]+1272893353|0,R=(R<<11|R>>>21)+M|0,D+=(R^M^w)+O[7]-155497632|0,D=(D<<16|D>>>16)+R|0,w+=(D^R^M)+O[10]-1094730640|0,w=(w<<23|w>>>9)+D|0,M+=(w^D^R)+O[13]+681279174|0,M=(M<<4|M>>>28)+w|0,R+=(M^w^D)+O[0]-358537222|0,R=(R<<11|R>>>21)+M|0,D+=(R^M^w)+O[3]-722521979|0,D=(D<<16|D>>>16)+R|0,w+=(D^R^M)+O[6]+76029189|0,w=(w<<23|w>>>9)+D|0,M+=(w^D^R)+O[9]-640364487|0,M=(M<<4|M>>>28)+w|0,R+=(M^w^D)+O[12]-421815835|0,R=(R<<11|R>>>21)+M|0,D+=(R^M^w)+O[15]+530742520|0,D=(D<<16|D>>>16)+R|0,w+=(D^R^M)+O[2]-995338651|0,w=(w<<23|w>>>9)+D|0,M+=(D^(w|~R))+O[0]-198630844|0,M=(M<<6|M>>>26)+w|0,R+=(w^(M|~D))+O[7]+1126891415|0,R=(R<<10|R>>>22)+M|0,D+=(M^(R|~w))+O[14]-1416354905|0,D=(D<<15|D>>>17)+R|0,w+=(R^(D|~M))+O[5]-57434055|0,w=(w<<21|w>>>11)+D|0,M+=(D^(w|~R))+O[12]+1700485571|0,M=(M<<6|M>>>26)+w|0,R+=(w^(M|~D))+O[3]-1894986606|0,R=(R<<10|R>>>22)+M|0,D+=(M^(R|~w))+O[10]-1051523|0,D=(D<<15|D>>>17)+R|0,w+=(R^(D|~M))+O[1]-2054922799|0,w=(w<<21|w>>>11)+D|0,M+=(D^(w|~R))+O[8]+1873313359|0,M=(M<<6|M>>>26)+w|0,R+=(w^(M|~D))+O[15]-30611744|0,R=(R<<10|R>>>22)+M|0,D+=(M^(R|~w))+O[6]-1560198380|0,D=(D<<15|D>>>17)+R|0,w+=(R^(D|~M))+O[13]+1309151649|0,w=(w<<21|w>>>11)+D|0,M+=(D^(w|~R))+O[4]-145523070|0,M=(M<<6|M>>>26)+w|0,R+=(w^(M|~D))+O[11]-1120210379|0,R=(R<<10|R>>>22)+M|0,D+=(M^(R|~w))+O[2]+718787259|0,D=(D<<15|D>>>17)+R|0,w+=(R^(D|~M))+O[9]-343485551|0,w=(w<<21|w>>>11)+D|0,E[0]=M+E[0]|0,E[1]=w+E[1]|0,E[2]=D+E[2]|0,E[3]=R+E[3]|0}function s(E){var O=[],M;for(M=0;M<64;M+=4)O[M>>2]=E.charCodeAt(M)+(E.charCodeAt(M+1)<<8)+(E.charCodeAt(M+2)<<16)+(E.charCodeAt(M+3)<<24);return O}function c(E){var O=[],M;for(M=0;M<64;M+=4)O[M>>2]=E[M]+(E[M+1]<<8)+(E[M+2]<<16)+(E[M+3]<<24);return O}function u(E){var O=E.length,M=[1732584193,-271733879,-1732584194,271733878],w,D,R,B,_,G;for(w=64;w<=O;w+=64)i(M,s(E.substring(w-64,w)));for(E=E.substring(w-64),D=E.length,R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<D;w+=1)R[w>>2]|=E.charCodeAt(w)<<(w%4<<3);if(R[w>>2]|=128<<(w%4<<3),w>55)for(i(M,R),w=0;w<16;w+=1)R[w]=0;return B=O*8,B=B.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(B[2],16),G=parseInt(B[1],16)||0,R[14]=_,R[15]=G,i(M,R),M}function f(E){var O=E.length,M=[1732584193,-271733879,-1732584194,271733878],w,D,R,B,_,G;for(w=64;w<=O;w+=64)i(M,c(E.subarray(w-64,w)));for(E=w-64<O?E.subarray(w-64):new Uint8Array(0),D=E.length,R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=0;w<D;w+=1)R[w>>2]|=E[w]<<(w%4<<3);if(R[w>>2]|=128<<(w%4<<3),w>55)for(i(M,R),w=0;w<16;w+=1)R[w]=0;return B=O*8,B=B.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(B[2],16),G=parseInt(B[1],16)||0,R[14]=_,R[15]=G,i(M,R),M}function g(E){var O="",M;for(M=0;M<4;M+=1)O+=r[E>>M*8+4&15]+r[E>>M*8&15];return O}function d(E){var O;for(O=0;O<E.length;O+=1)E[O]=g(E[O]);return E.join("")}d(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function E(O,M){return O=O|0||0,O<0?Math.max(O+M,0):Math.min(O,M)}ArrayBuffer.prototype.slice=function(O,M){var w=this.byteLength,D=E(O,w),R=w,B,_,G,z;return M!==n&&(R=E(M,w)),D>R?new ArrayBuffer(0):(B=R-D,_=new ArrayBuffer(B),G=new Uint8Array(_),z=new Uint8Array(this,D,B),G.set(z),_)}})();function h(E){return/[\u0080-\uFFFF]/.test(E)&&(E=unescape(encodeURIComponent(E))),E}function y(E,O){var M=E.length,w=new ArrayBuffer(M),D=new Uint8Array(w),R;for(R=0;R<M;R+=1)D[R]=E.charCodeAt(R);return O?D:w}function v(E){return String.fromCharCode.apply(null,new Uint8Array(E))}function S(E,O,M){var w=new Uint8Array(E.byteLength+O.byteLength);return w.set(new Uint8Array(E)),w.set(new Uint8Array(O),E.byteLength),w}function x(E){var O=[],M=E.length,w;for(w=0;w<M-1;w+=2)O.push(parseInt(E.substr(w,2),16));return String.fromCharCode.apply(String,O)}function m(){this.reset()}return m.prototype.append=function(E){return this.appendBinary(h(E)),this},m.prototype.appendBinary=function(E){this._buff+=E,this._length+=E.length;var O=this._buff.length,M;for(M=64;M<=O;M+=64)i(this._hash,s(this._buff.substring(M-64,M)));return this._buff=this._buff.substring(M-64),this},m.prototype.end=function(E){var O=this._buff,M=O.length,w,D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R;for(w=0;w<M;w+=1)D[w>>2]|=O.charCodeAt(w)<<(w%4<<3);return this._finish(D,M),R=d(this._hash),E&&(R=x(R)),this.reset(),R},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(E){return this._buff=E.buff,this._length=E.length,this._hash=E.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(E,O){var M=O,w,D,R;if(E[M>>2]|=128<<(M%4<<3),M>55)for(i(this._hash,E),M=0;M<16;M+=1)E[M]=0;w=this._length*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),D=parseInt(w[2],16),R=parseInt(w[1],16)||0,E[14]=D,E[15]=R,i(this._hash,E)},m.hash=function(E,O){return m.hashBinary(h(E),O)},m.hashBinary=function(E,O){var M=u(E),w=d(M);return O?x(w):w},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(E){var O=S(this._buff.buffer,E),M=O.length,w;for(this._length+=E.byteLength,w=64;w<=M;w+=64)i(this._hash,c(O.subarray(w-64,w)));return this._buff=w-64<M?new Uint8Array(O.buffer.slice(w-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(E){var O=this._buff,M=O.length,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],D,R;for(D=0;D<M;D+=1)w[D>>2]|=O[D]<<(D%4<<3);return this._finish(w,M),R=d(this._hash),E&&(R=x(R)),this.reset(),R},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var E=m.prototype.getState.call(this);return E.buff=v(E.buff),E},m.ArrayBuffer.prototype.setState=function(E){return E.buff=y(E.buff,!0),m.prototype.setState.call(this,E)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(E,O){var M=f(new Uint8Array(E)),w=d(M);return O?x(w):w},m})})(Xh)),Xh.exports}var f7=l7();const g7=Ds(f7),h7=["lastShaderProgramBound","context","_openGLRenderWindow"];function p7(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,i)=>{let s=r;i.length>0&&(s=se.substitute(s,"VSOut","GSOut").result);const c=e._openGLRenderWindow.getWebgl2();let u=`
`,f=`#version 100
`;c?f=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(u=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(u+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),s=se.substitute(s,"//VTK::System::Dec",[`${f}
`,c?"":`#extension GL_OES_standard_derivatives : enable
`,u,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let g=se.substitute(n,"//VTK::System::Dec",[`${f}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(c){g=se.substitute(g,"varying","out").result,s=se.substitute(s,"varying","in").result;let h="",y=0;for(;s.includes(`gl_FragData[${y}]`);)s=se.substitute(s,`gl_FragData\\[${y}\\]`,`fragOutput${y}`).result,h+=`layout(location = ${y}) out vec4 fragOutput${y};
`,y++;s=se.substitute(s,"//VTK::Output::Dec",h).result}const d=se.substitute(i,"//VTK::System::Dec",f).result;return{VSSource:g,FSSource:s,GSSource:d}},t.readyShaderProgramArray=(n,r,i)=>{const s=t.replaceShaderValues(n,r,i),c=t.getShaderProgram(s.VSSource,s.FSSource,s.GSSource);return t.readyShaderProgram(c)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,i)=>{const s=`${n}${r}${i}`,c=g7.hash(s);if(!(c in e.shaderPrograms)){const u=se.newInstance();return u.setContext(e.context),u.getVertexShader().setSource(n),u.getFragmentShader().setSource(r),i&&u.getGeometryShader().setSource(i),u.setMd5Hash(c),e.shaderPrograms[c]=u,u}return e.shaderPrograms[c]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const d7={lastShaderProgramBound:null,shaderPrograms:null,context:null};function TD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d7,n),e.shaderPrograms={},V.obj(t,e),V.setGet(t,e,h7),V.moveToProtected(t,e,["openGLRenderWindow"]),p7(t,e)}const y7=V.newInstance(TD,"vtkShaderCache");var v7={newInstance:y7,extend:TD};const{vtkErrorMacro:x7}=V;function T7(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&x7("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const m7={context:null,numberOfTextureUnits:0,textureUnits:0};function mD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m7,n),V.obj(t,e),e.textureUnits=[],V.get(t,e,["numberOfTextureUnits"]),V.setGet(t,e,["context"]),T7(t,e)}const S7=V.newInstance(mD,"vtkOpenGLTextureUnitManager");var C7={newInstance:S7,extend:mD};function E7(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,i)=>{const s=i.getViewportByReference(),c=t.getFramebufferSize();return s[0]*c[0]<=n&&s[2]*c[0]>=n&&s[1]*c[1]<=r&&s[3]*c[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),i=t.getFramebufferSize();return[(r[2]-r[0])*i[0],(r[3]-r[1])*i[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,i)=>{const s=t.getFramebufferSize();return[n/s[0],r/s[1],i]},t.normalizedDisplayToDisplay=(n,r,i)=>{const s=t.getFramebufferSize();return[n*s[0],r*s[1],i]},t.worldToView=(n,r,i,s)=>s.worldToView(n,r,i),t.viewToWorld=(n,r,i,s)=>s.viewToWorld(n,r,i),t.worldToDisplay=(n,r,i,s)=>{const c=s.worldToView(n,r,i),u=t.getViewportSize(s),f=s.viewToProjection(c[0],c[1],c[2],u[0]/u[1]),g=s.projectionToNormalizedDisplay(f[0],f[1],f[2]);return t.normalizedDisplayToDisplay(g[0],g[1],g[2])},t.displayToWorld=(n,r,i,s)=>{const c=t.displayToNormalizedDisplay(n,r,i),u=s.normalizedDisplayToProjection(c[0],c[1],c[2]),f=t.getViewportSize(s),g=s.projectionToView(u[0],u[1],u[2],f[0]/f[1]);return s.viewToWorld(g[0],g[1],g[2])},t.normalizedDisplayToViewport=(n,r,i,s)=>{let c=s.getViewportByReference();c=t.normalizedDisplayToDisplay(c[0],c[1],0);const u=t.normalizedDisplayToDisplay(n,r,i);return[u[0]-c[0]-.5,u[1]-c[1]-.5,i]},t.viewportToNormalizedViewport=(n,r,i,s)=>{const c=t.getViewportSize(s);return c&&c[0]!==0&&c[1]!==0?[n/(c[0]-1),r/(c[1]-1),i]:[n,r,i]},t.normalizedViewportToViewport=(n,r,i,s)=>{const c=t.getViewportSize(s);return[n*(c[0]-1),r*(c[1]-1),i]},t.displayToLocalDisplay=(n,r,i)=>{const s=t.getFramebufferSize();return[n,s[1]-r-1,i]},t.viewportToNormalizedDisplay=(n,r,i,s)=>{let c=s.getViewportByReference();c=t.normalizedDisplayToDisplay(c[0],c[1],0);const u=n+c[0]+.5,f=r+c[1]+.5;return t.displayToNormalizedDisplay(u,f,i)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{V.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,i,s)=>{V.vtkErrorMacro("not implemented")},t.createSelector=()=>{V.vtkErrorMacro("not implemented")}}const M7={size:void 0,selector:void 0};function SD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M7,n),e.size||(e.size=[300,300]),V.getArray(t,e,["size"],2),V.get(t,e,["selector"]),ft.extend(t,e,n),E7(t,e)}const w7=V.newInstance(SD,"vtkRenderWindowViewNode");var O7={newInstance:w7,extend:SD};const D7="__getUnderlyingContext";function R7(){const t=new Map,e={apply(i,s,c){return t.has(c[0])?t.get(c[0]):i.apply(s,c)}};function n(i){return{apply(s,c,u){return t.set(i,u[0]),s.apply(c,u)}}}const r=Object.create(null);return r.getParameter=(i,s,c,u)=>new Proxy(u.bind(i),e),r.depthMask=(i,s,c,u)=>new Proxy(u.bind(i),n(i.DEPTH_WRITEMASK)),{get(i,s,c){if(s===D7)return()=>i;let u=Reflect.get(i,s,i);u instanceof Function&&(u=u.bind(i));const f=r[s];return f?f(i,s,c,u):u}}}const{vtkDebugMacro:wS,vtkErrorMacro:OS}=V,b7={position:"absolute",top:0,left:0,width:"100%",height:"100%"},L7=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function qt(t,e,n){const r=t.createFramebuffer(),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);const s=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),s===t.FRAMEBUFFER_COMPLETE}let hf=0;const Of=[];function V7(){hf++,Of.forEach(t=>t(hf))}function N7(){hf--,Of.forEach(t=>t(hf))}function B7(t){Of.push(t)}function _7(t){return Of.pop()}function DS(t){t.preventDefault()}function U7(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=R7()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",DS,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const i=[0,0];function s(){e.renderable&&(e.size[0]!==i[0]||e.size[1]!==i[1])&&(i[0]=e.size[0],i[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(s),t.buildPass=h=>{if(h){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(y=>{y.setOpenGLRenderWindow?.(t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&V7(),e.textureUnitManager=C7.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const h=e.context;h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),h.depthFunc(h.LEQUAL),h.enable(h.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=h=>{e.el&&e.el!==h&&(e.canvas.parentNode!==e.el&&OS("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==h&&(e.el=h,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:h,height:y}=e.el.getBoundingClientRect();e.containerSize=[h,y]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.activeFramebuffer?.getSize()||e.size,t.getPixelData=(h,y,v,S)=>{const x=new Uint8Array((v-h+1)*(S-y+1)*4);return e.context.readPixels(h,y,v-h+1,S-y+1,e.context.RGBA,e.context.UNSIGNED_BYTE,x),x},t.get3DContext=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},y=null;const v=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&v&&(y=e.canvas.getContext("webgl2",h),y&&(e.webgl2=!0,wS("using webgl2"))),y||(wS("using webgl1"),y=e.canvas.getContext("webgl",h)||e.canvas.getContext("experimental-webgl",h)),new Proxy(y,r())},t.get2DContext=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",h)},t.restoreContext=()=>{const h=a1.newInstance();h.setCurrentOperation("Release"),h.traverse(t,null)},t.activateTexture=h=>{const y=e._textureResourceIds.get(h);if(y!==void 0){e.context.activeTexture(e.context.TEXTURE0+y);return}const v=t.getTextureUnitManager().allocate();if(v<0){OS("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(h,v),e.context.activeTexture(e.context.TEXTURE0+v)},t.deactivateTexture=h=>{const y=e._textureResourceIds.get(h);y!==void 0&&(t.getTextureUnitManager().free(y),e._textureResourceIds.delete(h))},t.getTextureUnitForTexture=h=>{const y=e._textureResourceIds.get(h);return y!==void 0?y:-1},t.getDefaultTextureByteSize=function(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(h){case bt.CHAR:case bt.SIGNED_CHAR:case bt.UNSIGNED_CHAR:return 1;case y:case v:case bt.UNSIGNED_SHORT:case bt.SHORT:case bt.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(h,y){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(h){case bt.UNSIGNED_CHAR:switch(y){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;default:return e.context.RGBA8}case(v&&!S&&bt.UNSIGNED_SHORT):switch(y){case 1:return v.R16_EXT;case 2:return v.RG16_EXT;case 3:return v.RGB16_EXT;default:return v.RGBA16_EXT}case(v&&!S&&bt.SHORT):switch(y){case 1:return v.R16_SNORM_EXT;case 2:return v.RG16_SNORM_EXT;case 3:return v.RGB16_SNORM_EXT;default:return v.RGBA16_SNORM_EXT}case bt.UNSIGNED_SHORT:case bt.SHORT:case bt.FLOAT:default:switch(y){case 1:return S?e.context.R16F:e.context.R32F;case 2:return S?e.context.RG16F:e.context.RG32F;case 3:return S?e.context.RGB16F:e.context.RGB32F;default:return S?e.context.RGBA16F:e.context.RGBA32F}}switch(y){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;default:return e.context.RGBA}},t.setBackgroundImage=h=>{e.bgImage.src=h.src},t.setUseBackgroundImage=h=>{e.useBackgroundImage=h,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function c(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const y=document.createElement("canvas"),v=y.getContext("2d");y.width=e.canvas.width,y.height=e.canvas.height,v.drawImage(e.canvas,0,0);const S=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(O=>{O.getViewProps().forEach(w=>{if(w.getContainer){const R=w.getContainer().getElementsByTagName("canvas");for(let B=0;B<R.length;B++){const _=R[B],G=_.getBoundingClientRect(),z=G.x-S.x,H=G.y-S.y;v.drawImage(_,z,H)}}})});const E=y.toDataURL(h);y.remove(),t.invokeImageReady(E)}t.captureNextImage=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:y=!1,size:v=null,scale:S=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=h;const x=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:v||S!==1?v||e.size.map(m=>m*S):null},new Promise((m,E)=>{const O=t.onImageReady(M=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=x,O.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(w=>{let{restoreParamsFn:D,arg:R}=w;return D(R)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),m(M);else{const w=document.createElement("img");if(w.style=b7,w.src=M,e._screenshot.placeHolder=e.el.appendChild(w),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e.rootOpenGLRenderWindow?.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),y){const D=y!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(R=>{const B=R.getActiveCamera(),_=B.get("focalPoint","position","parallelScale");return{resetCameraArgs:D?{renderer:R}:void 0,resetCameraFn:D?y:R.resetCamera,restoreParamsFn:B.set,arg:JSON.parse(JSON.stringify(_))}}),e._screenshot.cameras.forEach(R=>{let{resetCameraFn:B,resetCameraArgs:_}=R;return B(_)})}t.traverseAllPasses()}})})};let u;t.getHardwareMaximumLineWidth=()=>{if(u!=null)return u;const h=t.get3DContext(),y=h.getParameter(h.ALIASED_LINE_WIDTH_RANGE);return u=y[1],y[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const h=t.get3DContext(),y=h.getExtension("OES_texture_float"),v=h.getExtension("OES_texture_half_float"),S=h.getExtension("WEBGL_debug_renderer_info"),x=h.getExtension("WEBGL_draw_buffers"),m=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),E=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",h.getParameter(h.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",h.getParameter(h.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",h.getParameter(h.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",h.getParameter(h.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",h.getParameter(h.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",h.getParameter(h.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",m&&h.getParameter(m.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",h.getParameter(h.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",h.getParameter(h.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",h.getParameter(h.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",h.getParameter(h.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",h.getParameter(h.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",h.getParameter(h.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",h.getParameter(h.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",h.getParameter(h.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",h.getParameter(h.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",h.getParameter(h.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",h.getParameter(h.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",h.getParameter(h.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",h.getParameter(h.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[y&&qt(h,h.RGBA,h.UNSIGNED_BYTE)?"RGBA":"",y&&qt(h,h.RGB,h.UNSIGNED_BYTE)?"RGB":"",y&&qt(h,h.LUMINANCE,h.UNSIGNED_BYTE)?"LUMINANCE":"",y&&qt(h,h.ALPHA,h.UNSIGNED_BYTE)?"ALPHA":"",y&&qt(h,h.LUMINANCE_ALPHA,h.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[v&&qt(h,h.RGBA,v.HALF_FLOAT_OES)?"RGBA":"",v&&qt(h,h.RGB,v.HALF_FLOAT_OES)?"RGB":"",v&&qt(h,h.LUMINANCE,v.HALF_FLOAT_OES)?"LUMINANCE":"",v&&qt(h,h.ALPHA,v.HALF_FLOAT_OES)?"ALPHA":"",v&&qt(h,h.LUMINANCE_ALPHA,v.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[y&&qt(h,h.RGBA,h.FLOAT)?"RGBA":"",y&&qt(h,h.RGB,h.FLOAT)?"RGB":"",y&&qt(h,h.LUMINANCE,h.FLOAT)?"LUMINANCE":"",y&&qt(h,h.ALPHA,h.FLOAT)?"ALPHA":"",y&&qt(h,h.LUMINANCE_ALPHA,h.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",x?h.getParameter(x.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",h.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",h.getParameter(h.RENDERER)],["WebGL Vendor","VENDOR",h.getParameter(h.VENDOR)],["WebGL Version","VERSION",h.getParameter(h.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",h.getParameter(h.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",S&&h.getParameter(S.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",S&&h.getParameter(S.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],O={};for(;E.length;){const[M,w,D]=E.pop();w&&(O[w]={label:M,value:D})}return e._glInformation=O,O},t.traverseAllPasses=()=>{if(e.renderPasses)for(let y=0;y<e.renderPasses.length;++y)e.renderPasses[y].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&c();const h=e.renderable.getChildRenderWindowsByReference();for(let y=0;y<h.length;++y)t.getViewNodeFor(h[y])?.traverseAllPasses()},t.copyParentContent=()=>{const h=e.rootOpenGLRenderWindow;if(!h||!e.context2D||e.children.some(S=>!!S.getSelector?.()))return;const y=h.getCanvas(),v=e.canvas;e.context2D.drawImage(y,0,y.height-v.height,v.width,v.height,0,0,v.width,v.height)},t.resizeFromChildRenderWindows=()=>{const h=e.renderable.getChildRenderWindowsByReference();if(h.length>0){const y=[0,0];for(let v=0;v<h.length;++v){const S=t.getViewNodeFor(h[v])?.getSize();S&&(y[0]=S[0]>y[0]?S[0]:y[0],y[1]=S[1]>y[1]?S[1]:y[1])}t.setSize(...y)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=h=>{if(e.viewStream===h)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=h,e.viewStream){const y=e.renderable.getRenderers()[0];y.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(v=>t.setBackgroundImage(v.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const h=xD.newInstance();return h.setOpenGLRenderWindow(t),h};function f(){e.canvas.removeEventListener("webglcontextlost",DS),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=V.chain(()=>{e.context&&N7(),t.setContainer(),t.setViewStream()},f,t.delete),t.setActiveFramebuffer=h=>{e.activeFramebuffer=h};const g=t.setSize;t.setSize=(h,y)=>{const v=g(h,y);return v&&t.invokeWindowResizeEvent({width:h,height:y}),v},t.registerGraphicsResourceUser=(h,y)=>{e._graphicsResources.has(h)||t.setGraphicsResourceForObject(h,null,null),e._graphicsResources.get(h)?.users.add(y)},t.unregisterGraphicsResourceUser=(h,y)=>{const v=e._graphicsResources.get(h);v&&(v.users.delete(y),v.users.size||(v.oglObject?.releaseGraphicsResources(t),e._graphicsResources.delete(h)))},t.getGraphicsResourceForObject=h=>e._graphicsResources.get(h),t.setGraphicsResourceForObject=(h,y,v)=>{if(!h)return;const S=e._graphicsResources.get(h);S?.oglObject?.releaseGraphicsResources(t),e._graphicsResources.set(h,{coreObject:h,oglObject:y,hash:v,users:S?.users??new Set})},t.getGraphicsMemoryInfo=()=>{let h=0;return e._graphicsResources.forEach(y=>{let{oglObject:v}=y;h+=v.getAllocatedGPUMemoryInBytes()}),h},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(h=>{let{oglObject:y}=h;y.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(h=>{t.getViewNodeFor(h)?.releaseGraphicsResources()})};const d={...t};L7.forEach(h=>{t[h]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[h](...arguments):d[h](...arguments)}})}const k7={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function CD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k7,n),O7.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=xD.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=G4.newInstance(),e.shaderCache=v7.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=X$.newInstance(),V.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),V.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),V.setGetArray(t,e,["size"],2),V.event(t,e,"imageReady"),V.event(t,e,"windowResizeEvent"),U7(t,e)}const i1=V.newInstance(CD,"vtkOpenGLRenderWindow");IO("WebGL",i1);var F7={newInstance:i1,extend:CD,pushMonitorGLContextCount:B7,popMonitorGLContextCount:_7};$n("vtkRenderWindow",i1);const $p={Unknown:0,LeftController:1,RightController:2},Yo={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},G7={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},z7={LeftButton:1,MiddleButton:2,RightButton:3};var ED={Device:$p,Input:Yo,Axis:G7,MouseButton:z7};const{Device:Tl,Input:ci}=ED,{vtkWarningMacro:ml,vtkErrorMacro:Sl,normalizeWheel:A7,vtkOnceErrorMacro:j7}=V,gs={ctrlKey:!1,altKey:!1,shiftKey:!1},Yh={"xr-standard":[ci.Trigger,ci.Grip,ci.TrackPad,ci.Thumbstick,ci.A,ci.B]},s1=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function Fo(t){t.cancelable&&t.preventDefault()}function Cl(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:i}=n;e[r]=i}),e}function H7(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,i=new Map;let s=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=x=>{Sl("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=x=>{e.interactorStyle!==x&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=x,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>ml("empty event loop");function c(x,m){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(x,m))}t.getCurrentRenderer=()=>(e.currentRenderer||c(0,0),e.currentRenderer);function u(x){const m=e._view.getCanvas(),E=m.getBoundingClientRect(),O=m.width/E.width,M=m.height/E.height,w={x:O*(x.clientX-E.left),y:M*(E.height-x.clientY+E.top),z:0,movementX:O*x.movementX,movementY:M*x.movementY};return(i.size<=1||!e.currentRenderer)&&c(w.x,w.y),w}const f=e._getScreenEventPositionFor||u;function g(x){return{controlKey:x.ctrlKey,altKey:x.altKey,shiftKey:x.shiftKey}}function d(x){const m=g(x);return{key:x.key,keyCode:x.charCode,...m}}function h(x){return x.pointerType||""}const y=()=>{if(e.container===null)return;const{container:x}=e;x.addEventListener("contextmenu",Fo),x.addEventListener("wheel",t.handleWheel),x.addEventListener("DOMMouseScroll",t.handleWheel),x.addEventListener("pointerenter",t.handlePointerEnter),x.addEventListener("pointerleave",t.handlePointerLeave),x.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),x.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),x.addEventListener("pointerup",t.handlePointerUp),x.addEventListener("pointercancel",t.handlePointerCancel),x.addEventListener("keypress",t.handleKeyPress),x.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),x.tabIndex=0,x.style.touchAction="none",x.style.userSelect="none",x.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=x=>{if(x===null)return;n.setContainer(x)&&y()};const v=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,s=1;const{container:x}=e;x&&(x.removeEventListener("contextmenu",Fo),x.removeEventListener("wheel",t.handleWheel),x.removeEventListener("DOMMouseScroll",t.handleWheel),x.removeEventListener("pointerenter",t.handlePointerEnter),x.removeEventListener("pointerleave",t.handlePointerLeave),x.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),x.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),x.removeEventListener("pointerup",t.handlePointerUp),x.removeEventListener("pointercancel",t.handlePointerCancel),x.removeEventListener("keypress",t.handleKeyPress),x.removeEventListener("keydown",t.handleKeyDown)),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),i.clear()};t.unbindEvents=()=>{v(),n.setContainer(null)},t.handleKeyPress=x=>{const m=d(x);t.keyPressEvent(m)},t.handleKeyDown=x=>{const m=d(x);t.keyDownEvent(m)},t.handleKeyUp=x=>{const m=d(x);t.keyUpEvent(m)},t.handlePointerEnter=x=>{const m={...g(x),position:f(x),deviceType:h(x)};t.pointerEnterEvent(m),m.deviceType==="mouse"&&t.mouseEnterEvent(m)},t.handlePointerLeave=x=>{const m={...g(x),position:f(x),deviceType:h(x)};t.pointerLeaveEvent(m),m.deviceType==="mouse"&&t.mouseLeaveEvent(m)},t.handlePointerDown=x=>{if(!(x.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&Fo(x),x.target.hasPointerCapture(x.pointerId)&&x.target.releasePointerCapture(x.pointerId),e.container.setPointerCapture(x.pointerId),i.has(x.pointerId)&&ml("[RenderWindowInteractor] duplicate pointerId detected"),i.set(x.pointerId,{pointerId:x.pointerId,position:f(x)}),x.pointerType){case"pen":case"touch":t.handleTouchStart(x);break;default:t.handleMouseDown(x);break}},t.handlePointerUp=x=>{if(i.has(x.pointerId))switch(e.preventDefaultOnPointerUp&&Fo(x),i.delete(x.pointerId),e.container.releasePointerCapture(x.pointerId),x.pointerType){case"pen":case"touch":t.handleTouchEnd(x);break;default:t.handleMouseUp(x);break}},t.handlePointerCancel=x=>{if(i.has(x.pointerId))switch(i.delete(x.pointerId),x.pointerType){case"pen":case"touch":t.handleTouchEnd(x);break;default:t.handleMouseUp(x);break}},t.handlePointerMove=x=>{if(i.has(x.pointerId)){const m=i.get(x.pointerId);m.position=f(x)}switch(x.pointerType){case"pen":case"touch":t.handleTouchMove(x);break;default:t.handleMouseMove(x);break}},t.handleMouseDown=x=>{const m={...g(x),position:f(x),deviceType:h(x)};switch(x.button){case 0:t.leftButtonPressEvent(m);break;case 1:t.middleButtonPressEvent(m);break;case 2:t.rightButtonPressEvent(m);break;default:Sl(`Unknown mouse button pressed: ${x.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>document.exitPointerLock?.(),t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function S(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=x=>{if(x===void 0){Sl("undefined requester, can not start animating");return}if(r.has(x)){ml("requester is already registered for animating");return}r.add(x),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=x=>{const m=Date.now()+x;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,m),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(x){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(x)){if(!m){const E=x&&x.getClassName?x.getClassName():x;ml(`${E} did not request an animation`)}return}r.delete(x),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(x,m,E)=>{x.inputSources.forEach(O=>{const M=O.gripSpace==null?null:m.getPose(O.gripSpace,E),w=O.gripSpace==null?null:m.getPose(O.targetRaySpace,E),D=O.gamepad,R=O.handedness;if(D){D.index in e.lastGamepadValues||(e.lastGamepadValues[D.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let B=0;B<D.buttons.length;++B)B in e.lastGamepadValues[D.index][R].buttons||(e.lastGamepadValues[D.index][R].buttons[B]=!1),e.lastGamepadValues[D.index][R].buttons[B]!==D.buttons[B].pressed&&M!=null&&(t.button3DEvent({gamepad:D,position:M.transform.position,orientation:M.transform.orientation,targetPosition:w.transform.position,targetOrientation:w.transform.orientation,pressed:D.buttons[B].pressed,device:O.handedness==="left"?Tl.LeftController:Tl.RightController,input:Yh[D.mapping]&&Yh[D.mapping][B]?Yh[D.mapping][B]:ci.Trigger}),e.lastGamepadValues[D.index][R].buttons[B]=D.buttons[B].pressed),e.lastGamepadValues[D.index][R].buttons[B]&&M!=null&&t.move3DEvent({gamepad:D,position:M.transform.position,orientation:M.transform.orientation,targetPosition:w.transform.position,targetOrientation:w.transform.orientation,device:O.handedness==="left"?Tl.LeftController:Tl.RightController})}})},t.handleMouseMove=x=>{const m={...g(x),position:f(x),deviceType:h(x)};e.moveTimeoutID===0?t.startMouseMoveEvent(m):(t.mouseMoveEvent(m),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const x=Date.now();e._animationFrameCount++,x-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(x-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=x,e._animationFrameCount=1),t.animationEvent(),S(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=x=>{Fo(x);const m={...A7(x),...g(x),position:f(x),deviceType:h(x)};e.wheelTimeoutID===0&&(Math.abs(m.spinY)>=.3?s=Math.abs(m.spinY):s=1),m.spinY/=s,e.wheelTimeoutID===0?(t.startMouseWheelEvent(m),t.mouseWheelEvent(m)):(t.mouseWheelEvent(m),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=x=>{const m={...g(x),position:f(x),deviceType:h(x)};switch(x.button){case 0:t.leftButtonReleaseEvent(m);break;case 1:t.middleButtonReleaseEvent(m);break;case 2:t.rightButtonReleaseEvent(m);break;default:Sl(`Unknown mouse button released: ${x.button}`);break}},t.handleTouchStart=x=>{const m=[...i.values()];if(e.recognizeGestures&&m.length>1){const E=Cl(i);if(m.length===2){const O={...g(gs),position:m[0].position,deviceType:h(x)};t.leftButtonReleaseEvent(O)}t.recognizeGesture("TouchStart",E)}else if(m.length===1){const E={...g(gs),position:f(x),deviceType:h(x)};t.leftButtonPressEvent(E)}},t.handleTouchMove=x=>{const m=[...i.values()];if(e.recognizeGestures&&m.length>1){const E=Cl(i);t.recognizeGesture("TouchMove",E)}else if(m.length===1){const E={...g(gs),position:m[0].position,deviceType:h(x)};t.mouseMoveEvent(E)}},t.handleTouchEnd=x=>{const m=[...i.values()];if(e.recognizeGestures)if(m.length===0){const E={...g(gs),position:f(x),deviceType:h(x)};t.leftButtonReleaseEvent(E)}else if(m.length===1){const E=Cl(i);t.recognizeGesture("TouchEnd",E);const O={...g(gs),position:m[0].position,deviceType:h(x)};t.leftButtonPressEvent(O)}else{const E=Cl(i);t.recognizeGesture("TouchMove",E)}else if(m.length===1){const E={...g(gs),position:m[0].position,deviceType:h(x)};t.leftButtonReleaseEvent(E)}},t.setView=x=>{e._view!==x&&(e._view=x,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>e._view?.getRenderable()?.getRenderersByReference()?.[0],t.findPokedRenderer=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const E=e._view?.getRenderable()?.getRenderers();if(!E||E.length===0)return null;E.sort((R,B)=>R.getLayer()-B.getLayer());let O=null,M=null,w=null,D=E.length;for(;D--;){const R=E[D];if(e._view.isInViewport(x,m,R)&&R.getInteractive()){w=R;break}O===null&&R.getInteractive()&&(O=R),M===null&&e._view.isInViewport(x,m,R)&&(M=R)}return w===null&&(w=O),w===null&&(w=M),w==null&&(w=E[0]),w},t.render=()=>{!t.isAnimating()&&!e.inRender&&S()},s1.forEach(x=>{const m=x.charAt(0).toLowerCase()+x.slice(1);t[`${m}Event`]=E=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){j7(`
          Can not forward events without a current renderer on the interactor.
        `);return}const M={type:x,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...E};t[`invoke${x}`](M)}}),t.recognizeGesture=(x,m)=>{if(Object.keys(m).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),x==="TouchStart"){Object.keys(m).forEach(z=>{e.startingEventPositions[z]=m[z]}),e.currentGesture="Start";return}if(x==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let E=0;const O=[],M=[];Object.keys(m).forEach(z=>{O[E]=m[z],M[E]=e.startingEventPositions[z],E++});const w=Math.sqrt((M[0].x-M[1].x)*(M[0].x-M[1].x)+(M[0].y-M[1].y)*(M[0].y-M[1].y)),D=Math.sqrt((O[0].x-O[1].x)*(O[0].x-O[1].x)+(O[0].y-O[1].y)*(O[0].y-O[1].y));let R=Ms(Math.atan2(M[1].y-M[0].y,M[1].x-M[0].x)),B=Ms(Math.atan2(O[1].y-O[0].y,O[1].x-O[0].x)),_=B-R;B=B+180>=360?B-180:B+180,R=R+180>=360?R-180:R+180,Math.abs(B-R)<Math.abs(_)&&(_=B-R);const G=[];if(G[0]=(O[0].x-M[0].x+O[1].x-M[1].x)/2,G[1]=(O[0].y-M[0].y+O[1].y-M[1].y)/2,x==="TouchMove")if(e.currentGesture==="Start"){let z=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);z<15&&(z=15);const H=Math.abs(D-w),A=D*3.1415926*Math.abs(_)/360,$=Math.sqrt(G[0]*G[0]+G[1]*G[1]);if(H>z&&H>A&&H>$){e.currentGesture="Pinch";const K={scale:1,touches:m};t.startPinchEvent(K)}else if(A>z&&A>$){e.currentGesture="Rotate";const K={rotation:0,touches:m};t.startRotateEvent(K)}else if($>z){e.currentGesture="Pan";const K={translation:[0,0],touches:m};t.startPanEvent(K)}}else{if(e.currentGesture==="Rotate"){const z={rotation:_,touches:m};t.rotateEvent(z)}if(e.currentGesture==="Pinch"){const z={scale:D/w,touches:m};t.pinchEvent(z)}if(e.currentGesture==="Pan"){const z={translation:G,touches:m};t.panEvent(z)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=x=>{e._forcedRenderer=!!x,e.currentRenderer=x},t.setContainer=x=>{v();const m=n.setContainer(x??null);return m&&y(),m},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const $7={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function MD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$7,n),V.obj(t,e),e._animationExtendedEnd=0,V.event(t,e,"RenderEvent"),s1.forEach(r=>V.event(t,e,r)),V.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),V.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),V.moveToProtected(t,e,["view"]),H7(t,e)}const W7=V.newInstance(MD,"vtkRenderWindowInteractor");var wD={newInstance:W7,extend:MD,handledEvents:s1,...ED};const{vtkErrorMacro:K7,VOID:X7}=V;function Y7(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function q7(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const Z7={computeWorldToDisplay:Y7,computeDisplayToWorld:q7};function Q7(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function i(){wD.handledEvents.forEach(s=>{t[`handle${s}`]&&e.subscribedEvents.push(e._interactor[`on${s}`](c=>e.processEvents?t[`handle${s}`](c):X7,e.priority))})}t.setInteractor=s=>{s!==e._interactor&&(r(),e._interactor=s,s&&e.enabled&&i(),t.modified())},t.setEnabled=s=>{s!==e.enabled&&(r(),s&&(e._interactor?i():K7(`
          The interactor must be set before subscribing to events
        `)),e.enabled=s,t.modified())},t.computeDisplayToWorld=(s,c,u,f)=>s?e._interactor.getView().displayToWorld(c,u,f,s):null,t.computeWorldToDisplay=(s,c,u,f)=>s?e._interactor.getView().worldToDisplay(c,u,f,s):null,t.setPriority=s=>{n.setPriority(s)&&e._interactor&&(r(),i())}}const J7={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function OD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J7,n),V.obj(t,e),V.event(t,e,"InteractionEvent"),V.event(t,e,"StartInteractionEvent"),V.event(t,e,"EndInteractionEvent"),V.get(t,e,["_interactor","enabled"]),V.setGet(t,e,["priority","processEvents"]),V.moveToProtected(t,e,["interactor"]),Q7(t,e)}const P7=V.newInstance(OD,"vtkInteractorObserver");var I7={newInstance:P7,extend:OD,...Z7};const eW={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var o1={States:eW};const{States:or}=o1,qh={Rotate:or.IS_ROTATE,Pan:or.IS_PAN,Spin:or.IS_SPIN,Dolly:or.IS_DOLLY,CameraPose:or.IS_CAMERA_POSE,WindowLevel:or.IS_WINDOW_LEVEL,Slice:or.IS_SLICE};function tW(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(qh).forEach(n=>{V.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===or.IS_NONE&&(e.state=qh[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},V.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===qh[n]&&(e.state=or.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),e.getRenderer=n=>e.focusedRenderer||n.pokedRenderer,t.handleKeyPress=n=>{const r=e._interactor;let i=null;switch(n.key){case"r":case"R":e.getRenderer(n).resetCamera(),r.render();break;case"w":case"W":i=e.getRenderer(n).getActors(),i.forEach(s=>{const c=s.getProperty();c.setRepresentationToWireframe&&c.setRepresentationToWireframe()}),r.render();break;case"s":case"S":i=e.getRenderer(n).getActors(),i.forEach(s=>{const c=s.getProperty();c.setRepresentationToSurface&&c.setRepresentationToSurface()}),r.render();break;case"v":case"V":i=e.getRenderer(n).getActors(),i.forEach(s=>{const c=s.getProperty();c.setRepresentationToPoints&&c.setRepresentationToPoints()}),r.render();break}}}const nW={state:or.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function DD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nW,n),I7.extend(t,e,n),V.setGet(t,e,["focusedRenderer"]),tW(t,e)}const rW=V.newInstance(DD,"vtkInteractorStyle");var aW={newInstance:rW,extend:DD,...o1};const{States:ar}=o1;function iW(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,i=e.getRenderer(n);switch(e.state){case ar.IS_ROTATE:t.handleMouseRotate(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case ar.IS_PAN:t.handleMousePan(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case ar.IS_DOLLY:t.handleMouseDolly(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case ar.IS_SPIN:t.handleMouseSpin(i,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===$p.RightController&&(n.input===Yo.Trigger||n.input===Yo.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===$p.RightController&&(n.input===Yo.Trigger||n.input===Yo.TrackPad)&&e.state===ar.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{e.state===ar.IS_CAMERA_POSE&&t.updateCameraPose(n)},t.updateCameraPose=n=>{const r=e.getRenderer(n).getActiveCamera(),i=r.getPhysicalTranslation(),c=.5*.05*r.getPhysicalScale(),u=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(i[0]+u[0]*c,i[1]+u[1]*c,i[2]+u[2]*c)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case ar.IS_DOLLY:t.endDolly();break;case ar.IS_PAN:t.endPan();break;case ar.IS_SPIN:t.endSpin();break;case ar.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(e.getRenderer(n),n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=e.getRenderer(n).getActiveCamera();let i=r.getFocalPoint();i=t.computeWorldToDisplay(e.getRenderer(n),i[0],i[1],i[2]);const s=i[2],c=n.translation,u=e.previousTranslation,f=t.computeDisplayToWorld(e.getRenderer(n),i[0]+c[0]-u[0],i[1]+c[1]-u[1],s),g=t.computeDisplayToWorld(e.getRenderer(n),i[0],i[1],s),d=[];d[0]=g[0]-f[0],d[1]=g[1]-f[1],d[2]=g[2]-f[2],i=r.getFocalPoint();const h=r.getPosition();r.setFocalPoint(d[0]+i[0],d[1]+i[1],d[2]+i[2]),r.setPosition(d[0]+h[0],d[1]+h[1],d[2]+h[2]),e._interactor.getLightFollowCamera()&&e.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=e.getRenderer(n).getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,s=r.x-e.previousPosition.x,c=r.y-e.previousPosition.y,u=i.getView().getViewportSize(n);let f=-.1,g=-.1;u[0]&&u[1]&&(f=-20/u[1],g=-20/u[0]);const d=s*g*e.motionFactor,h=c*f*e.motionFactor,y=n.getActiveCamera();!Number.isNaN(d)&&!Number.isNaN(h)&&(y.azimuth(d),y.elevation(h),y.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),i.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const i=e._interactor,s=n.getActiveCamera(),c=i.getView().getViewportCenter(n),u=Ms(Math.atan2(e.previousPosition.y-c[1],e.previousPosition.x-c[0])),f=Ms(Math.atan2(r.y-c[1],r.x-c[0]))-u;Number.isNaN(f)||(s.roll(f),s.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const i=n.getActiveCamera();let s=i.getFocalPoint();s=t.computeWorldToDisplay(n,s[0],s[1],s[2]);const c=s[2],u=t.computeDisplayToWorld(n,r.x,r.y,c),f=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,c),g=[];g[0]=f[0]-u[0],g[1]=f[1]-u[1],g[2]=f[2]-u[2],s=i.getFocalPoint();const d=i.getPosition();i.setFocalPoint(g[0]+s[0],g[1]+s[1],g[2]+s[2]),i.setPosition(g[0]+d[0],g[1]+d[1],g[2]+d[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const i=r.y-e.previousPosition.y,c=e._interactor.getView().getViewportCenter(n),u=e.motionFactor*i/c[1];t.dollyByFactor(n,1.1**u)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(e.getRenderer(n),r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const i=n.getActiveCamera();i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/r):(i.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const sW={motionFactor:10,zoomFactor:10};function RD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sW,n),aW.extend(t,e,n),V.setGet(t,e,["motionFactor","zoomFactor"]),iW(t,e)}const oW=V.newInstance(RD,"vtkInteractorStyleTrackballCamera");var cW={newInstance:oW,extend:RD};const uW=({geometries:t})=>{const e=I.useRef(null),n=I.useRef(null),r=I.useRef(new Map),[i,s]=I.useState(!1),[c,u]=I.useState(new Set),[f,g]=I.useState(null),[d,h]=I.useState(new Set),y=G=>{const z=G.includes("extrusion"),H=G.includes("beam");return z?H?{r:.2,g:.8,b:.4,hex:"#33cc66",name:"3D Beam"}:{r:.2,g:.6,b:1,hex:"#3399ff",name:"3D Shell"}:{r:1,g:1,b:0,hex:"#ffff00",name:"Mesh Wire"}},v=(G,z=!1)=>{const H=new Set(c);z?(t.forEach(A=>{A.id!==G&&H.add(A.id)}),H.has(G)&&H.delete(G)):H.has(G)?H.delete(G):H.add(G),u(H)},S=G=>{g(z=>z===G?null:G)},x=G=>{const z=new Set(d);z.has(G)?z.delete(G):z.add(G),h(z)};I.useEffect(()=>{if(!e.current)return;const G=l$.newInstance(),z=b$.newInstance();G.addRenderer(z);const H=F7.newInstance();H.setContainer(e.current),G.addView(H);const A=wD.newInstance();A.setView(H),A.initialize(),A.bindEvents(e.current);const $=cW.newInstance();A.setInteractorStyle($),z.setBackground(.1,.12,.15),n.current={renderWindow:G,renderer:z,openglRenderWindow:H,interactor:A};const K=new ResizeObserver(ee=>{for(const U of ee){const{width:q,height:re}=U.contentRect;H.setSize(q,re),G.render()}});return K.observe(e.current),()=>{K.disconnect(),n.current&&(n.current.interactor.delete(),n.current.openglRenderWindow.delete(),n.current.renderer.delete(),n.current.renderWindow.delete(),n.current=null)}},[]),I.useEffect(()=>{if(!n.current||!t)return;const{renderer:G,renderWindow:z}=n.current;G.removeAllActors(),r.current.clear();const H=new Set;t.forEach(A=>{A.id.includes("extrusion")||H.add(A.id)}),h(H),console.log(`[VTK Viewer] Construindo cena para ${t.length} objetos...`),t.forEach(A=>{const{data:$,id:K}=A;if(!$||!$.points)return;const ee=new Float32Array($.points),U=[];$.connectivity&&$.connectivity.forEach(k=>{U.push(k.length),U.push(...k)});const q=new Uint32Array(U),re=Os.newInstance();re.getPoints().setData(ee,3),$.vtk_type===2||$.vtk_type===3?re.getLines().setData(q):re.getPolys().setData(q);const J=Ci.newInstance();J.setInputData(re);const oe=Si.newInstance();oe.setMapper(J),K.includes("extrusion")||(J.setResolveCoincidentTopologyToPolygonOffset(),J.setResolveCoincidentTopologyPolygonOffsetParameters(-2,-2)),G.addActor(oe),r.current.set(K,oe)}),G.resetCamera(),z.render()},[t]),I.useEffect(()=>{if(!n.current)return;const{renderWindow:G}=n.current;r.current.forEach((z,H)=>{const A=z.getProperty(),$=y(H),K=H.includes("extrusion"),ee=c.has(H),U=f===H,q=d.has(H);z.setVisibility(!ee),A.setEdgeVisibility(q),A.setEdgeColor(0,0,0),U?(A.setColor(1,.4,0),A.setAmbient(.6),A.setDiffuse(.8),A.setOpacity(1),A.setLineWidth(q?3:1)):(A.setColor($.r,$.g,$.b),A.setAmbient(.1),A.setDiffuse(.9),K?(A.setRepresentationToSurface(),A.setOpacity(.9),A.setLineWidth(1)):(A.setOpacity(1),A.setLineWidth(2)))}),G.render()},[c,f,d,t]);const m=()=>{n.current&&n.current.renderWindow.render()},E=I.useCallback(()=>{n.current&&(n.current.renderer.resetCamera(),m())},[]),O=I.useCallback(G=>{if(!n.current)return;const z=n.current.renderer.getActiveCamera();z&&(z.zoom(G),m())},[]),M=I.useCallback(()=>{if(!n.current)return;const G=n.current.renderer.getActiveCamera(),z=!G.getParallelProjection();G.setParallelProjection(z),s(z),n.current.renderer.resetCamera(),m()},[]),w=I.useCallback((G,z)=>{if(!n.current)return;const H=n.current.renderer.getActiveCamera();H.setPosition(...G),H.setFocalPoint(0,0,0),H.setViewUp(...z),n.current.renderer.resetCamera(),m()},[]),D=()=>w([1,-1,1],[0,0,1]),R=()=>w([0,0,1],[0,1,0]),B=()=>w([0,-1,0],[0,0,1]),_=()=>w([1,0,0],[0,0,1]);return L.jsxs("div",{className:"w-full h-full relative overflow-hidden flex flex-col group font-sans",children:[L.jsx("div",{ref:e,className:"w-full h-full bg-transparent cursor-crosshair",style:{position:"absolute",top:0,left:0,right:0,bottom:0}}),L.jsx("div",{className:"absolute top-4 left-4 w-72 flex flex-col gap-2 z-30 max-h-[calc(100%-100px)]",children:L.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl overflow-hidden flex flex-col",children:[L.jsxs("div",{className:"px-3 py-2 bg-slate-800 border-b border-slate-700 flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center gap-2 text-slate-200",children:[L.jsx(Sd,{size:16}),L.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Scene Objects"})]}),L.jsx("span",{className:"text-xs bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded-full",children:t?.length||0})]}),L.jsx("div",{className:"p-2 flex flex-col gap-1 overflow-y-auto custom-scrollbar",children:t&&t.length>0?t.map(G=>{const z=y(G.id),H=c.has(G.id),A=f===G.id,$=d.has(G.id);return L.jsxs("div",{onClick:()=>S(G.id),className:`
                                            group/item flex items-center gap-2 p-2 rounded cursor-pointer transition-all border
                                            ${A?"bg-slate-800 border-orange-500/50 shadow-[0_0_10px_rgba(249,115,22,0.1)]":"bg-transparent border-transparent hover:bg-slate-800 hover:border-slate-700"}
                                            ${H?"opacity-50":"opacity-100"}
                                        `,children:[L.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[L.jsx("button",{onClick:K=>{K.stopPropagation(),v(G.id,K.altKey)},className:"p-1 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition-colors",title:"Toggle Visibility (Alt+Click to Isolate)",children:H?L.jsx(g_,{size:14}):L.jsx(Bm,{size:14})}),L.jsx("button",{onClick:K=>{K.stopPropagation(),x(G.id)},className:`
                                                    p-1 rounded transition-colors
                                                    ${$?"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700":"text-slate-600 hover:text-slate-400 hover:bg-slate-700"}
                                                `,title:"Toggle Mesh Edges (Wireframe)",children:L.jsx(x_,{size:14})})]}),L.jsx("div",{className:"w-2.5 h-2.5 rounded-full shadow-sm ring-1 ring-white/10 shrink-0 mx-1",style:{backgroundColor:A?"#F97316":z.hex,boxShadow:A?"0 0 8px #F97316":"none"}}),L.jsx("div",{className:"flex flex-col min-w-0 flex-1",children:L.jsx("span",{className:`text-xs truncate ${A?"text-orange-400 font-bold":"text-slate-200 font-medium"}`,children:G.id.replace("_extrusion.json","").replace(".json","")})}),A&&L.jsx(w_,{size:12,className:"text-orange-500"})]},G.id)}):L.jsx("div",{className:"p-4 text-center text-slate-500 text-xs italic",children:"Loading geometry..."})})]})}),L.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-30 pointer-events-none",children:[L.jsxs("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg p-1.5 shadow-xl flex flex-col gap-1 pointer-events-auto",children:[L.jsx(ya,{onClick:D,icon:L.jsx(a_,{size:18}),title:"Isometric View"}),L.jsx(ya,{onClick:R,icon:L.jsx(S_,{size:18}),title:"Top View"}),L.jsx(ya,{onClick:B,icon:L.jsx(e_,{size:18}),title:"Front View"}),L.jsx(ya,{onClick:_,icon:L.jsx(PB,{size:18}),title:"Right View"})]}),L.jsxs("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg p-1.5 shadow-xl flex flex-col gap-1 pointer-events-auto",children:[L.jsx(ya,{onClick:E,icon:L.jsx(E_,{size:18}),title:"Fit All"}),L.jsx("div",{className:"h-px bg-slate-700 my-0.5"}),L.jsx(ya,{onClick:()=>O(1.2),icon:L.jsx(F_,{size:18}),title:"Zoom In"}),L.jsx(ya,{onClick:()=>O(.8),icon:L.jsx(z_,{size:18}),title:"Zoom Out"})]}),L.jsx("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg p-1.5 shadow-xl flex flex-col gap-1 pointer-events-auto",children:L.jsx(ya,{onClick:M,icon:L.jsx(Bm,{size:18}),active:i,title:i?"Perspective":"Orthographic"})})]}),L.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex justify-between items-end pointer-events-none opacity-50 group-hover:opacity-100 transition-opacity",children:[L.jsxs("div",{className:"text-[10px] text-slate-400 bg-black/40 px-2 py-1 rounded backdrop-blur-sm",children:[L.jsx("span",{className:"font-bold text-slate-200",children:"LMB:"})," Rotate |",L.jsx("span",{className:"font-bold text-slate-200",children:"Shift+LMB:"})," Pan |",L.jsx("span",{className:"font-bold text-slate-200",children:"RMB:"})," Zoom"]}),L.jsx("div",{className:"text-[10px] font-mono text-slate-500",children:"VTK.js Viewport"})]})]})},ya=({onClick:t,icon:e,title:n,active:r=!1})=>L.jsx("button",{onClick:t,title:n,className:`
            p-1.5 rounded-md transition-all active:scale-95
            flex items-center justify-center
            ${r?"bg-blue-600 text-white shadow-sm":"text-slate-400 hover:bg-slate-700 hover:text-white"}
        `,children:e});function lW({onBack:t,projectPath:e,setProjectPath:n}){const[r,i]=I.useState(!1),[s,c]=I.useState("mesh"),[u,f]=I.useState({geometries:[],materials:[],restrictions:[],loads:[],load_cases:[]}),[g,d]=I.useState([]),[h,y]=I.useState([]),[v,S]=I.useState({}),[x,m]=I.useState([]),[E,O]=I.useState(!1),[M,w]=I.useState([]);I.useEffect(()=>{if(e&&x.length>0){const ee=x.filter(U=>U.toLowerCase().endsWith(".med"));console.log(`[MeshDNA] Multi-Mesh Protocol: Detected ${ee.length} files.`),ee.forEach(U=>{D(U)})}},[e,x]);const D=async ee=>{try{const U=window.location.port||"3000";console.log(`[MeshDNA] Fetching from Port: ${U}`);const re=await(await fetch("/api/mesh_dna",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:`${e}\\${ee}`})})).json();if(re.status==="success"){const J=re.data.groups;console.log(`[MeshDNA] Groups Received from ${ee}:`,Object.keys(J));const oe=window;oe.projectState||(oe.projectState={}),oe.projectState.meshes||(oe.projectState.meshes={}),oe.projectState.meshes[ee]=re.data,S(te=>({...te,[ee]:J}));const k=Object.keys(J);d(te=>Array.from(new Set([...te,...k])));const Z=k.filter(te=>J[te].category==="Node");y(te=>Array.from(new Set([...te,...Z]))),window.dispatchEvent(new Event("meshDataLoaded"))}}catch(U){console.error("[MeshDNA] Fetch failed:",U)}};I.useEffect(()=>{s==="3d-view"&&e&&(async()=>{try{const U=await fetch("/api/vtk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_path:e})});if(!U.ok){console.error("[VTK] Erro na gerao:",U.statusText);return}const re=await(await fetch("/api/get_vtk_geometry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e})})).json();re.status==="success"&&(console.log(" [PARENT] Dados prontos para entrega:",re.data),w(re.data))}catch(U){console.error("[VTK] Erro na sequncia:",U)}})()},[s,e]);const R=async()=>{if(e){O(!0);try{await B();const U=await(await fetch("/api/run_simulation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e})})).json();U.status==="success"?alert(`Simulation Completed!
Check "simulation_files/message" for details.`):alert(`Simulation Failed:
`+U.message)}catch(ee){console.error(ee),alert("Error running simulation")}finally{O(!1)}}},B=async()=>{if(e)try{console.log("Saving project...");const U=await(await fetch("/api/save_project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e,config:{...u,meshes:x.map(q=>({name:q.split(".")[0].replace(/[- ]/g,"_"),filename:q}))}})})).json();U.status==="success"?alert("Project Saved & Generated Successfully!"):alert("Save Failed: "+U.message)}catch(ee){console.error(ee),alert("Error saving project")}},_=I.useCallback(ee=>{f(U=>{const q=new Set(ee.map(J=>J._category).filter(Boolean)),re=U.geometries.filter(J=>!q.has(J._category));return{...U,geometries:[...re,...ee]}})},[]),G=I.useCallback(ee=>{f(U=>({...U,materials:ee}))},[]),z=I.useCallback(ee=>{f(U=>({...U,restrictions:ee}))},[]),H=I.useCallback(ee=>{f(U=>({...U,loads:ee}))},[]),A=I.useCallback(ee=>{f(U=>({...U,load_cases:ee}))},[]),$=async()=>{try{i(!0);const U=await(await fetch("/api/open_folder_dialog")).json();if(U.status==="success"&&U.path){n(U.path),m([]),f({geometries:[],materials:[],restrictions:[],loads:[],load_cases:[]}),i(!0);const re=await(await fetch("/api/scan_workspace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:U.path})})).json();if(re.status==="success"){re.files&&re.files.mesh?m(re.files.mesh):m([]);const oe=await(await fetch("/api/read_mesh_groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:U.path})})).json();if(oe.status==="success"&&oe.data&&oe.data.groups){const k=oe.data.groups,Z=Object.keys(k),te=Z.filter(ce=>k[ce].type==="node");console.log("ROOT: Groups centralized (DNA-only mode):",{nodes:te,allCount:Z.length}),f(ce=>{const he=Z.filter(fe=>k[fe].type!=="node").map(fe=>{const Te=ce.geometries.find(Ze=>Ze.group===fe);return Te||{group:fe,type:"3D",phenomenon:"MECANIQUE",_category:"3D"}});return{...ce,geometries:he}})}}}}catch(ee){console.error("Failed to open folder:",ee)}finally{i(!1)}},K=[{id:"mesh",label:"Mesh",icon:""},{id:"model",label:"Model",icon:""},{id:"geometry",label:"Geometry",icon:""},{id:"3d-view",label:"3D View",icon:""},{id:"material",label:"Material",icon:""},{id:"restrictions",label:"Restrictions",icon:""},{id:"loads",label:"Loads",icon:""},{id:"loadcases",label:"Load Cases",icon:""}];return L.jsxs("div",{className:"h-full w-full flex flex-col bg-slate-900",children:[L.jsxs("div",{className:"h-14 bg-slate-800 border-b border-slate-700 flex items-center px-4 gap-3 shrink-0",children:[L.jsxs(cr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:[L.jsx(QB,{className:"w-4 h-4"}),L.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),L.jsx("div",{className:"h-8 w-px bg-slate-700"}),L.jsxs(cr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:$,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors disabled:opacity-50",children:[L.jsx(Po,{className:"w-4 h-4"}),L.jsx("span",{className:"text-sm font-medium",children:r?"Opening...":"Open Project"})]}),e&&L.jsxs(L.Fragment,{children:[L.jsxs(cr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:B,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg transition-colors",children:[L.jsx(fE,{className:"w-4 h-4"}),L.jsx("span",{className:"text-sm font-medium",children:"Save Project"})]}),L.jsxs(cr.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:R,disabled:E,className:`flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg transition-colors ${E?"opacity-50":""}`,children:[L.jsx(D_,{className:"w-4 h-4"}),L.jsx("span",{className:"text-sm font-medium",children:E?"Running...":"Run Simulation"})]})]}),e&&L.jsx("div",{className:"ml-auto text-sm text-slate-400 font-mono truncate max-w-md",children:e})]}),L.jsx("div",{className:"flex-1 flex overflow-hidden",children:e?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"w-48 bg-slate-800 border-r border-slate-700 p-4 space-y-2",children:K.map(ee=>L.jsxs("button",{onClick:()=>c(ee.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${s===ee.id?"bg-blue-600 text-white shadow-lg":"bg-slate-700/50 text-slate-300 hover:bg-slate-700"}`,children:[L.jsx("span",{className:"text-xl",children:ee.icon}),L.jsx("span",{className:"font-medium text-sm",children:ee.label})]},ee.id))}),L.jsxs("div",{className:"flex-1 overflow-hidden",children:[s==="model"&&L.jsx(H_,{projectPath:e,meshGroups:v,currentGeometries:u.geometries,onUpdate:_},e),s==="mesh"&&L.jsx(Z_,{projectPath:e,meshes:x},e),s==="material"&&L.jsx($_,{projectPath:e,availableGroups:g,nodeGroups:h,initialMaterials:u.materials,onUpdate:G},e),s==="geometry"&&L.jsx(Y_,{projectPath:e,meshGroups:v,availableGeometries:u.geometries,onUpdate:_},e),s==="3d-view"&&L.jsx(uW,{projectPath:e,meshKey:Date.now(),geometries:M}),s==="restrictions"&&L.jsx(W_,{projectPath:e,availableGroups:h.length>0?h:g,initialRestrictions:u.restrictions,onUpdate:z},e),s==="loads"&&L.jsx(K_,{projectPath:e,availableGroups:g,initialLoads:u.loads,onUpdate:H},e),s==="loadcases"&&L.jsx(q_,{projectPath:e,availableLoads:u.loads,availableRestrictions:u.restrictions,availableGroups:g,initialLoadCases:u.load_cases,onUpdate:A},e)]})]}):L.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[L.jsx(Po,{className:"w-24 h-24 text-slate-600 mb-6"}),L.jsx("h2",{className:"text-2xl font-semibold text-slate-400 mb-2",children:"No Project Selected"}),L.jsx("p",{className:"text-slate-500 text-center max-w-md",children:'Click "Open Project" to select a folder containing your geometry and mesh files.'})]})})]})}const Hl=[],fW=console.log,gW=console.error,hW=console.warn;console.log=(...t)=>{fW(...t),c1("log",t)};console.error=(...t)=>{gW(...t),c1("error",t)};console.warn=(...t)=>{hW(...t),c1("warn",t)};function c1(t,e){const n=e.map(i=>typeof i=="object"?JSON.stringify(i):String(i)).join(" "),r={id:Date.now()+Math.random(),timestamp:new Date().toLocaleTimeString(),type:t,message:n};Hl.forEach(i=>i(r))}function pW(){const[t,e]=I.useState(!1),[n,r]=I.useState([]),i=I.useRef(null);return I.useEffect(()=>{const s=c=>{r(u=>[...u.slice(-100),c])};return Hl.push(s),()=>{const c=Hl.indexOf(s);c!==-1&&Hl.splice(c,1)}},[]),I.useEffect(()=>{t&&i.current&&i.current.scrollIntoView({behavior:"smooth"})},[n,t]),t?L.jsxs("div",{className:"fixed bottom-0 right-0 w-full md:w-2/3 lg:w-1/2 h-1/3 min-h-[300px] z-[9999] bg-slate-950 border-t border-l border-slate-800 shadow-2xl flex flex-col font-mono text-xs",children:[L.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-900 border-b border-slate-800 shrink-0",children:[L.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-bold uppercase tracking-wider",children:[L.jsx(_m,{className:"w-3 h-3"}),L.jsx("span",{children:"Debug Console"})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("button",{onClick:()=>r([]),className:"p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white",title:"Clear",children:L.jsx(Ec,{className:"w-4 h-4"})}),L.jsx("button",{onClick:()=>e(!1),className:"p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white",title:"Close",children:L.jsx(hE,{className:"w-4 h-4"})})]})]}),L.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-1",children:[n.map(s=>L.jsxs("div",{className:"flex gap-2 font-mono",children:[L.jsxs("span",{className:"text-slate-600 shrink-0",children:["[",s.timestamp,"]"]}),L.jsx("span",{className:`break-all whitespace-pre-wrap ${s.type==="error"?"text-red-400":s.type==="warn"?"text-yellow-400":"text-slate-300"}`,children:s.message})]},s.id)),L.jsx("div",{ref:i})]})]}):L.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-4 right-4 z-[9999] bg-slate-900 border border-slate-700 p-2 rounded-full shadow-lg hover:bg-slate-800 transition-colors text-slate-400 hover:text-white",title:"Open Debug Console",children:L.jsx(_m,{className:"w-5 h-5"})})}function dW(){const[t,e]=I.useState("dashboard"),[n,r]=I.useState(null);return L.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-950",children:[L.jsx("div",{className:"h-10 bg-slate-900 border-b border-slate-800 flex items-center px-4 shrink-0",children:L.jsxs("h1",{className:"text-xs font-bold tracking-widest text-slate-400 uppercase",children:["ProSolve Professional ",t==="structural"&&"/ Structural"]})}),L.jsxs("div",{className:"flex-1 overflow-hidden",children:[t==="dashboard"&&L.jsx(j_,{onNavigate:i=>e(i)}),t==="structural"&&L.jsx(lW,{onBack:()=>e("dashboard"),projectPath:n,setProjectPath:r})]}),L.jsx(pW,{})]})}lL.createRoot(document.getElementById("root")).render(L.jsx(nL.StrictMode,{children:L.jsx(dW,{})}));
