(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Di(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function CN(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Qg={exports:{}},No={};var Sm;function EN(){if(Sm)return No;Sm=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,i){var c=null;if(i!==void 0&&(c=""+i),s.key!==void 0&&(c=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:t,type:r,key:c,ref:s!==void 0?s:null,props:i}}return No.Fragment=e,No.jsx=n,No.jsxs=n,No}var Cm;function wN(){return Cm||(Cm=1,Qg.exports=EN()),Qg.exports}var S=wN(),Pg={exports:{}},me={};var Em;function MN(){if(Em)return me;Em=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),y=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,T={};function w(U,Y,ee){this.props=U,this.context=Y,this.refs=T,this.updater=ee||E}w.prototype.isReactComponent={},w.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},w.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function D(){}D.prototype=w.prototype;function M(U,Y,ee){this.props=U,this.context=Y,this.refs=T,this.updater=ee||E}var O=M.prototype=new D;O.constructor=M,x(O,w.prototype),O.isPureReactComponent=!0;var R=Array.isArray;function b(){}var L={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function B(U,Y,ee){var ce=ee.ref;return{$$typeof:t,type:U,key:Y,ref:ce!==void 0?ce:null,props:ee}}function j(U,Y){return B(U.type,Y,U.props)}function z(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function $(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(ee){return Y[ee]})}var W=/\/+/g;function Z(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?$(""+U.key):Y.toString(36)}function te(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(b,b):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function F(U,Y,ee,ce,he){var fe=typeof U;(fe==="undefined"||fe==="boolean")&&(U=null);var Te=!1;if(U===null)Te=!0;else switch(fe){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(U.$$typeof){case t:case e:Te=!0;break;case p:return Te=U._init,F(Te(U._payload),Y,ee,ce,he)}}if(Te)return he=he(U),Te=ce===""?"."+Z(U,0):ce,R(he)?(ee="",Te!=null&&(ee=Te.replace(W,"$&/")+"/"),F(he,Y,ee,"",function(It){return It})):he!=null&&(z(he)&&(he=j(he,ee+(he.key==null||U&&U.key===he.key?"":(""+he.key).replace(W,"$&/")+"/")+Te)),Y.push(he)),1;Te=0;var Ze=ce===""?".":ce+":";if(R(U))for(var je=0;je<U.length;je++)ce=U[je],fe=Ze+Z(ce,je),Te+=F(ce,Y,ee,fe,he);else if(je=v(U),typeof je=="function")for(U=je.call(U),je=0;!(ce=U.next()).done;)ce=ce.value,fe=Ze+Z(ce,je++),Te+=F(ce,Y,ee,fe,he);else if(fe==="object"){if(typeof U.then=="function")return F(te(U),Y,ee,ce,he);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Te}function P(U,Y,ee){if(U==null)return U;var ce=[],he=0;return F(U,ce,"","",function(fe){return Y.call(ee,fe,he++)}),ce}function ae(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(ee){(U._status===0||U._status===-1)&&(U._status=1,U._result=ee)},function(ee){(U._status===0||U._status===-1)&&(U._status=2,U._result=ee)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var J=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},oe={map:P,forEach:function(U,Y,ee){P(U,function(){Y.apply(this,arguments)},ee)},count:function(U){var Y=0;return P(U,function(){Y++}),Y},toArray:function(U){return P(U,function(Y){return Y})||[]},only:function(U){if(!z(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return me.Activity=h,me.Children=oe,me.Component=w,me.Fragment=n,me.Profiler=s,me.PureComponent=M,me.StrictMode=r,me.Suspense=f,me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,me.__COMPILER_RUNTIME={__proto__:null,c:function(U){return L.H.useMemoCache(U)}},me.cache=function(U){return function(){return U.apply(null,arguments)}},me.cacheSignal=function(){return null},me.cloneElement=function(U,Y,ee){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ce=x({},U.props),he=U.key;if(Y!=null)for(fe in Y.key!==void 0&&(he=""+Y.key),Y)!k.call(Y,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&Y.ref===void 0||(ce[fe]=Y[fe]);var fe=arguments.length-2;if(fe===1)ce.children=ee;else if(1<fe){for(var Te=Array(fe),Ze=0;Ze<fe;Ze++)Te[Ze]=arguments[Ze+2];ce.children=Te}return B(U.type,he,ce)},me.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:i,_context:U},U},me.createElement=function(U,Y,ee){var ce,he={},fe=null;if(Y!=null)for(ce in Y.key!==void 0&&(fe=""+Y.key),Y)k.call(Y,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(he[ce]=Y[ce]);var Te=arguments.length-2;if(Te===1)he.children=ee;else if(1<Te){for(var Ze=Array(Te),je=0;je<Te;je++)Ze[je]=arguments[je+2];he.children=Ze}if(U&&U.defaultProps)for(ce in Te=U.defaultProps,Te)he[ce]===void 0&&(he[ce]=Te[ce]);return B(U,fe,he)},me.createRef=function(){return{current:null}},me.forwardRef=function(U){return{$$typeof:l,render:U}},me.isValidElement=z,me.lazy=function(U){return{$$typeof:p,_payload:{_status:-1,_result:U},_init:ae}},me.memo=function(U,Y){return{$$typeof:g,type:U,compare:Y===void 0?null:Y}},me.startTransition=function(U){var Y=L.T,ee={};L.T=ee;try{var ce=U(),he=L.S;he!==null&&he(ee,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(b,J)}catch(fe){J(fe)}finally{Y!==null&&ee.types!==null&&(Y.types=ee.types),L.T=Y}},me.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},me.use=function(U){return L.H.use(U)},me.useActionState=function(U,Y,ee){return L.H.useActionState(U,Y,ee)},me.useCallback=function(U,Y){return L.H.useCallback(U,Y)},me.useContext=function(U){return L.H.useContext(U)},me.useDebugValue=function(){},me.useDeferredValue=function(U,Y){return L.H.useDeferredValue(U,Y)},me.useEffect=function(U,Y){return L.H.useEffect(U,Y)},me.useEffectEvent=function(U){return L.H.useEffectEvent(U)},me.useId=function(){return L.H.useId()},me.useImperativeHandle=function(U,Y,ee){return L.H.useImperativeHandle(U,Y,ee)},me.useInsertionEffect=function(U,Y){return L.H.useInsertionEffect(U,Y)},me.useLayoutEffect=function(U,Y){return L.H.useLayoutEffect(U,Y)},me.useMemo=function(U,Y){return L.H.useMemo(U,Y)},me.useOptimistic=function(U,Y){return L.H.useOptimistic(U,Y)},me.useReducer=function(U,Y,ee){return L.H.useReducer(U,Y,ee)},me.useRef=function(U){return L.H.useRef(U)},me.useState=function(U){return L.H.useState(U)},me.useSyncExternalStore=function(U,Y,ee){return L.H.useSyncExternalStore(U,Y,ee)},me.useTransition=function(){return L.H.useTransition()},me.version="19.2.3",me}var wm;function tp(){return wm||(wm=1,Pg.exports=MN()),Pg.exports}var Q=tp();const bN=Di(Q);var Jg={exports:{}},Lo={},Ig={exports:{}},eh={};var Mm;function ON(){return Mm||(Mm=1,(function(t){function e(F,P){var ae=F.length;F.push(P);e:for(;0<ae;){var J=ae-1>>>1,oe=F[J];if(0<s(oe,P))F[J]=P,F[ae]=oe,ae=J;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var P=F[0],ae=F.pop();if(ae!==P){F[0]=ae;e:for(var J=0,oe=F.length,U=oe>>>1;J<U;){var Y=2*(J+1)-1,ee=F[Y],ce=Y+1,he=F[ce];if(0>s(ee,ae))ce<oe&&0>s(he,ee)?(F[J]=he,F[ce]=ae,J=ce):(F[J]=ee,F[Y]=ae,J=Y);else if(ce<oe&&0>s(he,ae))F[J]=he,F[ce]=ae,J=ce;else break e}}return P}function s(F,P){var ae=F.sortIndex-P.sortIndex;return ae!==0?ae:F.id-P.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var f=[],g=[],p=1,h=null,y=3,v=!1,E=!1,x=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function O(F){for(var P=n(g);P!==null;){if(P.callback===null)r(g);else if(P.startTime<=F)r(g),P.sortIndex=P.expirationTime,e(f,P);else break;P=n(g)}}function R(F){if(x=!1,O(F),!E)if(n(f)!==null)E=!0,b||(b=!0,$());else{var P=n(g);P!==null&&te(R,P.startTime-F)}}var b=!1,L=-1,k=5,B=-1;function j(){return T?!0:!(t.unstable_now()-B<k)}function z(){if(T=!1,b){var F=t.unstable_now();B=F;var P=!0;try{e:{E=!1,x&&(x=!1,D(L),L=-1),v=!0;var ae=y;try{t:{for(O(F),h=n(f);h!==null&&!(h.expirationTime>F&&j());){var J=h.callback;if(typeof J=="function"){h.callback=null,y=h.priorityLevel;var oe=J(h.expirationTime<=F);if(F=t.unstable_now(),typeof oe=="function"){h.callback=oe,O(F),P=!0;break t}h===n(f)&&r(f),O(F)}else r(f);h=n(f)}if(h!==null)P=!0;else{var U=n(g);U!==null&&te(R,U.startTime-F),P=!1}}break e}finally{h=null,y=ae,v=!1}P=void 0}}finally{P?$():b=!1}}}var $;if(typeof M=="function")$=function(){M(z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=z,$=function(){Z.postMessage(null)}}else $=function(){w(z,0)};function te(F,P){L=w(function(){F(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(F){switch(y){case 1:case 2:case 3:var P=3;break;default:P=y}var ae=y;y=P;try{return F()}finally{y=ae}},t.unstable_requestPaint=function(){T=!0},t.unstable_runWithPriority=function(F,P){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ae=y;y=F;try{return P()}finally{y=ae}},t.unstable_scheduleCallback=function(F,P,ae){var J=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?J+ae:J):ae=J,F){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ae+oe,F={id:p++,callback:P,priorityLevel:F,startTime:ae,expirationTime:oe,sortIndex:-1},ae>J?(F.sortIndex=ae,e(g,F),n(f)===null&&F===n(g)&&(x?(D(L),L=-1):x=!0,te(R,ae-J))):(F.sortIndex=oe,e(f,F),E||v||(E=!0,b||(b=!0,$()))),F},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(F){var P=y;return function(){var ae=y;y=P;try{return F.apply(this,arguments)}finally{y=ae}}}})(eh)),eh}var bm;function DN(){return bm||(bm=1,Ig.exports=ON()),Ig.exports}var th={exports:{}},zt={};var Om;function RN(){if(Om)return zt;Om=1;var t=tp();function e(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(f,g,p){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:f,containerInfo:g,implementation:p}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,zt.createPortal=function(f,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return i(f,g,null,p)},zt.flushSync=function(f){var g=c.T,p=r.p;try{if(c.T=null,r.p=2,f)return f()}finally{c.T=g,r.p=p,r.d.f()}},zt.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(f,g))},zt.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},zt.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var p=g.as,h=l(p,g.crossOrigin),y=typeof g.integrity=="string"?g.integrity:void 0,v=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?r.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:h,integrity:y,fetchPriority:v}):p==="script"&&r.d.X(f,{crossOrigin:h,integrity:y,fetchPriority:v,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zt.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=l(g.as,g.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(f)},zt.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,h=l(p,g.crossOrigin);r.d.L(f,p,{crossOrigin:h,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zt.preloadModule=function(f,g){if(typeof f=="string")if(g){var p=l(g.as,g.crossOrigin);r.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(f)},zt.requestFormReset=function(f){r.d.r(f)},zt.unstable_batchedUpdates=function(f,g){return f(g)},zt.useFormState=function(f,g,p){return c.H.useFormState(f,g,p)},zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},zt.version="19.2.3",zt}var Dm;function NN(){if(Dm)return th.exports;Dm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),th.exports=RN(),th.exports}var Rm;function LN(){if(Rm)return Lo;Rm=1;var t=DN(),e=tp(),n=NN();function r(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function i(a){var o=a,u=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(u=o.return),a=o.return;while(a)}return o.tag===3?u:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function l(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(i(a)!==a)throw Error(r(188))}function g(a){var o=a.alternate;if(!o){if(o=i(a),o===null)throw Error(r(188));return o!==a?null:a}for(var u=a,d=o;;){var m=u.return;if(m===null)break;var C=m.alternate;if(C===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===C.child){for(C=m.child;C;){if(C===u)return f(m),a;if(C===d)return f(m),o;C=C.sibling}throw Error(r(188))}if(u.return!==d.return)u=m,d=C;else{for(var N=!1,_=m.child;_;){if(_===u){N=!0,u=m,d=C;break}if(_===d){N=!0,d=m,u=C;break}_=_.sibling}if(!N){for(_=C.child;_;){if(_===u){N=!0,u=C,d=m;break}if(_===d){N=!0,d=C,u=m;break}_=_.sibling}if(!N)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var h=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),M=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function $(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}var W=Symbol.for("react.client.reference");function Z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===W?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case b:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case E:return"Portal";case M:return a.displayName||"Context";case D:return(a._context.displayName||"Context")+".Consumer";case O:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:Z(a.type)||"Memo";case k:o=a._payload,a=a._init;try{return Z(a(o))}catch{}}return null}var te=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},J=[],oe=-1;function U(a){return{current:a}}function Y(a){0>oe||(a.current=J[oe],J[oe]=null,oe--)}function ee(a,o){oe++,J[oe]=a.current,a.current=o}var ce=U(null),he=U(null),fe=U(null),Te=U(null);function Ze(a,o){switch(ee(fe,o),ee(he,a),ee(ce,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Wv(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Wv(o),a=Kv(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Y(ce),ee(ce,a)}function je(){Y(ce),Y(he),Y(fe)}function It(a){a.memoizedState!==null&&ee(Te,a);var o=ce.current,u=Kv(o,a.type);o!==u&&(ee(he,a),ee(ce,u))}function ws(a){he.current===a&&(Y(ce),Y(he)),Te.current===a&&(Y(Te),Mo._currentValue=ae)}var Va,Gr;function _a(a){if(Va===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Va=o&&o[1]||"",Gr=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Va+a+Gr}var _f=!1;function kf(a,o){if(!a||_f)return"";_f=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(I){var q=I}Reflect.construct(a,[],se)}else{try{se.call()}catch(I){q=I}a.call(se.prototype)}}else{try{throw Error()}catch(I){q=I}(se=a())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(I){if(I&&q&&typeof I.stack=="string")return[I.stack,q.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=d.DetermineComponentFrameRoot(),N=C[0],_=C[1];if(N&&_){var G=N.split(`
`),X=_.split(`
`);for(m=d=0;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(d===G.length||m===X.length)for(d=G.length-1,m=X.length-1;1<=d&&0<=m&&G[d]!==X[m];)m--;for(;1<=d&&0<=m;d--,m--)if(G[d]!==X[m]){if(d!==1||m!==1)do if(d--,m--,0>m||G[d]!==X[m]){var ne=`
`+G[d].replace(" at new "," at ");return a.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",a.displayName)),ne}while(1<=d&&0<=m);break}}}finally{_f=!1,Error.prepareStackTrace=u}return(u=a?a.displayName||a.name:"")?_a(u):""}function IO(a,o){switch(a.tag){case 26:case 27:case 5:return _a(a.type);case 16:return _a("Lazy");case 13:return a.child!==o&&o!==null?_a("Suspense Fallback"):_a("Suspense");case 19:return _a("SuspenseList");case 0:case 15:return kf(a.type,!1);case 11:return kf(a.type.render,!1);case 1:return kf(a.type,!0);case 31:return _a("Activity");default:return""}}function S1(a){try{var o="",u=null;do o+=IO(a,u),u=a,a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Bf=Object.prototype.hasOwnProperty,Uf=t.unstable_scheduleCallback,Ff=t.unstable_cancelCallback,eD=t.unstable_shouldYield,tD=t.unstable_requestPaint,ln=t.unstable_now,nD=t.unstable_getCurrentPriorityLevel,C1=t.unstable_ImmediatePriority,E1=t.unstable_UserBlockingPriority,jc=t.unstable_NormalPriority,rD=t.unstable_LowPriority,w1=t.unstable_IdlePriority,aD=t.log,sD=t.unstable_setDisableYieldValue,Ui=null,un=null;function zr(a){if(typeof aD=="function"&&sD(a),un&&typeof un.setStrictMode=="function")try{un.setStrictMode(Ui,a)}catch{}}var fn=Math.clz32?Math.clz32:cD,iD=Math.log,oD=Math.LN2;function cD(a){return a>>>=0,a===0?32:31-(iD(a)/oD|0)|0}var Gc=256,zc=262144,Ac=4194304;function ka(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function $c(a,o,u){var d=a.pendingLanes;if(d===0)return 0;var m=0,C=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var _=d&134217727;return _!==0?(d=_&~C,d!==0?m=ka(d):(N&=_,N!==0?m=ka(N):u||(u=_&~a,u!==0&&(m=ka(u))))):(_=d&~C,_!==0?m=ka(_):N!==0?m=ka(N):u||(u=d&~a,u!==0&&(m=ka(u)))),m===0?0:o!==0&&o!==m&&(o&C)===0&&(C=m&-m,u=o&-o,C>=u||C===32&&(u&4194048)!==0)?o:m}function Fi(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function lD(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M1(){var a=Ac;return Ac<<=1,(Ac&62914560)===0&&(Ac=4194304),a}function jf(a){for(var o=[],u=0;31>u;u++)o.push(a);return o}function ji(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function uD(a,o,u,d,m,C){var N=a.pendingLanes;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=u,a.entangledLanes&=u,a.errorRecoveryDisabledLanes&=u,a.shellSuspendCounter=0;var _=a.entanglements,G=a.expirationTimes,X=a.hiddenUpdates;for(u=N&~u;0<u;){var ne=31-fn(u),se=1<<ne;_[ne]=0,G[ne]=-1;var q=X[ne];if(q!==null)for(X[ne]=null,ne=0;ne<q.length;ne++){var I=q[ne];I!==null&&(I.lane&=-536870913)}u&=~se}d!==0&&b1(a,d,0),C!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=C&~(N&~o))}function b1(a,o,u){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-fn(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|u&261930}function O1(a,o){var u=a.entangledLanes|=o;for(a=a.entanglements;u;){var d=31-fn(u),m=1<<d;m&o|a[d]&o&&(a[d]|=o),u&=~m}}function D1(a,o){var u=o&-o;return u=(u&42)!==0?1:Gf(u),(u&(a.suspendedLanes|o))!==0?0:u}function Gf(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function zf(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function R1(){var a=P.p;return a!==0?a:(a=window.event,a===void 0?32:dm(a.type))}function N1(a,o){var u=P.p;try{return P.p=a,o()}finally{P.p=u}}var Ar=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Ar,en="__reactProps$"+Ar,Ms="__reactContainer$"+Ar,Af="__reactEvents$"+Ar,fD="__reactListeners$"+Ar,gD="__reactHandles$"+Ar,L1="__reactResources$"+Ar,Gi="__reactMarker$"+Ar;function $f(a){delete a[Lt],delete a[en],delete a[Af],delete a[fD],delete a[gD]}function bs(a){var o=a[Lt];if(o)return o;for(var u=a.parentNode;u;){if(o=u[Ms]||u[Lt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(a=Jv(a);a!==null;){if(u=a[Lt])return u;a=Jv(a)}return o}a=u,u=a.parentNode}return null}function Os(a){if(a=a[Lt]||a[Ms]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function zi(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(r(33))}function Ds(a){var o=a[L1];return o||(o=a[L1]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function bt(a){a[Gi]=!0}var V1=new Set,_1={};function Ba(a,o){Rs(a,o),Rs(a+"Capture",o)}function Rs(a,o){for(_1[a]=o,a=0;a<o.length;a++)V1.add(o[a])}var hD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),k1={},B1={};function dD(a){return Bf.call(B1,a)?!0:Bf.call(k1,a)?!1:hD.test(a)?B1[a]=!0:(k1[a]=!0,!1)}function Hc(a,o,u){if(dD(o))if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+u)}}function Wc(a,o,u){if(u===null)a.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+u)}}function gr(a,o,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttributeNS(o,u,""+d)}}function En(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function U1(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function pD(a,o,u){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,C=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return m.call(this)},set:function(N){u=""+N,C.call(this,N)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(N){u=""+N},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Hf(a){if(!a._valueTracker){var o=U1(a)?"checked":"value";a._valueTracker=pD(a,o,""+a[o])}}function F1(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return a&&(d=U1(a)?a.checked?"true":"false":a.value),a=d,a!==u?(o.setValue(a),!0):!1}function Kc(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var yD=/[\n"\\]/g;function wn(a){return a.replace(yD,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Wf(a,o,u,d,m,C,N,_){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),o!=null?N==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+En(o)):a.value!==""+En(o)&&(a.value=""+En(o)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),o!=null?Kf(a,N,En(o)):u!=null?Kf(a,N,En(u)):d!=null&&a.removeAttribute("value"),m==null&&C!=null&&(a.defaultChecked=!!C),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+En(_):a.removeAttribute("name")}function j1(a,o,u,d,m,C,N,_){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),o!=null||u!=null){if(!(C!=="submit"&&C!=="reset"||o!=null)){Hf(a);return}u=u!=null?""+En(u):"",o=o!=null?""+En(o):u,_||o===a.value||(a.value=o),a.defaultValue=o}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=_?a.checked:!!d,a.defaultChecked=!!d,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N),Hf(a)}function Kf(a,o,u){o==="number"&&Kc(a.ownerDocument)===a||a.defaultValue===""+u||(a.defaultValue=""+u)}function Ns(a,o,u,d){if(a=a.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<a.length;u++)m=o.hasOwnProperty("$"+a[u].value),a[u].selected!==m&&(a[u].selected=m),m&&d&&(a[u].defaultSelected=!0)}else{for(u=""+En(u),o=null,m=0;m<a.length;m++){if(a[m].value===u){a[m].selected=!0,d&&(a[m].defaultSelected=!0);return}o!==null||a[m].disabled||(o=a[m])}o!==null&&(o.selected=!0)}}function G1(a,o,u){if(o!=null&&(o=""+En(o),o!==a.value&&(a.value=o),u==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=u!=null?""+En(u):""}function z1(a,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(r(92));if(te(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=En(o),a.defaultValue=u,d=a.textContent,d===u&&d!==""&&d!==null&&(a.value=d),Hf(a)}function Ls(a,o){if(o){var u=a.firstChild;if(u&&u===a.lastChild&&u.nodeType===3){u.nodeValue=o;return}}a.textContent=o}var xD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function A1(a,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,u):typeof u!="number"||u===0||xD.has(o)?o==="float"?a.cssFloat=u:a[o]=(""+u).trim():a[o]=u+"px"}function $1(a,o,u){if(o!=null&&typeof o!="object")throw Error(r(62));if(a=a.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var m in o)d=o[m],o.hasOwnProperty(m)&&u[m]!==d&&A1(a,m,d)}else for(var C in o)o.hasOwnProperty(C)&&A1(a,C,o[C])}function Xf(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mD=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xc(a){return mD.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function hr(){}var Yf=null;function qf(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Vs=null,_s=null;function H1(a){var o=Os(a);if(o&&(a=o.stateNode)){var u=a[en]||null;e:switch(a=o.stateNode,o.type){case"input":if(Wf(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=a;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+wn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==a&&d.form===a.form){var m=d[en]||null;if(!m)throw Error(r(90));Wf(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===a.form&&F1(d)}break e;case"textarea":G1(a,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Ns(a,!!u.multiple,o,!1)}}}var Zf=!1;function W1(a,o,u){if(Zf)return a(o,u);Zf=!0;try{var d=a(o);return d}finally{if(Zf=!1,(Vs!==null||_s!==null)&&(_l(),Vs&&(o=Vs,a=_s,_s=Vs=null,H1(o),a)))for(o=0;o<a.length;o++)H1(a[o])}}function Ai(a,o){var u=a.stateNode;if(u===null)return null;var d=u[en]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(u&&typeof u!="function")throw Error(r(231,o,typeof u));return u}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qf=!1;if(dr)try{var $i={};Object.defineProperty($i,"passive",{get:function(){Qf=!0}}),window.addEventListener("test",$i,$i),window.removeEventListener("test",$i,$i)}catch{Qf=!1}var $r=null,Pf=null,Yc=null;function K1(){if(Yc)return Yc;var a,o=Pf,u=o.length,d,m="value"in $r?$r.value:$r.textContent,C=m.length;for(a=0;a<u&&o[a]===m[a];a++);var N=u-a;for(d=1;d<=N&&o[u-d]===m[C-d];d++);return Yc=m.slice(a,1<d?1-d:void 0)}function qc(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Zc(){return!0}function X1(){return!1}function tn(a){function o(u,d,m,C,N){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=C,this.target=N,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(u=a[_],this[_]=u?u(C):C[_]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Zc:X1,this.isPropagationStopped=X1,this}return h(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),o}var Ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qc=tn(Ua),Hi=h({},Ua,{view:0,detail:0}),TD=tn(Hi),Jf,If,Wi,Pc=h({},Hi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Wi&&(Wi&&a.type==="mousemove"?(Jf=a.screenX-Wi.screenX,If=a.screenY-Wi.screenY):If=Jf=0,Wi=a),Jf)},movementY:function(a){return"movementY"in a?a.movementY:If}}),Y1=tn(Pc),SD=h({},Pc,{dataTransfer:0}),CD=tn(SD),ED=h({},Hi,{relatedTarget:0}),e0=tn(ED),wD=h({},Ua,{animationName:0,elapsedTime:0,pseudoElement:0}),MD=tn(wD),bD=h({},Ua,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),OD=tn(bD),DD=h({},Ua,{data:0}),q1=tn(DD),RD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ND={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VD(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=LD[a])?!!o[a]:!1}function t0(){return VD}var _D=h({},Hi,{key:function(a){if(a.key){var o=RD[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=qc(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?ND[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(a){return a.type==="keypress"?qc(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?qc(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),kD=tn(_D),BD=h({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z1=tn(BD),UD=h({},Hi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),FD=tn(UD),jD=h({},Ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),GD=tn(jD),zD=h({},Pc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),AD=tn(zD),$D=h({},Ua,{newState:0,oldState:0}),HD=tn($D),WD=[9,13,27,32],n0=dr&&"CompositionEvent"in window,Ki=null;dr&&"documentMode"in document&&(Ki=document.documentMode);var KD=dr&&"TextEvent"in window&&!Ki,Q1=dr&&(!n0||Ki&&8<Ki&&11>=Ki),P1=" ",J1=!1;function I1(a,o){switch(a){case"keyup":return WD.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ks=!1;function XD(a,o){switch(a){case"compositionend":return ey(o);case"keypress":return o.which!==32?null:(J1=!0,P1);case"textInput":return a=o.data,a===P1&&J1?null:a;default:return null}}function YD(a,o){if(ks)return a==="compositionend"||!n0&&I1(a,o)?(a=K1(),Yc=Pf=$r=null,ks=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Q1&&o.locale!=="ko"?null:o.data;default:return null}}var qD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ty(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!qD[a.type]:o==="textarea"}function ny(a,o,u,d){Vs?_s?_s.push(d):_s=[d]:Vs=d,o=zl(o,"onChange"),0<o.length&&(u=new Qc("onChange","change",null,u,d),a.push({event:u,listeners:o}))}var Xi=null,Yi=null;function ZD(a){jv(a,0)}function Jc(a){var o=zi(a);if(F1(o))return a}function ry(a,o){if(a==="change")return o}var ay=!1;if(dr){var r0;if(dr){var a0="oninput"in document;if(!a0){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),a0=typeof sy.oninput=="function"}r0=a0}else r0=!1;ay=r0&&(!document.documentMode||9<document.documentMode)}function iy(){Xi&&(Xi.detachEvent("onpropertychange",oy),Yi=Xi=null)}function oy(a){if(a.propertyName==="value"&&Jc(Yi)){var o=[];ny(o,Yi,a,qf(a)),W1(ZD,o)}}function QD(a,o,u){a==="focusin"?(iy(),Xi=o,Yi=u,Xi.attachEvent("onpropertychange",oy)):a==="focusout"&&iy()}function PD(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Jc(Yi)}function JD(a,o){if(a==="click")return Jc(o)}function ID(a,o){if(a==="input"||a==="change")return Jc(o)}function eR(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var gn=typeof Object.is=="function"?Object.is:eR;function qi(a,o){if(gn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var u=Object.keys(a),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!Bf.call(o,m)||!gn(a[m],o[m]))return!1}return!0}function cy(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ly(a,o){var u=cy(a);a=0;for(var d;u;){if(u.nodeType===3){if(d=a+u.textContent.length,a<=o&&d>=o)return{node:u,offset:o-a};a=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=cy(u)}}function uy(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?uy(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function fy(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Kc(a.document);o instanceof a.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)a=o.contentWindow;else break;o=Kc(a.document)}return o}function s0(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var tR=dr&&"documentMode"in document&&11>=document.documentMode,Bs=null,i0=null,Zi=null,o0=!1;function gy(a,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;o0||Bs==null||Bs!==Kc(d)||(d=Bs,"selectionStart"in d&&s0(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Zi&&qi(Zi,d)||(Zi=d,d=zl(i0,"onSelect"),0<d.length&&(o=new Qc("onSelect","select",null,o,u),a.push({event:o,listeners:d}),o.target=Bs)))}function Fa(a,o){var u={};return u[a.toLowerCase()]=o.toLowerCase(),u["Webkit"+a]="webkit"+o,u["Moz"+a]="moz"+o,u}var Us={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},c0={},hy={};dr&&(hy=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function ja(a){if(c0[a])return c0[a];if(!Us[a])return a;var o=Us[a],u;for(u in o)if(o.hasOwnProperty(u)&&u in hy)return c0[a]=o[u];return a}var dy=ja("animationend"),py=ja("animationiteration"),yy=ja("animationstart"),nR=ja("transitionrun"),rR=ja("transitionstart"),aR=ja("transitioncancel"),xy=ja("transitionend"),vy=new Map,l0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");l0.push("scrollEnd");function Hn(a,o){vy.set(a,o),Ba(o,[a])}var Ic=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Mn=[],Fs=0,u0=0;function el(){for(var a=Fs,o=u0=Fs=0;o<a;){var u=Mn[o];Mn[o++]=null;var d=Mn[o];Mn[o++]=null;var m=Mn[o];Mn[o++]=null;var C=Mn[o];if(Mn[o++]=null,d!==null&&m!==null){var N=d.pending;N===null?m.next=m:(m.next=N.next,N.next=m),d.pending=m}C!==0&&my(u,m,C)}}function tl(a,o,u,d){Mn[Fs++]=a,Mn[Fs++]=o,Mn[Fs++]=u,Mn[Fs++]=d,u0|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function f0(a,o,u,d){return tl(a,o,u,d),nl(a)}function Ga(a,o){return tl(a,null,null,o),nl(a)}function my(a,o,u){a.lanes|=u;var d=a.alternate;d!==null&&(d.lanes|=u);for(var m=!1,C=a.return;C!==null;)C.childLanes|=u,d=C.alternate,d!==null&&(d.childLanes|=u),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(m=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,m&&o!==null&&(m=31-fn(u),a=C.hiddenUpdates,d=a[m],d===null?a[m]=[o]:d.push(o),o.lane=u|536870912),C):null}function nl(a){if(50<vo)throw vo=0,Tg=null,Error(r(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var js={};function sR(a,o,u,d){this.tag=a,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(a,o,u,d){return new sR(a,o,u,d)}function g0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function pr(a,o){var u=a.alternate;return u===null?(u=hn(a.tag,o,a.key,a.mode),u.elementType=a.elementType,u.type=a.type,u.stateNode=a.stateNode,u.alternate=a,a.alternate=u):(u.pendingProps=o,u.type=a.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=a.flags&65011712,u.childLanes=a.childLanes,u.lanes=a.lanes,u.child=a.child,u.memoizedProps=a.memoizedProps,u.memoizedState=a.memoizedState,u.updateQueue=a.updateQueue,o=a.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=a.sibling,u.index=a.index,u.ref=a.ref,u.refCleanup=a.refCleanup,u}function Ty(a,o){a.flags&=65011714;var u=a.alternate;return u===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,o=u.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function rl(a,o,u,d,m,C){var N=0;if(d=a,typeof a=="function")g0(a)&&(N=1);else if(typeof a=="string")N=uN(a,u,ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=hn(31,u,o,m),a.elementType=B,a.lanes=C,a;case x:return za(u.children,m,C,o);case T:N=8,m|=24;break;case w:return a=hn(12,u,o,m|2),a.elementType=w,a.lanes=C,a;case R:return a=hn(13,u,o,m),a.elementType=R,a.lanes=C,a;case b:return a=hn(19,u,o,m),a.elementType=b,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case M:N=10;break e;case D:N=9;break e;case O:N=11;break e;case L:N=14;break e;case k:N=16,d=null;break e}N=29,u=Error(r(130,a===null?"null":typeof a,"")),d=null}return o=hn(N,u,o,m),o.elementType=a,o.type=d,o.lanes=C,o}function za(a,o,u,d){return a=hn(7,a,d,o),a.lanes=u,a}function h0(a,o,u){return a=hn(6,a,null,o),a.lanes=u,a}function Sy(a){var o=hn(18,null,null,0);return o.stateNode=a,o}function d0(a,o,u){return o=hn(4,a.children!==null?a.children:[],a.key,o),o.lanes=u,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Cy=new WeakMap;function bn(a,o){if(typeof a=="object"&&a!==null){var u=Cy.get(a);return u!==void 0?u:(o={value:a,source:o,stack:S1(o)},Cy.set(a,o),o)}return{value:a,source:o,stack:S1(o)}}var Gs=[],zs=0,al=null,Qi=0,On=[],Dn=0,Hr=null,Jn=1,In="";function yr(a,o){Gs[zs++]=Qi,Gs[zs++]=al,al=a,Qi=o}function Ey(a,o,u){On[Dn++]=Jn,On[Dn++]=In,On[Dn++]=Hr,Hr=a;var d=Jn;a=In;var m=32-fn(d)-1;d&=~(1<<m),u+=1;var C=32-fn(o)+m;if(30<C){var N=m-m%5;C=(d&(1<<N)-1).toString(32),d>>=N,m-=N,Jn=1<<32-fn(o)+m|u<<m|d,In=C+a}else Jn=1<<C|u<<m|d,In=a}function p0(a){a.return!==null&&(yr(a,1),Ey(a,1,0))}function y0(a){for(;a===al;)al=Gs[--zs],Gs[zs]=null,Qi=Gs[--zs],Gs[zs]=null;for(;a===Hr;)Hr=On[--Dn],On[Dn]=null,In=On[--Dn],On[Dn]=null,Jn=On[--Dn],On[Dn]=null}function wy(a,o){On[Dn++]=Jn,On[Dn++]=In,On[Dn++]=Hr,Jn=o.id,In=o.overflow,Hr=a}var Vt=null,Qe=null,Ne=!1,Wr=null,Rn=!1,x0=Error(r(519));function Kr(a){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pi(bn(o,a)),x0}function My(a){var o=a.stateNode,u=a.type,d=a.memoizedProps;switch(o[Lt]=a,o[en]=d,u){case"dialog":Oe("cancel",o),Oe("close",o);break;case"iframe":case"object":case"embed":Oe("load",o);break;case"video":case"audio":for(u=0;u<To.length;u++)Oe(To[u],o);break;case"source":Oe("error",o);break;case"img":case"image":case"link":Oe("error",o),Oe("load",o);break;case"details":Oe("toggle",o);break;case"input":Oe("invalid",o),j1(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Oe("invalid",o);break;case"textarea":Oe("invalid",o),z1(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||$v(o.textContent,u)?(d.popover!=null&&(Oe("beforetoggle",o),Oe("toggle",o)),d.onScroll!=null&&Oe("scroll",o),d.onScrollEnd!=null&&Oe("scrollend",o),d.onClick!=null&&(o.onclick=hr),o=!0):o=!1,o||Kr(a,!0)}function by(a){for(Vt=a.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:Rn=!1;return;case 27:case 3:Rn=!0;return;default:Vt=Vt.return}}function As(a){if(a!==Vt)return!1;if(!Ne)return by(a),Ne=!0,!1;var o=a.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=a.type,u=!(u!=="form"&&u!=="button")||Bg(a.type,a.memoizedProps)),u=!u),u&&Qe&&Kr(a),by(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Qe=Pv(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Qe=Pv(a)}else o===27?(o=Qe,sa(a.type)?(a=zg,zg=null,Qe=a):Qe=o):Qe=Vt?Ln(a.stateNode.nextSibling):null;return!0}function Aa(){Qe=Vt=null,Ne=!1}function v0(){var a=Wr;return a!==null&&(sn===null?sn=a:sn.push.apply(sn,a),Wr=null),a}function Pi(a){Wr===null?Wr=[a]:Wr.push(a)}var m0=U(null),$a=null,xr=null;function Xr(a,o,u){ee(m0,o._currentValue),o._currentValue=u}function vr(a){a._currentValue=m0.current,Y(m0)}function T0(a,o,u){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===u)break;a=a.return}}function S0(a,o,u,d){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var C=m.dependencies;if(C!==null){var N=m.child;C=C.firstContext;e:for(;C!==null;){var _=C;C=m;for(var G=0;G<o.length;G++)if(_.context===o[G]){C.lanes|=u,_=C.alternate,_!==null&&(_.lanes|=u),T0(C.return,u,a),d||(N=null);break e}C=_.next}}else if(m.tag===18){if(N=m.return,N===null)throw Error(r(341));N.lanes|=u,C=N.alternate,C!==null&&(C.lanes|=u),T0(N,u,a),N=null}else N=m.child;if(N!==null)N.return=m;else for(N=m;N!==null;){if(N===a){N=null;break}if(m=N.sibling,m!==null){m.return=N.return,N=m;break}N=N.return}m=N}}function $s(a,o,u,d){a=null;for(var m=o,C=!1;m!==null;){if(!C){if((m.flags&524288)!==0)C=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var N=m.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var _=m.type;gn(m.pendingProps.value,N.value)||(a!==null?a.push(_):a=[_])}}else if(m===Te.current){if(N=m.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(Mo):a=[Mo])}m=m.return}a!==null&&S0(o,a,u,d),o.flags|=262144}function sl(a){for(a=a.firstContext;a!==null;){if(!gn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ha(a){$a=a,xr=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function _t(a){return Oy($a,a)}function il(a,o){return $a===null&&Ha(a),Oy(a,o)}function Oy(a,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},xr===null){if(a===null)throw Error(r(308));xr=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else xr=xr.next=o;return u}var iR=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(u,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(u){return u()})}},oR=t.unstable_scheduleCallback,cR=t.unstable_NormalPriority,pt={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function C0(){return{controller:new iR,data:new Map,refCount:0}}function Ji(a){a.refCount--,a.refCount===0&&oR(cR,function(){a.controller.abort()})}var Ii=null,E0=0,Hs=0,Ws=null;function lR(a,o){if(Ii===null){var u=Ii=[];E0=0,Hs=bg(),Ws={status:"pending",value:void 0,then:function(d){u.push(d)}}}return E0++,o.then(Dy,Dy),o}function Dy(){if(--E0===0&&Ii!==null){Ws!==null&&(Ws.status="fulfilled");var a=Ii;Ii=null,Hs=0,Ws=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function uR(a,o){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var m=0;m<u.length;m++)(0,u[m])(o)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var Ry=F.S;F.S=function(a,o){gv=ln(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&lR(a,o),Ry!==null&&Ry(a,o)};var Wa=U(null);function w0(){var a=Wa.current;return a!==null?a:Xe.pooledCache}function ol(a,o){o===null?ee(Wa,Wa.current):ee(Wa,o.pool)}function Ny(){var a=w0();return a===null?null:{parent:pt._currentValue,pool:a}}var Ks=Error(r(460)),M0=Error(r(474)),cl=Error(r(542)),ll={then:function(){}};function Ly(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vy(a,o,u){switch(u=a[u],u===void 0?a.push(o):u!==o&&(o.then(hr,hr),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,ky(a),a;default:if(typeof o.status=="string")o.then(hr,hr);else{if(a=Xe,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=d}},function(d){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,ky(a),a}throw Xa=o,Ks}}function Ka(a){try{var o=a._init;return o(a._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Xa=u,Ks):u}}var Xa=null;function _y(){if(Xa===null)throw Error(r(459));var a=Xa;return Xa=null,a}function ky(a){if(a===Ks||a===cl)throw Error(r(483))}var Xs=null,eo=0;function ul(a){var o=eo;return eo+=1,Xs===null&&(Xs=[]),Vy(Xs,a,o)}function to(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function fl(a,o){throw o.$$typeof===y?Error(r(525)):(a=Object.prototype.toString.call(o),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function By(a){function o(H,A){if(a){var K=H.deletions;K===null?(H.deletions=[A],H.flags|=16):K.push(A)}}function u(H,A){if(!a)return null;for(;A!==null;)o(H,A),A=A.sibling;return null}function d(H){for(var A=new Map;H!==null;)H.key!==null?A.set(H.key,H):A.set(H.index,H),H=H.sibling;return A}function m(H,A){return H=pr(H,A),H.index=0,H.sibling=null,H}function C(H,A,K){return H.index=K,a?(K=H.alternate,K!==null?(K=K.index,K<A?(H.flags|=67108866,A):K):(H.flags|=67108866,A)):(H.flags|=1048576,A)}function N(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function _(H,A,K,re){return A===null||A.tag!==6?(A=h0(K,H.mode,re),A.return=H,A):(A=m(A,K),A.return=H,A)}function G(H,A,K,re){var pe=K.type;return pe===x?ne(H,A,K.props.children,re,K.key):A!==null&&(A.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===k&&Ka(pe)===A.type)?(A=m(A,K.props),to(A,K),A.return=H,A):(A=rl(K.type,K.key,K.props,null,H.mode,re),to(A,K),A.return=H,A)}function X(H,A,K,re){return A===null||A.tag!==4||A.stateNode.containerInfo!==K.containerInfo||A.stateNode.implementation!==K.implementation?(A=d0(K,H.mode,re),A.return=H,A):(A=m(A,K.children||[]),A.return=H,A)}function ne(H,A,K,re,pe){return A===null||A.tag!==7?(A=za(K,H.mode,re,pe),A.return=H,A):(A=m(A,K),A.return=H,A)}function se(H,A,K){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=h0(""+A,H.mode,K),A.return=H,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case v:return K=rl(A.type,A.key,A.props,null,H.mode,K),to(K,A),K.return=H,K;case E:return A=d0(A,H.mode,K),A.return=H,A;case k:return A=Ka(A),se(H,A,K)}if(te(A)||$(A))return A=za(A,H.mode,K,null),A.return=H,A;if(typeof A.then=="function")return se(H,ul(A),K);if(A.$$typeof===M)return se(H,il(H,A),K);fl(H,A)}return null}function q(H,A,K,re){var pe=A!==null?A.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return pe!==null?null:_(H,A,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case v:return K.key===pe?G(H,A,K,re):null;case E:return K.key===pe?X(H,A,K,re):null;case k:return K=Ka(K),q(H,A,K,re)}if(te(K)||$(K))return pe!==null?null:ne(H,A,K,re,null);if(typeof K.then=="function")return q(H,A,ul(K),re);if(K.$$typeof===M)return q(H,A,il(H,K),re);fl(H,K)}return null}function I(H,A,K,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return H=H.get(K)||null,_(A,H,""+re,pe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case v:return H=H.get(re.key===null?K:re.key)||null,G(A,H,re,pe);case E:return H=H.get(re.key===null?K:re.key)||null,X(A,H,re,pe);case k:return re=Ka(re),I(H,A,K,re,pe)}if(te(re)||$(re))return H=H.get(K)||null,ne(A,H,re,pe,null);if(typeof re.then=="function")return I(H,A,K,ul(re),pe);if(re.$$typeof===M)return I(H,A,K,il(A,re),pe);fl(A,re)}return null}function le(H,A,K,re){for(var pe=null,ke=null,ge=A,Ce=A=0,Re=null;ge!==null&&Ce<K.length;Ce++){ge.index>Ce?(Re=ge,ge=null):Re=ge.sibling;var Be=q(H,ge,K[Ce],re);if(Be===null){ge===null&&(ge=Re);break}a&&ge&&Be.alternate===null&&o(H,ge),A=C(Be,A,Ce),ke===null?pe=Be:ke.sibling=Be,ke=Be,ge=Re}if(Ce===K.length)return u(H,ge),Ne&&yr(H,Ce),pe;if(ge===null){for(;Ce<K.length;Ce++)ge=se(H,K[Ce],re),ge!==null&&(A=C(ge,A,Ce),ke===null?pe=ge:ke.sibling=ge,ke=ge);return Ne&&yr(H,Ce),pe}for(ge=d(ge);Ce<K.length;Ce++)Re=I(ge,H,Ce,K[Ce],re),Re!==null&&(a&&Re.alternate!==null&&ge.delete(Re.key===null?Ce:Re.key),A=C(Re,A,Ce),ke===null?pe=Re:ke.sibling=Re,ke=Re);return a&&ge.forEach(function(ua){return o(H,ua)}),Ne&&yr(H,Ce),pe}function ye(H,A,K,re){if(K==null)throw Error(r(151));for(var pe=null,ke=null,ge=A,Ce=A=0,Re=null,Be=K.next();ge!==null&&!Be.done;Ce++,Be=K.next()){ge.index>Ce?(Re=ge,ge=null):Re=ge.sibling;var ua=q(H,ge,Be.value,re);if(ua===null){ge===null&&(ge=Re);break}a&&ge&&ua.alternate===null&&o(H,ge),A=C(ua,A,Ce),ke===null?pe=ua:ke.sibling=ua,ke=ua,ge=Re}if(Be.done)return u(H,ge),Ne&&yr(H,Ce),pe;if(ge===null){for(;!Be.done;Ce++,Be=K.next())Be=se(H,Be.value,re),Be!==null&&(A=C(Be,A,Ce),ke===null?pe=Be:ke.sibling=Be,ke=Be);return Ne&&yr(H,Ce),pe}for(ge=d(ge);!Be.done;Ce++,Be=K.next())Be=I(ge,H,Ce,Be.value,re),Be!==null&&(a&&Be.alternate!==null&&ge.delete(Be.key===null?Ce:Be.key),A=C(Be,A,Ce),ke===null?pe=Be:ke.sibling=Be,ke=Be);return a&&ge.forEach(function(SN){return o(H,SN)}),Ne&&yr(H,Ce),pe}function Ke(H,A,K,re){if(typeof K=="object"&&K!==null&&K.type===x&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case v:e:{for(var pe=K.key;A!==null;){if(A.key===pe){if(pe=K.type,pe===x){if(A.tag===7){u(H,A.sibling),re=m(A,K.props.children),re.return=H,H=re;break e}}else if(A.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===k&&Ka(pe)===A.type){u(H,A.sibling),re=m(A,K.props),to(re,K),re.return=H,H=re;break e}u(H,A);break}else o(H,A);A=A.sibling}K.type===x?(re=za(K.props.children,H.mode,re,K.key),re.return=H,H=re):(re=rl(K.type,K.key,K.props,null,H.mode,re),to(re,K),re.return=H,H=re)}return N(H);case E:e:{for(pe=K.key;A!==null;){if(A.key===pe)if(A.tag===4&&A.stateNode.containerInfo===K.containerInfo&&A.stateNode.implementation===K.implementation){u(H,A.sibling),re=m(A,K.children||[]),re.return=H,H=re;break e}else{u(H,A);break}else o(H,A);A=A.sibling}re=d0(K,H.mode,re),re.return=H,H=re}return N(H);case k:return K=Ka(K),Ke(H,A,K,re)}if(te(K))return le(H,A,K,re);if($(K)){if(pe=$(K),typeof pe!="function")throw Error(r(150));return K=pe.call(K),ye(H,A,K,re)}if(typeof K.then=="function")return Ke(H,A,ul(K),re);if(K.$$typeof===M)return Ke(H,A,il(H,K),re);fl(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,A!==null&&A.tag===6?(u(H,A.sibling),re=m(A,K),re.return=H,H=re):(u(H,A),re=h0(K,H.mode,re),re.return=H,H=re),N(H)):u(H,A)}return function(H,A,K,re){try{eo=0;var pe=Ke(H,A,K,re);return Xs=null,pe}catch(ge){if(ge===Ks||ge===cl)throw ge;var ke=hn(29,ge,null,H.mode);return ke.lanes=re,ke.return=H,ke}}}var Ya=By(!0),Uy=By(!1),Yr=!1;function b0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function O0(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function qr(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Zr(a,o,u){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(Fe&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,o=nl(a),my(a,null,u),o}return tl(a,d,o,u),nl(a)}function no(a,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,u|=d,o.lanes=u,O1(a,u)}}function D0(a,o){var u=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,C=null;if(u=u.firstBaseUpdate,u!==null){do{var N={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};C===null?m=C=N:C=C.next=N,u=u.next}while(u!==null);C===null?m=C=o:C=C.next=o}else m=C=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:C,shared:d.shared,callbacks:d.callbacks},a.updateQueue=u;return}a=u.lastBaseUpdate,a===null?u.firstBaseUpdate=o:a.next=o,u.lastBaseUpdate=o}var R0=!1;function ro(){if(R0){var a=Ws;if(a!==null)throw a}}function ao(a,o,u,d){R0=!1;var m=a.updateQueue;Yr=!1;var C=m.firstBaseUpdate,N=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var G=_,X=G.next;G.next=null,N===null?C=X:N.next=X,N=G;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,_=ne.lastBaseUpdate,_!==N&&(_===null?ne.firstBaseUpdate=X:_.next=X,ne.lastBaseUpdate=G))}if(C!==null){var se=m.baseState;N=0,ne=X=G=null,_=C;do{var q=_.lane&-536870913,I=q!==_.lane;if(I?(De&q)===q:(d&q)===q){q!==0&&q===Hs&&(R0=!0),ne!==null&&(ne=ne.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var le=a,ye=_;q=o;var Ke=u;switch(ye.tag){case 1:if(le=ye.payload,typeof le=="function"){se=le.call(Ke,se,q);break e}se=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ye.payload,q=typeof le=="function"?le.call(Ke,se,q):le,q==null)break e;se=h({},se,q);break e;case 2:Yr=!0}}q=_.callback,q!==null&&(a.flags|=64,I&&(a.flags|=8192),I=m.callbacks,I===null?m.callbacks=[q]:I.push(q))}else I={lane:q,tag:_.tag,payload:_.payload,callback:_.callback,next:null},ne===null?(X=ne=I,G=se):ne=ne.next=I,N|=q;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;I=_,_=I.next,I.next=null,m.lastBaseUpdate=I,m.shared.pending=null}}while(!0);ne===null&&(G=se),m.baseState=G,m.firstBaseUpdate=X,m.lastBaseUpdate=ne,C===null&&(m.shared.lanes=0),ea|=N,a.lanes=N,a.memoizedState=se}}function Fy(a,o){if(typeof a!="function")throw Error(r(191,a));a.call(o)}function jy(a,o){var u=a.callbacks;if(u!==null)for(a.callbacks=null,a=0;a<u.length;a++)Fy(u[a],o)}var Ys=U(null),gl=U(0);function Gy(a,o){a=Or,ee(gl,a),ee(Ys,o),Or=a|o.baseLanes}function N0(){ee(gl,Or),ee(Ys,Ys.current)}function L0(){Or=gl.current,Y(Ys),Y(gl)}var dn=U(null),Nn=null;function Qr(a){var o=a.alternate;ee(gt,gt.current&1),ee(dn,a),Nn===null&&(o===null||Ys.current!==null||o.memoizedState!==null)&&(Nn=a)}function V0(a){ee(gt,gt.current),ee(dn,a),Nn===null&&(Nn=a)}function zy(a){a.tag===22?(ee(gt,gt.current),ee(dn,a),Nn===null&&(Nn=a)):Pr()}function Pr(){ee(gt,gt.current),ee(dn,dn.current)}function pn(a){Y(dn),Nn===a&&(Nn=null),Y(gt)}var gt=U(0);function hl(a){for(var o=a;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||jg(u)||Gg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var mr=0,Se=null,He=null,yt=null,dl=!1,qs=!1,qa=!1,pl=0,so=0,Zs=null,fR=0;function it(){throw Error(r(321))}function _0(a,o){if(o===null)return!1;for(var u=0;u<o.length&&u<a.length;u++)if(!gn(a[u],o[u]))return!1;return!0}function k0(a,o,u,d,m,C){return mr=C,Se=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=a===null||a.memoizedState===null?Ex:Z0,qa=!1,C=u(d,m),qa=!1,qs&&(C=$y(o,u,d,m)),Ay(a),C}function Ay(a){F.H=co;var o=He!==null&&He.next!==null;if(mr=0,yt=He=Se=null,dl=!1,so=0,Zs=null,o)throw Error(r(300));a===null||xt||(a=a.dependencies,a!==null&&sl(a)&&(xt=!0))}function $y(a,o,u,d){Se=a;var m=0;do{if(qs&&(Zs=null),so=0,qs=!1,25<=m)throw Error(r(301));if(m+=1,yt=He=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}F.H=wx,C=o(u,d)}while(qs);return C}function gR(){var a=F.H,o=a.useState()[0];return o=typeof o.then=="function"?io(o):o,a=a.useState()[0],(He!==null?He.memoizedState:null)!==a&&(Se.flags|=1024),o}function B0(){var a=pl!==0;return pl=0,a}function U0(a,o,u){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~u}function F0(a){if(dl){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}dl=!1}mr=0,yt=He=Se=null,qs=!1,so=pl=0,Zs=null}function Kt(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Se.memoizedState=yt=a:yt=yt.next=a,yt}function ht(){if(He===null){var a=Se.alternate;a=a!==null?a.memoizedState:null}else a=He.next;var o=yt===null?Se.memoizedState:yt.next;if(o!==null)yt=o,He=a;else{if(a===null)throw Se.alternate===null?Error(r(467)):Error(r(310));He=a,a={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},yt===null?Se.memoizedState=yt=a:yt=yt.next=a}return yt}function yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function io(a){var o=so;return so+=1,Zs===null&&(Zs=[]),a=Vy(Zs,a,o),o=Se,(yt===null?o.memoizedState:yt.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?Ex:Z0),a}function xl(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return io(a);if(a.$$typeof===M)return _t(a)}throw Error(r(438,String(a)))}function j0(a){var o=null,u=Se.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=Se.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=yl(),Se.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(a),d=0;d<a;d++)u[d]=j;return o.index++,u}function Tr(a,o){return typeof o=="function"?o(a):o}function vl(a){var o=ht();return G0(o,He,a)}function G0(a,o,u){var d=a.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var m=a.baseQueue,C=d.pending;if(C!==null){if(m!==null){var N=m.next;m.next=C.next,C.next=N}o.baseQueue=m=C,d.pending=null}if(C=a.baseState,m===null)a.memoizedState=C;else{o=m.next;var _=N=null,G=null,X=o,ne=!1;do{var se=X.lane&-536870913;if(se!==X.lane?(De&se)===se:(mr&se)===se){var q=X.revertLane;if(q===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),se===Hs&&(ne=!0);else if((mr&q)===q){X=X.next,q===Hs&&(ne=!0);continue}else se={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},G===null?(_=G=se,N=C):G=G.next=se,Se.lanes|=q,ea|=q;se=X.action,qa&&u(C,se),C=X.hasEagerState?X.eagerState:u(C,se)}else q={lane:se,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},G===null?(_=G=q,N=C):G=G.next=q,Se.lanes|=se,ea|=se;X=X.next}while(X!==null&&X!==o);if(G===null?N=C:G.next=_,!gn(C,a.memoizedState)&&(xt=!0,ne&&(u=Ws,u!==null)))throw u;a.memoizedState=C,a.baseState=N,a.baseQueue=G,d.lastRenderedState=C}return m===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function z0(a){var o=ht(),u=o.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=a;var d=u.dispatch,m=u.pending,C=o.memoizedState;if(m!==null){u.pending=null;var N=m=m.next;do C=a(C,N.action),N=N.next;while(N!==m);gn(C,o.memoizedState)||(xt=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),u.lastRenderedState=C}return[C,d]}function Hy(a,o,u){var d=Se,m=ht(),C=Ne;if(C){if(u===void 0)throw Error(r(407));u=u()}else u=o();var N=!gn((He||m).memoizedState,u);if(N&&(m.memoizedState=u,xt=!0),m=m.queue,H0(Xy.bind(null,d,m,a),[a]),m.getSnapshot!==o||N||yt!==null&&yt.memoizedState.tag&1){if(d.flags|=2048,Qs(9,{destroy:void 0},Ky.bind(null,d,m,u,o),null),Xe===null)throw Error(r(349));C||(mr&127)!==0||Wy(d,o,u)}return u}function Wy(a,o,u){a.flags|=16384,a={getSnapshot:o,value:u},o=Se.updateQueue,o===null?(o=yl(),Se.updateQueue=o,o.stores=[a]):(u=o.stores,u===null?o.stores=[a]:u.push(a))}function Ky(a,o,u,d){o.value=u,o.getSnapshot=d,Yy(o)&&qy(a)}function Xy(a,o,u){return u(function(){Yy(o)&&qy(a)})}function Yy(a){var o=a.getSnapshot;a=a.value;try{var u=o();return!gn(a,u)}catch{return!0}}function qy(a){var o=Ga(a,2);o!==null&&on(o,a,2)}function A0(a){var o=Kt();if(typeof a=="function"){var u=a;if(a=u(),qa){zr(!0);try{u()}finally{zr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:a},o}function Zy(a,o,u,d){return a.baseState=u,G0(a,He,typeof d=="function"?d:Tr)}function hR(a,o,u,d,m){if(Sl(a))throw Error(r(485));if(a=o.action,a!==null){var C={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){C.listeners.push(N)}};F.T!==null?u(!0):C.isTransition=!1,d(C),u=o.pending,u===null?(C.next=o.pending=C,Qy(o,C)):(C.next=u.next,o.pending=u.next=C)}}function Qy(a,o){var u=o.action,d=o.payload,m=a.state;if(o.isTransition){var C=F.T,N={};F.T=N;try{var _=u(m,d),G=F.S;G!==null&&G(N,_),Py(a,o,_)}catch(X){$0(a,o,X)}finally{C!==null&&N.types!==null&&(C.types=N.types),F.T=C}}else try{C=u(m,d),Py(a,o,C)}catch(X){$0(a,o,X)}}function Py(a,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){Jy(a,o,d)},function(d){return $0(a,o,d)}):Jy(a,o,u)}function Jy(a,o,u){o.status="fulfilled",o.value=u,Iy(o),a.state=u,o=a.pending,o!==null&&(u=o.next,u===o?a.pending=null:(u=u.next,o.next=u,Qy(a,u)))}function $0(a,o,u){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,Iy(o),o=o.next;while(o!==d)}a.action=null}function Iy(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function ex(a,o){return o}function tx(a,o){if(Ne){var u=Xe.formState;if(u!==null){e:{var d=Se;if(Ne){if(Qe){t:{for(var m=Qe,C=Rn;m.nodeType!==8;){if(!C){m=null;break t}if(m=Ln(m.nextSibling),m===null){m=null;break t}}C=m.data,m=C==="F!"||C==="F"?m:null}if(m){Qe=Ln(m.nextSibling),d=m.data==="F!";break e}}Kr(d)}d=!1}d&&(o=u[0])}}return u=Kt(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ex,lastRenderedState:o},u.queue=d,u=Tx.bind(null,Se,d),d.dispatch=u,d=A0(!1),C=q0.bind(null,Se,!1,d.queue),d=Kt(),m={state:o,dispatch:null,action:a,pending:null},d.queue=m,u=hR.bind(null,Se,m,C,u),m.dispatch=u,d.memoizedState=a,[o,u,!1]}function nx(a){var o=ht();return rx(o,He,a)}function rx(a,o,u){if(o=G0(a,o,ex)[0],a=vl(Tr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=io(o)}catch(N){throw N===Ks?cl:N}else d=o;o=ht();var m=o.queue,C=m.dispatch;return u!==o.memoizedState&&(Se.flags|=2048,Qs(9,{destroy:void 0},dR.bind(null,m,u),null)),[d,C,a]}function dR(a,o){a.action=o}function ax(a){var o=ht(),u=He;if(u!==null)return rx(o,u,a);ht(),o=o.memoizedState,u=ht();var d=u.queue.dispatch;return u.memoizedState=a,[o,d,!1]}function Qs(a,o,u,d){return a={tag:a,create:u,deps:d,inst:o,next:null},o=Se.updateQueue,o===null&&(o=yl(),Se.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=a.next=a:(d=u.next,u.next=a,a.next=d,o.lastEffect=a),a}function sx(){return ht().memoizedState}function ml(a,o,u,d){var m=Kt();Se.flags|=a,m.memoizedState=Qs(1|o,{destroy:void 0},u,d===void 0?null:d)}function Tl(a,o,u,d){var m=ht();d=d===void 0?null:d;var C=m.memoizedState.inst;He!==null&&d!==null&&_0(d,He.memoizedState.deps)?m.memoizedState=Qs(o,C,u,d):(Se.flags|=a,m.memoizedState=Qs(1|o,C,u,d))}function ix(a,o){ml(8390656,8,a,o)}function H0(a,o){Tl(2048,8,a,o)}function pR(a){Se.flags|=4;var o=Se.updateQueue;if(o===null)o=yl(),Se.updateQueue=o,o.events=[a];else{var u=o.events;u===null?o.events=[a]:u.push(a)}}function ox(a){var o=ht().memoizedState;return pR({ref:o,nextImpl:a}),function(){if((Fe&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function cx(a,o){return Tl(4,2,a,o)}function lx(a,o){return Tl(4,4,a,o)}function ux(a,o){if(typeof o=="function"){a=a();var u=o(a);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function fx(a,o,u){u=u!=null?u.concat([a]):null,Tl(4,4,ux.bind(null,o,a),u)}function W0(){}function gx(a,o){var u=ht();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&_0(o,d[1])?d[0]:(u.memoizedState=[a,o],a)}function hx(a,o){var u=ht();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&_0(o,d[1]))return d[0];if(d=a(),qa){zr(!0);try{a()}finally{zr(!1)}}return u.memoizedState=[d,o],d}function K0(a,o,u){return u===void 0||(mr&1073741824)!==0&&(De&261930)===0?a.memoizedState=o:(a.memoizedState=u,a=dv(),Se.lanes|=a,ea|=a,u)}function dx(a,o,u,d){return gn(u,o)?u:Ys.current!==null?(a=K0(a,u,d),gn(a,o)||(xt=!0),a):(mr&42)===0||(mr&1073741824)!==0&&(De&261930)===0?(xt=!0,a.memoizedState=u):(a=dv(),Se.lanes|=a,ea|=a,o)}function px(a,o,u,d,m){var C=P.p;P.p=C!==0&&8>C?C:8;var N=F.T,_={};F.T=_,q0(a,!1,o,u);try{var G=m(),X=F.S;if(X!==null&&X(_,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ne=uR(G,d);oo(a,o,ne,vn(a))}else oo(a,o,d,vn(a))}catch(se){oo(a,o,{then:function(){},status:"rejected",reason:se},vn())}finally{P.p=C,N!==null&&_.types!==null&&(N.types=_.types),F.T=N}}function yR(){}function X0(a,o,u,d){if(a.tag!==5)throw Error(r(476));var m=yx(a).queue;px(a,m,o,ae,u===null?yR:function(){return xx(a),u(d)})}function yx(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:ae},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:u},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function xx(a){var o=yx(a);o.next===null&&(o=a.alternate.memoizedState),oo(a,o.next.queue,{},vn())}function Y0(){return _t(Mo)}function vx(){return ht().memoizedState}function mx(){return ht().memoizedState}function xR(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var u=vn();a=qr(u);var d=Zr(o,a,u);d!==null&&(on(d,o,u),no(d,o,u)),o={cache:C0()},a.payload=o;return}o=o.return}}function vR(a,o,u){var d=vn();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sl(a)?Sx(o,u):(u=f0(a,o,u,d),u!==null&&(on(u,a,d),Cx(u,o,d)))}function Tx(a,o,u){var d=vn();oo(a,o,u,d)}function oo(a,o,u,d){var m={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Sl(a))Sx(o,m);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var N=o.lastRenderedState,_=C(N,u);if(m.hasEagerState=!0,m.eagerState=_,gn(_,N))return tl(a,o,m,0),Xe===null&&el(),!1}catch{}if(u=f0(a,o,m,d),u!==null)return on(u,a,d),Cx(u,o,d),!0}return!1}function q0(a,o,u,d){if(d={lane:2,revertLane:bg(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Sl(a)){if(o)throw Error(r(479))}else o=f0(a,u,d,2),o!==null&&on(o,a,2)}function Sl(a){var o=a.alternate;return a===Se||o!==null&&o===Se}function Sx(a,o){qs=dl=!0;var u=a.pending;u===null?o.next=o:(o.next=u.next,u.next=o),a.pending=o}function Cx(a,o,u){if((u&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,u|=d,o.lanes=u,O1(a,u)}}var co={readContext:_t,use:xl,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};co.useEffectEvent=it;var Ex={readContext:_t,use:xl,useCallback:function(a,o){return Kt().memoizedState=[a,o===void 0?null:o],a},useContext:_t,useEffect:ix,useImperativeHandle:function(a,o,u){u=u!=null?u.concat([a]):null,ml(4194308,4,ux.bind(null,o,a),u)},useLayoutEffect:function(a,o){return ml(4194308,4,a,o)},useInsertionEffect:function(a,o){ml(4,2,a,o)},useMemo:function(a,o){var u=Kt();o=o===void 0?null:o;var d=a();if(qa){zr(!0);try{a()}finally{zr(!1)}}return u.memoizedState=[d,o],d},useReducer:function(a,o,u){var d=Kt();if(u!==void 0){var m=u(o);if(qa){zr(!0);try{u(o)}finally{zr(!1)}}}else m=o;return d.memoizedState=d.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},d.queue=a,a=a.dispatch=vR.bind(null,Se,a),[d.memoizedState,a]},useRef:function(a){var o=Kt();return a={current:a},o.memoizedState=a},useState:function(a){a=A0(a);var o=a.queue,u=Tx.bind(null,Se,o);return o.dispatch=u,[a.memoizedState,u]},useDebugValue:W0,useDeferredValue:function(a,o){var u=Kt();return K0(u,a,o)},useTransition:function(){var a=A0(!1);return a=px.bind(null,Se,a.queue,!0,!1),Kt().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,u){var d=Se,m=Kt();if(Ne){if(u===void 0)throw Error(r(407));u=u()}else{if(u=o(),Xe===null)throw Error(r(349));(De&127)!==0||Wy(d,o,u)}m.memoizedState=u;var C={value:u,getSnapshot:o};return m.queue=C,ix(Xy.bind(null,d,C,a),[a]),d.flags|=2048,Qs(9,{destroy:void 0},Ky.bind(null,d,C,u,o),null),u},useId:function(){var a=Kt(),o=Xe.identifierPrefix;if(Ne){var u=In,d=Jn;u=(d&~(1<<32-fn(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=pl++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=fR++,o="_"+o+"r_"+u.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Y0,useFormState:tx,useActionState:tx,useOptimistic:function(a){var o=Kt();o.memoizedState=o.baseState=a;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=q0.bind(null,Se,!0,u),u.dispatch=o,[a,o]},useMemoCache:j0,useCacheRefresh:function(){return Kt().memoizedState=xR.bind(null,Se)},useEffectEvent:function(a){var o=Kt(),u={impl:a};return o.memoizedState=u,function(){if((Fe&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Z0={readContext:_t,use:xl,useCallback:gx,useContext:_t,useEffect:H0,useImperativeHandle:fx,useInsertionEffect:cx,useLayoutEffect:lx,useMemo:hx,useReducer:vl,useRef:sx,useState:function(){return vl(Tr)},useDebugValue:W0,useDeferredValue:function(a,o){var u=ht();return dx(u,He.memoizedState,a,o)},useTransition:function(){var a=vl(Tr)[0],o=ht().memoizedState;return[typeof a=="boolean"?a:io(a),o]},useSyncExternalStore:Hy,useId:vx,useHostTransitionStatus:Y0,useFormState:nx,useActionState:nx,useOptimistic:function(a,o){var u=ht();return Zy(u,He,a,o)},useMemoCache:j0,useCacheRefresh:mx};Z0.useEffectEvent=ox;var wx={readContext:_t,use:xl,useCallback:gx,useContext:_t,useEffect:H0,useImperativeHandle:fx,useInsertionEffect:cx,useLayoutEffect:lx,useMemo:hx,useReducer:z0,useRef:sx,useState:function(){return z0(Tr)},useDebugValue:W0,useDeferredValue:function(a,o){var u=ht();return He===null?K0(u,a,o):dx(u,He.memoizedState,a,o)},useTransition:function(){var a=z0(Tr)[0],o=ht().memoizedState;return[typeof a=="boolean"?a:io(a),o]},useSyncExternalStore:Hy,useId:vx,useHostTransitionStatus:Y0,useFormState:ax,useActionState:ax,useOptimistic:function(a,o){var u=ht();return He!==null?Zy(u,He,a,o):(u.baseState=a,[a,u.queue.dispatch])},useMemoCache:j0,useCacheRefresh:mx};wx.useEffectEvent=ox;function Q0(a,o,u,d){o=a.memoizedState,u=u(d,o),u=u==null?o:h({},o,u),a.memoizedState=u,a.lanes===0&&(a.updateQueue.baseState=u)}var P0={enqueueSetState:function(a,o,u){a=a._reactInternals;var d=vn(),m=qr(d);m.payload=o,u!=null&&(m.callback=u),o=Zr(a,m,d),o!==null&&(on(o,a,d),no(o,a,d))},enqueueReplaceState:function(a,o,u){a=a._reactInternals;var d=vn(),m=qr(d);m.tag=1,m.payload=o,u!=null&&(m.callback=u),o=Zr(a,m,d),o!==null&&(on(o,a,d),no(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var u=vn(),d=qr(u);d.tag=2,o!=null&&(d.callback=o),o=Zr(a,d,u),o!==null&&(on(o,a,u),no(o,a,u))}};function Mx(a,o,u,d,m,C,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,C,N):o.prototype&&o.prototype.isPureReactComponent?!qi(u,d)||!qi(m,C):!0}function bx(a,o,u,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==a&&P0.enqueueReplaceState(o,o.state,null)}function Za(a,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(a=a.defaultProps){u===o&&(u=h({},u));for(var m in a)u[m]===void 0&&(u[m]=a[m])}return u}function Ox(a){Ic(a)}function Dx(a){console.error(a)}function Rx(a){Ic(a)}function Cl(a,o){try{var u=a.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Nx(a,o,u){try{var d=a.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function J0(a,o,u){return u=qr(u),u.tag=3,u.payload={element:null},u.callback=function(){Cl(a,o)},u}function Lx(a){return a=qr(a),a.tag=3,a}function Vx(a,o,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var C=d.value;a.payload=function(){return m(C)},a.callback=function(){Nx(o,u,d)}}var N=u.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){Nx(o,u,d),typeof m!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var _=d.stack;this.componentDidCatch(d.value,{componentStack:_!==null?_:""})})}function mR(a,o,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&$s(o,u,m,!0),u=dn.current,u!==null){switch(u.tag){case 31:case 13:return Nn===null?kl():u.alternate===null&&ot===0&&(ot=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===ll?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),Eg(a,d,m)),!1;case 22:return u.flags|=65536,d===ll?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),Eg(a,d,m)),!1}throw Error(r(435,u.tag))}return Eg(a,d,m),kl(),!1}if(Ne)return o=dn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,d!==x0&&(a=Error(r(422),{cause:d}),Pi(bn(a,u)))):(d!==x0&&(o=Error(r(423),{cause:d}),Pi(bn(o,u))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,d=bn(d,u),m=J0(a.stateNode,d,m),D0(a,m),ot!==4&&(ot=2)),!1;var C=Error(r(520),{cause:d});if(C=bn(C,u),xo===null?xo=[C]:xo.push(C),ot!==4&&(ot=2),o===null)return!0;d=bn(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,a=m&-m,u.lanes|=a,a=J0(u.stateNode,d,a),D0(u,a),!1;case 1:if(o=u.type,C=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ta===null||!ta.has(C))))return u.flags|=65536,m&=-m,u.lanes|=m,m=Lx(m),Vx(m,a,u,d),D0(u,m),!1}u=u.return}while(u!==null);return!1}var I0=Error(r(461)),xt=!1;function kt(a,o,u,d){o.child=a===null?Uy(o,null,u,d):Ya(o,a.child,u,d)}function _x(a,o,u,d,m){u=u.render;var C=o.ref;if("ref"in d){var N={};for(var _ in d)_!=="ref"&&(N[_]=d[_])}else N=d;return Ha(o),d=k0(a,o,u,N,C,m),_=B0(),a!==null&&!xt?(U0(a,o,m),Sr(a,o,m)):(Ne&&_&&p0(o),o.flags|=1,kt(a,o,d,m),o.child)}function kx(a,o,u,d,m){if(a===null){var C=u.type;return typeof C=="function"&&!g0(C)&&C.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=C,Bx(a,o,C,d,m)):(a=rl(u.type,null,d,o,o.mode,m),a.ref=o.ref,a.return=o,o.child=a)}if(C=a.child,!og(a,m)){var N=C.memoizedProps;if(u=u.compare,u=u!==null?u:qi,u(N,d)&&a.ref===o.ref)return Sr(a,o,m)}return o.flags|=1,a=pr(C,d),a.ref=o.ref,a.return=o,o.child=a}function Bx(a,o,u,d,m){if(a!==null){var C=a.memoizedProps;if(qi(C,d)&&a.ref===o.ref)if(xt=!1,o.pendingProps=d=C,og(a,m))(a.flags&131072)!==0&&(xt=!0);else return o.lanes=a.lanes,Sr(a,o,m)}return eg(a,o,u,d,m)}function Ux(a,o,u,d){var m=d.children,C=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(C=C!==null?C.baseLanes|u:u,a!==null){for(d=o.child=a.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~C}else d=0,o.child=null;return Fx(a,o,C,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&ol(o,C!==null?C.cachePool:null),C!==null?Gy(o,C):N0(),zy(o);else return d=o.lanes=536870912,Fx(a,o,C!==null?C.baseLanes|u:u,u,d)}else C!==null?(ol(o,C.cachePool),Gy(o,C),Pr(),o.memoizedState=null):(a!==null&&ol(o,null),N0(),Pr());return kt(a,o,m,u),o.child}function lo(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Fx(a,o,u,d,m){var C=w0();return C=C===null?null:{parent:pt._currentValue,pool:C},o.memoizedState={baseLanes:u,cachePool:C},a!==null&&ol(o,null),N0(),zy(o),a!==null&&$s(a,o,d,!0),o.childLanes=m,null}function El(a,o){return o=Ml({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function jx(a,o,u){return Ya(o,a.child,null,u),a=El(o,o.pendingProps),a.flags|=2,pn(o),o.memoizedState=null,a}function TR(a,o,u){var d=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Ne){if(d.mode==="hidden")return a=El(o,d),o.lanes=536870912,lo(null,a);if(V0(o),(a=Qe)?(a=Qv(a,Rn),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Hr!==null?{id:Jn,overflow:In}:null,retryLane:536870912,hydrationErrors:null},u=Sy(a),u.return=o,o.child=u,Vt=o,Qe=null)):a=null,a===null)throw Kr(o);return o.lanes=536870912,null}return El(o,d)}var C=a.memoizedState;if(C!==null){var N=C.dehydrated;if(V0(o),m)if(o.flags&256)o.flags&=-257,o=jx(a,o,u);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(r(558));else if(xt||$s(a,o,u,!1),m=(u&a.childLanes)!==0,xt||m){if(d=Xe,d!==null&&(N=D1(d,u),N!==0&&N!==C.retryLane))throw C.retryLane=N,Ga(a,N),on(d,a,N),I0;kl(),o=jx(a,o,u)}else a=C.treeContext,Qe=Ln(N.nextSibling),Vt=o,Ne=!0,Wr=null,Rn=!1,a!==null&&wy(o,a),o=El(o,d),o.flags|=4096;return o}return a=pr(a.child,{mode:d.mode,children:d.children}),a.ref=o.ref,o.child=a,a.return=o,a}function wl(a,o){var u=o.ref;if(u===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(a===null||a.ref!==u)&&(o.flags|=4194816)}}function eg(a,o,u,d,m){return Ha(o),u=k0(a,o,u,d,void 0,m),d=B0(),a!==null&&!xt?(U0(a,o,m),Sr(a,o,m)):(Ne&&d&&p0(o),o.flags|=1,kt(a,o,u,m),o.child)}function Gx(a,o,u,d,m,C){return Ha(o),o.updateQueue=null,u=$y(o,d,u,m),Ay(a),d=B0(),a!==null&&!xt?(U0(a,o,C),Sr(a,o,C)):(Ne&&d&&p0(o),o.flags|=1,kt(a,o,u,C),o.child)}function zx(a,o,u,d,m){if(Ha(o),o.stateNode===null){var C=js,N=u.contextType;typeof N=="object"&&N!==null&&(C=_t(N)),C=new u(d,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=P0,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=d,C.state=o.memoizedState,C.refs={},b0(o),N=u.contextType,C.context=typeof N=="object"&&N!==null?_t(N):js,C.state=o.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(Q0(o,u,N,d),C.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(N=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),N!==C.state&&P0.enqueueReplaceState(C,C.state,null),ao(o,d,C,m),ro(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){C=o.stateNode;var _=o.memoizedProps,G=Za(u,_);C.props=G;var X=C.context,ne=u.contextType;N=js,typeof ne=="object"&&ne!==null&&(N=_t(ne));var se=u.getDerivedStateFromProps;ne=typeof se=="function"||typeof C.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,ne||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(_||X!==N)&&bx(o,C,d,N),Yr=!1;var q=o.memoizedState;C.state=q,ao(o,d,C,m),ro(),X=o.memoizedState,_||q!==X||Yr?(typeof se=="function"&&(Q0(o,u,se,d),X=o.memoizedState),(G=Yr||Mx(o,u,G,d,q,X,N))?(ne||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=X),C.props=d,C.state=X,C.context=N,d=G):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{C=o.stateNode,O0(a,o),N=o.memoizedProps,ne=Za(u,N),C.props=ne,se=o.pendingProps,q=C.context,X=u.contextType,G=js,typeof X=="object"&&X!==null&&(G=_t(X)),_=u.getDerivedStateFromProps,(X=typeof _=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(N!==se||q!==G)&&bx(o,C,d,G),Yr=!1,q=o.memoizedState,C.state=q,ao(o,d,C,m),ro();var I=o.memoizedState;N!==se||q!==I||Yr||a!==null&&a.dependencies!==null&&sl(a.dependencies)?(typeof _=="function"&&(Q0(o,u,_,d),I=o.memoizedState),(ne=Yr||Mx(o,u,ne,d,q,I,G)||a!==null&&a.dependencies!==null&&sl(a.dependencies))?(X||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,I,G),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,I,G)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||N===a.memoizedProps&&q===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&q===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=I),C.props=d,C.state=I,C.context=G,d=ne):(typeof C.componentDidUpdate!="function"||N===a.memoizedProps&&q===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&q===a.memoizedState||(o.flags|=1024),d=!1)}return C=d,wl(a,o),d=(o.flags&128)!==0,C||d?(C=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,a!==null&&d?(o.child=Ya(o,a.child,null,m),o.child=Ya(o,null,u,m)):kt(a,o,u,m),o.memoizedState=C.state,a=o.child):a=Sr(a,o,m),a}function Ax(a,o,u,d){return Aa(),o.flags|=256,kt(a,o,u,d),o.child}var tg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ng(a){return{baseLanes:a,cachePool:Ny()}}function rg(a,o,u){return a=a!==null?a.childLanes&~u:0,o&&(a|=xn),a}function $x(a,o,u){var d=o.pendingProps,m=!1,C=(o.flags&128)!==0,N;if((N=C)||(N=a!==null&&a.memoizedState===null?!1:(gt.current&2)!==0),N&&(m=!0,o.flags&=-129),N=(o.flags&32)!==0,o.flags&=-33,a===null){if(Ne){if(m?Qr(o):Pr(),(a=Qe)?(a=Qv(a,Rn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Hr!==null?{id:Jn,overflow:In}:null,retryLane:536870912,hydrationErrors:null},u=Sy(a),u.return=o,o.child=u,Vt=o,Qe=null)):a=null,a===null)throw Kr(o);return Gg(a)?o.lanes=32:o.lanes=536870912,null}var _=d.children;return d=d.fallback,m?(Pr(),m=o.mode,_=Ml({mode:"hidden",children:_},m),d=za(d,m,u,null),_.return=o,d.return=o,_.sibling=d,o.child=_,d=o.child,d.memoizedState=ng(u),d.childLanes=rg(a,N,u),o.memoizedState=tg,lo(null,d)):(Qr(o),ag(o,_))}var G=a.memoizedState;if(G!==null&&(_=G.dehydrated,_!==null)){if(C)o.flags&256?(Qr(o),o.flags&=-257,o=sg(a,o,u)):o.memoizedState!==null?(Pr(),o.child=a.child,o.flags|=128,o=null):(Pr(),_=d.fallback,m=o.mode,d=Ml({mode:"visible",children:d.children},m),_=za(_,m,u,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,Ya(o,a.child,null,u),d=o.child,d.memoizedState=ng(u),d.childLanes=rg(a,N,u),o.memoizedState=tg,o=lo(null,d));else if(Qr(o),Gg(_)){if(N=_.nextSibling&&_.nextSibling.dataset,N)var X=N.dgst;N=X,d=Error(r(419)),d.stack="",d.digest=N,Pi({value:d,source:null,stack:null}),o=sg(a,o,u)}else if(xt||$s(a,o,u,!1),N=(u&a.childLanes)!==0,xt||N){if(N=Xe,N!==null&&(d=D1(N,u),d!==0&&d!==G.retryLane))throw G.retryLane=d,Ga(a,d),on(N,a,d),I0;jg(_)||kl(),o=sg(a,o,u)}else jg(_)?(o.flags|=192,o.child=a.child,o=null):(a=G.treeContext,Qe=Ln(_.nextSibling),Vt=o,Ne=!0,Wr=null,Rn=!1,a!==null&&wy(o,a),o=ag(o,d.children),o.flags|=4096);return o}return m?(Pr(),_=d.fallback,m=o.mode,G=a.child,X=G.sibling,d=pr(G,{mode:"hidden",children:d.children}),d.subtreeFlags=G.subtreeFlags&65011712,X!==null?_=pr(X,_):(_=za(_,m,u,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,lo(null,d),d=o.child,_=a.child.memoizedState,_===null?_=ng(u):(m=_.cachePool,m!==null?(G=pt._currentValue,m=m.parent!==G?{parent:G,pool:G}:m):m=Ny(),_={baseLanes:_.baseLanes|u,cachePool:m}),d.memoizedState=_,d.childLanes=rg(a,N,u),o.memoizedState=tg,lo(a.child,d)):(Qr(o),u=a.child,a=u.sibling,u=pr(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,a!==null&&(N=o.deletions,N===null?(o.deletions=[a],o.flags|=16):N.push(a)),o.child=u,o.memoizedState=null,u)}function ag(a,o){return o=Ml({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Ml(a,o){return a=hn(22,a,null,o),a.lanes=0,a}function sg(a,o,u){return Ya(o,a.child,null,u),a=ag(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Hx(a,o,u){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),T0(a.return,o,u)}function ig(a,o,u,d,m,C){var N=a.memoizedState;N===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m,treeForkCount:C}:(N.isBackwards=o,N.rendering=null,N.renderingStartTime=0,N.last=d,N.tail=u,N.tailMode=m,N.treeForkCount=C)}function Wx(a,o,u){var d=o.pendingProps,m=d.revealOrder,C=d.tail;d=d.children;var N=gt.current,_=(N&2)!==0;if(_?(N=N&1|2,o.flags|=128):N&=1,ee(gt,N),kt(a,o,d,u),d=Ne?Qi:0,!_&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Hx(a,u,o);else if(a.tag===19)Hx(a,u,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(m){case"forwards":for(u=o.child,m=null;u!==null;)a=u.alternate,a!==null&&hl(a)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),ig(o,!1,m,u,C,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(a=m.alternate,a!==null&&hl(a)===null){o.child=m;break}a=m.sibling,m.sibling=u,u=m,m=a}ig(o,!0,u,null,C,d);break;case"together":ig(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Sr(a,o,u){if(a!==null&&(o.dependencies=a.dependencies),ea|=o.lanes,(u&o.childLanes)===0)if(a!==null){if($s(a,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(r(153));if(o.child!==null){for(a=o.child,u=pr(a,a.pendingProps),o.child=u,u.return=o;a.sibling!==null;)a=a.sibling,u=u.sibling=pr(a,a.pendingProps),u.return=o;u.sibling=null}return o.child}function og(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&sl(a)))}function SR(a,o,u){switch(o.tag){case 3:Ze(o,o.stateNode.containerInfo),Xr(o,pt,a.memoizedState.cache),Aa();break;case 27:case 5:It(o);break;case 4:Ze(o,o.stateNode.containerInfo);break;case 10:Xr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,V0(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(Qr(o),o.flags|=128,null):(u&o.child.childLanes)!==0?$x(a,o,u):(Qr(o),a=Sr(a,o,u),a!==null?a.sibling:null);Qr(o);break;case 19:var m=(a.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||($s(a,o,u,!1),d=(u&o.childLanes)!==0),m){if(d)return Wx(a,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ee(gt,gt.current),d)break;return null;case 22:return o.lanes=0,Ux(a,o,u,o.pendingProps);case 24:Xr(o,pt,a.memoizedState.cache)}return Sr(a,o,u)}function Kx(a,o,u){if(a!==null)if(a.memoizedProps!==o.pendingProps)xt=!0;else{if(!og(a,u)&&(o.flags&128)===0)return xt=!1,SR(a,o,u);xt=(a.flags&131072)!==0}else xt=!1,Ne&&(o.flags&1048576)!==0&&Ey(o,Qi,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(a=Ka(o.elementType),o.type=a,typeof a=="function")g0(a)?(d=Za(a,d),o.tag=1,o=zx(null,o,a,d,u)):(o.tag=0,o=eg(null,o,a,d,u));else{if(a!=null){var m=a.$$typeof;if(m===O){o.tag=11,o=_x(null,o,a,d,u);break e}else if(m===L){o.tag=14,o=kx(null,o,a,d,u);break e}}throw o=Z(a)||a,Error(r(306,o,""))}}return o;case 0:return eg(a,o,o.type,o.pendingProps,u);case 1:return d=o.type,m=Za(d,o.pendingProps),zx(a,o,d,m,u);case 3:e:{if(Ze(o,o.stateNode.containerInfo),a===null)throw Error(r(387));d=o.pendingProps;var C=o.memoizedState;m=C.element,O0(a,o),ao(o,d,null,u);var N=o.memoizedState;if(d=N.cache,Xr(o,pt,d),d!==C.cache&&S0(o,[pt],u,!0),ro(),d=N.element,C.isDehydrated)if(C={element:d,isDehydrated:!1,cache:N.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=Ax(a,o,d,u);break e}else if(d!==m){m=bn(Error(r(424)),o),Pi(m),o=Ax(a,o,d,u);break e}else for(a=o.stateNode.containerInfo,a.nodeType===9?a=a.body:a=a.nodeName==="HTML"?a.ownerDocument.body:a,Qe=Ln(a.firstChild),Vt=o,Ne=!0,Wr=null,Rn=!0,u=Uy(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Aa(),d===m){o=Sr(a,o,u);break e}kt(a,o,d,u)}o=o.child}return o;case 26:return wl(a,o),a===null?(u=nm(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ne||(u=o.type,a=o.pendingProps,d=Al(fe.current).createElement(u),d[Lt]=o,d[en]=a,Bt(d,u,a),bt(d),o.stateNode=d):o.memoizedState=nm(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return It(o),a===null&&Ne&&(d=o.stateNode=Iv(o.type,o.pendingProps,fe.current),Vt=o,Rn=!0,m=Qe,sa(o.type)?(zg=m,Qe=Ln(d.firstChild)):Qe=m),kt(a,o,o.pendingProps.children,u),wl(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Ne&&((m=d=Qe)&&(d=PR(d,o.type,o.pendingProps,Rn),d!==null?(o.stateNode=d,Vt=o,Qe=Ln(d.firstChild),Rn=!1,m=!0):m=!1),m||Kr(o)),It(o),m=o.type,C=o.pendingProps,N=a!==null?a.memoizedProps:null,d=C.children,Bg(m,C)?d=null:N!==null&&Bg(m,N)&&(o.flags|=32),o.memoizedState!==null&&(m=k0(a,o,gR,null,null,u),Mo._currentValue=m),wl(a,o),kt(a,o,d,u),o.child;case 6:return a===null&&Ne&&((a=u=Qe)&&(u=JR(u,o.pendingProps,Rn),u!==null?(o.stateNode=u,Vt=o,Qe=null,a=!0):a=!1),a||Kr(o)),null;case 13:return $x(a,o,u);case 4:return Ze(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=Ya(o,null,d,u):kt(a,o,d,u),o.child;case 11:return _x(a,o,o.type,o.pendingProps,u);case 7:return kt(a,o,o.pendingProps,u),o.child;case 8:return kt(a,o,o.pendingProps.children,u),o.child;case 12:return kt(a,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,Xr(o,o.type,d.value),kt(a,o,d.children,u),o.child;case 9:return m=o.type._context,d=o.pendingProps.children,Ha(o),m=_t(m),d=d(m),o.flags|=1,kt(a,o,d,u),o.child;case 14:return kx(a,o,o.type,o.pendingProps,u);case 15:return Bx(a,o,o.type,o.pendingProps,u);case 19:return Wx(a,o,u);case 31:return TR(a,o,u);case 22:return Ux(a,o,u,o.pendingProps);case 24:return Ha(o),d=_t(pt),a===null?(m=w0(),m===null&&(m=Xe,C=C0(),m.pooledCache=C,C.refCount++,C!==null&&(m.pooledCacheLanes|=u),m=C),o.memoizedState={parent:d,cache:m},b0(o),Xr(o,pt,m)):((a.lanes&u)!==0&&(O0(a,o),ao(o,null,null,u),ro()),m=a.memoizedState,C=o.memoizedState,m.parent!==d?(m={parent:d,cache:d},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),Xr(o,pt,d)):(d=C.cache,Xr(o,pt,d),d!==m.cache&&S0(o,[pt],u,!0))),kt(a,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Cr(a){a.flags|=4}function cg(a,o,u,d,m){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(m&335544128)===m)if(a.stateNode.complete)a.flags|=8192;else if(vv())a.flags|=8192;else throw Xa=ll,M0}else a.flags&=-16777217}function Xx(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!om(o))if(vv())a.flags|=8192;else throw Xa=ll,M0}function bl(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?M1():536870912,a.lanes|=o,ei|=o)}function uo(a,o){if(!Ne)switch(a.tailMode){case"hidden":o=a.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?a.tail=null:u.sibling=null;break;case"collapsed":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Pe(a){var o=a.alternate!==null&&a.alternate.child===a.child,u=0,d=0;if(o)for(var m=a.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=d,a.childLanes=u,o}function CR(a,o,u){var d=o.pendingProps;switch(y0(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(o),null;case 1:return Pe(o),null;case 3:return u=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),vr(pt),je(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(a===null||a.child===null)&&(As(o)?Cr(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,v0())),Pe(o),null;case 26:var m=o.type,C=o.memoizedState;return a===null?(Cr(o),C!==null?(Pe(o),Xx(o,C)):(Pe(o),cg(o,m,null,d,u))):C?C!==a.memoizedState?(Cr(o),Pe(o),Xx(o,C)):(Pe(o),o.flags&=-16777217):(a=a.memoizedProps,a!==d&&Cr(o),Pe(o),cg(o,m,a,d,u)),null;case 27:if(ws(o),u=fe.current,m=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Cr(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Pe(o),null}a=ce.current,As(o)?My(o):(a=Iv(m,d,u),o.stateNode=a,Cr(o))}return Pe(o),null;case 5:if(ws(o),m=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Cr(o);else{if(!d){if(o.stateNode===null)throw Error(r(166));return Pe(o),null}if(C=ce.current,As(o))My(o);else{var N=Al(fe.current);switch(C){case 1:C=N.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:C=N.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":C=N.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":C=N.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":C=N.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof d.is=="string"?N.createElement("select",{is:d.is}):N.createElement("select"),d.multiple?C.multiple=!0:d.size&&(C.size=d.size);break;default:C=typeof d.is=="string"?N.createElement(m,{is:d.is}):N.createElement(m)}}C[Lt]=o,C[en]=d;e:for(N=o.child;N!==null;){if(N.tag===5||N.tag===6)C.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===o)break e;for(;N.sibling===null;){if(N.return===null||N.return===o)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}o.stateNode=C;e:switch(Bt(C,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Cr(o)}}return Pe(o),cg(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,u),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Cr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(r(166));if(a=fe.current,As(o)){if(a=o.stateNode,u=o.memoizedProps,d=null,m=Vt,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}a[Lt]=o,a=!!(a.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||$v(a.nodeValue,u)),a||Kr(o,!0)}else a=Al(a).createTextNode(d),a[Lt]=o,o.stateNode=a}return Pe(o),null;case 31:if(u=o.memoizedState,a===null||a.memoizedState!==null){if(d=As(o),u!==null){if(a===null){if(!d)throw Error(r(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[Lt]=o}else Aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pe(o),a=!1}else u=v0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=u),a=!0;if(!a)return o.flags&256?(pn(o),o):(pn(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Pe(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=As(o),d!==null&&d.dehydrated!==null){if(a===null){if(!m)throw Error(r(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Lt]=o}else Aa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Pe(o),m=!1}else m=v0(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(pn(o),o):(pn(o),null)}return pn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,a=a!==null&&a.memoizedState!==null,u&&(d=o.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),C=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(C=d.memoizedState.cachePool.pool),C!==m&&(d.flags|=2048)),u!==a&&u&&(o.child.flags|=8192),bl(o,o.updateQueue),Pe(o),null);case 4:return je(),a===null&&Ng(o.stateNode.containerInfo),Pe(o),null;case 10:return vr(o.type),Pe(o),null;case 19:if(Y(gt),d=o.memoizedState,d===null)return Pe(o),null;if(m=(o.flags&128)!==0,C=d.rendering,C===null)if(m)uo(d,!1);else{if(ot!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(C=hl(a),C!==null){for(o.flags|=128,uo(d,!1),a=C.updateQueue,o.updateQueue=a,bl(o,a),o.subtreeFlags=0,a=u,u=o.child;u!==null;)Ty(u,a),u=u.sibling;return ee(gt,gt.current&1|2),Ne&&yr(o,d.treeForkCount),o.child}a=a.sibling}d.tail!==null&&ln()>Ll&&(o.flags|=128,m=!0,uo(d,!1),o.lanes=4194304)}else{if(!m)if(a=hl(C),a!==null){if(o.flags|=128,m=!0,a=a.updateQueue,o.updateQueue=a,bl(o,a),uo(d,!0),d.tail===null&&d.tailMode==="hidden"&&!C.alternate&&!Ne)return Pe(o),null}else 2*ln()-d.renderingStartTime>Ll&&u!==536870912&&(o.flags|=128,m=!0,uo(d,!1),o.lanes=4194304);d.isBackwards?(C.sibling=o.child,o.child=C):(a=d.last,a!==null?a.sibling=C:o.child=C,d.last=C)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=ln(),a.sibling=null,u=gt.current,ee(gt,m?u&1|2:u&1),Ne&&yr(o,d.treeForkCount),a):(Pe(o),null);case 22:case 23:return pn(o),L0(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(Pe(o),o.subtreeFlags&6&&(o.flags|=8192)):Pe(o),u=o.updateQueue,u!==null&&bl(o,u.retryQueue),u=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),a!==null&&Y(Wa),null;case 24:return u=null,a!==null&&(u=a.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),vr(pt),Pe(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function ER(a,o){switch(y0(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return vr(pt),je(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return ws(o),null;case 31:if(o.memoizedState!==null){if(pn(o),o.alternate===null)throw Error(r(340));Aa()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(pn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Aa()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return Y(gt),null;case 4:return je(),null;case 10:return vr(o.type),null;case 22:case 23:return pn(o),L0(),a!==null&&Y(Wa),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return vr(pt),null;case 25:return null;default:return null}}function Yx(a,o){switch(y0(o),o.tag){case 3:vr(pt),je();break;case 26:case 27:case 5:ws(o);break;case 4:je();break;case 31:o.memoizedState!==null&&pn(o);break;case 13:pn(o);break;case 19:Y(gt);break;case 10:vr(o.type);break;case 22:case 23:pn(o),L0(),a!==null&&Y(Wa);break;case 24:vr(pt)}}function fo(a,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&a)===a){d=void 0;var C=u.create,N=u.inst;d=C(),N.destroy=d}u=u.next}while(u!==m)}}catch(_){Ae(o,o.return,_)}}function Jr(a,o,u){try{var d=o.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var C=m.next;d=C;do{if((d.tag&a)===a){var N=d.inst,_=N.destroy;if(_!==void 0){N.destroy=void 0,m=o;var G=u,X=_;try{X()}catch(ne){Ae(m,G,ne)}}}d=d.next}while(d!==C)}}catch(ne){Ae(o,o.return,ne)}}function qx(a){var o=a.updateQueue;if(o!==null){var u=a.stateNode;try{jy(o,u)}catch(d){Ae(a,a.return,d)}}}function Zx(a,o,u){u.props=Za(a.type,a.memoizedProps),u.state=a.memoizedState;try{u.componentWillUnmount()}catch(d){Ae(a,o,d)}}function go(a,o){try{var u=a.ref;if(u!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof u=="function"?a.refCleanup=u(d):u.current=d}}catch(m){Ae(a,o,m)}}function er(a,o){var u=a.ref,d=a.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){Ae(a,o,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Ae(a,o,m)}else u.current=null}function Qx(a){var o=a.type,u=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){Ae(a,a.return,m)}}function lg(a,o,u){try{var d=a.stateNode;KR(d,a.type,u,o),d[en]=o}catch(m){Ae(a,a.return,m)}}function Px(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&sa(a.type)||a.tag===4}function ug(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Px(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&sa(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function fg(a,o,u){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(a,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(a),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=hr));else if(d!==4&&(d===27&&sa(a.type)&&(u=a.stateNode,o=null),a=a.child,a!==null))for(fg(a,o,u),a=a.sibling;a!==null;)fg(a,o,u),a=a.sibling}function Ol(a,o,u){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?u.insertBefore(a,o):u.appendChild(a);else if(d!==4&&(d===27&&sa(a.type)&&(u=a.stateNode),a=a.child,a!==null))for(Ol(a,o,u),a=a.sibling;a!==null;)Ol(a,o,u),a=a.sibling}function Jx(a){var o=a.stateNode,u=a.memoizedProps;try{for(var d=a.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);Bt(o,d,u),o[Lt]=a,o[en]=u}catch(C){Ae(a,a.return,C)}}var Er=!1,vt=!1,gg=!1,Ix=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function wR(a,o){if(a=a.containerInfo,_g=ql,a=fy(a),s0(a)){if("selectionStart"in a)var u={start:a.selectionStart,end:a.selectionEnd};else e:{u=(u=a.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,C=d.focusNode;d=d.focusOffset;try{u.nodeType,C.nodeType}catch{u=null;break e}var N=0,_=-1,G=-1,X=0,ne=0,se=a,q=null;t:for(;;){for(var I;se!==u||m!==0&&se.nodeType!==3||(_=N+m),se!==C||d!==0&&se.nodeType!==3||(G=N+d),se.nodeType===3&&(N+=se.nodeValue.length),(I=se.firstChild)!==null;)q=se,se=I;for(;;){if(se===a)break t;if(q===u&&++X===m&&(_=N),q===C&&++ne===d&&(G=N),(I=se.nextSibling)!==null)break;se=q,q=se.parentNode}se=I}u=_===-1||G===-1?null:{start:_,end:G}}else u=null}u=u||{start:0,end:0}}else u=null;for(kg={focusedElem:a,selectionRange:u},ql=!1,Ot=o;Ot!==null;)if(o=Ot,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,Ot=a;else for(;Ot!==null;){switch(o=Ot,C=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(u=0;u<a.length;u++)m=a[u],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,u=o,m=C.memoizedProps,C=C.memoizedState,d=u.stateNode;try{var le=Za(u.type,m);a=d.getSnapshotBeforeUpdate(le,C),d.__reactInternalSnapshotBeforeUpdate=a}catch(ye){Ae(u,u.return,ye)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,u=a.nodeType,u===9)Fg(a);else if(u===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Fg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=o.sibling,a!==null){a.return=o.return,Ot=a;break}Ot=o.return}}function ev(a,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Mr(a,u),d&4&&fo(5,u);break;case 1:if(Mr(a,u),d&4)if(a=u.stateNode,o===null)try{a.componentDidMount()}catch(N){Ae(u,u.return,N)}else{var m=Za(u.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(m,o,a.__reactInternalSnapshotBeforeUpdate)}catch(N){Ae(u,u.return,N)}}d&64&&qx(u),d&512&&go(u,u.return);break;case 3:if(Mr(a,u),d&64&&(a=u.updateQueue,a!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{jy(a,o)}catch(N){Ae(u,u.return,N)}}break;case 27:o===null&&d&4&&Jx(u);case 26:case 5:Mr(a,u),o===null&&d&4&&Qx(u),d&512&&go(u,u.return);break;case 12:Mr(a,u);break;case 31:Mr(a,u),d&4&&rv(a,u);break;case 13:Mr(a,u),d&4&&av(a,u),d&64&&(a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(u=_R.bind(null,u),IR(a,u))));break;case 22:if(d=u.memoizedState!==null||Er,!d){o=o!==null&&o.memoizedState!==null||vt,m=Er;var C=vt;Er=d,(vt=o)&&!C?br(a,u,(u.subtreeFlags&8772)!==0):Mr(a,u),Er=m,vt=C}break;case 30:break;default:Mr(a,u)}}function tv(a){var o=a.alternate;o!==null&&(a.alternate=null,tv(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&$f(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var tt=null,nn=!1;function wr(a,o,u){for(u=u.child;u!==null;)nv(a,o,u),u=u.sibling}function nv(a,o,u){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Ui,u)}catch{}switch(u.tag){case 26:vt||er(u,o),wr(a,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:vt||er(u,o);var d=tt,m=nn;sa(u.type)&&(tt=u.stateNode,nn=!1),wr(a,o,u),Co(u.stateNode),tt=d,nn=m;break;case 5:vt||er(u,o);case 6:if(d=tt,m=nn,tt=null,wr(a,o,u),tt=d,nn=m,tt!==null)if(nn)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(u.stateNode)}catch(C){Ae(u,o,C)}else try{tt.removeChild(u.stateNode)}catch(C){Ae(u,o,C)}break;case 18:tt!==null&&(nn?(a=tt,qv(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,u.stateNode),ci(a)):qv(tt,u.stateNode));break;case 4:d=tt,m=nn,tt=u.stateNode.containerInfo,nn=!0,wr(a,o,u),tt=d,nn=m;break;case 0:case 11:case 14:case 15:Jr(2,u,o),vt||Jr(4,u,o),wr(a,o,u);break;case 1:vt||(er(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&Zx(u,o,d)),wr(a,o,u);break;case 21:wr(a,o,u);break;case 22:vt=(d=vt)||u.memoizedState!==null,wr(a,o,u),vt=d;break;default:wr(a,o,u)}}function rv(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{ci(a)}catch(u){Ae(o,o.return,u)}}}function av(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ci(a)}catch(u){Ae(o,o.return,u)}}function MR(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Ix),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Ix),o;default:throw Error(r(435,a.tag))}}function Dl(a,o){var u=MR(a);o.forEach(function(d){if(!u.has(d)){u.add(d);var m=kR.bind(null,a,d);d.then(m,m)}})}function rn(a,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],C=a,N=o,_=N;e:for(;_!==null;){switch(_.tag){case 27:if(sa(_.type)){tt=_.stateNode,nn=!1;break e}break;case 5:tt=_.stateNode,nn=!1;break e;case 3:case 4:tt=_.stateNode.containerInfo,nn=!0;break e}_=_.return}if(tt===null)throw Error(r(160));nv(C,N,m),tt=null,nn=!1,C=m.alternate,C!==null&&(C.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)sv(o,a),o=o.sibling}var Wn=null;function sv(a,o){var u=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:rn(o,a),an(a),d&4&&(Jr(3,a,a.return),fo(3,a),Jr(5,a,a.return));break;case 1:rn(o,a),an(a),d&512&&(vt||u===null||er(u,u.return)),d&64&&Er&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(u=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=Wn;if(rn(o,a),an(a),d&512&&(vt||u===null||er(u,u.return)),d&4){var C=u!==null?u.memoizedState:null;if(d=a.memoizedState,u===null)if(d===null)if(a.stateNode===null){e:{d=a.type,u=a.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":C=m.getElementsByTagName("title")[0],(!C||C[Gi]||C[Lt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=m.createElement(d),m.head.insertBefore(C,m.querySelector("head > title"))),Bt(C,d,u),C[Lt]=a,bt(C),d=C;break e;case"link":var N=sm("link","href",m).get(d+(u.href||""));if(N){for(var _=0;_<N.length;_++)if(C=N[_],C.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&C.getAttribute("rel")===(u.rel==null?null:u.rel)&&C.getAttribute("title")===(u.title==null?null:u.title)&&C.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){N.splice(_,1);break t}}C=m.createElement(d),Bt(C,d,u),m.head.appendChild(C);break;case"meta":if(N=sm("meta","content",m).get(d+(u.content||""))){for(_=0;_<N.length;_++)if(C=N[_],C.getAttribute("content")===(u.content==null?null:""+u.content)&&C.getAttribute("name")===(u.name==null?null:u.name)&&C.getAttribute("property")===(u.property==null?null:u.property)&&C.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&C.getAttribute("charset")===(u.charSet==null?null:u.charSet)){N.splice(_,1);break t}}C=m.createElement(d),Bt(C,d,u),m.head.appendChild(C);break;default:throw Error(r(468,d))}C[Lt]=a,bt(C),d=C}a.stateNode=d}else im(m,a.type,a.stateNode);else a.stateNode=am(m,d,a.memoizedProps);else C!==d?(C===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):C.count--,d===null?im(m,a.type,a.stateNode):am(m,d,a.memoizedProps)):d===null&&a.stateNode!==null&&lg(a,a.memoizedProps,u.memoizedProps)}break;case 27:rn(o,a),an(a),d&512&&(vt||u===null||er(u,u.return)),u!==null&&d&4&&lg(a,a.memoizedProps,u.memoizedProps);break;case 5:if(rn(o,a),an(a),d&512&&(vt||u===null||er(u,u.return)),a.flags&32){m=a.stateNode;try{Ls(m,"")}catch(le){Ae(a,a.return,le)}}d&4&&a.stateNode!=null&&(m=a.memoizedProps,lg(a,m,u!==null?u.memoizedProps:m)),d&1024&&(gg=!0);break;case 6:if(rn(o,a),an(a),d&4){if(a.stateNode===null)throw Error(r(162));d=a.memoizedProps,u=a.stateNode;try{u.nodeValue=d}catch(le){Ae(a,a.return,le)}}break;case 3:if(Wl=null,m=Wn,Wn=$l(o.containerInfo),rn(o,a),Wn=m,an(a),d&4&&u!==null&&u.memoizedState.isDehydrated)try{ci(o.containerInfo)}catch(le){Ae(a,a.return,le)}gg&&(gg=!1,iv(a));break;case 4:d=Wn,Wn=$l(a.stateNode.containerInfo),rn(o,a),an(a),Wn=d;break;case 12:rn(o,a),an(a);break;case 31:rn(o,a),an(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Dl(a,d)));break;case 13:rn(o,a),an(a),a.child.flags&8192&&a.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Nl=ln()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Dl(a,d)));break;case 22:m=a.memoizedState!==null;var G=u!==null&&u.memoizedState!==null,X=Er,ne=vt;if(Er=X||m,vt=ne||G,rn(o,a),vt=ne,Er=X,an(a),d&8192)e:for(o=a.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(u===null||G||Er||vt||Qa(a)),u=null,o=a;;){if(o.tag===5||o.tag===26){if(u===null){G=u=o;try{if(C=G.stateNode,m)N=C.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{_=G.stateNode;var se=G.memoizedProps.style,q=se!=null&&se.hasOwnProperty("display")?se.display:null;_.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(le){Ae(G,G.return,le)}}}else if(o.tag===6){if(u===null){G=o;try{G.stateNode.nodeValue=m?"":G.memoizedProps}catch(le){Ae(G,G.return,le)}}}else if(o.tag===18){if(u===null){G=o;try{var I=G.stateNode;m?Zv(I,!0):Zv(G.stateNode,!1)}catch(le){Ae(G,G.return,le)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Dl(a,u))));break;case 19:rn(o,a),an(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Dl(a,d)));break;case 30:break;case 21:break;default:rn(o,a),an(a)}}function an(a){var o=a.flags;if(o&2){try{for(var u,d=a.return;d!==null;){if(Px(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,C=ug(a);Ol(a,C,m);break;case 5:var N=u.stateNode;u.flags&32&&(Ls(N,""),u.flags&=-33);var _=ug(a);Ol(a,_,N);break;case 3:case 4:var G=u.stateNode.containerInfo,X=ug(a);fg(a,X,G);break;default:throw Error(r(161))}}catch(ne){Ae(a,a.return,ne)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function iv(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;iv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Mr(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ev(a,o.alternate,o),o=o.sibling}function Qa(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Jr(4,o,o.return),Qa(o);break;case 1:er(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Zx(o,o.return,u),Qa(o);break;case 27:Co(o.stateNode);case 26:case 5:er(o,o.return),Qa(o);break;case 22:o.memoizedState===null&&Qa(o);break;case 30:Qa(o);break;default:Qa(o)}a=a.sibling}}function br(a,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,m=a,C=o,N=C.flags;switch(C.tag){case 0:case 11:case 15:br(m,C,u),fo(4,C);break;case 1:if(br(m,C,u),d=C,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){Ae(d,d.return,X)}if(d=C,m=d.updateQueue,m!==null){var _=d.stateNode;try{var G=m.shared.hiddenCallbacks;if(G!==null)for(m.shared.hiddenCallbacks=null,m=0;m<G.length;m++)Fy(G[m],_)}catch(X){Ae(d,d.return,X)}}u&&N&64&&qx(C),go(C,C.return);break;case 27:Jx(C);case 26:case 5:br(m,C,u),u&&d===null&&N&4&&Qx(C),go(C,C.return);break;case 12:br(m,C,u);break;case 31:br(m,C,u),u&&N&4&&rv(m,C);break;case 13:br(m,C,u),u&&N&4&&av(m,C);break;case 22:C.memoizedState===null&&br(m,C,u),go(C,C.return);break;case 30:break;default:br(m,C,u)}o=o.sibling}}function hg(a,o){var u=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(u=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==u&&(a!=null&&a.refCount++,u!=null&&Ji(u))}function dg(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ji(a))}function Kn(a,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ov(a,o,u,d),o=o.sibling}function ov(a,o,u,d){var m=o.flags;switch(o.tag){case 0:case 11:case 15:Kn(a,o,u,d),m&2048&&fo(9,o);break;case 1:Kn(a,o,u,d);break;case 3:Kn(a,o,u,d),m&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ji(a)));break;case 12:if(m&2048){Kn(a,o,u,d),a=o.stateNode;try{var C=o.memoizedProps,N=C.id,_=C.onPostCommit;typeof _=="function"&&_(N,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(G){Ae(o,o.return,G)}}else Kn(a,o,u,d);break;case 31:Kn(a,o,u,d);break;case 13:Kn(a,o,u,d);break;case 23:break;case 22:C=o.stateNode,N=o.alternate,o.memoizedState!==null?C._visibility&2?Kn(a,o,u,d):ho(a,o):C._visibility&2?Kn(a,o,u,d):(C._visibility|=2,Ps(a,o,u,d,(o.subtreeFlags&10256)!==0||!1)),m&2048&&hg(N,o);break;case 24:Kn(a,o,u,d),m&2048&&dg(o.alternate,o);break;default:Kn(a,o,u,d)}}function Ps(a,o,u,d,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var C=a,N=o,_=u,G=d,X=N.flags;switch(N.tag){case 0:case 11:case 15:Ps(C,N,_,G,m),fo(8,N);break;case 23:break;case 22:var ne=N.stateNode;N.memoizedState!==null?ne._visibility&2?Ps(C,N,_,G,m):ho(C,N):(ne._visibility|=2,Ps(C,N,_,G,m)),m&&X&2048&&hg(N.alternate,N);break;case 24:Ps(C,N,_,G,m),m&&X&2048&&dg(N.alternate,N);break;default:Ps(C,N,_,G,m)}o=o.sibling}}function ho(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=a,d=o,m=d.flags;switch(d.tag){case 22:ho(u,d),m&2048&&hg(d.alternate,d);break;case 24:ho(u,d),m&2048&&dg(d.alternate,d);break;default:ho(u,d)}o=o.sibling}}var po=8192;function Js(a,o,u){if(a.subtreeFlags&po)for(a=a.child;a!==null;)cv(a,o,u),a=a.sibling}function cv(a,o,u){switch(a.tag){case 26:Js(a,o,u),a.flags&po&&a.memoizedState!==null&&fN(u,Wn,a.memoizedState,a.memoizedProps);break;case 5:Js(a,o,u);break;case 3:case 4:var d=Wn;Wn=$l(a.stateNode.containerInfo),Js(a,o,u),Wn=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=po,po=16777216,Js(a,o,u),po=d):Js(a,o,u));break;default:Js(a,o,u)}}function lv(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function yo(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Ot=d,fv(d,a)}lv(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)uv(a),a=a.sibling}function uv(a){switch(a.tag){case 0:case 11:case 15:yo(a),a.flags&2048&&Jr(9,a,a.return);break;case 3:yo(a);break;case 12:yo(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Rl(a)):yo(a);break;default:yo(a)}}function Rl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Ot=d,fv(d,a)}lv(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Jr(8,o,o.return),Rl(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Rl(o));break;default:Rl(o)}a=a.sibling}}function fv(a,o){for(;Ot!==null;){var u=Ot;switch(u.tag){case 0:case 11:case 15:Jr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ji(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Ot=d;else e:for(u=a;Ot!==null;){d=Ot;var m=d.sibling,C=d.return;if(tv(d),d===u){Ot=null;break e}if(m!==null){m.return=C,Ot=m;break e}Ot=C}}}var bR={getCacheForType:function(a){var o=_t(pt),u=o.data.get(a);return u===void 0&&(u=a(),o.data.set(a,u)),u},cacheSignal:function(){return _t(pt).controller.signal}},OR=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Xe=null,be=null,De=0,ze=0,yn=null,Ir=!1,Is=!1,pg=!1,Or=0,ot=0,ea=0,Pa=0,yg=0,xn=0,ei=0,xo=null,sn=null,xg=!1,Nl=0,gv=0,Ll=1/0,Vl=null,ta=null,St=0,na=null,ti=null,Dr=0,vg=0,mg=null,hv=null,vo=0,Tg=null;function vn(){return(Fe&2)!==0&&De!==0?De&-De:F.T!==null?bg():R1()}function dv(){if(xn===0)if((De&536870912)===0||Ne){var a=zc;zc<<=1,(zc&3932160)===0&&(zc=262144),xn=a}else xn=536870912;return a=dn.current,a!==null&&(a.flags|=32),xn}function on(a,o,u){(a===Xe&&(ze===2||ze===9)||a.cancelPendingCommit!==null)&&(ni(a,0),ra(a,De,xn,!1)),ji(a,u),((Fe&2)===0||a!==Xe)&&(a===Xe&&((Fe&2)===0&&(Pa|=u),ot===4&&ra(a,De,xn,!1)),tr(a))}function pv(a,o,u){if((Fe&6)!==0)throw Error(r(327));var d=!u&&(o&127)===0&&(o&a.expiredLanes)===0||Fi(a,o),m=d?NR(a,o):Cg(a,o,!0),C=d;do{if(m===0){Is&&!d&&ra(a,o,0,!1);break}else{if(u=a.current.alternate,C&&!DR(u)){m=Cg(a,o,!1),C=!1;continue}if(m===2){if(C=o,a.errorRecoveryDisabledLanes&C)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){o=N;e:{var _=a;m=xo;var G=_.current.memoizedState.isDehydrated;if(G&&(ni(_,N).flags|=256),N=Cg(_,N,!1),N!==2){if(pg&&!G){_.errorRecoveryDisabledLanes|=C,Pa|=C,m=4;break e}C=sn,sn=m,C!==null&&(sn===null?sn=C:sn.push.apply(sn,C))}m=N}if(C=!1,m!==2)continue}}if(m===1){ni(a,0),ra(a,o,0,!0);break}e:{switch(d=a,C=m,C){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:ra(d,o,xn,!Ir);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(m=Nl+300-ln(),10<m)){if(ra(d,o,xn,!Ir),$c(d,0,!0)!==0)break e;Dr=o,d.timeoutHandle=Xv(yv.bind(null,d,u,sn,Vl,xg,o,xn,Pa,ei,Ir,C,"Throttled",-0,0),m);break e}yv(d,u,sn,Vl,xg,o,xn,Pa,ei,Ir,C,null,-0,0)}}break}while(!0);tr(a)}function yv(a,o,u,d,m,C,N,_,G,X,ne,se,q,I){if(a.timeoutHandle=-1,se=o.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hr},cv(o,C,se);var le=(C&62914560)===C?Nl-ln():(C&4194048)===C?gv-ln():0;if(le=gN(se,le),le!==null){Dr=C,a.cancelPendingCommit=le(wv.bind(null,a,o,C,u,d,m,N,_,G,ne,se,null,q,I)),ra(a,C,N,!X);return}}wv(a,o,C,u,d,m,N,_,G)}function DR(a){for(var o=a;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],C=m.getSnapshot;m=m.value;try{if(!gn(C(),m))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ra(a,o,u,d){o&=~yg,o&=~Pa,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var m=o;0<m;){var C=31-fn(m),N=1<<C;d[C]=-1,m&=~N}u!==0&&b1(a,u,o)}function _l(){return(Fe&6)===0?(mo(0),!1):!0}function Sg(){if(be!==null){if(ze===0)var a=be.return;else a=be,xr=$a=null,F0(a),Xs=null,eo=0,a=be;for(;a!==null;)Yx(a.alternate,a),a=a.return;be=null}}function ni(a,o){var u=a.timeoutHandle;u!==-1&&(a.timeoutHandle=-1,qR(u)),u=a.cancelPendingCommit,u!==null&&(a.cancelPendingCommit=null,u()),Dr=0,Sg(),Xe=a,be=u=pr(a.current,null),De=o,ze=0,yn=null,Ir=!1,Is=Fi(a,o),pg=!1,ei=xn=yg=Pa=ea=ot=0,sn=xo=null,xg=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var m=31-fn(d),C=1<<m;o|=a[m],d&=~C}return Or=o,el(),u}function xv(a,o){Se=null,F.H=co,o===Ks||o===cl?(o=_y(),ze=3):o===M0?(o=_y(),ze=4):ze=o===I0?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,yn=o,be===null&&(ot=1,Cl(a,bn(o,a.current)))}function vv(){var a=dn.current;return a===null?!0:(De&4194048)===De?Nn===null:(De&62914560)===De||(De&536870912)!==0?a===Nn:!1}function mv(){var a=F.H;return F.H=co,a===null?co:a}function Tv(){var a=F.A;return F.A=bR,a}function kl(){ot=4,Ir||(De&4194048)!==De&&dn.current!==null||(Is=!0),(ea&134217727)===0&&(Pa&134217727)===0||Xe===null||ra(Xe,De,xn,!1)}function Cg(a,o,u){var d=Fe;Fe|=2;var m=mv(),C=Tv();(Xe!==a||De!==o)&&(Vl=null,ni(a,o)),o=!1;var N=ot;e:do try{if(ze!==0&&be!==null){var _=be,G=yn;switch(ze){case 8:Sg(),N=6;break e;case 3:case 2:case 9:case 6:dn.current===null&&(o=!0);var X=ze;if(ze=0,yn=null,ri(a,_,G,X),u&&Is){N=0;break e}break;default:X=ze,ze=0,yn=null,ri(a,_,G,X)}}RR(),N=ot;break}catch(ne){xv(a,ne)}while(!0);return o&&a.shellSuspendCounter++,xr=$a=null,Fe=d,F.H=m,F.A=C,be===null&&(Xe=null,De=0,el()),N}function RR(){for(;be!==null;)Sv(be)}function NR(a,o){var u=Fe;Fe|=2;var d=mv(),m=Tv();Xe!==a||De!==o?(Vl=null,Ll=ln()+500,ni(a,o)):Is=Fi(a,o);e:do try{if(ze!==0&&be!==null){o=be;var C=yn;t:switch(ze){case 1:ze=0,yn=null,ri(a,o,C,1);break;case 2:case 9:if(Ly(C)){ze=0,yn=null,Cv(o);break}o=function(){ze!==2&&ze!==9||Xe!==a||(ze=7),tr(a)},C.then(o,o);break e;case 3:ze=7;break e;case 4:ze=5;break e;case 7:Ly(C)?(ze=0,yn=null,Cv(o)):(ze=0,yn=null,ri(a,o,C,7));break;case 5:var N=null;switch(be.tag){case 26:N=be.memoizedState;case 5:case 27:var _=be;if(N?om(N):_.stateNode.complete){ze=0,yn=null;var G=_.sibling;if(G!==null)be=G;else{var X=_.return;X!==null?(be=X,Bl(X)):be=null}break t}}ze=0,yn=null,ri(a,o,C,5);break;case 6:ze=0,yn=null,ri(a,o,C,6);break;case 8:Sg(),ot=6;break e;default:throw Error(r(462))}}LR();break}catch(ne){xv(a,ne)}while(!0);return xr=$a=null,F.H=d,F.A=m,Fe=u,be!==null?0:(Xe=null,De=0,el(),ot)}function LR(){for(;be!==null&&!eD();)Sv(be)}function Sv(a){var o=Kx(a.alternate,a,Or);a.memoizedProps=a.pendingProps,o===null?Bl(a):be=o}function Cv(a){var o=a,u=o.alternate;switch(o.tag){case 15:case 0:o=Gx(u,o,o.pendingProps,o.type,void 0,De);break;case 11:o=Gx(u,o,o.pendingProps,o.type.render,o.ref,De);break;case 5:F0(o);default:Yx(u,o),o=be=Ty(o,Or),o=Kx(u,o,Or)}a.memoizedProps=a.pendingProps,o===null?Bl(a):be=o}function ri(a,o,u,d){xr=$a=null,F0(o),Xs=null,eo=0;var m=o.return;try{if(mR(a,m,o,u,De)){ot=1,Cl(a,bn(u,a.current)),be=null;return}}catch(C){if(m!==null)throw be=m,C;ot=1,Cl(a,bn(u,a.current)),be=null;return}o.flags&32768?(Ne||d===1?a=!0:Is||(De&536870912)!==0?a=!1:(Ir=a=!0,(d===2||d===9||d===3||d===6)&&(d=dn.current,d!==null&&d.tag===13&&(d.flags|=16384))),Ev(o,a)):Bl(o)}function Bl(a){var o=a;do{if((o.flags&32768)!==0){Ev(o,Ir);return}a=o.return;var u=CR(o.alternate,o,Or);if(u!==null){be=u;return}if(o=o.sibling,o!==null){be=o;return}be=o=a}while(o!==null);ot===0&&(ot=5)}function Ev(a,o){do{var u=ER(a.alternate,a);if(u!==null){u.flags&=32767,be=u;return}if(u=a.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(a=a.sibling,a!==null)){be=a;return}be=a=u}while(a!==null);ot=6,be=null}function wv(a,o,u,d,m,C,N,_,G){a.cancelPendingCommit=null;do Ul();while(St!==0);if((Fe&6)!==0)throw Error(r(327));if(o!==null){if(o===a.current)throw Error(r(177));if(C=o.lanes|o.childLanes,C|=u0,uD(a,u,C,N,_,G),a===Xe&&(be=Xe=null,De=0),ti=o,na=a,Dr=u,vg=C,mg=m,hv=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,BR(jc,function(){return Rv(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=F.T,F.T=null,m=P.p,P.p=2,N=Fe,Fe|=4;try{wR(a,o,u)}finally{Fe=N,P.p=m,F.T=d}}St=1,Mv(),bv(),Ov()}}function Mv(){if(St===1){St=0;var a=na,o=ti,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=F.T,F.T=null;var d=P.p;P.p=2;var m=Fe;Fe|=4;try{sv(o,a);var C=kg,N=fy(a.containerInfo),_=C.focusedElem,G=C.selectionRange;if(N!==_&&_&&_.ownerDocument&&uy(_.ownerDocument.documentElement,_)){if(G!==null&&s0(_)){var X=G.start,ne=G.end;if(ne===void 0&&(ne=X),"selectionStart"in _)_.selectionStart=X,_.selectionEnd=Math.min(ne,_.value.length);else{var se=_.ownerDocument||document,q=se&&se.defaultView||window;if(q.getSelection){var I=q.getSelection(),le=_.textContent.length,ye=Math.min(G.start,le),Ke=G.end===void 0?ye:Math.min(G.end,le);!I.extend&&ye>Ke&&(N=Ke,Ke=ye,ye=N);var H=ly(_,ye),A=ly(_,Ke);if(H&&A&&(I.rangeCount!==1||I.anchorNode!==H.node||I.anchorOffset!==H.offset||I.focusNode!==A.node||I.focusOffset!==A.offset)){var K=se.createRange();K.setStart(H.node,H.offset),I.removeAllRanges(),ye>Ke?(I.addRange(K),I.extend(A.node,A.offset)):(K.setEnd(A.node,A.offset),I.addRange(K))}}}}for(se=[],I=_;I=I.parentNode;)I.nodeType===1&&se.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<se.length;_++){var re=se[_];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}ql=!!_g,kg=_g=null}finally{Fe=m,P.p=d,F.T=u}}a.current=o,St=2}}function bv(){if(St===2){St=0;var a=na,o=ti,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=F.T,F.T=null;var d=P.p;P.p=2;var m=Fe;Fe|=4;try{ev(a,o.alternate,o)}finally{Fe=m,P.p=d,F.T=u}}St=3}}function Ov(){if(St===4||St===3){St=0,tD();var a=na,o=ti,u=Dr,d=hv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?St=5:(St=0,ti=na=null,Dv(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(ta=null),zf(u),o=o.stateNode,un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Ui,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=F.T,m=P.p,P.p=2,F.T=null;try{for(var C=a.onRecoverableError,N=0;N<d.length;N++){var _=d[N];C(_.value,{componentStack:_.stack})}}finally{F.T=o,P.p=m}}(Dr&3)!==0&&Ul(),tr(a),m=a.pendingLanes,(u&261930)!==0&&(m&42)!==0?a===Tg?vo++:(vo=0,Tg=a):vo=0,mo(0)}}function Dv(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Ji(o)))}function Ul(){return Mv(),bv(),Ov(),Rv()}function Rv(){if(St!==5)return!1;var a=na,o=vg;vg=0;var u=zf(Dr),d=F.T,m=P.p;try{P.p=32>u?32:u,F.T=null,u=mg,mg=null;var C=na,N=Dr;if(St=0,ti=na=null,Dr=0,(Fe&6)!==0)throw Error(r(331));var _=Fe;if(Fe|=4,uv(C.current),ov(C,C.current,N,u),Fe=_,mo(0,!1),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Ui,C)}catch{}return!0}finally{P.p=m,F.T=d,Dv(a,o)}}function Nv(a,o,u){o=bn(u,o),o=J0(a.stateNode,o,2),a=Zr(a,o,2),a!==null&&(ji(a,2),tr(a))}function Ae(a,o,u){if(a.tag===3)Nv(a,a,u);else for(;o!==null;){if(o.tag===3){Nv(o,a,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ta===null||!ta.has(d))){a=bn(u,a),u=Lx(2),d=Zr(o,u,2),d!==null&&(Vx(u,d,o,a),ji(d,2),tr(d));break}}o=o.return}}function Eg(a,o,u){var d=a.pingCache;if(d===null){d=a.pingCache=new OR;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(pg=!0,m.add(u),a=VR.bind(null,a,o,u),o.then(a,a))}function VR(a,o,u){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&u,a.warmLanes&=~u,Xe===a&&(De&u)===u&&(ot===4||ot===3&&(De&62914560)===De&&300>ln()-Nl?(Fe&2)===0&&ni(a,0):yg|=u,ei===De&&(ei=0)),tr(a)}function Lv(a,o){o===0&&(o=M1()),a=Ga(a,o),a!==null&&(ji(a,o),tr(a))}function _R(a){var o=a.memoizedState,u=0;o!==null&&(u=o.retryLane),Lv(a,u)}function kR(a,o){var u=0;switch(a.tag){case 31:case 13:var d=a.stateNode,m=a.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(o),Lv(a,u)}function BR(a,o){return Uf(a,o)}var Fl=null,ai=null,wg=!1,jl=!1,Mg=!1,aa=0;function tr(a){a!==ai&&a.next===null&&(ai===null?Fl=ai=a:ai=ai.next=a),jl=!0,wg||(wg=!0,FR())}function mo(a,o){if(!Mg&&jl){Mg=!0;do for(var u=!1,d=Fl;d!==null;){if(a!==0){var m=d.pendingLanes;if(m===0)var C=0;else{var N=d.suspendedLanes,_=d.pingedLanes;C=(1<<31-fn(42|a)+1)-1,C&=m&~(N&~_),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(u=!0,Bv(d,C))}else C=De,C=$c(d,d===Xe?C:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(C&3)===0||Fi(d,C)||(u=!0,Bv(d,C));d=d.next}while(u);Mg=!1}}function UR(){Vv()}function Vv(){jl=wg=!1;var a=0;aa!==0&&YR()&&(a=aa);for(var o=ln(),u=null,d=Fl;d!==null;){var m=d.next,C=_v(d,o);C===0?(d.next=null,u===null?Fl=m:u.next=m,m===null&&(ai=u)):(u=d,(a!==0||(C&3)!==0)&&(jl=!0)),d=m}St!==0&&St!==5||mo(a),aa!==0&&(aa=0)}function _v(a,o){for(var u=a.suspendedLanes,d=a.pingedLanes,m=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var N=31-fn(C),_=1<<N,G=m[N];G===-1?((_&u)===0||(_&d)!==0)&&(m[N]=lD(_,o)):G<=o&&(a.expiredLanes|=_),C&=~_}if(o=Xe,u=De,u=$c(a,a===o?u:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,u===0||a===o&&(ze===2||ze===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ff(d),a.callbackNode=null,a.callbackPriority=0;if((u&3)===0||Fi(a,u)){if(o=u&-u,o===a.callbackPriority)return o;switch(d!==null&&Ff(d),zf(u)){case 2:case 8:u=E1;break;case 32:u=jc;break;case 268435456:u=w1;break;default:u=jc}return d=kv.bind(null,a),u=Uf(u,d),a.callbackPriority=o,a.callbackNode=u,o}return d!==null&&d!==null&&Ff(d),a.callbackPriority=2,a.callbackNode=null,2}function kv(a,o){if(St!==0&&St!==5)return a.callbackNode=null,a.callbackPriority=0,null;var u=a.callbackNode;if(Ul()&&a.callbackNode!==u)return null;var d=De;return d=$c(a,a===Xe?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(pv(a,d,o),_v(a,ln()),a.callbackNode!=null&&a.callbackNode===u?kv.bind(null,a):null)}function Bv(a,o){if(Ul())return null;pv(a,o,!0)}function FR(){ZR(function(){(Fe&6)!==0?Uf(C1,UR):Vv()})}function bg(){if(aa===0){var a=Hs;a===0&&(a=Gc,Gc<<=1,(Gc&261888)===0&&(Gc=256)),aa=a}return aa}function Uv(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Xc(""+a)}function Fv(a,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,a.id&&u.setAttribute("form",a.id),o.parentNode.insertBefore(u,o),a=new FormData(a),u.parentNode.removeChild(u),a}function jR(a,o,u,d,m){if(o==="submit"&&u&&u.stateNode===m){var C=Uv((m[en]||null).action),N=d.submitter;N&&(o=(o=N[en]||null)?Uv(o.formAction):N.getAttribute("formAction"),o!==null&&(C=o,N=null));var _=new Qc("action","action",null,d,m);a.push({event:_,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(aa!==0){var G=N?Fv(m,N):new FormData(m);X0(u,{pending:!0,data:G,method:m.method,action:C},null,G)}}else typeof C=="function"&&(_.preventDefault(),G=N?Fv(m,N):new FormData(m),X0(u,{pending:!0,data:G,method:m.method,action:C},C,G))},currentTarget:m}]})}}for(var Og=0;Og<l0.length;Og++){var Dg=l0[Og],GR=Dg.toLowerCase(),zR=Dg[0].toUpperCase()+Dg.slice(1);Hn(GR,"on"+zR)}Hn(dy,"onAnimationEnd"),Hn(py,"onAnimationIteration"),Hn(yy,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(nR,"onTransitionRun"),Hn(rR,"onTransitionStart"),Hn(aR,"onTransitionCancel"),Hn(xy,"onTransitionEnd"),Rs("onMouseEnter",["mouseout","mouseover"]),Rs("onMouseLeave",["mouseout","mouseover"]),Rs("onPointerEnter",["pointerout","pointerover"]),Rs("onPointerLeave",["pointerout","pointerover"]),Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(To));function jv(a,o){o=(o&4)!==0;for(var u=0;u<a.length;u++){var d=a[u],m=d.event;d=d.listeners;e:{var C=void 0;if(o)for(var N=d.length-1;0<=N;N--){var _=d[N],G=_.instance,X=_.currentTarget;if(_=_.listener,G!==C&&m.isPropagationStopped())break e;C=_,m.currentTarget=X;try{C(m)}catch(ne){Ic(ne)}m.currentTarget=null,C=G}else for(N=0;N<d.length;N++){if(_=d[N],G=_.instance,X=_.currentTarget,_=_.listener,G!==C&&m.isPropagationStopped())break e;C=_,m.currentTarget=X;try{C(m)}catch(ne){Ic(ne)}m.currentTarget=null,C=G}}}}function Oe(a,o){var u=o[Af];u===void 0&&(u=o[Af]=new Set);var d=a+"__bubble";u.has(d)||(Gv(o,a,2,!1),u.add(d))}function Rg(a,o,u){var d=0;o&&(d|=4),Gv(u,a,d,o)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function Ng(a){if(!a[Gl]){a[Gl]=!0,V1.forEach(function(u){u!=="selectionchange"&&(AR.has(u)||Rg(u,!1,a),Rg(u,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Gl]||(o[Gl]=!0,Rg("selectionchange",!1,o))}}function Gv(a,o,u,d){switch(dm(o)){case 2:var m=pN;break;case 8:m=yN;break;default:m=Kg}u=m.bind(null,o,u,a),m=void 0,!Qf||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?a.addEventListener(o,u,{capture:!0,passive:m}):a.addEventListener(o,u,!0):m!==void 0?a.addEventListener(o,u,{passive:m}):a.addEventListener(o,u,!1)}function Lg(a,o,u,d,m){var C=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var N=d.tag;if(N===3||N===4){var _=d.stateNode.containerInfo;if(_===m)break;if(N===4)for(N=d.return;N!==null;){var G=N.tag;if((G===3||G===4)&&N.stateNode.containerInfo===m)return;N=N.return}for(;_!==null;){if(N=bs(_),N===null)return;if(G=N.tag,G===5||G===6||G===26||G===27){d=C=N;continue e}_=_.parentNode}}d=d.return}W1(function(){var X=C,ne=qf(u),se=[];e:{var q=vy.get(a);if(q!==void 0){var I=Qc,le=a;switch(a){case"keypress":if(qc(u)===0)break e;case"keydown":case"keyup":I=kD;break;case"focusin":le="focus",I=e0;break;case"focusout":le="blur",I=e0;break;case"beforeblur":case"afterblur":I=e0;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=CD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=FD;break;case dy:case py:case yy:I=MD;break;case xy:I=GD;break;case"scroll":case"scrollend":I=TD;break;case"wheel":I=AD;break;case"copy":case"cut":case"paste":I=OD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Z1;break;case"toggle":case"beforetoggle":I=HD}var ye=(o&4)!==0,Ke=!ye&&(a==="scroll"||a==="scrollend"),H=ye?q!==null?q+"Capture":null:q;ye=[];for(var A=X,K;A!==null;){var re=A;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||H===null||(re=Ai(A,H),re!=null&&ye.push(So(A,re,K))),Ke)break;A=A.return}0<ye.length&&(q=new I(q,le,null,u,ne),se.push({event:q,listeners:ye}))}}if((o&7)===0){e:{if(q=a==="mouseover"||a==="pointerover",I=a==="mouseout"||a==="pointerout",q&&u!==Yf&&(le=u.relatedTarget||u.fromElement)&&(bs(le)||le[Ms]))break e;if((I||q)&&(q=ne.window===ne?ne:(q=ne.ownerDocument)?q.defaultView||q.parentWindow:window,I?(le=u.relatedTarget||u.toElement,I=X,le=le?bs(le):null,le!==null&&(Ke=i(le),ye=le.tag,le!==Ke||ye!==5&&ye!==27&&ye!==6)&&(le=null)):(I=null,le=X),I!==le)){if(ye=Y1,re="onMouseLeave",H="onMouseEnter",A="mouse",(a==="pointerout"||a==="pointerover")&&(ye=Z1,re="onPointerLeave",H="onPointerEnter",A="pointer"),Ke=I==null?q:zi(I),K=le==null?q:zi(le),q=new ye(re,A+"leave",I,u,ne),q.target=Ke,q.relatedTarget=K,re=null,bs(ne)===X&&(ye=new ye(H,A+"enter",le,u,ne),ye.target=K,ye.relatedTarget=Ke,re=ye),Ke=re,I&&le)t:{for(ye=$R,H=I,A=le,K=0,re=H;re;re=ye(re))K++;re=0;for(var pe=A;pe;pe=ye(pe))re++;for(;0<K-re;)H=ye(H),K--;for(;0<re-K;)A=ye(A),re--;for(;K--;){if(H===A||A!==null&&H===A.alternate){ye=H;break t}H=ye(H),A=ye(A)}ye=null}else ye=null;I!==null&&zv(se,q,I,ye,!1),le!==null&&Ke!==null&&zv(se,Ke,le,ye,!0)}}e:{if(q=X?zi(X):window,I=q.nodeName&&q.nodeName.toLowerCase(),I==="select"||I==="input"&&q.type==="file")var ke=ry;else if(ty(q))if(ay)ke=ID;else{ke=PD;var ge=QD}else I=q.nodeName,!I||I.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?X&&Xf(X.elementType)&&(ke=ry):ke=JD;if(ke&&(ke=ke(a,X))){ny(se,ke,u,ne);break e}ge&&ge(a,q,X),a==="focusout"&&X&&q.type==="number"&&X.memoizedProps.value!=null&&Kf(q,"number",q.value)}switch(ge=X?zi(X):window,a){case"focusin":(ty(ge)||ge.contentEditable==="true")&&(Bs=ge,i0=X,Zi=null);break;case"focusout":Zi=i0=Bs=null;break;case"mousedown":o0=!0;break;case"contextmenu":case"mouseup":case"dragend":o0=!1,gy(se,u,ne);break;case"selectionchange":if(tR)break;case"keydown":case"keyup":gy(se,u,ne)}var Ce;if(n0)e:{switch(a){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ks?I1(a,u)&&(Re="onCompositionEnd"):a==="keydown"&&u.keyCode===229&&(Re="onCompositionStart");Re&&(Q1&&u.locale!=="ko"&&(ks||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ks&&(Ce=K1()):($r=ne,Pf="value"in $r?$r.value:$r.textContent,ks=!0)),ge=zl(X,Re),0<ge.length&&(Re=new q1(Re,a,null,u,ne),se.push({event:Re,listeners:ge}),Ce?Re.data=Ce:(Ce=ey(u),Ce!==null&&(Re.data=Ce)))),(Ce=KD?XD(a,u):YD(a,u))&&(Re=zl(X,"onBeforeInput"),0<Re.length&&(ge=new q1("onBeforeInput","beforeinput",null,u,ne),se.push({event:ge,listeners:Re}),ge.data=Ce)),jR(se,a,X,u,ne)}jv(se,o)})}function So(a,o,u){return{instance:a,listener:o,currentTarget:u}}function zl(a,o){for(var u=o+"Capture",d=[];a!==null;){var m=a,C=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||C===null||(m=Ai(a,u),m!=null&&d.unshift(So(a,m,C)),m=Ai(a,o),m!=null&&d.push(So(a,m,C))),a.tag===3)return d;a=a.return}return[]}function $R(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function zv(a,o,u,d,m){for(var C=o._reactName,N=[];u!==null&&u!==d;){var _=u,G=_.alternate,X=_.stateNode;if(_=_.tag,G!==null&&G===d)break;_!==5&&_!==26&&_!==27||X===null||(G=X,m?(X=Ai(u,C),X!=null&&N.unshift(So(u,X,G))):m||(X=Ai(u,C),X!=null&&N.push(So(u,X,G)))),u=u.return}N.length!==0&&a.push({event:o,listeners:N})}var HR=/\r\n?/g,WR=/\u0000|\uFFFD/g;function Av(a){return(typeof a=="string"?a:""+a).replace(HR,`
`).replace(WR,"")}function $v(a,o){return o=Av(o),Av(a)===o}function We(a,o,u,d,m,C){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Ls(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Ls(a,""+d);break;case"className":Wc(a,"class",d);break;case"tabIndex":Wc(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Wc(a,u,d);break;case"style":$1(a,d,C);break;case"data":if(o!=="object"){Wc(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){a.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(u);break}d=Xc(""+d),a.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(u==="formAction"?(o!=="input"&&We(a,o,"name",m.name,m,null),We(a,o,"formEncType",m.formEncType,m,null),We(a,o,"formMethod",m.formMethod,m,null),We(a,o,"formTarget",m.formTarget,m,null)):(We(a,o,"encType",m.encType,m,null),We(a,o,"method",m.method,m,null),We(a,o,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(u);break}d=Xc(""+d),a.setAttribute(u,d);break;case"onClick":d!=null&&(a.onclick=hr);break;case"onScroll":d!=null&&Oe("scroll",a);break;case"onScrollEnd":d!=null&&Oe("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}u=Xc(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,""+d):a.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,""):a.removeAttribute(u);break;case"capture":case"download":d===!0?a.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(u,d):a.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(u,d):a.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(u):a.setAttribute(u,d);break;case"popover":Oe("beforetoggle",a),Oe("toggle",a),Hc(a,"popover",d);break;case"xlinkActuate":gr(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":gr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":gr(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":gr(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":gr(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":gr(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":gr(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":gr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":gr(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Hc(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=vD.get(u)||u,Hc(a,u,d))}}function Vg(a,o,u,d,m,C){switch(u){case"style":$1(a,d,C);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));a.innerHTML=u}}break;case"children":typeof d=="string"?Ls(a,d):(typeof d=="number"||typeof d=="bigint")&&Ls(a,""+d);break;case"onScroll":d!=null&&Oe("scroll",a);break;case"onScrollEnd":d!=null&&Oe("scrollend",a);break;case"onClick":d!=null&&(a.onclick=hr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_1.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),o=u.slice(2,m?u.length-7:void 0),C=a[en]||null,C=C!=null?C[u]:null,typeof C=="function"&&a.removeEventListener(o,C,m),typeof d=="function")){typeof C!="function"&&C!==null&&(u in a?a[u]=null:a.hasAttribute(u)&&a.removeAttribute(u)),a.addEventListener(o,d,m);break e}u in a?a[u]=d:d===!0?a.setAttribute(u,""):Hc(a,u,d)}}}function Bt(a,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",a),Oe("load",a);var d=!1,m=!1,C;for(C in u)if(u.hasOwnProperty(C)){var N=u[C];if(N!=null)switch(C){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:We(a,o,C,N,u,null)}}m&&We(a,o,"srcSet",u.srcSet,u,null),d&&We(a,o,"src",u.src,u,null);return;case"input":Oe("invalid",a);var _=C=N=m=null,G=null,X=null;for(d in u)if(u.hasOwnProperty(d)){var ne=u[d];if(ne!=null)switch(d){case"name":m=ne;break;case"type":N=ne;break;case"checked":G=ne;break;case"defaultChecked":X=ne;break;case"value":C=ne;break;case"defaultValue":_=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:We(a,o,d,ne,u,null)}}j1(a,C,_,G,X,N,m,!1);return;case"select":Oe("invalid",a),d=N=C=null;for(m in u)if(u.hasOwnProperty(m)&&(_=u[m],_!=null))switch(m){case"value":C=_;break;case"defaultValue":N=_;break;case"multiple":d=_;default:We(a,o,m,_,u,null)}o=C,u=N,a.multiple=!!d,o!=null?Ns(a,!!d,o,!1):u!=null&&Ns(a,!!d,u,!0);return;case"textarea":Oe("invalid",a),C=m=d=null;for(N in u)if(u.hasOwnProperty(N)&&(_=u[N],_!=null))switch(N){case"value":d=_;break;case"defaultValue":m=_;break;case"children":C=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:We(a,o,N,_,u,null)}z1(a,d,m,C);return;case"option":for(G in u)u.hasOwnProperty(G)&&(d=u[G],d!=null)&&(G==="selected"?a.selected=d&&typeof d!="function"&&typeof d!="symbol":We(a,o,G,d,u,null));return;case"dialog":Oe("beforetoggle",a),Oe("toggle",a),Oe("cancel",a),Oe("close",a);break;case"iframe":case"object":Oe("load",a);break;case"video":case"audio":for(d=0;d<To.length;d++)Oe(To[d],a);break;case"image":Oe("error",a),Oe("load",a);break;case"details":Oe("toggle",a);break;case"embed":case"source":case"link":Oe("error",a),Oe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(d=u[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:We(a,o,X,d,u,null)}return;default:if(Xf(o)){for(ne in u)u.hasOwnProperty(ne)&&(d=u[ne],d!==void 0&&Vg(a,o,ne,d,u,void 0));return}}for(_ in u)u.hasOwnProperty(_)&&(d=u[_],d!=null&&We(a,o,_,d,u,null))}function KR(a,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,C=null,N=null,_=null,G=null,X=null,ne=null;for(I in u){var se=u[I];if(u.hasOwnProperty(I)&&se!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":G=se;default:d.hasOwnProperty(I)||We(a,o,I,null,d,se)}}for(var q in d){var I=d[q];if(se=u[q],d.hasOwnProperty(q)&&(I!=null||se!=null))switch(q){case"type":C=I;break;case"name":m=I;break;case"checked":X=I;break;case"defaultChecked":ne=I;break;case"value":N=I;break;case"defaultValue":_=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(r(137,o));break;default:I!==se&&We(a,o,q,I,d,se)}}Wf(a,N,_,G,X,ne,C,m);return;case"select":I=N=_=q=null;for(C in u)if(G=u[C],u.hasOwnProperty(C)&&G!=null)switch(C){case"value":break;case"multiple":I=G;default:d.hasOwnProperty(C)||We(a,o,C,null,d,G)}for(m in d)if(C=d[m],G=u[m],d.hasOwnProperty(m)&&(C!=null||G!=null))switch(m){case"value":q=C;break;case"defaultValue":_=C;break;case"multiple":N=C;default:C!==G&&We(a,o,m,C,d,G)}o=_,u=N,d=I,q!=null?Ns(a,!!u,q,!1):!!d!=!!u&&(o!=null?Ns(a,!!u,o,!0):Ns(a,!!u,u?[]:"",!1));return;case"textarea":I=q=null;for(_ in u)if(m=u[_],u.hasOwnProperty(_)&&m!=null&&!d.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:We(a,o,_,null,d,m)}for(N in d)if(m=d[N],C=u[N],d.hasOwnProperty(N)&&(m!=null||C!=null))switch(N){case"value":q=m;break;case"defaultValue":I=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==C&&We(a,o,N,m,d,C)}G1(a,q,I);return;case"option":for(var le in u)q=u[le],u.hasOwnProperty(le)&&q!=null&&!d.hasOwnProperty(le)&&(le==="selected"?a.selected=!1:We(a,o,le,null,d,q));for(G in d)q=d[G],I=u[G],d.hasOwnProperty(G)&&q!==I&&(q!=null||I!=null)&&(G==="selected"?a.selected=q&&typeof q!="function"&&typeof q!="symbol":We(a,o,G,q,d,I));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in u)q=u[ye],u.hasOwnProperty(ye)&&q!=null&&!d.hasOwnProperty(ye)&&We(a,o,ye,null,d,q);for(X in d)if(q=d[X],I=u[X],d.hasOwnProperty(X)&&q!==I&&(q!=null||I!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,o));break;default:We(a,o,X,q,d,I)}return;default:if(Xf(o)){for(var Ke in u)q=u[Ke],u.hasOwnProperty(Ke)&&q!==void 0&&!d.hasOwnProperty(Ke)&&Vg(a,o,Ke,void 0,d,q);for(ne in d)q=d[ne],I=u[ne],!d.hasOwnProperty(ne)||q===I||q===void 0&&I===void 0||Vg(a,o,ne,q,d,I);return}}for(var H in u)q=u[H],u.hasOwnProperty(H)&&q!=null&&!d.hasOwnProperty(H)&&We(a,o,H,null,d,q);for(se in d)q=d[se],I=u[se],!d.hasOwnProperty(se)||q===I||q==null&&I==null||We(a,o,se,q,d,I)}function Hv(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var m=u[d],C=m.transferSize,N=m.initiatorType,_=m.duration;if(C&&_&&Hv(N)){for(N=0,_=m.responseEnd,d+=1;d<u.length;d++){var G=u[d],X=G.startTime;if(X>_)break;var ne=G.transferSize,se=G.initiatorType;ne&&Hv(se)&&(G=G.responseEnd,N+=ne*(G<_?1:(_-X)/(G-X)))}if(--d,o+=8*(C+N)/(m.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var _g=null,kg=null;function Al(a){return a.nodeType===9?a:a.ownerDocument}function Wv(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Bg(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ug=null;function YR(){var a=window.event;return a&&a.type==="popstate"?a===Ug?!1:(Ug=a,!0):(Ug=null,!1)}var Xv=typeof setTimeout=="function"?setTimeout:void 0,qR=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,ZR=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(a){return Yv.resolve(null).then(a).catch(QR)}:Xv;function QR(a){setTimeout(function(){throw a})}function sa(a){return a==="head"}function qv(a,o){var u=o,d=0;do{var m=u.nextSibling;if(a.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"||u==="/&"){if(d===0){a.removeChild(m),ci(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")Co(a.ownerDocument.documentElement);else if(u==="head"){u=a.ownerDocument.head,Co(u);for(var C=u.firstChild;C;){var N=C.nextSibling,_=C.nodeName;C[Gi]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&C.rel.toLowerCase()==="stylesheet"||u.removeChild(C),C=N}}else u==="body"&&Co(a.ownerDocument.body);u=m}while(u);ci(o)}function Zv(a,o){var u=a;a=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(a===0)break;a--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||a++;u=d}while(u)}function Fg(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Fg(u),$f(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}a.removeChild(u)}}function PR(a,o,u,d){for(;a.nodeType===1;){var m=u;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Gi])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var C=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Ln(a.nextSibling),a===null)break}return null}function JR(a,o,u){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Ln(a.nextSibling),a===null))return null;return a}function Qv(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Ln(a.nextSibling),a===null))return null;return a}function jg(a){return a.data==="$?"||a.data==="$~"}function Gg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function IR(a,o){var u=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Ln(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var zg=null;function Pv(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="/$"||u==="/&"){if(o===0)return Ln(a.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}a=a.nextSibling}return null}function Jv(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var u=a.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return a;o--}else u!=="/$"&&u!=="/&"||o++}a=a.previousSibling}return null}function Iv(a,o,u){switch(o=Al(u),a){case"html":if(a=o.documentElement,!a)throw Error(r(452));return a;case"head":if(a=o.head,!a)throw Error(r(453));return a;case"body":if(a=o.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Co(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);$f(a)}var Vn=new Map,em=new Set;function $l(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Rr=P.d;P.d={f:eN,r:tN,D:nN,C:rN,L:aN,m:sN,X:oN,S:iN,M:cN};function eN(){var a=Rr.f(),o=_l();return a||o}function tN(a){var o=Os(a);o!==null&&o.tag===5&&o.type==="form"?xx(o):Rr.r(a)}var si=typeof document>"u"?null:document;function tm(a,o,u){var d=si;if(d&&typeof o=="string"&&o){var m=wn(o);m='link[rel="'+a+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),em.has(m)||(em.add(m),a={rel:a,crossOrigin:u,href:o},d.querySelector(m)===null&&(o=d.createElement("link"),Bt(o,"link",a),bt(o),d.head.appendChild(o)))}}function nN(a){Rr.D(a),tm("dns-prefetch",a,null)}function rN(a,o){Rr.C(a,o),tm("preconnect",a,o)}function aN(a,o,u){Rr.L(a,o,u);var d=si;if(d&&a&&o){var m='link[rel="preload"][as="'+wn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+wn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+wn(u.imageSizes)+'"]')):m+='[href="'+wn(a)+'"]';var C=m;switch(o){case"style":C=ii(a);break;case"script":C=oi(a)}Vn.has(C)||(a=h({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:a,as:o},u),Vn.set(C,a),d.querySelector(m)!==null||o==="style"&&d.querySelector(Eo(C))||o==="script"&&d.querySelector(wo(C))||(o=d.createElement("link"),Bt(o,"link",a),bt(o),d.head.appendChild(o)))}}function sN(a,o){Rr.m(a,o);var u=si;if(u&&a){var d=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+wn(d)+'"][href="'+wn(a)+'"]',C=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=oi(a)}if(!Vn.has(C)&&(a=h({rel:"modulepreload",href:a},o),Vn.set(C,a),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(wo(C)))return}d=u.createElement("link"),Bt(d,"link",a),bt(d),u.head.appendChild(d)}}}function iN(a,o,u){Rr.S(a,o,u);var d=si;if(d&&a){var m=Ds(d).hoistableStyles,C=ii(a);o=o||"default";var N=m.get(C);if(!N){var _={loading:0,preload:null};if(N=d.querySelector(Eo(C)))_.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":o},u),(u=Vn.get(C))&&Ag(a,u);var G=N=d.createElement("link");bt(G),Bt(G,"link",a),G._p=new Promise(function(X,ne){G.onload=X,G.onerror=ne}),G.addEventListener("load",function(){_.loading|=1}),G.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Hl(N,o,d)}N={type:"stylesheet",instance:N,count:1,state:_},m.set(C,N)}}}function oN(a,o){Rr.X(a,o);var u=si;if(u&&a){var d=Ds(u).hoistableScripts,m=oi(a),C=d.get(m);C||(C=u.querySelector(wo(m)),C||(a=h({src:a,async:!0},o),(o=Vn.get(m))&&$g(a,o),C=u.createElement("script"),bt(C),Bt(C,"link",a),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},d.set(m,C))}}function cN(a,o){Rr.M(a,o);var u=si;if(u&&a){var d=Ds(u).hoistableScripts,m=oi(a),C=d.get(m);C||(C=u.querySelector(wo(m)),C||(a=h({src:a,async:!0,type:"module"},o),(o=Vn.get(m))&&$g(a,o),C=u.createElement("script"),bt(C),Bt(C,"link",a),u.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},d.set(m,C))}}function nm(a,o,u,d){var m=(m=fe.current)?$l(m):null;if(!m)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ii(u.href),u=Ds(m).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){a=ii(u.href);var C=Ds(m).hoistableStyles,N=C.get(a);if(N||(m=m.ownerDocument||m,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,N),(C=m.querySelector(Eo(a)))&&!C._p&&(N.instance=C,N.state.loading=5),Vn.has(a)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Vn.set(a,u),C||lN(m,a,u,N.state))),o&&d===null)throw Error(r(528,""));return N}if(o&&d!==null)throw Error(r(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=oi(u),u=Ds(m).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ii(a){return'href="'+wn(a)+'"'}function Eo(a){return'link[rel="stylesheet"]['+a+"]"}function rm(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function lN(a,o,u,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Bt(o,"link",u),bt(o),a.head.appendChild(o))}function oi(a){return'[src="'+wn(a)+'"]'}function wo(a){return"script[async]"+a}function am(a,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+wn(u.href)+'"]');if(d)return o.instance=d,bt(d),d;var m=h({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),bt(d),Bt(d,"style",m),Hl(d,u.precedence,a),o.instance=d;case"stylesheet":m=ii(u.href);var C=a.querySelector(Eo(m));if(C)return o.state.loading|=4,o.instance=C,bt(C),C;d=rm(u),(m=Vn.get(m))&&Ag(d,m),C=(a.ownerDocument||a).createElement("link"),bt(C);var N=C;return N._p=new Promise(function(_,G){N.onload=_,N.onerror=G}),Bt(C,"link",d),o.state.loading|=4,Hl(C,u.precedence,a),o.instance=C;case"script":return C=oi(u.src),(m=a.querySelector(wo(C)))?(o.instance=m,bt(m),m):(d=u,(m=Vn.get(C))&&(d=h({},u),$g(d,m)),a=a.ownerDocument||a,m=a.createElement("script"),bt(m),Bt(m,"link",d),a.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Hl(d,u.precedence,a));return o.instance}function Hl(a,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,C=m,N=0;N<d.length;N++){var _=d[N];if(_.dataset.precedence===o)C=_;else if(C!==m)break}C?C.parentNode.insertBefore(a,C.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(a,o.firstChild))}function Ag(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function $g(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Wl=null;function sm(a,o,u){if(Wl===null){var d=new Map,m=Wl=new Map;m.set(u,d)}else m=Wl,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(a))return d;for(d.set(a,null),u=u.getElementsByTagName(a),m=0;m<u.length;m++){var C=u[m];if(!(C[Gi]||C[Lt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var N=C.getAttribute(o)||"";N=a+N;var _=d.get(N);_?_.push(C):d.set(N,[C])}}return d}function im(a,o,u){a=a.ownerDocument||a,a.head.insertBefore(u,o==="title"?a.querySelector("head > title"):null)}function uN(a,o,u){if(u===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(a=o.disabled,typeof o.precedence=="string"&&a==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function om(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function fN(a,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var m=ii(d.href),C=o.querySelector(Eo(m));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Kl.bind(a),o.then(a,a)),u.state.loading|=4,u.instance=C,bt(C);return}C=o.ownerDocument||o,d=rm(d),(m=Vn.get(m))&&Ag(d,m),C=C.createElement("link"),bt(C);var N=C;N._p=new Promise(function(_,G){N.onload=_,N.onerror=G}),Bt(C,"link",d),u.instance=C}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(a.count++,u=Kl.bind(a),o.addEventListener("load",u),o.addEventListener("error",u))}}var Hg=0;function gN(a,o){return a.stylesheets&&a.count===0&&Yl(a,a.stylesheets),0<a.count||0<a.imgCount?function(u){var d=setTimeout(function(){if(a.stylesheets&&Yl(a,a.stylesheets),a.unsuspend){var C=a.unsuspend;a.unsuspend=null,C()}},6e4+o);0<a.imgBytes&&Hg===0&&(Hg=62500*XR());var m=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Yl(a,a.stylesheets),a.unsuspend)){var C=a.unsuspend;a.unsuspend=null,C()}},(a.imgBytes>Hg?50:800)+o);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yl(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Xl=null;function Yl(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Xl=new Map,o.forEach(hN,a),Xl=null,Kl.call(a))}function hN(a,o){if(!(o.state.loading&4)){var u=Xl.get(a);if(u)var d=u.get(null);else{u=new Map,Xl.set(a,u);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<m.length;C++){var N=m[C];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(u.set(N.dataset.precedence,N),d=N)}d&&u.set(null,d)}m=o.instance,N=m.getAttribute("data-precedence"),C=u.get(N)||d,C===d&&u.set(null,m),u.set(N,m),this.count++,d=Kl.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),C?C.parentNode.insertBefore(m,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),o.state.loading|=4}}var Mo={$$typeof:M,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function dN(a,o,u,d,m,C,N,_,G){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.hiddenUpdates=jf(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=C,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function cm(a,o,u,d,m,C,N,_,G,X,ne,se){return a=new dN(a,o,u,N,G,X,ne,se,_),o=1,C===!0&&(o|=24),C=hn(3,null,null,o),a.current=C,C.stateNode=a,o=C0(),o.refCount++,a.pooledCache=o,o.refCount++,C.memoizedState={element:d,isDehydrated:u,cache:o},b0(C),a}function lm(a){return a?(a=js,a):js}function um(a,o,u,d,m,C){m=lm(m),d.context===null?d.context=m:d.pendingContext=m,d=qr(o),d.payload={element:u},C=C===void 0?null:C,C!==null&&(d.callback=C),u=Zr(a,d,o),u!==null&&(on(u,a,o),no(u,a,o))}function fm(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var u=a.retryLane;a.retryLane=u!==0&&u<o?u:o}}function Wg(a,o){fm(a,o),(a=a.alternate)&&fm(a,o)}function gm(a){if(a.tag===13||a.tag===31){var o=Ga(a,67108864);o!==null&&on(o,a,67108864),Wg(a,67108864)}}function hm(a){if(a.tag===13||a.tag===31){var o=vn();o=Gf(o);var u=Ga(a,o);u!==null&&on(u,a,o),Wg(a,o)}}var ql=!0;function pN(a,o,u,d){var m=F.T;F.T=null;var C=P.p;try{P.p=2,Kg(a,o,u,d)}finally{P.p=C,F.T=m}}function yN(a,o,u,d){var m=F.T;F.T=null;var C=P.p;try{P.p=8,Kg(a,o,u,d)}finally{P.p=C,F.T=m}}function Kg(a,o,u,d){if(ql){var m=Xg(d);if(m===null)Lg(a,o,d,Zl,u),pm(a,d);else if(vN(m,a,o,u,d))d.stopPropagation();else if(pm(a,d),o&4&&-1<xN.indexOf(a)){for(;m!==null;){var C=Os(m);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var N=ka(C.pendingLanes);if(N!==0){var _=C;for(_.pendingLanes|=2,_.entangledLanes|=2;N;){var G=1<<31-fn(N);_.entanglements[1]|=G,N&=~G}tr(C),(Fe&6)===0&&(Ll=ln()+500,mo(0))}}break;case 31:case 13:_=Ga(C,2),_!==null&&on(_,C,2),_l(),Wg(C,2)}if(C=Xg(d),C===null&&Lg(a,o,d,Zl,u),C===m)break;m=C}m!==null&&d.stopPropagation()}else Lg(a,o,d,null,u)}}function Xg(a){return a=qf(a),Yg(a)}var Zl=null;function Yg(a){if(Zl=null,a=bs(a),a!==null){var o=i(a);if(o===null)a=null;else{var u=o.tag;if(u===13){if(a=c(o),a!==null)return a;a=null}else if(u===31){if(a=l(o),a!==null)return a;a=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Zl=a,null}function dm(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nD()){case C1:return 2;case E1:return 8;case jc:case rD:return 32;case w1:return 268435456;default:return 32}default:return 32}}var qg=!1,ia=null,oa=null,ca=null,bo=new Map,Oo=new Map,la=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pm(a,o){switch(a){case"focusin":case"focusout":ia=null;break;case"dragenter":case"dragleave":oa=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":bo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oo.delete(o.pointerId)}}function Do(a,o,u,d,m,C){return a===null||a.nativeEvent!==C?(a={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:C,targetContainers:[m]},o!==null&&(o=Os(o),o!==null&&gm(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),a)}function vN(a,o,u,d,m){switch(o){case"focusin":return ia=Do(ia,a,o,u,d,m),!0;case"dragenter":return oa=Do(oa,a,o,u,d,m),!0;case"mouseover":return ca=Do(ca,a,o,u,d,m),!0;case"pointerover":var C=m.pointerId;return bo.set(C,Do(bo.get(C)||null,a,o,u,d,m)),!0;case"gotpointercapture":return C=m.pointerId,Oo.set(C,Do(Oo.get(C)||null,a,o,u,d,m)),!0}return!1}function ym(a){var o=bs(a.target);if(o!==null){var u=i(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){a.blockedOn=o,N1(a.priority,function(){hm(u)});return}}else if(o===31){if(o=l(u),o!==null){a.blockedOn=o,N1(a.priority,function(){hm(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){a.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Ql(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var u=Xg(a.nativeEvent);if(u===null){u=a.nativeEvent;var d=new u.constructor(u.type,u);Yf=d,u.target.dispatchEvent(d),Yf=null}else return o=Os(u),o!==null&&gm(o),a.blockedOn=u,!1;o.shift()}return!0}function xm(a,o,u){Ql(a)&&u.delete(o)}function mN(){qg=!1,ia!==null&&Ql(ia)&&(ia=null),oa!==null&&Ql(oa)&&(oa=null),ca!==null&&Ql(ca)&&(ca=null),bo.forEach(xm),Oo.forEach(xm)}function Pl(a,o){a.blockedOn===o&&(a.blockedOn=null,qg||(qg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,mN)))}var Jl=null;function vm(a){Jl!==a&&(Jl=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Jl===a&&(Jl=null);for(var o=0;o<a.length;o+=3){var u=a[o],d=a[o+1],m=a[o+2];if(typeof d!="function"){if(Yg(d||u)===null)continue;break}var C=Os(u);C!==null&&(a.splice(o,3),o-=3,X0(C,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function ci(a){function o(G){return Pl(G,a)}ia!==null&&Pl(ia,a),oa!==null&&Pl(oa,a),ca!==null&&Pl(ca,a),bo.forEach(o),Oo.forEach(o);for(var u=0;u<la.length;u++){var d=la[u];d.blockedOn===a&&(d.blockedOn=null)}for(;0<la.length&&(u=la[0],u.blockedOn===null);)ym(u),u.blockedOn===null&&la.shift();if(u=(a.ownerDocument||a).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],C=u[d+1],N=m[en]||null;if(typeof C=="function")N||vm(u);else if(N){var _=null;if(C&&C.hasAttribute("formAction")){if(m=C,N=C[en]||null)_=N.formAction;else if(Yg(m)!==null)continue}else _=N.action;typeof _=="function"?u[d+1]=_:(u.splice(d,3),d-=3),vm(u)}}}function mm(){function a(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(N){return m=N})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function Zg(a){this._internalRoot=a}Il.prototype.render=Zg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(r(409));var u=o.current,d=vn();um(u,d,a,o,null,null)},Il.prototype.unmount=Zg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;um(a.current,2,null,a,null,null),_l(),o[Ms]=null}};function Il(a){this._internalRoot=a}Il.prototype.unstable_scheduleHydration=function(a){if(a){var o=R1();a={blockedOn:null,target:a,priority:o};for(var u=0;u<la.length&&o!==0&&o<la[u].priority;u++);la.splice(u,0,a),u===0&&ym(a)}};var Tm=e.version;if(Tm!=="19.2.3")throw Error(r(527,Tm,"19.2.3"));P.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=g(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var TN={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Ui=eu.inject(TN),un=eu}catch{}}return Lo.createRoot=function(a,o){if(!s(a))throw Error(r(299));var u=!1,d="",m=Ox,C=Dx,N=Rx;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError)),o=cm(a,1,!1,null,null,u,d,null,m,C,N,mm),a[Ms]=o.current,Ng(a),new Zg(o)},Lo.hydrateRoot=function(a,o,u){if(!s(a))throw Error(r(299));var d=!1,m="",C=Ox,N=Dx,_=Rx,G=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(_=u.onRecoverableError),u.formState!==void 0&&(G=u.formState)),o=cm(a,1,!0,o,u??null,d,m,G,C,N,_,mm),o.context=lm(null),u=o.current,d=vn(),d=Gf(d),m=qr(d),m.callback=null,Zr(u,m,d),u=d,o.current.lanes=u,ji(o,u),tr(o),a[Ms]=o.current,Ng(a),new Il(o)},Lo.version="19.2.3",Lo}var Nm;function VN(){if(Nm)return Jg.exports;Nm=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jg.exports=LN(),Jg.exports}var _N=VN();const kN=Di(_N),XS=Q.createContext({});function BN(t){const e=Q.useRef(null);return e.current===null&&(e.current=t()),e.current}const YS=typeof window<"u",UN=YS?Q.useLayoutEffect:Q.useEffect,np=Q.createContext(null);function rp(t,e){t.indexOf(e)===-1&&t.push(e)}function ap(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ur=(t,e,n)=>n>e?e:n<t?t:n;let sp=()=>{};const Ur={},qS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ZS(t){return typeof t=="object"&&t!==null}const QS=t=>/^0[^.\s]+$/u.test(t);function ip(t){let e;return()=>(e===void 0&&(e=t()),e)}const zn=t=>t,FN=(t,e)=>n=>e(t(n)),Cc=(...t)=>t.reduce(FN),ic=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class op{constructor(){this.subscriptions=[]}add(e){return rp(this.subscriptions,e),()=>ap(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const c=this.subscriptions[i];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const kr=t=>t*1e3,jn=t=>t/1e3;function PS(t,e){return e?t*(1e3/e):0}const JS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,jN=1e-7,GN=12;function zN(t,e,n,r,s){let i,c,l=0;do c=e+(n-e)/2,i=JS(c,r,s)-t,i>0?n=c:e=c;while(Math.abs(i)>jN&&++l<GN);return c}function Ec(t,e,n,r){if(t===e&&n===r)return zn;const s=i=>zN(i,0,1,t,n);return i=>i===0||i===1?i:JS(s(i),e,r)}const IS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,eC=t=>e=>1-t(1-e),tC=Ec(.33,1.53,.69,.99),cp=eC(tC),nC=IS(cp),rC=t=>(t*=2)<1?.5*cp(t):.5*(2-Math.pow(2,-10*(t-1))),lp=t=>1-Math.sin(Math.acos(t)),aC=eC(lp),sC=IS(lp),AN=Ec(.42,0,1,1),$N=Ec(0,0,.58,1),iC=Ec(.42,0,.58,1),HN=t=>Array.isArray(t)&&typeof t[0]!="number",oC=t=>Array.isArray(t)&&typeof t[0]=="number",WN={linear:zn,easeIn:AN,easeInOut:iC,easeOut:$N,circIn:lp,circInOut:sC,circOut:aC,backIn:cp,backInOut:nC,backOut:tC,anticipate:rC},KN=t=>typeof t=="string",Lm=t=>{if(oC(t)){sp(t.length===4);const[e,n,r,s]=t;return Ec(e,n,r,s)}else if(KN(t))return WN[t];return t},tu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function XN(t,e){let n=new Set,r=new Set,s=!1,i=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function f(p){c.has(p)&&(g.schedule(p),t()),p(l)}const g={schedule:(p,h=!1,y=!1)=>{const E=y&&s?n:r;return h&&c.add(p),E.has(p)||E.add(p),p},cancel:p=>{r.delete(p),c.delete(p)},process:p=>{if(l=p,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(f),n.clear(),s=!1,i&&(i=!1,g.process(p))}};return g}const YN=40;function cC(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,c=tu.reduce((M,O)=>(M[O]=XN(i),M),{}),{setup:l,read:f,resolveKeyframes:g,preUpdate:p,update:h,preRender:y,render:v,postRender:E}=c,x=()=>{const M=Ur.useManualTiming?s.timestamp:performance.now();n=!1,Ur.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(M-s.timestamp,YN),1)),s.timestamp=M,s.isProcessing=!0,l.process(s),f.process(s),g.process(s),p.process(s),h.process(s),y.process(s),v.process(s),E.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(x))},T=()=>{n=!0,r=!0,s.isProcessing||t(x)};return{schedule:tu.reduce((M,O)=>{const R=c[O];return M[O]=(b,L=!1,k=!1)=>(n||T(),R.schedule(b,L,k)),M},{}),cancel:M=>{for(let O=0;O<tu.length;O++)c[tu[O]].cancel(M)},state:s,steps:c}}const{schedule:Ie,cancel:wa,state:Ut,steps:nh}=cC(typeof requestAnimationFrame<"u"?requestAnimationFrame:zn,!0);let Ru;function qN(){Ru=void 0}const Qt={now:()=>(Ru===void 0&&Qt.set(Ut.isProcessing||Ur.useManualTiming?Ut.timestamp:performance.now()),Ru),set:t=>{Ru=t,queueMicrotask(qN)}},lC=t=>e=>typeof e=="string"&&e.startsWith(t),uC=lC("--"),ZN=lC("var(--"),up=t=>ZN(t)?QN.test(t.split("/*")[0].trim()):!1,QN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Vm(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Ri={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},oc={...Ri,transform:t=>ur(0,1,t)},nu={...Ri,default:1},Zo=t=>Math.round(t*1e5)/1e5,fp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function PN(t){return t==null}const JN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gp=(t,e)=>n=>!!(typeof n=="string"&&JN.test(n)&&n.startsWith(t)||e&&!PN(n)&&Object.prototype.hasOwnProperty.call(n,e)),fC=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,c,l]=r.match(fp);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},IN=t=>ur(0,255,t),rh={...Ri,transform:t=>Math.round(IN(t))},ds={test:gp("rgb","red"),parse:fC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+rh.transform(t)+", "+rh.transform(e)+", "+rh.transform(n)+", "+Zo(oc.transform(r))+")"};function eL(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ad={test:gp("#"),parse:eL,transform:ds.transform},wc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ya=wc("deg"),cr=wc("%"),ue=wc("px"),tL=wc("vh"),nL=wc("vw"),_m={...cr,parse:t=>cr.parse(t)/100,transform:t=>cr.transform(t*100)},hi={test:gp("hsl","hue"),parse:fC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cr.transform(Zo(e))+", "+cr.transform(Zo(n))+", "+Zo(oc.transform(r))+")"},Tt={test:t=>ds.test(t)||ad.test(t)||hi.test(t),parse:t=>ds.test(t)?ds.parse(t):hi.test(t)?hi.parse(t):ad.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ds.transform(t):hi.transform(t),getAnimatableNone:t=>{const e=Tt.parse(t);return e.alpha=0,Tt.transform(e)}},rL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aL(t){return isNaN(t)&&typeof t=="string"&&(t.match(fp)?.length||0)+(t.match(rL)?.length||0)>0}const gC="number",hC="color",sL="var",iL="var(",km="${}",oL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cc(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=e.replace(oL,f=>(Tt.test(f)?(r.color.push(i),s.push(hC),n.push(Tt.parse(f))):f.startsWith(iL)?(r.var.push(i),s.push(sL),n.push(f)):(r.number.push(i),s.push(gC),n.push(parseFloat(f))),++i,km)).split(km);return{values:n,split:l,indexes:r,types:s}}function dC(t){return cc(t).values}function pC(t){const{split:e,types:n}=cc(t),r=e.length;return s=>{let i="";for(let c=0;c<r;c++)if(i+=e[c],s[c]!==void 0){const l=n[c];l===gC?i+=Zo(s[c]):l===hC?i+=Tt.transform(s[c]):i+=s[c]}return i}}const cL=t=>typeof t=="number"?0:Tt.test(t)?Tt.getAnimatableNone(t):t;function lL(t){const e=dC(t);return pC(t)(e.map(cL))}const Ma={test:aL,parse:dC,createTransformer:pC,getAnimatableNone:lL};function ah(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function uL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,c=0;if(!e)s=i=c=n;else{const l=n<.5?n*(1+e):n+e-n*e,f=2*n-l;s=ah(f,l,t+1/3),i=ah(f,l,t),c=ah(f,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(c*255),alpha:r}}function Zu(t,e){return n=>n>0?e:t}const st=(t,e,n)=>t+(e-t)*n,sh=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},fL=[ad,ds,hi],gL=t=>fL.find(e=>e.test(t));function Bm(t){const e=gL(t);if(!e)return!1;let n=e.parse(t);return e===hi&&(n=uL(n)),n}const Um=(t,e)=>{const n=Bm(t),r=Bm(e);if(!n||!r)return Zu(t,e);const s={...n};return i=>(s.red=sh(n.red,r.red,i),s.green=sh(n.green,r.green,i),s.blue=sh(n.blue,r.blue,i),s.alpha=st(n.alpha,r.alpha,i),ds.transform(s))},sd=new Set(["none","hidden"]);function hL(t,e){return sd.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function dL(t,e){return n=>st(t,e,n)}function hp(t){return typeof t=="number"?dL:typeof t=="string"?up(t)?Zu:Tt.test(t)?Um:xL:Array.isArray(t)?yC:typeof t=="object"?Tt.test(t)?Um:pL:Zu}function yC(t,e){const n=[...t],r=n.length,s=t.map((i,c)=>hp(i)(i,e[c]));return i=>{for(let c=0;c<r;c++)n[c]=s[c](i);return n}}function pL(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=hp(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function yL(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],c=t.indexes[i][r[i]],l=t.values[c]??0;n[s]=l,r[i]++}return n}const xL=(t,e)=>{const n=Ma.createTransformer(e),r=cc(t),s=cc(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?sd.has(t)&&!s.values.length||sd.has(e)&&!r.values.length?hL(t,e):Cc(yC(yL(r,s),s.values),n):Zu(t,e)};function xC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?st(t,e,n):hp(t)(t,e)}const vL=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ie.update(e,n),stop:()=>wa(e),now:()=>Ut.isProcessing?Ut.timestamp:Qt.now()}},vC=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qu=2e4;function dp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Qu;)e+=n,r=t.next(e);return e>=Qu?1/0:e}function mL(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(dp(r),Qu);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:jn(s)}}const TL=5;function mC(t,e,n){const r=Math.max(e-TL,0);return PS(n-t(r),e-r)}const lt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ih=.001;function SL({duration:t=lt.duration,bounce:e=lt.bounce,velocity:n=lt.velocity,mass:r=lt.mass}){let s,i,c=1-e;c=ur(lt.minDamping,lt.maxDamping,c),t=ur(lt.minDuration,lt.maxDuration,jn(t)),c<1?(s=g=>{const p=g*c,h=p*t,y=p-n,v=id(g,c),E=Math.exp(-h);return ih-y/v*E},i=g=>{const h=g*c*t,y=h*n+n,v=Math.pow(c,2)*Math.pow(g,2)*t,E=Math.exp(-h),x=id(Math.pow(g,2),c);return(-s(g)+ih>0?-1:1)*((y-v)*E)/x}):(s=g=>{const p=Math.exp(-g*t),h=(g-n)*t+1;return-ih+p*h},i=g=>{const p=Math.exp(-g*t),h=(n-g)*(t*t);return p*h});const l=5/t,f=EL(s,i,l);if(t=kr(t),isNaN(f))return{stiffness:lt.stiffness,damping:lt.damping,duration:t};{const g=Math.pow(f,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:t}}}const CL=12;function EL(t,e,n){let r=n;for(let s=1;s<CL;s++)r=r-t(r)/e(r);return r}function id(t,e){return t*Math.sqrt(1-e*e)}const wL=["duration","bounce"],ML=["stiffness","damping","mass"];function Fm(t,e){return e.some(n=>t[n]!==void 0)}function bL(t){let e={velocity:lt.velocity,stiffness:lt.stiffness,damping:lt.damping,mass:lt.mass,isResolvedFromDuration:!1,...t};if(!Fm(t,ML)&&Fm(t,wL))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*ur(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:lt.mass,stiffness:s,damping:i}}else{const n=SL(t);e={...e,...n,mass:lt.mass},e.isResolvedFromDuration=!0}return e}function Pu(t=lt.visualDuration,e=lt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:f,damping:g,mass:p,duration:h,velocity:y,isResolvedFromDuration:v}=bL({...n,velocity:-jn(n.velocity||0)}),E=y||0,x=g/(2*Math.sqrt(f*p)),T=c-i,w=jn(Math.sqrt(f/p)),D=Math.abs(T)<5;r||(r=D?lt.restSpeed.granular:lt.restSpeed.default),s||(s=D?lt.restDelta.granular:lt.restDelta.default);let M;if(x<1){const R=id(w,x);M=b=>{const L=Math.exp(-x*w*b);return c-L*((E+x*w*T)/R*Math.sin(R*b)+T*Math.cos(R*b))}}else if(x===1)M=R=>c-Math.exp(-w*R)*(T+(E+w*T)*R);else{const R=w*Math.sqrt(x*x-1);M=b=>{const L=Math.exp(-x*w*b),k=Math.min(R*b,300);return c-L*((E+x*w*T)*Math.sinh(k)+R*T*Math.cosh(k))/R}}const O={calculatedDuration:v&&h||null,next:R=>{const b=M(R);if(v)l.done=R>=h;else{let L=R===0?E:0;x<1&&(L=R===0?kr(E):mC(M,R,b));const k=Math.abs(L)<=r,B=Math.abs(c-b)<=s;l.done=k&&B}return l.value=l.done?c:b,l},toString:()=>{const R=Math.min(dp(O),Qu),b=vC(L=>O.next(R*L).value,R,30);return R+"ms "+b},toTransition:()=>{}};return O}Pu.applyToOptions=t=>{const e=mL(t,100,Pu);return t.ease=e.ease,t.duration=kr(e.duration),t.type="keyframes",t};function od({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:c,min:l,max:f,restDelta:g=.5,restSpeed:p}){const h=t[0],y={done:!1,value:h},v=k=>l!==void 0&&k<l||f!==void 0&&k>f,E=k=>l===void 0?f:f===void 0||Math.abs(l-k)<Math.abs(f-k)?l:f;let x=n*e;const T=h+x,w=c===void 0?T:c(T);w!==T&&(x=w-h);const D=k=>-x*Math.exp(-k/r),M=k=>w+D(k),O=k=>{const B=D(k),j=M(k);y.done=Math.abs(B)<=g,y.value=y.done?w:j};let R,b;const L=k=>{v(y.value)&&(R=k,b=Pu({keyframes:[y.value,E(y.value)],velocity:mC(M,k,y.value),damping:s,stiffness:i,restDelta:g,restSpeed:p}))};return L(0),{calculatedDuration:null,next:k=>{let B=!1;return!b&&R===void 0&&(B=!0,O(k),L(k)),R!==void 0&&k>=R?b.next(k-R):(!B&&O(k),y)}}}function OL(t,e,n){const r=[],s=n||Ur.mix||xC,i=t.length-1;for(let c=0;c<i;c++){let l=s(t[c],t[c+1]);if(e){const f=Array.isArray(e)?e[c]||zn:e;l=Cc(f,l)}r.push(l)}return r}function DL(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(sp(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=OL(e,r,s),f=l.length,g=p=>{if(c&&p<t[0])return e[0];let h=0;if(f>1)for(;h<t.length-2&&!(p<t[h+1]);h++);const y=ic(t[h],t[h+1],p);return l[h](y)};return n?p=>g(ur(t[0],t[i-1],p)):g}function RL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=ic(0,e,r);t.push(st(n,1,s))}}function NL(t){const e=[0];return RL(e,t.length-1),e}function LL(t,e){return t.map(n=>n*e)}function VL(t,e){return t.map(()=>e||iC).splice(0,t.length-1)}function Qo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=HN(r)?r.map(Lm):Lm(r),i={done:!1,value:e[0]},c=LL(n&&n.length===e.length?n:NL(e),t),l=DL(c,e,{ease:Array.isArray(s)?s:VL(e,s)});return{calculatedDuration:t,next:f=>(i.value=l(f),i.done=f>=t,i)}}const _L=t=>t!==null;function pp(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(_L),l=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!l||r===void 0?i[l]:r}const kL={decay:od,inertia:od,tween:Qo,keyframes:Qo,spring:Pu};function TC(t){typeof t.type=="string"&&(t.type=kL[t.type])}class yp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const BL=t=>t/100;class xp extends yp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Qt.now()&&this.tick(Qt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;TC(e);const{type:n=Qo,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:c=0}=e;let{keyframes:l}=e;const f=n||Qo;f!==Qo&&typeof l[0]!="number"&&(this.mixKeyframes=Cc(BL,xC(l[0],l[1])),l=[0,100]);const g=f({...e,keyframes:l});i==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...l].reverse(),velocity:-c})),g.calculatedDuration===null&&(g.calculatedDuration=dp(g));const{calculatedDuration:p}=g;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=g}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:g=0,keyframes:p,repeat:h,repeatType:y,repeatDelay:v,type:E,onUpdate:x,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-g*(this.playbackSpeed>=0?1:-1),D=this.playbackSpeed>=0?w<0:w>s;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let M=this.currentTime,O=r;if(h){const k=Math.min(this.currentTime,s)/l;let B=Math.floor(k),j=k%1;!j&&k>=1&&(j=1),j===1&&B--,B=Math.min(B,h+1),B%2&&(y==="reverse"?(j=1-j,v&&(j-=v/l)):y==="mirror"&&(O=c)),M=ur(0,1,j)*l}const R=D?{done:!1,value:p[0]}:O.next(M);i&&(R.value=i(R.value));let{done:b}=R;!D&&f!==null&&(b=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return L&&E!==od&&(R.value=pp(p,this.options,T,this.speed)),x&&x(R.value),L&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return jn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jn(e)}get time(){return jn(this.currentTime)}set time(e){e=kr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Qt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=jn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=vL,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Qt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function UL(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ps=t=>t*180/Math.PI,cd=t=>{const e=ps(Math.atan2(t[1],t[0]));return ld(e)},FL={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:cd,rotateZ:cd,skewX:t=>ps(Math.atan(t[1])),skewY:t=>ps(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ld=t=>(t=t%360,t<0&&(t+=360),t),jm=cd,Gm=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),zm=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),jL={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Gm,scaleY:zm,scale:t=>(Gm(t)+zm(t))/2,rotateX:t=>ld(ps(Math.atan2(t[6],t[5]))),rotateY:t=>ld(ps(Math.atan2(-t[2],t[0]))),rotateZ:jm,rotate:jm,skewX:t=>ps(Math.atan(t[4])),skewY:t=>ps(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ud(t){return t.includes("scale")?1:0}function fd(t,e){if(!t||t==="none")return ud(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=jL,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=FL,s=l}if(!s)return ud(e);const i=r[e],c=s[1].split(",").map(zL);return typeof i=="function"?i(c):c[i]}const GL=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return fd(n,e)};function zL(t){return parseFloat(t.trim())}const Ni=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Li=new Set(Ni),Am=t=>t===Ri||t===ue,AL=new Set(["x","y","z"]),$L=Ni.filter(t=>!AL.has(t));function HL(t){const e=[];return $L.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ca={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>fd(e,"x"),y:(t,{transform:e})=>fd(e,"y")};Ca.translateX=Ca.x;Ca.translateY=Ca.y;const xs=new Set;let gd=!1,hd=!1,dd=!1;function SC(){if(hd){const t=Array.from(xs).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=HL(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,c])=>{r.getValue(i)?.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}hd=!1,gd=!1,xs.forEach(t=>t.complete(dd)),xs.clear()}function CC(){xs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(hd=!0)})}function WL(){dd=!0,CC(),SC(),dd=!1}class vp{constructor(e,n,r,s,i,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(xs.add(this),gd||(gd=!0,Ie.read(CC),Ie.resolveKeyframes(SC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s?.get(),c=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const l=r.readValue(n,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),s&&i===void 0&&s.set(e[0])}UL(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),xs.delete(this)}cancel(){this.state==="scheduled"&&(xs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const KL=t=>t.startsWith("--");function XL(t,e,n){KL(e)?t.style.setProperty(e,n):t.style[e]=n}const YL=ip(()=>window.ScrollTimeline!==void 0),qL={};function ZL(t,e){const n=ip(t);return()=>qL[e]??n()}const EC=ZL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Go=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,$m={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function wC(t,e){if(t)return typeof t=="function"?EC()?vC(t,e):"ease-out":oC(t)?Go(t):Array.isArray(t)?t.map(n=>wC(n,e)||$m.easeOut):$m[t]}function QL(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:c="loop",ease:l="easeOut",times:f}={},g=void 0){const p={[e]:n};f&&(p.offset=f);const h=wC(l,s);Array.isArray(h)&&(p.easing=h);const y={delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:c==="reverse"?"alternate":"normal"};return g&&(y.pseudoElement=g),t.animate(p,y)}function MC(t){return typeof t=="function"&&"applyToOptions"in t}function PL({type:t,...e}){return MC(t)&&EC()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class JL extends yp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:c=!1,finalKeyframe:l,onComplete:f}=e;this.isPseudoElement=!!i,this.allowFlatten=c,this.options=e,sp(typeof e.type!="string");const g=PL(e);this.animation=QL(n,r,s,g,i),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const p=pp(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(p):XL(n,r,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return jn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+jn(e)}get time(){return jn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=kr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&YL()?(this.animation.timeline=e,zn):n(this)}}const bC={anticipate:rC,backInOut:nC,circInOut:sC};function IL(t){return t in bC}function e3(t){typeof t.ease=="string"&&IL(t.ease)&&(t.ease=bC[t.ease])}const oh=10;class t3 extends JL{constructor(e){e3(e),TC(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new xp({...c,autoplay:!1}),f=Math.max(oh,Qt.now()-this.startTime),g=ur(0,oh,f-oh);n.setWithVelocity(l.sample(Math.max(0,f-g)).value,l.sample(f).value,g),l.stop()}}const Hm=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ma.test(t)||t==="0")&&!t.startsWith("url("));function n3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function r3(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],c=Hm(s,e),l=Hm(i,e);return!c||!l?!1:n3(t)||(n==="spring"||MC(n))&&r}function pd(t){t.duration=0,t.type="keyframes"}const a3=new Set(["opacity","clipPath","filter","transform"]),s3=ip(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function i3(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:g}=e.owner.getProps();return s3()&&n&&a3.has(n)&&(n!=="transform"||!g)&&!f&&!r&&s!=="mirror"&&i!==0&&c!=="inertia"}const o3=40;class c3 extends yp{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:c="loop",keyframes:l,name:f,motionValue:g,element:p,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Qt.now();const y={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:c,name:f,motionValue:g,element:p,...h},v=p?.KeyframeResolver||vp;this.keyframeResolver=new v(l,(E,x,T)=>this.onKeyframesResolved(E,x,y,!T),f,g,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:c,velocity:l,delay:f,isHandoff:g,onUpdate:p}=r;this.resolvedAt=Qt.now(),r3(e,i,c,l)||((Ur.instantAnimations||!f)&&p?.(pp(e,r,n)),e[0]=e[e.length-1],pd(r),r.repeat=0);const y={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>o3?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!g&&i3(y),E=y.motionValue?.owner?.current,x=v?new t3({...y,element:E}):new xp(y);x.finished.then(()=>{this.notifyFinished()}).catch(zn),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),WL()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function OC(t,e,n,r=0,s=1){const i=Array.from(t).sort((g,p)=>g.sortNodePosition(p)).indexOf(e),c=t.size,l=(c-1)*r;return typeof n=="function"?n(i,c):s===1?i*r:l-i*r}const l3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function u3(t){const e=l3.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function DC(t,e,n=1){const[r,s]=u3(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const c=i.trim();return qS(c)?parseFloat(c):c}return up(s)?DC(s,e,n+1):s}const f3={type:"spring",stiffness:500,damping:25,restSpeed:10},g3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),h3={type:"keyframes",duration:.8},d3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},p3=(t,{keyframes:e})=>e.length>2?h3:Li.has(t)?t.startsWith("scale")?g3(e[1]):f3:d3,y3=t=>t!==null;function x3(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(y3),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}function mp(t,e){return t?.[e]??t?.default??t}function v3({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:c,repeatDelay:l,from:f,elapsed:g,...p}){return!!Object.keys(p).length}const Tp=(t,e,n,r={},s,i)=>c=>{const l=mp(r,t)||{},f=l.delay||r.delay||0;let{elapsed:g=0}=r;g=g-kr(f);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-g,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:i?void 0:s};v3(l)||Object.assign(p,p3(t,p)),p.duration&&(p.duration=kr(p.duration)),p.repeatDelay&&(p.repeatDelay=kr(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let h=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(pd(p),p.delay===0&&(h=!0)),(Ur.instantAnimations||Ur.skipAnimations)&&(h=!0,pd(p),p.delay=0),p.allowFlatten=!l.type&&!l.ease,h&&!i&&e.get()!==void 0){const y=x3(p.keyframes,l);if(y!==void 0){Ie.update(()=>{p.onUpdate(y),p.onComplete()});return}}return l.isSync?new xp(p):new c3(p)};function Wm(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Sp(t,e,n,r){if(typeof e=="function"){const[s,i]=Wm(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=Wm(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function mi(t,e,n){const r=t.getProps();return Sp(r,e,n!==void 0?n:r.custom,t)}const RC=new Set(["width","height","top","left","right","bottom",...Ni]),Km=30,m3=t=>!isNaN(parseFloat(t));class T3{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=Qt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Qt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=m3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new op);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Qt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Km)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Km);return PS(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ci(t,e){return new T3(t,e)}const yd=t=>Array.isArray(t);function S3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ci(n))}function C3(t){return yd(t)?t[t.length-1]||0:t}function E3(t,e){const n=mi(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const c in i){const l=C3(i[c]);S3(t,c,l)}}const Ht=t=>!!(t&&t.getVelocity);function w3(t){return!!(Ht(t)&&t.add)}function xd(t,e){const n=t.getValue("willChange");if(w3(n))return n.add(e);if(!n&&Ur.WillChange){const r=new Ur.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Cp(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const M3="framerAppearId",NC="data-"+Cp(M3);function LC(t){return t.props[NC]}function b3({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function VC(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:c,...l}=e;r&&(i=r);const f=[],g=s&&t.animationState&&t.animationState.getState()[s];for(const p in l){const h=t.getValue(p,t.latestValues[p]??null),y=l[p];if(y===void 0||g&&b3(g,p))continue;const v={delay:n,...mp(i||{},p)},E=h.get();if(E!==void 0&&!h.isAnimating&&!Array.isArray(y)&&y===E&&!v.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const w=LC(t);if(w){const D=window.MotionHandoffAnimation(w,p,Ie);D!==null&&(v.startTime=D,x=!0)}}xd(t,p),h.start(Tp(p,h,y,t.shouldReduceMotion&&RC.has(p)?{type:!1}:v,t,x));const T=h.animation;T&&f.push(T)}return c&&Promise.all(f).then(()=>{Ie.update(()=>{c&&E3(t,c)})}),f}function vd(t,e,n={}){const r=mi(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(VC(t,r,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:g=0,staggerChildren:p,staggerDirection:h}=s;return O3(t,e,f,g,p,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[f,g]=l==="beforeChildren"?[i,c]:[c,i];return f().then(()=>g())}else return Promise.all([i(),c(n.delay)])}function O3(t,e,n=0,r=0,s=0,i=1,c){const l=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),l.push(vd(f,e,{...c,delay:n+(typeof r=="function"?0:r)+OC(t.variantChildren,f,r,s,i)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(l)}function D3(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>vd(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=vd(t,e,n);else{const s=typeof e=="function"?mi(t,e,n.custom):e;r=Promise.all(VC(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const R3={test:t=>t==="auto",parse:t=>t},_C=t=>e=>e.test(t),kC=[Ri,ue,cr,ya,nL,tL,R3],Xm=t=>kC.find(_C(t));function N3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||QS(t):!0}const L3=new Set(["brightness","contrast","saturate","opacity"]);function V3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(fp)||[];if(!r)return t;const s=n.replace(r,"");let i=L3.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const _3=/\b([a-z-]*)\(.*?\)/gu,md={...Ma,getAnimatableNone:t=>{const e=t.match(_3);return e?e.map(V3).join(" "):t}},Ym={...Ri,transform:Math.round},k3={rotate:ya,rotateX:ya,rotateY:ya,rotateZ:ya,scale:nu,scaleX:nu,scaleY:nu,scaleZ:nu,skew:ya,skewX:ya,skewY:ya,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:oc,originX:_m,originY:_m,originZ:ue},Ep={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,inset:ue,insetBlock:ue,insetBlockStart:ue,insetBlockEnd:ue,insetInline:ue,insetInlineStart:ue,insetInlineEnd:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,paddingBlock:ue,paddingBlockStart:ue,paddingBlockEnd:ue,paddingInline:ue,paddingInlineStart:ue,paddingInlineEnd:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,marginBlock:ue,marginBlockStart:ue,marginBlockEnd:ue,marginInline:ue,marginInlineStart:ue,marginInlineEnd:ue,fontSize:ue,backgroundPositionX:ue,backgroundPositionY:ue,...k3,zIndex:Ym,fillOpacity:oc,strokeOpacity:oc,numOctaves:Ym},B3={...Ep,color:Tt,backgroundColor:Tt,outlineColor:Tt,fill:Tt,stroke:Tt,borderColor:Tt,borderTopColor:Tt,borderRightColor:Tt,borderBottomColor:Tt,borderLeftColor:Tt,filter:md,WebkitFilter:md},BC=t=>B3[t];function UC(t,e){let n=BC(t);return n!==md&&(n=Ma),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const U3=new Set(["auto","none","0"]);function F3(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!U3.has(i)&&cc(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=UC(n,s)}class j3 extends vp{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let p=0;p<e.length;p++){let h=e[p];if(typeof h=="string"&&(h=h.trim(),up(h))){const y=DC(h,n.current);y!==void 0&&(e[p]=y),p===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!RC.has(r)||e.length!==2)return;const[s,i]=e,c=Xm(s),l=Xm(i),f=Vm(s),g=Vm(i);if(f!==g&&Ca[r]){this.needsMeasurement=!0;return}if(c!==l)if(Am(c)&&Am(l))for(let p=0;p<e.length;p++){const h=e[p];typeof h=="string"&&(e[p]=parseFloat(h))}else Ca[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||N3(e[s]))&&r.push(s);r.length&&F3(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ca[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,c=r[i];r[i]=Ca[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,f])=>{e.getValue(l).set(f)}),this.resolveNoneKeyframes()}}function G3(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=n?.[t]??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t).filter(r=>r!=null)}const FC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function z3(t){return ZS(t)&&"offsetHeight"in t}const{schedule:wp}=cC(queueMicrotask,!1),Yn={x:!1,y:!1};function jC(){return Yn.x||Yn.y}function A3(t){return t==="x"||t==="y"?Yn[t]?null:(Yn[t]=!0,()=>{Yn[t]=!1}):Yn.x||Yn.y?null:(Yn.x=Yn.y=!0,()=>{Yn.x=Yn.y=!1})}function GC(t,e){const n=G3(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function qm(t){return!(t.pointerType==="touch"||jC())}function $3(t,e,n={}){const[r,s,i]=GC(t,n),c=l=>{if(!qm(l))return;const{target:f}=l,g=e(f,l);if(typeof g!="function"||!f)return;const p=h=>{qm(h)&&(g(h),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,s)};return r.forEach(l=>{l.addEventListener("pointerenter",c,s)}),i}const zC=(t,e)=>e?t===e?!0:zC(t,e.parentElement):!1,Mp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,H3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function AC(t){return H3.has(t.tagName)||t.isContentEditable===!0}const Nu=new WeakSet;function Zm(t){return e=>{e.key==="Enter"&&t(e)}}function ch(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const W3=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Zm(()=>{if(Nu.has(n))return;ch(n,"down");const s=Zm(()=>{ch(n,"up")}),i=()=>ch(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Qm(t){return Mp(t)&&!jC()}function K3(t,e,n={}){const[r,s,i]=GC(t,n),c=l=>{const f=l.currentTarget;if(!Qm(l))return;Nu.add(f);const g=e(f,l),p=(v,E)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",y),Nu.has(f)&&Nu.delete(f),Qm(v)&&typeof g=="function"&&g(v,{success:E})},h=v=>{p(v,f===window||f===document||n.useGlobalTarget||zC(f,v.target))},y=v=>{p(v,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",y,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,s),z3(l)&&(l.addEventListener("focus",g=>W3(g,s)),!AC(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function $C(t){return ZS(t)&&"ownerSVGElement"in t}function X3(t){return $C(t)&&t.tagName==="svg"}const Y3=[...kC,Tt,Ma],q3=t=>Y3.find(_C(t)),Pm=()=>({translate:0,scale:1,origin:0,originPoint:0}),di=()=>({x:Pm(),y:Pm()}),Jm=()=>({min:0,max:0}),Et=()=>({x:Jm(),y:Jm()}),Td={current:null},HC={current:!1},Z3=typeof window<"u";function Q3(){if(HC.current=!0,!!Z3)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Td.current=t.matches;t.addEventListener("change",e),e()}else Td.current=!1}const P3=new WeakMap;function Tf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function lc(t){return typeof t=="string"||Array.isArray(t)}const bp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Op=["initial",...bp];function Sf(t){return Tf(t.animate)||Op.some(e=>lc(t[e]))}function WC(t){return!!(Sf(t)||t.variants)}function J3(t,e,n){for(const r in e){const s=e[r],i=n[r];if(Ht(s))t.addValue(r,s);else if(Ht(i))t.addValue(r,Ci(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=t.getStaticValue(r);t.addValue(r,Ci(c!==void 0?c:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Im=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ju={};function KC(t){Ju=t}function I3(){return Ju}class eV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Qt.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ie.render(this.render,!1,!0))};const{latestValues:f,renderState:g}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=g,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Sf(n),this.isVariantNode=WC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in h){const v=h[y];f[y]!==void 0&&Ht(v)&&v.set(f[y])}}mount(e){this.current=e,P3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(HC.current||Q3(),this.shouldReduceMotion=Td.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wa(this.notifyUpdate),wa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Li.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ju){const n=Ju[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Im.length;r++){const s=Im[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,c=e[i];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=J3(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ci(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(qS(r)||QS(r))?r=parseFloat(r):!q3(r)&&Ma.test(n)&&(r=UC(e,n)),this.setBaseTarget(e,Ht(r)?r.get():r)),Ht(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=Sp(this.props,n,this.presenceContext?.custom);i&&(r=i[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ht(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new op),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){wp.render(this.render)}}class XC extends eV{constructor(){super(...arguments),this.KeyframeResolver=j3}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const r=e.style;return r?r[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ht(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}function YC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function tV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function nV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function lh(t){return t===void 0||t===1}function Sd({scale:t,scaleX:e,scaleY:n}){return!lh(t)||!lh(e)||!lh(n)}function os(t){return Sd(t)||qC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qC(t){return e2(t.x)||e2(t.y)}function e2(t){return t&&t!=="0%"}function Iu(t,e,n){const r=t-n,s=e*r;return n+s}function t2(t,e,n,r,s){return s!==void 0&&(t=Iu(t,s,r)),Iu(t,n,r)+e}function Cd(t,e=0,n=1,r,s){t.min=t2(t.min,e,n,r,s),t.max=t2(t.max,e,n,r,s)}function ZC(t,{x:e,y:n}){Cd(t.x,e.translate,e.scale,e.originPoint),Cd(t.y,n.translate,n.scale,n.originPoint)}const n2=.999999999999,r2=1.0000000000001;function rV(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,c;for(let l=0;l<s;l++){i=n[l],c=i.projectionDelta;const{visualElement:f}=i.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&yi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,ZC(t,c)),r&&os(i.latestValues)&&yi(t,i.latestValues))}e.x<r2&&e.x>n2&&(e.x=1),e.y<r2&&e.y>n2&&(e.y=1)}function pi(t,e){t.min=t.min+e,t.max=t.max+e}function a2(t,e,n,r,s=.5){const i=st(t.min,t.max,s);Cd(t,e,n,i,r)}function yi(t,e){a2(t.x,e.x,e.scaleX,e.scale,e.originX),a2(t.y,e.y,e.scaleY,e.scale,e.originY)}function QC(t,e){return YC(nV(t.getBoundingClientRect(),e))}function aV(t,e,n){const r=QC(t,n),{scroll:s}=e;return s&&(pi(r.x,s.offset.x),pi(r.y,s.offset.y)),r}const sV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},iV=Ni.length;function oV(t,e,n){let r="",s=!0;for(let i=0;i<iV;i++){const c=Ni[i],l=t[c];if(l===void 0)continue;let f=!0;if(typeof l=="number")f=l===(c.startsWith("scale")?1:0);else{const g=parseFloat(l);f=c.startsWith("scale")?g===1:g===0}if(!f||n){const g=FC(l,Ep[c]);if(!f){s=!1;const p=sV[c]||c;r+=`${p}(${g}) `}n&&(e[c]=g)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Dp(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let c=!1,l=!1;for(const f in e){const g=e[f];if(Li.has(f)){c=!0;continue}else if(uC(f)){s[f]=g;continue}else{const p=FC(g,Ep[f]);f.startsWith("origin")?(l=!0,i[f]=p):r[f]=p}}if(e.transform||(c||n?r.transform=oV(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:f="50%",originY:g="50%",originZ:p=0}=i;r.transformOrigin=`${f} ${g} ${p}`}}function PC(t,{style:e,vars:n},r,s){const i=t.style;let c;for(c in e)i[c]=e[c];s?.applyProjectionStyles(i,r);for(c in n)i.setProperty(c,n[c])}function s2(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=s2(t,e.target.x),r=s2(t,e.target.y);return`${n}% ${r}%`}},cV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=Ma.parse(t);if(s.length>5)return r;const i=Ma.createTransformer(t),c=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,f=n.y.scale*e.y;s[0+c]/=l,s[1+c]/=f;const g=st(l,f,.5);return typeof s[2+c]=="number"&&(s[2+c]/=g),typeof s[3+c]=="number"&&(s[3+c]/=g),i(s)}},Ed={borderRadius:{...Vo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vo,borderTopRightRadius:Vo,borderBottomLeftRadius:Vo,borderBottomRightRadius:Vo,boxShadow:cV};function JC(t,{layout:e,layoutId:n}){return Li.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ed[t]||t==="opacity")}function Rp(t,e,n){const r=t.style,s=e?.style,i={};if(!r)return i;for(const c in r)(Ht(r[c])||s&&Ht(s[c])||JC(c,t)||n?.getValue(c)?.liveStyle!==void 0)&&(i[c]=r[c]);return i}function lV(t){return window.getComputedStyle(t)}class uV extends XC{constructor(){super(...arguments),this.type="html",this.renderInstance=PC}readValueFromInstance(e,n){if(Li.has(n))return this.projection?.isProjecting?ud(n):GL(e,n);{const r=lV(e),s=(uC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return QC(e,n)}build(e,n,r){Dp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Rp(e,n,r)}}const fV={offset:"stroke-dashoffset",array:"stroke-dasharray"},gV={offset:"strokeDashoffset",array:"strokeDasharray"};function hV(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?fV:gV;t[i.offset]=`${-r}`,t[i.array]=`${e} ${n}`}const dV=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function IC(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:c=0,...l},f,g,p){if(Dp(t,l,g),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:y}=t;h.transform&&(y.transform=h.transform,delete h.transform),(y.transform||h.transformOrigin)&&(y.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),y.transform&&(y.transformBox=p?.transformBox??"fill-box",delete h.transformBox);for(const v of dV)h[v]!==void 0&&(y[v]=h[v],delete h[v]);e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&hV(h,s,i,c,!1)}const eE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function pV(t,e,n,r){PC(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(eE.has(s)?s:Cp(s),e.attrs[s])}function nE(t,e,n){const r=Rp(t,e,n);for(const s in t)if(Ht(t[s])||Ht(e[s])){const i=Ni.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}class yV extends XC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Et}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Li.has(n)){const r=BC(n);return r&&r.default||0}return n=eE.has(n)?n:Cp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return nE(e,n,r)}build(e,n,r){IC(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){pV(e,n,r,s)}mount(e){this.isSVGTag=tE(e.tagName),super.mount(e)}}const xV=Op.length;function rE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?rE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<xV;n++){const r=Op[n],s=t.props[r];(lc(s)||s===!1)&&(e[r]=s)}return e}function aE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const vV=[...bp].reverse(),mV=bp.length;function TV(t){return e=>Promise.all(e.map(({animation:n,options:r})=>D3(t,n,r)))}function SV(t){let e=TV(t),n=i2(),r=!0;const s=f=>(g,p)=>{const h=mi(t,p,f==="exit"?t.presenceContext?.custom:void 0);if(h){const{transition:y,transitionEnd:v,...E}=h;g={...g,...E,...v}}return g};function i(f){e=f(t)}function c(f){const{props:g}=t,p=rE(t.parent)||{},h=[],y=new Set;let v={},E=1/0;for(let T=0;T<mV;T++){const w=vV[T],D=n[w],M=g[w]!==void 0?g[w]:p[w],O=lc(M),R=w===f?D.isActive:null;R===!1&&(E=T);let b=M===p[w]&&M!==g[w]&&O;if(b&&r&&t.manuallyAnimateOnMount&&(b=!1),D.protectedKeys={...v},!D.isActive&&R===null||!M&&!D.prevProp||Tf(M)||typeof M=="boolean")continue;const L=CV(D.prevProp,M);let k=L||w===f&&D.isActive&&!b&&O||T>E&&O,B=!1;const j=Array.isArray(M)?M:[M];let z=j.reduce(s(w),{});R===!1&&(z={});const{prevResolvedValues:$={}}=D,W={...$,...z},Z=P=>{k=!0,y.has(P)&&(B=!0,y.delete(P)),D.needsAnimating[P]=!0;const ae=t.getValue(P);ae&&(ae.liveStyle=!1)};for(const P in W){const ae=z[P],J=$[P];if(v.hasOwnProperty(P))continue;let oe=!1;yd(ae)&&yd(J)?oe=!aE(ae,J):oe=ae!==J,oe?ae!=null?Z(P):y.add(P):ae!==void 0&&y.has(P)?Z(P):D.protectedKeys[P]=!0}D.prevProp=M,D.prevResolvedValues=z,D.isActive&&(v={...v,...z}),r&&t.blockInitialAnimation&&(k=!1);const te=b&&L;k&&(!te||B)&&h.push(...j.map(P=>{const ae={type:w};if(typeof P=="string"&&r&&!te&&t.manuallyAnimateOnMount&&t.parent){const{parent:J}=t,oe=mi(J,P);if(J.enteringChildren&&oe){const{delayChildren:U}=oe.transition||{};ae.delay=OC(J.enteringChildren,t,U)}}return{animation:P,options:ae}}))}if(y.size){const T={};if(typeof g.initial!="boolean"){const w=mi(t,Array.isArray(g.initial)?g.initial[0]:g.initial);w&&w.transition&&(T.transition=w.transition)}y.forEach(w=>{const D=t.getBaseTarget(w),M=t.getValue(w);M&&(M.liveStyle=!0),T[w]=D??null}),h.push({animation:T})}let x=!!h.length;return r&&(g.initial===!1||g.initial===g.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(h):Promise.resolve()}function l(f,g){if(n[f].isActive===g)return Promise.resolve();t.variantChildren?.forEach(h=>h.animationState?.setActive(f,g)),n[f].isActive=g;const p=c(f);for(const h in n)n[h].protectedKeys={};return p}return{animateChanges:c,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=i2()}}}function CV(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aE(e,t):!1}function Ja(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i2(){return{animate:Ja(!0),whileInView:Ja(),whileHover:Ja(),whileTap:Ja(),whileDrag:Ja(),whileFocus:Ja(),exit:Ja()}}function o2(t,e){t.min=e.min,t.max=e.max}function Xn(t,e){o2(t.x,e.x),o2(t.y,e.y)}function c2(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const sE=1e-4,EV=1-sE,wV=1+sE,iE=.01,MV=0-iE,bV=0+iE;function Pt(t){return t.max-t.min}function OV(t,e,n){return Math.abs(t-e)<=n}function l2(t,e,n,r=.5){t.origin=r,t.originPoint=st(e.min,e.max,t.origin),t.scale=Pt(n)/Pt(e),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(t.scale>=EV&&t.scale<=wV||isNaN(t.scale))&&(t.scale=1),(t.translate>=MV&&t.translate<=bV||isNaN(t.translate))&&(t.translate=0)}function Po(t,e,n,r){l2(t.x,e.x,n.x,r?r.originX:void 0),l2(t.y,e.y,n.y,r?r.originY:void 0)}function u2(t,e,n){t.min=n.min+e.min,t.max=t.min+Pt(e)}function DV(t,e,n){u2(t.x,e.x,n.x),u2(t.y,e.y,n.y)}function f2(t,e,n){t.min=e.min-n.min,t.max=t.min+Pt(e)}function ef(t,e,n){f2(t.x,e.x,n.x),f2(t.y,e.y,n.y)}function g2(t,e,n,r,s){return t-=e,t=Iu(t,1/n,r),s!==void 0&&(t=Iu(t,1/s,r)),t}function RV(t,e=0,n=1,r=.5,s,i=t,c=t){if(cr.test(e)&&(e=parseFloat(e),e=st(c.min,c.max,e/100)-c.min),typeof e!="number")return;let l=st(i.min,i.max,r);t===i&&(l-=e),t.min=g2(t.min,e,n,l,s),t.max=g2(t.max,e,n,l,s)}function h2(t,e,[n,r,s],i,c){RV(t,e[n],e[r],e[s],e.scale,i,c)}const NV=["x","scaleX","originX"],LV=["y","scaleY","originY"];function d2(t,e,n,r){h2(t.x,e,NV,n?n.x:void 0,r?r.x:void 0),h2(t.y,e,LV,n?n.y:void 0,r?r.y:void 0)}function p2(t){return t.translate===0&&t.scale===1}function oE(t){return p2(t.x)&&p2(t.y)}function y2(t,e){return t.min===e.min&&t.max===e.max}function VV(t,e){return y2(t.x,e.x)&&y2(t.y,e.y)}function x2(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function cE(t,e){return x2(t.x,e.x)&&x2(t.y,e.y)}function v2(t){return Pt(t.x)/Pt(t.y)}function m2(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function Bn(t){return[t("x"),t("y")]}function _V(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,c=n?.z||0;if((s||i||c)&&(r=`translate3d(${s}px, ${i}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:g,rotate:p,rotateX:h,rotateY:y,skewX:v,skewY:E}=n;g&&(r=`perspective(${g}px) ${r}`),p&&(r+=`rotate(${p}deg) `),h&&(r+=`rotateX(${h}deg) `),y&&(r+=`rotateY(${y}deg) `),v&&(r+=`skewX(${v}deg) `),E&&(r+=`skewY(${E}deg) `)}const l=t.x.scale*e.x,f=t.y.scale*e.y;return(l!==1||f!==1)&&(r+=`scale(${l}, ${f})`),r||"none"}const lE=["TopLeft","TopRight","BottomLeft","BottomRight"],kV=lE.length,T2=t=>typeof t=="string"?parseFloat(t):t,S2=t=>typeof t=="number"||ue.test(t);function BV(t,e,n,r,s,i){s?(t.opacity=st(0,n.opacity??1,UV(r)),t.opacityExit=st(e.opacity??1,0,FV(r))):i&&(t.opacity=st(e.opacity??1,n.opacity??1,r));for(let c=0;c<kV;c++){const l=`border${lE[c]}Radius`;let f=C2(e,l),g=C2(n,l);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||S2(f)===S2(g)?(t[l]=Math.max(st(T2(f),T2(g),r),0),(cr.test(g)||cr.test(f))&&(t[l]+="%")):t[l]=g}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,r))}function C2(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const UV=uE(0,.5,aC),FV=uE(.5,.95,zn);function uE(t,e,n){return r=>r<t?0:r>e?1:n(ic(t,e,r))}function jV(t,e,n){const r=Ht(t)?t:Ci(t);return r.start(Tp("",r,e,n)),r.animation}function uc(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const GV=(t,e)=>t.depth-e.depth;class zV{constructor(){this.children=[],this.isDirty=!1}add(e){rp(this.children,e),this.isDirty=!0}remove(e){ap(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GV),this.isDirty=!1,this.children.forEach(e)}}function AV(t,e){const n=Qt.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(wa(r),t(i-e))};return Ie.setup(r,!0),()=>wa(r)}function Lu(t){return Ht(t)?t.get():t}class $V{constructor(){this.members=[]}add(e){rp(this.members,e),e.scheduleRender()}remove(e){if(ap(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,i=e.options.layoutDependency;s!==void 0&&i!==void 0&&s===i||(e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:l}=e.options;l===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Vu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},uh=["","X","Y","Z"],HV=1e3;let WV=0;function fh(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function fE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=LC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ie,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&fE(r)}function gE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},l=e?.()){this.id=WV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(YV),this.nodes.forEach(PV),this.nodes.forEach(JV),this.nodes.forEach(qV)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new zV)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new op),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const f=this.eventHandlers.get(c);f&&f.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=$C(c)&&!X3(c),this.instance=c;const{layoutId:l,layout:f,visualElement:g}=this.options;if(g&&!g.current&&g.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||l)&&(this.isLayoutDirty=!0),t){let p,h=0;const y=()=>this.root.updateBlockedByResize=!1;Ie.read(()=>{h=window.innerWidth}),t(c,()=>{const v=window.innerWidth;v!==h&&(h=v,this.root.updateBlockedByResize=!0,p&&p(),p=AV(y,250),Vu.hasAnimatedSinceResize&&(Vu.hasAnimatedSinceResize=!1,this.nodes.forEach(M2)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&g&&(l||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:h,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||g.getDefaultTransition()||r_,{onLayoutAnimationStart:x,onLayoutAnimationComplete:T}=g.getProps(),w=!this.targetLayout||!cE(this.targetLayout,v),D=!h&&y;if(this.options.layoutRoot||this.resumeFrom||D||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...mp(E,"layout"),onPlay:x,onComplete:T};(g.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(p,D)}else h||M2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IV),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const h=this.path[p];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:f}=this.options;if(l===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(E2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(w2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QV),this.nodes.forEach(KV),this.nodes.forEach(XV)):this.nodes.forEach(w2),this.clearAllSnapshots();const l=Qt.now();Ut.delta=ur(0,1e3/60,l-Ut.timestamp),Ut.timestamp=l,Ut.isProcessing=!0,nh.update.process(Ut),nh.preRender.process(Ut),nh.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZV),this.sharedNodes.forEach(e_)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pt(this.snapshot.measuredBox.x)&&!Pt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!oE(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,p=g!==this.prevTransformTemplateValue;c&&this.instance&&(l||os(this.latestValues)||p)&&(s(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let f=this.removeElementScroll(l);return c&&(f=this.removeTransform(f)),a_(f),{animationId:this.root.animationId,measuredBox:l,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Et();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(s_))){const{scroll:g}=this.root;g&&(pi(l.x,g.offset.x),pi(l.y,g.offset.y))}return l}removeElementScroll(c){const l=Et();if(Xn(l,c),this.scroll?.wasRoot)return l;for(let f=0;f<this.path.length;f++){const g=this.path[f],{scroll:p,options:h}=g;g!==this.root&&p&&h.layoutScroll&&(p.wasRoot&&Xn(l,c),pi(l.x,p.offset.x),pi(l.y,p.offset.y))}return l}applyTransform(c,l=!1){const f=Et();Xn(f,c);for(let g=0;g<this.path.length;g++){const p=this.path[g];!l&&p.options.layoutScroll&&p.scroll&&p!==p.root&&yi(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),os(p.latestValues)&&yi(f,p.latestValues)}return os(this.latestValues)&&yi(f,this.latestValues),f}removeTransform(c){const l=Et();Xn(l,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!os(g.latestValues))continue;Sd(g.latestValues)&&g.updateSnapshot();const p=Et(),h=g.measurePageBox();Xn(p,h),d2(l,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,p)}return os(this.latestValues)&&d2(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==l;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:h}=this.options;if(!this.layout||!(p||h))return;this.resolvedRelativeTargetAt=Ut.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xn(this.target,this.layout.layoutBox),ZC(this.target,this.targetDelta)):Xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sd(this.parent.latestValues)||qC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,l,f){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),ef(this.relativeTargetOrigin,l,f),Xn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(f=!1),f)return;const{layout:g,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||p))return;Xn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,y=this.treeScale.y;rV(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Et());const{target:v}=c;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(c2(this.prevProjectionDelta.x,this.projectionDelta.x),c2(this.prevProjectionDelta.y,this.projectionDelta.y)),Po(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==y||!m2(this.projectionDelta.x,this.prevProjectionDelta.x)||!m2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=di(),this.projectionDelta=di(),this.projectionDeltaWithTransform=di()}setAnimationOrigin(c,l=!1){const f=this.snapshot,g=f?f.latestValues:{},p={...this.latestValues},h=di();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=Et(),v=f?f.source:void 0,E=this.layout?this.layout.source:void 0,x=v!==E,T=this.getStack(),w=!T||T.members.length<=1,D=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(n_));this.animationProgress=0;let M;this.mixTargetDelta=O=>{const R=O/1e3;b2(h.x,c.x,R),b2(h.y,c.y,R),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ef(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),t_(this.relativeTarget,this.relativeTargetOrigin,y,R),M&&VV(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Et()),Xn(M,this.relativeTarget)),x&&(this.animationValues=p,BV(p,g,this.latestValues,R,D,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{Vu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ci(0)),this.currentAnimation=jV(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:f,layout:g,latestValues:p}=c;if(!(!l||!f||!g)){if(this!==c&&this.layout&&g&&hE(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||Et();const h=Pt(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+h;const y=Pt(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+y}Xn(l,f),yi(l,p),Po(this.projectionDeltaWithTransform,this.layoutCorrected,l,p)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new $V),this.sharedNodes.get(c).add(l);const g=l.options.initialPromotionConfig;l.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(l=!0),!l)return;const g={};f.z&&fh("z",c,g,this.animationValues);for(let p=0;p<uh.length;p++)fh(`rotate${uh[p]}`,c,g,this.animationValues),fh(`skew${uh[p]}`,c,g,this.animationValues);c.render();for(const p in g)c.setStaticValue(p,g[p]),this.animationValues&&(this.animationValues[p]=g[p]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Lu(l?.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Lu(l?.pointerEvents)||""),this.hasProjected&&!os(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const p=g.animationValues||g.latestValues;this.applyTransformsToTarget();let h=_V(this.projectionDeltaWithTransform,this.treeScale,p);f&&(h=f(p,h)),c.transform=h;const{x:y,y:v}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,g.animationValues?c.opacity=g===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=g===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const E in Ed){if(p[E]===void 0)continue;const{correct:x,applyTo:T,isCSSVariable:w}=Ed[E],D=h==="none"?p[E]:x(p[E],g);if(T){const M=T.length;for(let O=0;O<M;O++)c[T[O]]=D}else w?this.options.visualElement.renderState.vars[E]=D:c[E]=D}this.options.layoutId&&(c.pointerEvents=g===this?Lu(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(E2),this.root.sharedNodes.clear()}}}function KV(t){t.updateLayout()}function XV(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,i=e.source!==t.layout.source;s==="size"?Bn(p=>{const h=i?e.measuredBox[p]:e.layoutBox[p],y=Pt(h);h.min=n[p].min,h.max=h.min+y}):hE(s,e.layoutBox,n)&&Bn(p=>{const h=i?e.measuredBox[p]:e.layoutBox[p],y=Pt(n[p]);h.max=h.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const c=di();Po(c,n,e.layoutBox);const l=di();i?Po(l,t.applyTransform(r,!0),e.measuredBox):Po(l,n,e.layoutBox);const f=!oE(c);let g=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:h,layout:y}=p;if(h&&y){const v=Et();ef(v,e.layoutBox,h.layoutBox);const E=Et();ef(E,n,y.layoutBox),cE(v,E)||(g=!0),p.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=v,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:c,hasLayoutChanged:f,hasRelativeLayoutChanged:g})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function YV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ZV(t){t.clearSnapshot()}function E2(t){t.clearMeasurements()}function w2(t){t.isLayoutDirty=!1}function QV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function M2(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function PV(t){t.resolveTargetDelta()}function JV(t){t.calcProjection()}function IV(t){t.resetSkewAndRotation()}function e_(t){t.removeLeadSnapshot()}function b2(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function O2(t,e,n,r){t.min=st(e.min,n.min,r),t.max=st(e.max,n.max,r)}function t_(t,e,n,r){O2(t.x,e.x,n.x,r),O2(t.y,e.y,n.y,r)}function n_(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const r_={duration:.45,ease:[.4,0,.1,1]},D2=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),R2=D2("applewebkit/")&&!D2("chrome/")?Math.round:zn;function N2(t){t.min=R2(t.min),t.max=R2(t.max)}function a_(t){N2(t.x),N2(t.y)}function hE(t,e,n){return t==="position"||t==="preserve-aspect"&&!OV(v2(e),v2(n),.2)}function s_(t){return t!==t.root&&t.scroll?.wasRoot}const i_=gE({attachResizeListener:(t,e)=>uc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),gh={current:void 0},dE=gE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!gh.current){const t=new i_({});t.mount(window),t.setOptions({layoutScroll:!0}),gh.current=t}return gh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pE=Q.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function o_(t=!0){const e=Q.useContext(np);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=Q.useId();Q.useEffect(()=>{if(t)return s(i)},[t]);const c=Q.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,c]:[!0]}const yE=Q.createContext({strict:!1}),L2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let V2=!1;function c_(){if(V2)return;const t={};for(const e in L2)t[e]={isEnabled:n=>L2[e].some(r=>!!n[r])};KC(t),V2=!0}function xE(){return c_(),I3()}function l_(t){const e=xE();for(const n in t)e[n]={...e[n],...t[n]};KC(e)}const u_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function tf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||u_.has(t)}let vE=t=>!tf(t);function f_(t){typeof t=="function"&&(vE=e=>e.startsWith("on")?!tf(e):t(e))}try{f_(require("@emotion/is-prop-valid").default)}catch{}function g_(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(vE(s)||n===!0&&tf(s)||!e&&!tf(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Cf=Q.createContext({});function h_(t,e){if(Sf(t)){const{initial:n,animate:r}=t;return{initial:n===!1||lc(n)?n:void 0,animate:lc(r)?r:void 0}}return t.inherit!==!1?e:{}}function d_(t){const{initial:e,animate:n}=h_(t,Q.useContext(Cf));return Q.useMemo(()=>({initial:e,animate:n}),[_2(e),_2(n)])}function _2(t){return Array.isArray(t)?t.join(" "):t}const Np=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mE(t,e,n){for(const r in e)!Ht(e[r])&&!JC(r,n)&&(t[r]=e[r])}function p_({transformTemplate:t},e){return Q.useMemo(()=>{const n=Np();return Dp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function y_(t,e){const n=t.style||{},r={};return mE(r,n,t),Object.assign(r,p_(t,e)),r}function x_(t,e){const n={},r=y_(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const TE=()=>({...Np(),attrs:{}});function v_(t,e,n,r){const s=Q.useMemo(()=>{const i=TE();return IC(i,e,tE(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};mE(i,t.style,t),s.style={...i,...s.style}}return s}const m_=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lp(t){return typeof t!="string"||t.includes("-")?!1:!!(m_.indexOf(t)>-1||/[A-Z]/u.test(t))}function T_(t,e,n,{latestValues:r},s,i=!1,c){const f=(c??Lp(t)?v_:x_)(e,r,s,t),g=g_(e,typeof t=="string",i),p=t!==Q.Fragment?{...g,...f,ref:n}:{},{children:h}=e,y=Q.useMemo(()=>Ht(h)?h.get():h,[h]);return Q.createElement(t,{...p,children:y})}function S_({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:C_(n,r,s,t),renderState:e()}}function C_(t,e,n,r){const s={},i=r(t,{});for(const y in i)s[y]=Lu(i[y]);let{initial:c,animate:l}=t;const f=Sf(t),g=WC(t);e&&g&&!f&&t.inherit!==!1&&(c===void 0&&(c=e.initial),l===void 0&&(l=e.animate));let p=n?n.initial===!1:!1;p=p||c===!1;const h=p?l:c;if(h&&typeof h!="boolean"&&!Tf(h)){const y=Array.isArray(h)?h:[h];for(let v=0;v<y.length;v++){const E=Sp(t,y[v]);if(E){const{transitionEnd:x,transition:T,...w}=E;for(const D in w){let M=w[D];if(Array.isArray(M)){const O=p?M.length-1:0;M=M[O]}M!==null&&(s[D]=M)}for(const D in x)s[D]=x[D]}}}return s}const SE=t=>(e,n)=>{const r=Q.useContext(Cf),s=Q.useContext(np),i=()=>S_(t,e,r,s);return n?i():BN(i)},E_=SE({scrapeMotionValuesFromProps:Rp,createRenderState:Np}),w_=SE({scrapeMotionValuesFromProps:nE,createRenderState:TE}),M_=Symbol.for("motionComponentSymbol");function b_(t,e,n){const r=Q.useRef(n);Q.useInsertionEffect(()=>{r.current=n});const s=Q.useRef(null);return Q.useCallback(i=>{i&&t.onMount?.(i),e&&(i?e.mount(i):e.unmount());const c=r.current;if(typeof c=="function")if(i){const l=c(i);typeof l=="function"&&(s.current=l)}else s.current?(s.current(),s.current=null):c(i);else c&&(c.current=i)},[e])}const CE=Q.createContext({});function zo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function O_(t,e,n,r,s,i){const{visualElement:c}=Q.useContext(Cf),l=Q.useContext(yE),f=Q.useContext(np),g=Q.useContext(pE).reducedMotion,p=Q.useRef(null),h=Q.useRef(!1);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:c,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:g,isSVG:i}),h.current&&p.current&&(p.current.manuallyAnimateOnMount=!0));const y=p.current,v=Q.useContext(CE);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&D_(p.current,n,s,v);const E=Q.useRef(!1);Q.useInsertionEffect(()=>{y&&E.current&&y.update(n,f)});const x=n[NC],T=Q.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return UN(()=>{h.current=!0,y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),T.current&&y.animationState&&y.animationState.animateChanges())}),Q.useEffect(()=>{y&&(!T.current&&y.animationState&&y.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),T.current=!1),y.enteringChildren=void 0)}),y}function D_(t,e,n,r){const{layoutId:s,layout:i,drag:c,dragConstraints:l,layoutScroll:f,layoutRoot:g,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:EE(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!c||l&&zo(l),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:p,layoutScroll:f,layoutRoot:g})}function EE(t){if(t)return t.options.allowProjection!==!1?t.projection:EE(t.parent)}function hh(t,{forwardMotionProps:e=!1,type:n}={},r,s){r&&l_(r);const i=n?n==="svg":Lp(t),c=i?w_:E_;function l(g,p){let h;const y={...Q.useContext(pE),...g,layoutId:R_(g)},{isStatic:v}=y,E=d_(g),x=c(g,v);if(!v&&YS){N_();const T=L_(y);h=T.MeasureLayout,E.visualElement=O_(t,x,y,s,T.ProjectionNode,i)}return S.jsxs(Cf.Provider,{value:E,children:[h&&E.visualElement?S.jsx(h,{visualElement:E.visualElement,...y}):null,T_(t,g,b_(x,E.visualElement,p),x,v,e,i)]})}l.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const f=Q.forwardRef(l);return f[M_]=t,f}function R_({layoutId:t}){const e=Q.useContext(XS).id;return e&&t!==void 0?e+"-"+t:t}function N_(t,e){Q.useContext(yE).strict}function L_(t){const e=xE(),{drag:n,layout:r}=e;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n?.isEnabled(t)||r?.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function V_(t,e){if(typeof Proxy>"u")return hh;const n=new Map,r=(i,c)=>hh(i,c,t,e),s=(i,c)=>r(i,c);return new Proxy(s,{get:(i,c)=>c==="create"?r:(n.has(c)||n.set(c,hh(c,void 0,t,e)),n.get(c))})}const __=(t,e)=>e.isSVG??Lp(t)?new yV(e):new uV(e,{allowProjection:t!==Q.Fragment});class k_ extends Ra{constructor(e){super(e),e.animationState||(e.animationState=SV(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let B_=0;class U_ extends Ra{constructor(){super(...arguments),this.id=B_++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const F_={animation:{Feature:k_},exit:{Feature:U_}};function Mc(t){return{point:{x:t.pageX,y:t.pageY}}}const j_=t=>e=>Mp(e)&&t(e,Mc(e));function Jo(t,e,n,r){return uc(t,e,j_(n),r)}const wE=({current:t})=>t?t.ownerDocument.defaultView:null,k2=(t,e)=>Math.abs(t-e);function G_(t,e){const n=k2(t.x,e.x),r=k2(t.y,e.y);return Math.sqrt(n**2+r**2)}const B2=new Set(["auto","scroll"]);class ME{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:c=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=v=>{this.handleScroll(v.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=ph(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,x=G_(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!E&&!x)return;const{point:T}=v,{timestamp:w}=Ut;this.history.push({...T,timestamp:w});const{onStart:D,onMove:M}=this.handlers;E||(D&&D(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,E)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=dh(E,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(v,E)=>{this.end();const{onEnd:x,onSessionEnd:T,resumeAnimation:w}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=ph(v.type==="pointercancel"?this.lastMoveEventInfo:dh(E,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,D),T&&T(v,D)},!Mp(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=c,this.contextWindow=s||window;const f=Mc(e),g=dh(f,this.transformPagePoint),{point:p}=g,{timestamp:h}=Ut;this.history=[{...p,timestamp:h}];const{onSessionStart:y}=n;y&&y(e,ph(g,this.history)),this.removeListeners=Cc(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(e){let n=e.parentElement;for(;n;){const r=getComputedStyle(n);(B2.has(r.overflowX)||B2.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},i={x:s.x-n.x,y:s.y-n.y};i.x===0&&i.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(e,s),Ie.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),wa(this.updatePoint)}}function dh(t,e){return e?{point:e(t.point)}:t}function U2(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ph({point:t},e){return{point:t,delta:U2(t,bE(e)),offset:U2(t,z_(e)),velocity:A_(e,.1)}}function z_(t){return t[0]}function bE(t){return t[t.length-1]}function A_(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=bE(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>kr(e)));)n--;if(!r)return{x:0,y:0};const i=jn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const c={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function $_(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?st(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?st(n,t,r.max):Math.min(t,n)),t}function F2(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function H_(t,{top:e,left:n,bottom:r,right:s}){return{x:F2(t.x,n,s),y:F2(t.y,e,r)}}function j2(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function W_(t,e){return{x:j2(t.x,e.x),y:j2(t.y,e.y)}}function K_(t,e){let n=.5;const r=Pt(t),s=Pt(e);return s>r?n=ic(e.min,e.max-r,t.min):r>s&&(n=ic(t.min,t.max-s,e.min)),ur(0,1,n)}function X_(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wd=.35;function Y_(t=wd){return t===!1?t=0:t===!0&&(t=wd),{x:G2(t,"left","right"),y:G2(t,"top","bottom")}}function G2(t,e,n){return{min:z2(t,e),max:z2(t,n)}}function z2(t,e){return typeof t=="number"?t:t[e]||0}const q_=new WeakMap;class Z_{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{n?(this.stopAnimation(),this.snapToCursor(Mc(h).point)):this.pauseAnimation()},c=(h,y)=>{this.stopAnimation();const{drag:v,dragPropagation:E,onDragStart:x}=this.getProps();if(v&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=A3(v),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bn(w=>{let D=this.getAxisMotionValue(w).get()||0;if(cr.test(D)){const{projection:M}=this.visualElement;if(M&&M.layout){const O=M.layout.layoutBox[w];O&&(D=Pt(O)*(parseFloat(D)/100))}}this.originPoint[w]=D}),x&&Ie.postRender(()=>x(h,y)),xd(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},l=(h,y)=>{this.latestPointerEvent=h,this.latestPanInfo=y;const{dragPropagation:v,dragDirectionLock:E,onDirectionLock:x,onDrag:T}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:w}=y;if(E&&this.currentDirection===null){this.currentDirection=Q_(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",y.point,w),this.updateAxis("y",y.point,w),this.visualElement.render(),T&&T(h,y)},f=(h,y)=>{this.latestPointerEvent=h,this.latestPanInfo=y,this.stop(h,y),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>Bn(h=>this.getAnimationState(h)==="paused"&&this.getAxisMotionValue(h).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new ME(e,{onSessionStart:i,onStart:c,onMove:l,onSessionEnd:f,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:r,contextWindow:wE(this.visualElement),element:this.visualElement.current})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!r)return;const{velocity:c}=s;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&Ie.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!ru(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=$_(c,this.constraints[e],this.elastic[e])),i.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&zo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=H_(r.layoutBox,e):this.constraints=!1,this.elastic=Y_(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Bn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=X_(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!zo(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=aV(r,s.root,this.visualElement.getTransformPagePoint());let c=W_(s.layout.layoutBox,i);if(n){const l=n(tV(c));this.hasMutatedConstraints=!!l,l&&(c=YC(l))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),f=this.constraints||{},g=Bn(p=>{if(!ru(p,n,this.currentDirection))return;let h=f&&f[p]||{};c&&(h={min:0,max:0});const y=s?200:1e6,v=s?40:1e7,E={type:"inertia",velocity:r?e[p]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(p,E)});return Promise.all(g).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return xd(this.visualElement,e),r.start(Tp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bn(n=>{const{drag:r}=this.getProps();if(!ru(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:l}=s.layout.layoutBox[n],f=i.get()||0;i.set(e[n]-st(c,l,.5)+f)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!zo(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Bn(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const f=l.get();s[c]=K_({min:f,max:f},this.constraints[c])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bn(c=>{if(!ru(c,e,null))return;const l=this.getAxisMotionValue(c),{min:f,max:g}=this.constraints[c];l.set(st(f,g,s[c]))})}addListeners(){if(!this.visualElement.current)return;q_.set(this.visualElement,this);const e=this.visualElement.current,n=Jo(e,"pointerdown",f=>{const{drag:g,dragListener:p=!0}=this.getProps(),h=f.target,y=h!==e&&AC(h);g&&p&&!y&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();zo(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ie.read(r);const c=uc(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(Bn(p=>{const h=this.getAxisMotionValue(p);h&&(this.originPoint[p]+=f[p].translate,h.set(h.get()+f[p].translate))}),this.visualElement.render())}));return()=>{c(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:c=wd,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:c,dragMomentum:l}}}function ru(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Q_(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class P_ extends Ra{constructor(e){super(e),this.removeGroupControls=zn,this.removeListeners=zn,this.controls=new Z_(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const A2=t=>(e,n)=>{t&&Ie.postRender(()=>t(e,n))};class J_ extends Ra{constructor(){super(...arguments),this.removePointerDownListener=zn}onPointerDown(e){this.session=new ME(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:wE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:A2(e),onStart:A2(n),onMove:r,onEnd:(i,c)=>{delete this.session,s&&Ie.postRender(()=>s(i,c))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let yh=!1;class I_ extends Q.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),yh&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Vu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:c}=r;return c&&(c.isPresent=i,e.layoutDependency!==n&&c.setOptions({...c.options,layoutDependency:n}),yh=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?c.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?c.promote():c.relegate()||Ie.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;yh=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OE(t){const[e,n]=o_(),r=Q.useContext(XS);return S.jsx(I_,{...t,layoutGroup:r,switchLayoutGroup:Q.useContext(CE),isPresent:e,safeToRemove:n})}const e4={pan:{Feature:J_},drag:{Feature:P_,ProjectionNode:dE,MeasureLayout:OE}};function $2(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ie.postRender(()=>i(e,Mc(e)))}class t4 extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=$3(e,(n,r)=>($2(this.node,r,"Start"),s=>$2(this.node,s,"End"))))}unmount(){}}class n4 extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(uc(this.node.current,"focus",()=>this.onFocus()),uc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function H2(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ie.postRender(()=>i(e,Mc(e)))}class r4 extends Ra{mount(){const{current:e}=this.node;e&&(this.unmount=K3(e,(n,r)=>(H2(this.node,r,"Start"),(s,{success:i})=>H2(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Md=new WeakMap,xh=new WeakMap,a4=t=>{const e=Md.get(t.target);e&&e(t)},s4=t=>{t.forEach(a4)};function i4({root:t,...e}){const n=t||document;xh.has(n)||xh.set(n,{});const r=xh.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(s4,{root:t,...e})),r[s]}function o4(t,e,n){const r=i4(e);return Md.set(t,n),r.observe(t),()=>{Md.delete(t),r.unobserve(t)}}const c4={some:0,all:1};class l4 extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:c4[s]},l=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,i&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:p,onViewportLeave:h}=this.node.getProps(),y=g?p:h;y&&y(f)};return o4(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(u4(e,n))&&this.startObserver()}unmount(){}}function u4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const f4={inView:{Feature:l4},tap:{Feature:r4},focus:{Feature:n4},hover:{Feature:t4}},g4={layout:{ProjectionNode:dE,MeasureLayout:OE}},h4={...F_,...f4,...e4,...g4},or=V_(h4,__);const d4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),p4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),W2=t=>{const e=p4(t);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),y4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var x4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const v4=Q.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:c,...l},f)=>Q.createElement("svg",{ref:f,...x4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:DE("lucide",s),...!i&&!y4(l)&&{"aria-hidden":"true"},...l},[...c.map(([g,p])=>Q.createElement(g,p)),...Array.isArray(i)?i:[i]]));const de=(t,e)=>{const n=Q.forwardRef(({className:r,...s},i)=>Q.createElement(v4,{ref:i,iconNode:e,className:DE(`lucide-${d4(W2(t))}`,`lucide-${t}`,r),...s}));return n.displayName=W2(t),n};const m4=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fc=de("activity",m4);const T4=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],S4=de("anchor",T4);const C4=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],E4=de("arrow-down-to-line",C4);const w4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],M4=de("arrow-left",w4);const b4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Vp=de("arrow-right",b4);const O4=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],D4=de("arrow-up",O4);const R4=[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]],N4=de("binary",R4);const L4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],V4=de("book-open",L4);const _4=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],RE=de("box",_4);const k4=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],B4=de("boxes",k4);const U4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],F4=de("briefcase",U4);const j4=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],G4=de("building-2",j4);const z4=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],vh=de("calculator",z4);const A4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],NE=de("check",A4);const $4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],LE=de("chevron-right",$4);const H4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gc=de("circle-alert",H4);const W4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],K4=de("circle-check",W4);const X4=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Y4=de("clipboard-list",X4);const q4=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Z4=de("compass",q4);const Q4=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],K2=de("cpu",Q4);const P4=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ba=de("database",P4);const J4=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I4=de("eye-off",J4);const e5=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],X2=de("eye",e5);const t5=[["path",{d:"M14.5 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v3.8",key:"1kchwa"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11.7 14.2 7 17l-4.7-2.8",key:"1yk8tc"}],["path",{d:"M3 13.1a2 2 0 0 0-.999 1.76v3.24a2 2 0 0 0 .969 1.78L6 21.7a2 2 0 0 0 2.03.01L11 19.9a2 2 0 0 0 1-1.76V14.9a2 2 0 0 0-.97-1.78L8 11.3a2 2 0 0 0-2.03-.01z",key:"19flxy"}],["path",{d:"M7 17v5",key:"1yj1jh"}]],n5=de("file-box",t5);const r5=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Io=de("folder-open",r5);const a5=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],s5=de("gauge",a5);const i5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],o5=de("globe",i5);const c5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],l5=de("grid-3x3",c5);const u5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],VE=de("info",u5);const f5=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ei=de("layers",f5);const g5=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],h5=de("layout-template",g5);const d5=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],mh=de("lock",d5);const p5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Y2=de("maximize-2",p5);const y5=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],x5=de("maximize",y5);const v5=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],m5=de("mouse-pointer-2",v5);const T5=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],S5=de("play",T5);const C5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_p=de("plus",C5);const E5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],w5=de("refresh-cw",E5);const M5=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],q2=de("ruler",M5);const b5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_E=de("save",b5);const O5=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Z2=de("scale",O5);const D5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bd=de("search",D5);const R5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kE=de("settings",R5);const N5=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],bc=de("settings-2",N5);const L5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],BE=de("shield",L5);const V5=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],_5=de("ship",V5);const k5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],UE=de("target",k5);const B5=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Q2=de("terminal",B5);const U5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Oc=de("trash-2",U5);const F5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],j5=de("trending-up",F5);const G5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],z5=de("triangle-alert",G5);const A5=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],$5=de("waves",A5);const H5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],FE=de("x",H5);const W5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Od=de("zap",W5);const K5=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],X5=de("zoom-in",K5);const Y5=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],q5=de("zoom-out",Y5);function Z5({onClose:t}){const[e,n]=Q.useState({freecad_path:"",salome_path:"",aster_path:""}),[r,s]=Q.useState(!1),[i,c]=Q.useState(null);Q.useEffect(()=>{async function g(){try{const h=await(await fetch("/api/get_settings")).json();h.status==="success"&&h.settings&&n({freecad_path:h.settings.freecad_path||"",salome_path:h.settings.salome_path||"",aster_path:h.settings.aster_path||""})}catch(p){console.error("Failed to load settings",p)}}g()},[]);const l=async g=>{try{const h=await(await fetch("/api/open_folder_dialog")).json();h.status==="success"&&h.path&&n(y=>({...y,[g]:h.path}))}catch(p){console.error("Failed to open dialog:",p)}},f=async()=>{s(!0);try{const p=await(await fetch("/api/save_settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();p.status==="success"?(c({type:"success",text:"Settings saved successfully!"}),setTimeout(()=>c(null),3e3)):c({type:"error",text:"Failed: "+p.message})}catch{c({type:"error",text:"Failed to save settings"})}finally{s(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:S.jsxs(or.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-2xl mx-4",children:[S.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(kE,{className:"w-6 h-6 text-blue-400"}),S.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Application Settings"})]}),S.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-200 transition-colors",children:""})]}),S.jsxs("div",{className:"p-6 space-y-6",children:[i&&S.jsxs("div",{className:`flex items-center gap-2 p-4 rounded-lg ${i.type==="success"?"bg-green-500/10 border border-green-500/20 text-green-400":"bg-red-500/10 border border-red-500/20 text-red-400"}`,children:[S.jsx(gc,{className:"w-5 h-5"}),S.jsx("span",{className:"text-sm",children:i.text})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"FreeCAD Executable"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:e.freecad_path,onChange:g=>n(p=>({...p,freecad_path:g.target.value})),placeholder:"C:\\Program Files\\FreeCAD\\bin\\FreeCAD.exe",className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:outline-none focus:border-blue-500 transition-colors font-mono text-sm"}),S.jsxs("button",{onClick:()=>l("freecad_path"),className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[S.jsx(Io,{className:"w-4 h-4"}),"Browse"]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Salome Executable"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:e.salome_path,onChange:g=>n(p=>({...p,salome_path:g.target.value})),placeholder:"C:\\SALOME\\salome.bat",className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:outline-none focus:border-blue-500 transition-colors font-mono text-sm"}),S.jsxs("button",{onClick:()=>l("salome_path"),className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[S.jsx(Io,{className:"w-4 h-4"}),"Browse"]})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Code_Aster Path"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("input",{type:"text",value:e.aster_path,onChange:g=>n(p=>({...p,aster_path:g.target.value})),placeholder:"C:\\CodeAster\\bin\\as_run",className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-200 focus:outline-none focus:border-blue-500 transition-colors font-mono text-sm"}),S.jsxs("button",{onClick:()=>l("aster_path"),className:"bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-lg transition-colors flex items-center gap-2",children:[S.jsx(Io,{className:"w-4 h-4"}),"Browse"]})]})]})]}),S.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-slate-700",children:[S.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:"Cancel"}),S.jsxs("button",{onClick:f,disabled:r,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50",children:[S.jsx(_E,{className:"w-4 h-4"}),r?"Saving...":"Save Settings"]})]})]})})}function Q5({onNavigate:t}){const[e,n]=Q.useState(!1);return S.jsxs("div",{className:"h-full w-full flex flex-col items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8",children:[S.jsx(or.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>n(!0),className:"absolute top-6 right-6 p-3 bg-slate-800/50 hover:bg-slate-700/50 border border-slate-700 hover:border-slate-600 rounded-lg transition-all",children:S.jsx(kE,{className:"w-5 h-5 text-slate-400 hover:text-slate-200"})}),S.jsx(or.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-5xl font-light mb-16 text-slate-100 tracking-tight",children:"ProSolve Professional"}),S.jsxs("div",{className:"grid grid-cols-3 gap-8 max-w-6xl w-full",children:[S.jsxs(or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},onClick:()=>t("structural"),className:"group relative bg-slate-800/50 backdrop-blur-sm hover:bg-slate-700/50 border border-slate-700 hover:border-blue-500 p-10 rounded-2xl cursor-pointer transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),S.jsx(G4,{className:"w-12 h-12 mb-6 text-blue-400 group-hover:text-blue-300 transition-colors"}),S.jsx("h2",{className:"text-3xl font-bold mb-3 text-slate-100 group-hover:text-blue-300 transition-colors",children:"Structural"}),S.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"FEA Analysis & Modeling with Code_Aster"})]}),S.jsxs(or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative bg-slate-800/30 border border-slate-800 p-10 rounded-2xl opacity-50 cursor-not-allowed",children:[S.jsx(_5,{className:"w-12 h-12 mb-6 text-slate-600"}),S.jsx("h2",{className:"text-3xl font-bold mb-3 text-slate-500",children:"Marine"}),S.jsx("p",{className:"text-slate-600 text-sm",children:"Coming soon..."})]}),S.jsxs(or.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"group relative bg-slate-800/50 backdrop-blur-sm hover:bg-slate-700/50 border border-slate-700 hover:border-purple-500 p-10 rounded-2xl cursor-pointer transition-all duration-300 shadow-xl hover:shadow-2xl hover:scale-105",children:[S.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),S.jsx(V4,{className:"w-12 h-12 mb-6 text-purple-400 group-hover:text-purple-300 transition-colors"}),S.jsx("h2",{className:"text-3xl font-bold mb-3 text-slate-100 group-hover:text-purple-300 transition-colors",children:"Utility"}),S.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Calculation Tools & Engineering Notebooks"})]})]}),e&&S.jsx(Z5,{onClose:()=>n(!1)})]})}const Th={"1D":[{value:"POU_D_T",label:"Beam (Timoshenko) - POU_D_T"},{value:"POU_D_E",label:"Beam (Euler) - POU_D_E"},{value:"BARRE",label:"Truss/Bar - BARRE"},{value:"CABLE",label:"Cable - CABLE"}],"2D":[{value:"DKT",label:"Plate (Thin) - DKT"},{value:"DST",label:"Plate (Thick) - DST"},{value:"COQUE_3D",label:"Shell 3D - COQUE_3D"},{value:"MEMBRANE",label:"Membrane - MEMBRANE"},{value:"C_PLAN",label:"Plane Strain - C_PLAN"},{value:"D_PLAN",label:"Plane Stress - D_PLAN"},{value:"AXIS",label:"Axisymmetric - AXIS"}],"3D":[{value:"3D",label:"Solid/Volume - 3D"}]},Sh={"1D":"text-orange-500 border-orange-500/30 bg-orange-500/10","2D":"text-cyan-400 border-cyan-400/30 bg-cyan-400/10","3D":"text-emerald-400 border-emerald-400/30 bg-emerald-400/10",Node:"text-slate-500 border-slate-500/30 bg-slate-500/10"};function P5({projectPath:t,meshGroups:e,currentGeometries:n=[],onUpdate:r}){const[s,i]=Q.useState([]),[c,l]=Q.useState(null),[f,g]=Q.useState(""),[p,h]=Q.useState("all"),y=Q.useRef(!0),v=Q.useRef(""),E=Q.useRef("");Q.useEffect(()=>{!c&&s.length>0&&l(`${s[0].meshFile}:${s[0].name}`)},[s,c]),Q.useEffect(()=>{if(e){const b=JSON.stringify(Object.entries(e).map(([k,B])=>({file:k,groups:Object.keys(B).sort()})));if(b===v.current)return;v.current=b;const L=[];Object.entries(e).forEach(([k,B])=>{Object.entries(B).forEach(([j,z])=>{const $=z.category||x(z.types||{});if($==="Node"||$==="Point")return;const W=z.types?Object.entries(z.types).map(([te,F])=>`${te}:${F}`).join(", "):$,Z=n.find(te=>te.group===j&&te._meshFile===k);L.push({name:j,meshFile:k,selected:n.length>0?!!Z:!0,count:z.count,composition:W,category:$,model:Z?.type||T($),phenomenon:"MECANIQUE"})})}),i(L)}},[e,n]),Q.useEffect(()=>{if(y.current){y.current=!1;return}if(r){const b=s.filter(k=>k.selected).map(k=>({group:k.name,_meshFile:k.meshFile,...n.find(j=>j.group===k.name&&j._meshFile===k.meshFile)||{},type:k.model,formulation:k.model==="DKT"||k.model==="DST"?k.model:void 0,phenomenon:"MECANIQUE",_category:k.category})),L=JSON.stringify(b);L!==E.current&&(E.current=L,r(b))}},[s,r]);const x=b=>{const L=Object.keys(b);return L.some(k=>k==="Node")?"Node":L.some(k=>k.includes("HEXA")||k.includes("TETRA")||k.includes("PENTA"))?"3D":L.some(k=>k.includes("QUAD")||k.includes("TRIA"))?"2D":L.some(k=>k.includes("SEG"))?"1D":"3D"},T=b=>b==="Node"?"Node":b==="3D"?"3D":b==="2D"?"COQUE_3D":b==="1D"?"POU_D_T":"3D",w=(b,L)=>{i(k=>k.map(B=>B.meshFile===b&&B.name===L?{...B,selected:!B.selected}:B))},D=(b,L,k)=>{i(B=>B.map(j=>j.meshFile===b&&j.name===L?{...j,model:k}:j))},M=b=>{i(s.map(L=>({...L,selected:b})))},O=Q.useMemo(()=>s.filter(b=>{const L=b.name.toLowerCase().includes(f.toLowerCase()),k=p==="all"||b.category===p;return L&&k}),[s,f,p]),R=Q.useMemo(()=>{if(!c)return null;const[b,L]=c.split(":");return s.find(k=>k.meshFile===b&&k.name===L)||null},[s,c]);return t?s.length===0?S.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-10 bg-slate-950 border border-dashed border-slate-800 rounded-none overflow-hidden relative",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),S.jsx("div",{className:"text-4xl mb-4 grayscale filter",children:""}),S.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-[0.2em] mb-2",children:"Null_Structure_Detected"}),S.jsx("p",{className:"mb-6 text-center max-w-xs text-[10px] text-slate-600 font-mono",children:"Mesh topology sync failed or no groups found in the current workspace."})]}):S.jsxs("div",{className:"flex h-full w-full bg-slate-950 border border-slate-800 rounded-none overflow-hidden font-sans",children:[S.jsxs("div",{className:"w-[320px] shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/10",children:[S.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/30",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Ei,{className:"w-4 h-4 text-cyan-500"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Mesh_Groups"})]}),S.jsxs("div",{className:"flex gap-1",children:[S.jsx("button",{onClick:()=>M(!0),title:"Check All",className:"p-1 hover:bg-slate-800 text-slate-500 hover:text-cyan-400 transition-colors",children:S.jsx(NE,{className:"w-3.5 h-3.5"})}),S.jsx("button",{onClick:()=>M(!1),title:"Uncheck All",className:"p-1 hover:bg-slate-800 text-slate-500 hover:text-red-400 transition-colors",children:S.jsx(FE,{className:"w-3.5 h-3.5"})})]})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsxs("div",{className:"relative",children:[S.jsx(bd,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-600"}),S.jsx("input",{type:"text",placeholder:"Filter identifier...",value:f,onChange:b=>g(b.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-none pl-9 pr-4 py-1.5 text-xs text-white focus:outline-none focus:border-cyan-500/50 transition-all font-mono"})]}),S.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 no-scrollbar",children:["all","1D","2D","3D"].map(b=>S.jsx("button",{onClick:()=>h(b),className:`
                                        px-2 py-1 text-[9px] font-black uppercase border transition-all
                                        ${p===b?"bg-cyan-500/10 border-cyan-500/50 text-cyan-400":"bg-transparent border-slate-800 text-slate-600 hover:text-slate-400"}
                                    `,children:b},b))})]})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:O.map(b=>{const L=`${b.meshFile}:${b.name}`,k=c===L,B=Sh[b.category]||"text-slate-400";return S.jsxs("div",{onClick:()=>l(L),className:`
                                    relative group p-3 mb-1 cursor-pointer border transition-all flex items-center gap-3
                                    ${k?"bg-cyan-500/5 border-cyan-500/30":"bg-transparent border-transparent hover:bg-slate-800/40"}
                                    ${b.selected?"":"opacity-40 grayscale-[0.6]"}
                                `,children:[S.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 ${k?"bg-cyan-500":"bg-transparent"}`}),S.jsx("input",{type:"checkbox",checked:b.selected,onChange:j=>{j.stopPropagation(),w(b.meshFile,b.name)},className:"w-3 h-3 accent-cyan-500 bg-slate-900 border-slate-800 rounded-none shrink-0"}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsxs("div",{className:"flex items-center justify-between mb-1",children:[S.jsx("span",{className:`text-xs font-black truncate pr-2 ${k?"text-white":"text-slate-400"}`,children:b.name}),S.jsx("span",{className:`text-[8px] px-1 border font-bold ${B}`,children:b.category})]}),S.jsxs("div",{className:"flex justify-between items-center text-[9px] font-mono text-slate-600 uppercase",children:[S.jsx("span",{className:"truncate max-w-[120px]",title:b.meshFile,children:b.meshFile}),S.jsxs("span",{children:[b.count," el."]})]})]}),S.jsx(LE,{className:`w-4 h-4 transition-all ${k?"text-cyan-400":"text-slate-800 opacity-0 group-hover:opacity-100"}`})]},L)})}),S.jsxs("div",{className:"p-2 border-t border-slate-800 bg-slate-900/30 text-[9px] font-mono text-slate-600 flex justify-between uppercase",children:[S.jsxs("span",{children:["Total: ",s.length]}),S.jsxs("span",{children:["Active: ",s.filter(b=>b.selected).length]})]})]}),S.jsxs("div",{className:"flex-1 flex flex-col relative bg-slate-950",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),R?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"h-20 shrink-0 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:`p-4 border ${Sh[R.category]}`,children:S.jsx(RE,{className:"w-5 h-5"})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none",children:"Entity_Group"}),S.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R.selected?"bg-cyan-500 animate-pulse":"bg-slate-700"}`})]}),S.jsx("h3",{className:"text-xl font-black text-white leading-none font-mono",children:R.name})]})]}),S.jsxs("div",{className:"flex gap-4 items-center",children:[S.jsxs("div",{className:"text-right",children:[S.jsx("span",{className:"block text-[8px] font-black text-slate-600 uppercase tracking-widest",children:"Source_File"}),S.jsx("span",{className:"text-[10px] font-mono text-slate-400",children:R.meshFile})]}),S.jsx("div",{className:"h-8 w-[1px] bg-slate-800 mx-2"}),S.jsxs("div",{className:`px-3 py-1.5 border ${Sh[R.category]} font-black text-[10px] uppercase`,children:["Dim: ",R.category]})]})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:S.jsx("div",{className:"max-w-3xl",children:S.jsxs("div",{className:"grid grid-cols-2 gap-12 mb-12",children:[S.jsxs("div",{className:"space-y-8",children:[S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[S.jsx(bc,{className:"w-3.5 h-3.5 text-cyan-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Model_Specification"})]}),S.jsx("div",{className:"bg-slate-900/40 border border-slate-800 p-1",children:S.jsxs("select",{value:R.model,onChange:b=>D(R.meshFile,R.name,b.target.value),disabled:!R.selected,className:`
                                                        w-full bg-slate-950 text-xs font-bold text-white p-3 focus:outline-none transition-all
                                                        ${R.selected?"hover:bg-slate-900 border-l-2 border-l-cyan-500":"opacity-30 cursor-not-allowed"}
                                                    `,children:[R.category==="3D"&&S.jsx("optgroup",{label:"Solid (Volume) Formulation",children:Th["3D"].map(b=>S.jsx("option",{value:b.value,children:b.label},b.value))}),R.category==="2D"&&S.jsx("optgroup",{label:"Plate/Shell Formulation",children:Th["2D"].map(b=>S.jsx("option",{value:b.value,children:b.label},b.value))}),R.category==="1D"&&S.jsx("optgroup",{label:"Beam/Truss Formulation",children:Th["1D"].map(b=>S.jsx("option",{value:b.value,children:b.label},b.value))})]})}),S.jsx("p",{className:"mt-4 text-[10px] text-slate-600 italic font-mono leading-relaxed",children:"The mathematical formulation determines how the integration points and degrees of freedom are evaluated during simulation."})]}),S.jsxs("section",{className:"bg-slate-900/20 border-l border-l-slate-800 p-4",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[S.jsx(fc,{className:"w-3 h-3 text-slate-500"}),S.jsx("h4",{className:"text-[9px] font-black text-slate-500 uppercase tracking-tighter",children:"Physics_Engine"})]}),S.jsx("div",{className:"text-xs font-bold text-slate-300",children:"PHENOMENE = 'MECANIQUE'"}),S.jsx("div",{className:"text-[9px] text-slate-600 mt-1 uppercase font-mono",children:"Standard linear elastic solver"})]})]}),S.jsxs("div",{className:"space-y-8",children:[S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[S.jsx(ba,{className:"w-3.5 h-3.5 text-slate-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Internal_Topology"})]}),S.jsxs("div",{className:"p-4 border border-slate-800 bg-slate-900/10",children:[S.jsxs("div",{className:"flex justify-between items-end mb-4",children:[S.jsxs("div",{children:[S.jsx("span",{className:"block text-[8px] font-bold text-slate-600 uppercase",children:"Elem_Count"}),S.jsx("span",{className:"text-2xl font-black text-white font-mono leading-none",children:R.count})]}),S.jsxs("div",{className:"text-right",children:[S.jsx("span",{className:"block text-[8px] font-bold text-slate-600 uppercase",children:"Integration_Degree"}),S.jsx("span",{className:"text-xs font-bold text-cyan-400 uppercase",children:"Linear / P1"})]})]}),S.jsxs("div",{className:"space-y-1",children:[S.jsx("span",{className:"block text-[8px] font-bold text-slate-600 uppercase mb-2",children:"Structure_Composition"}),S.jsx("div",{className:"flex flex-wrap gap-1",children:R.composition.split(",").map(b=>S.jsx("span",{className:"px-1.5 py-0.5 bg-slate-800 text-slate-400 font-mono text-[9px] border border-slate-700",children:b.trim()},b))})]})]})]}),S.jsx("div",{className:"bg-orange-500/5 border border-orange-500/20 p-4",children:S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx(gc,{className:"w-4 h-4 text-orange-500 shrink-0 mt-0.5"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-orange-400 uppercase mb-1 leading-none tracking-widest",children:"Automated_Check"}),S.jsxs("p",{className:"text-[9px] text-orange-500/80 leading-relaxed italic",children:["Ensuring connectivity matches the ",R.category," logic. Warning: Inconsistent dimension formulations will cause job termination."]})]})]})})]})]})})})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center opacity-20 filter grayscale",children:[S.jsx(bd,{className:"w-12 h-12 text-slate-500 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400",children:"awaiting_selection"})]})]})]}):S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono tracking-tighter uppercase italic",children:"waiting_for_payload: select_project"})}const J5=[{name:"Steel S235",E:"210000",nu:"0.3",rho:"7850"},{name:"Steel S355",E:"210000",nu:"0.3",rho:"7850"},{name:"Aluminum 6061",E:"70000",nu:"0.33",rho:"2710"},{name:"Concrete C30",E:"32000",nu:"0.2",rho:"2400"},{name:"Stainless Steel 304",E:"193000",nu:"0.29",rho:"8000"}];function I5({projectPath:t,availableGroups:e=[],nodeGroups:n=[],initialMaterials:r=[],onUpdate:s}){const i=Q.useRef(!0),[c,l]=Q.useState([]),[f,g]=Q.useState(null),[p,h]=Q.useState(""),[y,v]=Q.useState("MPa"),E=Q.useRef(null),x=Q.useMemo(()=>{const b=new Set(n);return e.filter(L=>!b.has(L))},[e,n]),T=Q.useMemo(()=>{const b=new Set(c.flatMap(j=>j.assignedGroups)),L=x.length,k=b.size,B=L>0?Math.round(k/L*100):0;return{total:L,assigned:k,percent:B}},[c,x]),w=Q.useMemo(()=>c.find(b=>b.id===f)||c[0]||null,[c,f]);Q.useEffect(()=>{if(t&&E.current!==t){if(r&&r.length>0){const b=r.map((L,k)=>({id:(k+1).toString(),name:L.name,E:(L.E/1e6).toString(),nu:(L.nu||0).toString(),rho:(L.rho||0).toString(),assignedGroups:L.assignedGroups||[]}));l(b),b.length>0&&g(b[0].id)}else c.length===0&&(l([{id:"1",name:"Steel_S355",E:"210000",nu:"0.3",rho:"7850",assignedGroups:[]}]),g("1"));E.current=t}},[t,r]),Q.useEffect(()=>{if(i.current){i.current=!1;return}if(s){const b=c.map(L=>({name:L.name,E:parseFloat(L.E)*1e6,nu:parseFloat(L.nu),rho:parseFloat(L.rho),assignedGroups:L.assignedGroups}));s(b)}},[c,s]);const D=b=>{const L=Date.now().toString(),k={id:L,name:b?.name||`New_Material_${c.length+1}`,E:b?.E||"210000",nu:b?.nu||"0.3",rho:b?.rho||"7850",assignedGroups:[]};l([...c,k]),g(L)},M=b=>{if(c.length===1)return;const L=c.filter(k=>k.id!==b);l(L),f===b&&g(L[0].id)},O=(b,L,k)=>{l(c.map(B=>B.id===b?{...B,[L]:k}:B))},R=(b,L)=>{const k=c.find(W=>W.id===b);if(!k)return;const B=k.assignedGroups||[],j=B.includes(L),z=c.map(W=>W.id!==b&&W.assignedGroups.includes(L)?{...W,assignedGroups:W.assignedGroups.filter(Z=>Z!==L)}:W),$=j?B.filter(W=>W!==L):[...B,L];l(z.map(W=>W.id===b?{...W,assignedGroups:$}:W))};return t?S.jsxs("div",{className:"flex h-full w-full bg-slate-950 overflow-hidden font-sans border border-slate-800",children:[S.jsxs("div",{className:"w-80 border-r border-slate-800 flex flex-col bg-slate-900/20",children:[S.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/40",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(F4,{className:"w-4 h-4 text-orange-500"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Inventory"})]}),S.jsx("button",{onClick:()=>D(),className:"p-1 bg-orange-500 hover:bg-orange-400 text-slate-950 rounded-[2px] transition-colors",children:S.jsx(_p,{className:"w-4 h-4"})})]}),S.jsxs("div",{className:"bg-slate-950 p-3 border border-slate-800 rounded-[2px]",children:[S.jsxs("div",{className:"flex justify-between items-end mb-1",children:[S.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase",children:"Coverage"}),S.jsxs("span",{className:"text-xs font-mono text-emerald-400",children:[T.percent,"%"]})]}),S.jsx("div",{className:"h-1 w-full bg-slate-800 overflow-hidden",children:S.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${T.percent}%`}})}),S.jsxs("div",{className:"mt-2 text-[9px] text-slate-500 flex justify-between uppercase font-mono",children:[S.jsxs("span",{children:[T.assigned," Assigned"]}),S.jsxs("span",{children:[T.total-T.assigned," Empty"]})]})]})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:c.map(b=>{const L=f===b.id,k=b.assignedGroups.length>0;return S.jsxs("div",{onClick:()=>g(b.id),className:`
                                    group relative flex items-center gap-3 p-3 mb-1 cursor-pointer border transition-all
                                    ${L?"bg-orange-500/10 border-orange-500/50":"bg-transparent border-transparent hover:bg-slate-800/40"}
                                `,children:[S.jsx("div",{className:`w-1 h-8 absolute left-0 ${L?"bg-orange-500":"bg-transparent"}`}),S.jsx("div",{className:`p-2 rounded-[2px] ${k?"bg-emerald-500/20 text-emerald-400":"bg-slate-800 text-slate-500"}`,children:S.jsx(K2,{className:"w-4 h-4"})}),S.jsxs("div",{className:"flex-1 min-w-0",children:[S.jsx("p",{className:`text-sm font-bold truncate ${L?"text-white":"text-slate-400"}`,children:b.name}),S.jsxs("p",{className:"text-[10px] font-mono text-slate-500 uppercase",children:[b.assignedGroups.length," Groups"]})]}),S.jsx(LE,{className:`w-4 h-4 ${L?"text-orange-500":"text-slate-700 opacity-0 group-hover:opacity-100"}`})]},b.id)})})]}),S.jsxs("div",{className:"flex-1 flex flex-col bg-slate-950 relative overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),w?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"h-20 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10 shrink-0",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Resource_Name"}),S.jsx("input",{type:"text",value:w.name,onChange:b=>O(w.id,"name",b.target.value),className:"bg-transparent text-xl font-black text-white focus:outline-none border-b border-transparent focus:border-orange-500 transition-colors"})]}),S.jsx("div",{className:"h-8 w-[1px] bg-slate-800"}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Status"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:`w-2 h-2 rounded-full ${w.assignedGroups.length>0?"bg-emerald-500 animate-pulse":"bg-slate-700"}`}),S.jsx("span",{className:"text-xs font-mono text-slate-300",children:w.assignedGroups.length>0?"OPERATIONAL":"UNASSIGNED"})]})]})]}),S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsxs("div",{className:"relative group/library",children:[S.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 border border-slate-700 text-slate-400 text-[10px] font-bold uppercase hover:border-slate-500 transition-all rounded-[2px]",children:[S.jsx(ba,{className:"w-3.5 h-3.5"}),"Industry Presets"]}),S.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-slate-900 border border-slate-800 shadow-2xl rounded-[2px] opacity-0 invisible group-hover/library:opacity-100 group-hover/library:visible transition-all z-50",children:[S.jsx("div",{className:"p-3 border-b border-slate-800",children:S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase",children:"Load Material Data"})}),J5.map(b=>S.jsxs("button",{onClick:()=>D(b),className:"w-full text-left px-4 py-2 text-xs text-slate-300 hover:bg-orange-500 hover:text-slate-950 transition-colors flex justify-between items-center",children:[b.name,S.jsxs("span",{className:"text-[9px] opacity-60 font-mono",children:[Math.round(parseInt(b.E)/1e3),"k MPa"]})]},b.name))]})]}),S.jsx("button",{onClick:()=>M(w.id),className:"p-2 text-slate-600 hover:text-red-500 hover:bg-red-500/10 rounded-[2px] transition-all",title:"Purge Material From Core",disabled:c.length===1,children:S.jsx(Oc,{className:"w-4 h-4"})})]})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto px-8 py-8 custom-scrollbar",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Unit System Display:"}),S.jsxs("div",{className:"flex bg-slate-900 border border-slate-800 p-0.5 rounded-[2px]",children:[S.jsx("button",{onClick:()=>v("MPa"),className:`px-3 py-1 text-[10px] font-bold transition-all ${y==="MPa"?"bg-orange-500 text-slate-950":"text-slate-500 hover:text-slate-300"}`,children:"MPa (Standard)"}),S.jsx("button",{onClick:()=>v("Pa"),className:`px-3 py-1 text-[10px] font-bold transition-all ${y==="Pa"?"bg-orange-500 text-slate-950":"text-slate-500 hover:text-slate-300"}`,children:"Pascal (SI)"})]})]}),S.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-12",children:[S.jsxs("div",{className:"group relative bg-slate-900/30 border border-slate-800 p-6 transition-all hover:border-orange-500/30",children:[S.jsxs("label",{className:"flex items-center gap-2 text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4",children:[S.jsx(VE,{className:"w-3 h-3 text-orange-500"}),"Elastic Modulus (E)"]}),S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("input",{type:"text",value:y==="MPa"?w.E:(parseFloat(w.E)*1e6).toExponential(2),readOnly:y==="Pa",onChange:b=>O(w.id,"E",b.target.value),className:`w-full bg-transparent text-3xl font-black text-white font-mono focus:outline-none ${y==="Pa"?"opacity-50":""}`}),S.jsx("span",{className:"text-xs font-black text-slate-600",children:y})]}),S.jsx("div",{className:"mt-4 text-[9px] text-slate-600 italic",children:"Resistance against elastic deformation."})]}),S.jsxs("div",{className:"group relative bg-slate-900/30 border border-slate-800 p-6 transition-all hover:border-orange-500/30",children:[S.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4 block",children:"Poisson Ratio ()"}),S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("input",{type:"text",value:w.nu,onChange:b=>O(w.id,"nu",b.target.value),className:"w-full bg-transparent text-3xl font-black text-white font-mono focus:outline-none"}),S.jsx("span",{className:"text-xs font-black text-slate-600",children:"ratio"})]}),S.jsx("div",{className:"mt-4 text-[9px] text-slate-600 italic",children:"Transverse/longitudinal strain ratio."})]}),S.jsxs("div",{className:"group relative bg-slate-900/30 border border-slate-800 p-6 transition-all hover:border-orange-500/30",children:[S.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-4 block",children:"Material Density ()"}),S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("input",{type:"text",value:w.rho,onChange:b=>O(w.id,"rho",b.target.value),className:"w-full bg-transparent text-3xl font-black text-white font-mono focus:outline-none"}),S.jsx("span",{className:"text-xs font-black text-slate-600",children:"kg/m"})]}),S.jsx("div",{className:"mt-4 text-[9px] text-slate-600 italic",children:"Mass per unit volume (Required for Inertia)."})]})]}),S.jsxs("div",{className:"border border-slate-800 bg-slate-900/10",children:[S.jsxs("div",{className:"p-6 border-b border-slate-800 flex items-center justify-between bg-slate-900/30",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(Ei,{className:"w-5 h-5 text-orange-500"}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-sm font-black text-white uppercase tracking-wider",children:"Group Integration Manager"}),S.jsx("p",{className:"text-[10px] text-slate-500 mt-0.5",children:"Map finite element groups to this structural resource."})]})]}),S.jsx("div",{className:"flex items-center gap-4",children:S.jsxs("div",{className:"relative",children:[S.jsx(bd,{className:"w-3.5 h-3.5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-600"}),S.jsx("input",{type:"text",placeholder:"Filter Groups...",value:p,onChange:b=>h(b.target.value),className:"bg-slate-950 border border-slate-800 rounded-[2px] pl-9 pr-4 py-1.5 text-xs text-white focus:outline-none focus:border-orange-500 w-48 transition-all"})]})})]}),S.jsx("div",{className:"p-6",children:x.length>0?S.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-2",children:x.filter(b=>b.toLowerCase().includes(p.toLowerCase())).map(b=>{const L=(w.assignedGroups||[]).includes(b),k=c.find(B=>B.id!==w.id&&B.assignedGroups.includes(b));return S.jsxs("button",{onClick:()=>R(w.id,b),className:`
                                                                relative flex flex-col group/btn px-4 py-3 border text-left transition-all active:scale-[0.98]
                                                                ${L?"bg-orange-500 border-orange-400 text-slate-950 shadow-[0_0_15px_rgba(249,115,22,0.2)]":k?"bg-slate-900/50 border-slate-800 text-slate-600 opacity-60 hover:opacity-100 hover:border-orange-500/50":"bg-slate-900/20 border-slate-800 text-slate-400 hover:border-slate-500 hover:bg-slate-800/40"} rounded-[2px]
                                                            `,children:[S.jsxs("div",{className:"flex items-center justify-between mb-1",children:[S.jsx("span",{className:"text-[10px] font-black uppercase truncate pr-4",children:b}),L&&S.jsx(NE,{className:"w-3 h-3"})]}),k&&S.jsxs("span",{className:"text-[8px] font-mono opacity-60",children:["Taken by: ",k.name]}),!L&&!k&&S.jsx("span",{className:"text-[8px] font-mono opacity-30 mt-auto",children:"Available"}),k&&!L&&S.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-950/80 opacity-0 group-hover/btn:opacity-100 transition-opacity",children:S.jsx("span",{className:"text-[10px] font-black text-orange-500",children:"TRANSFER TO THIS"})})]},b)})}):S.jsxs("div",{className:"flex flex-col items-center justify-center py-12 border-2 border-dashed border-slate-800 rounded-[2px]",children:[S.jsx(gc,{className:"w-8 h-8 text-slate-700 mb-4"}),S.jsx("p",{className:"text-xs font-mono text-slate-600 uppercase",children:"No signal from mesh groups detector."})]})})]})]})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-700",children:[S.jsx(K2,{className:"w-16 h-16 mb-6 opacity-20"}),S.jsx("h3",{className:"text-xl font-black uppercase tracking-widest opacity-20",children:"No material selected"}),S.jsx("p",{className:"text-[10px] font-mono uppercase opacity-20 mt-2",children:"Initialize material resource in the inventory"})]})]})]}):S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono underline",children:"SYSTEM_WAITING: SELECT_PROJECT_PATH"})}const ek=[{id:"FIXED",label:"Fixed Support (Engaste)",icon:S4,dofs:{dx:!0,dy:!0,dz:!0,drx:!0,dry:!0,drz:!0},description:"Restricts all translations and rotations."},{id:"PINNED",label:"Pinned Support (Apoio)",icon:nk,dofs:{dx:!0,dy:!0,dz:!0,drx:!1,dry:!1,drz:!1},description:"Restricts translations. Rotations are free."},{id:"SLIDING",label:"Sliding Support (Trilho)",icon:fc,dofs:{dx:!1,dy:!0,dz:!0,drx:!1,dry:!1,drz:!1},description:"Free to move in X, restricted in Y and Z."}];function tk({projectPath:t,availableGroups:e=[],initialRestrictions:n=[],onUpdate:r}){const[s,i]=Q.useState([]),[c,l]=Q.useState(null),f=Q.useRef(!0),g=Q.useRef("");Q.useEffect(()=>{if(n.length>0&&s.length===0){const x=n.map((T,w)=>({id:(w+1).toString(),name:T.name,group:T.group,dx:T.dof?.DX!==null,dy:T.dof?.DY!==null,dz:T.dof?.DZ!==null,drx:T.dof?.DRX!==null,dry:T.dof?.DRY!==null,drz:T.dof?.DRZ!==null}));i(x),x.length>0&&l(0)}},[n]),Q.useEffect(()=>{if(f.current){f.current=!1;return}if(r){const x=s.map(w=>({name:String(w.name||""),group:String(w.group||""),dof:{DX:w.dx?0:null,DY:w.dy?0:null,DZ:w.dz?0:null,DRX:w.drx?0:null,DRY:w.dry?0:null,DRZ:w.drz?0:null}})),T=JSON.stringify(x);g.current!==T&&(g.current=T,r(x))}},[s,r]);const p=()=>{const x=(s.length+1).toString(),T={id:x,name:`BC_RULE_${x}`,group:e[0]||"",dx:!0,dy:!0,dz:!0,drx:!1,dry:!1,drz:!1};i([...s,T]),l(s.length)},h=x=>{const T=s.findIndex(w=>w.id===x);i(s.filter(w=>w.id!==x)),c===T&&l(null)},y=(x,T,w)=>{i(s.map(D=>D.id===x?{...D,[T]:w}:D))},v=(x,T)=>{i(w=>w.map((D,M)=>M===c?{...D,...T}:D))};if(!t)return S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono tracking-tighter uppercase italic",children:"waiting_for_payload: select_project"});const E=c!==null?s[c]:null;return S.jsxs("div",{className:"flex h-full w-full bg-slate-950 border border-slate-800 rounded-none overflow-hidden font-sans",children:[S.jsxs("div",{className:"w-[300px] shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/10",children:[S.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/30",children:[S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(BE,{className:"w-4 h-4 text-purple-500"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"BC_Inventory"})]}),S.jsx("span",{className:"text-[9px] font-mono text-slate-600 bg-slate-950 px-1.5 border border-slate-800",children:s.length})]}),S.jsxs("button",{onClick:p,disabled:e.length===0,className:"w-full mt-2 flex items-center justify-center gap-2 px-4 py-2 bg-purple-600 border border-purple-500 text-slate-950 font-black text-[10px] uppercase tracking-widest hover:bg-purple-500 transition-all shadow-[0_0_15px_rgba(168,85,247,0.2)] disabled:opacity-30 disabled:grayscale",children:[S.jsx(_p,{className:"w-3.5 h-3.5"}),"Init Boundary Rule"]})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:s.length===0?S.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 opacity-20 grayscale",children:[S.jsx(mh,{className:"w-10 h-10 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-center",children:"No_Boundary_Conditions_Defined"})]}):s.map((x,T)=>{const w=c===T,D=[x.dx,x.dy,x.dz,x.drx,x.dry,x.drz].filter(Boolean).length;return S.jsxs("div",{onClick:()=>l(T),className:`
                                        relative group p-4 mb-2 cursor-pointer border transition-all
                                        ${w?"bg-purple-500/5 border-purple-500/30":"bg-transparent border-transparent hover:bg-slate-800/40"}
                                    `,children:[S.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 ${w?"bg-purple-500":"bg-transparent"}`}),S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("span",{className:`text-xs font-black truncate ${w?"text-white":"text-slate-400"}`,children:x.name}),S.jsxs("span",{className:"text-[8px] font-mono p-1 border border-slate-800 bg-slate-950 text-slate-600 uppercase italic",children:["Active_",D,"/6"]})]}),S.jsxs("div",{className:"flex justify-between items-center text-[9px] font-mono text-slate-600 uppercase",children:[S.jsx("span",{className:"truncate max-w-[120px]",children:x.group||"UNLINKED"}),S.jsx("button",{onClick:M=>{M.stopPropagation(),h(x.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-500 transition-all",children:S.jsx(Oc,{className:"w-3.5 h-3.5"})})]})]},x.id)})})]}),S.jsxs("div",{className:"flex-1 flex flex-col relative bg-slate-950 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),E?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"h-24 shrink-0 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:"p-4 border border-purple-500/40 bg-purple-500/5",children:S.jsx(mh,{className:"w-6 h-6 text-purple-500"})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none",children:"Boundary_Constraint"}),S.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-purple-500 animate-pulse outline outline-1 outline-purple-500 outline-offset-2"})]}),S.jsx("input",{type:"text",value:E.name,onChange:x=>y(E.id,"name",x.target.value),className:"bg-transparent text-2xl font-black text-white leading-none font-mono focus:outline-none focus:border-b-2 border-purple-500 w-full"})]})]}),S.jsx("div",{className:"flex gap-4 items-center",children:S.jsxs("div",{className:"text-right",children:[S.jsx("span",{className:"block text-[8px] font-black text-slate-600 uppercase tracking-widest mb-1",children:"Target_Mesh_Entity"}),S.jsxs("select",{value:E.group,onChange:x=>y(E.id,"group",x.target.value),className:"bg-slate-900 border border-slate-800 text-xs font-bold text-white px-3 py-1.5 focus:outline-none focus:border-purple-500",children:[S.jsx("option",{value:"",disabled:!0,children:"Select Target Group"}),e.map(x=>S.jsx("option",{value:x,children:x},x))]})]})})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:S.jsxs("div",{className:"max-w-4xl mx-auto space-y-12",children:[S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[S.jsx(bc,{className:"w-4 h-4 text-purple-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Degrees_of_Freedom_Console"})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-12",children:[S.jsxs("div",{className:"space-y-4",children:[S.jsx("div",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest border-b border-slate-800 pb-2",children:"Translation (X,Y,Z)"}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:["dx","dy","dz"].map(x=>S.jsx(P2,{label:x,active:E[x],onClick:()=>y(E.id,x,!E[x])},x))})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("div",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest border-b border-slate-800 pb-2",children:"Rotation (RX,RY,RZ)"}),S.jsx("div",{className:"grid grid-cols-3 gap-3",children:["drx","dry","drz"].map(x=>S.jsx(P2,{label:x,active:E[x],onClick:()=>y(E.id,x,!E[x])},x))})]})]})]}),S.jsxs("section",{className:"pt-8 border-t border-slate-800",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[S.jsx(fc,{className:"w-4 h-4 text-slate-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Predefined_Support_Archetypes"})]}),S.jsx("div",{className:"grid grid-cols-3 gap-6",children:ek.map(x=>{const T=x.icon;return S.jsxs("button",{onClick:()=>v(x.id,x.dofs),className:"group flex flex-col p-6 bg-slate-900 border border-slate-800 hover:border-purple-500/50 transition-all text-left",children:[S.jsx(T,{className:"w-6 h-6 text-slate-700 group-hover:text-purple-500 mb-4 transition-colors"}),S.jsx("span",{className:"text-[10px] font-black text-white uppercase mb-2",children:x.label}),S.jsx("p",{className:"text-[9px] text-slate-600 font-mono italic leading-relaxed",children:x.description}),S.jsxs("div",{className:"mt-4 flex items-center gap-2 text-[8px] font-bold text-slate-500 group-hover:text-purple-400",children:[S.jsx("span",{children:"Apply Archetype"}),S.jsx(Vp,{className:"w-3 h-3 group-hover:translate-x-1 transition-transform"})]})]},x.id)})})]}),S.jsx("div",{className:"p-6 bg-purple-500/5 border border-purple-500/20",children:S.jsxs("div",{className:"flex gap-4",children:[S.jsx(ba,{className:"w-5 h-5 text-purple-500 shrink-0"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-purple-400 uppercase mb-1 tracking-widest",children:"FEA_Solver_Propagation"}),S.jsxs("p",{className:"text-[10px] text-slate-500 font-mono leading-relaxed",children:["Active degrees are interpreted as rigid Dirichlet conditions (`VALE_IMPO = 0.0`) in the `AFFE_CHAR_MECA` command. Ensure your group nodes match the required topology for ",E.group,"."]})]})]})})]})})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center opacity-20 filter grayscale",children:[S.jsx(mh,{className:"w-16 h-16 text-slate-500 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400",children:"select_restriction_policy"})]})]})]})}function P2({label:t,active:e,onClick:n}){return S.jsxs("button",{onClick:n,className:`
                h-16 flex flex-col items-center justify-center border transition-all
                ${e?"bg-purple-600 border-purple-400 text-slate-950 shadow-[0_0_20px_rgba(168,85,247,0.3)]":"bg-slate-900 border-slate-800 text-slate-600 hover:border-slate-700"}
            `,children:[S.jsx("span",{className:`text-xs font-black uppercase mb-1 ${e?"text-slate-950":"text-slate-400"}`,children:t}),S.jsx("span",{className:`text-[8px] font-mono leading-none ${e?"text-purple-900":"text-slate-700"}`,children:e?"LOCKED":"FREE"})]})}function nk({className:t}){return S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[S.jsx("circle",{cx:"12",cy:"12",r:"10"}),S.jsx("circle",{cx:"12",cy:"12",r:"6"}),S.jsx("circle",{cx:"12",cy:"12",r:"2"})]})}const Ia={gravity:{label:"Grav_Acceleration",icon:o5,color:"text-orange-500",btn:"bg-orange-600",unit:"m/s"},force:{label:"Nodal_Force",icon:Od,color:"text-emerald-500",btn:"bg-emerald-600",unit:"N"},pressure:{label:"Surface_Pressure",icon:$5,color:"text-cyan-500",btn:"bg-cyan-600",unit:"Pa"}};function rk({projectPath:t,availableGroups:e=[],initialLoads:n=[],onUpdate:r}){const[s,i]=Q.useState([]),[c,l]=Q.useState(null),f=Q.useRef(!0),g=Q.useRef("");Q.useEffect(()=>{if(n.length>0&&s.length===0){const E=n.map((x,T)=>{let w="force";return x.type==="PESANTEUR"?w="gravity":x.type==="PRESSION"&&(w="pressure"),{id:(T+1).toString(),name:x.name,type:w,group:x.group||"",fx:x.fx?.toString()||"0",fy:x.fy?.toString()||"0",fz:x.fz?.toString()||"0",pressure:x.pressure?.toString()||"0",ax:x.direction?.[0]?.toString()||"0",ay:x.direction?.[1]?.toString()||"0",az:x.direction?.[2]?.toString()||"-1",intensity:x.gravite?.toString()||"9.81"}});i(E),E.length>0&&l(0)}},[n]),Q.useEffect(()=>{if(f.current){f.current=!1;return}if(r){const E=s.map(T=>T.type==="gravity"?{name:String(T.name||""),type:"PESANTEUR",direction:[parseFloat(T.ax||"0"),parseFloat(T.ay||"0"),parseFloat(T.az||"-1")],gravite:parseFloat(T.intensity||"9.81")}:T.type==="force"?{name:String(T.name||""),type:"FORCE_NODALE",group:String(T.group||""),fx:parseFloat(T.fx||"0"),fy:parseFloat(T.fy||"0"),fz:parseFloat(T.fz||"0")}:{name:String(T.name||""),type:"PRESSION",group:String(T.group||""),pressure:parseFloat(T.pressure||"0")}),x=JSON.stringify(E);g.current!==x&&(g.current=x,r(E))}},[s,r]);const p=E=>{const x=(s.length+1).toString(),w={id:x,name:`${E==="gravity"?"ACCEL":E==="force"?"LOAD":"PRESS"}_${x}`,type:E,group:e[0]||"",fx:"0",fy:"0",fz:"0",pressure:"0",ax:"0",ay:"0",az:"-1",intensity:"9.81"};i([...s,w]),l(s.length)},h=E=>{const x=s.findIndex(T=>T.id===E);i(s.filter(T=>T.id!==E)),c===x&&l(null)},y=(E,x,T)=>{i(s.map(w=>w.id===E?{...w,[x]:T}:w))};if(!t)return S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono italic uppercase tracking-widest",children:"HALT: SESSION_ID_UNSET"});const v=c!==null?s[c]:null;return S.jsxs("div",{className:"flex h-full w-full bg-slate-950 border border-slate-800 overflow-hidden font-sans",children:[S.jsxs("div",{className:"w-[300px] shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/10",children:[S.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/30",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(j5,{className:"w-4 h-4 text-emerald-500"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Load_Register"})]}),S.jsx("span",{className:"text-[9px] font-mono text-slate-600 bg-slate-950 px-1.5 border border-slate-800",children:s.length})]}),S.jsx("div",{className:"grid grid-cols-3 gap-1",children:Object.entries(Ia).map(([E,x])=>S.jsxs("button",{onClick:()=>p(E),className:"flex flex-col items-center justify-center p-2 border border-slate-800 bg-slate-950 hover:bg-slate-900 transition-all group",title:`Add ${x.label}`,children:[S.jsx(x.icon,{className:`w-3.5 h-3.5 ${x.color} mb-1 opacity-60 group-hover:opacity-100`}),S.jsx("span",{className:"text-[7px] font-black text-slate-600 uppercase truncate w-full text-center group-hover:text-slate-400",children:x.label.split("_")[0]})]},E))})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:s.length===0?S.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 opacity-20 grayscale",children:[S.jsx(Od,{className:"w-10 h-10 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-center",children:"No_Loads_Simulated"})]}):s.map((E,x)=>{const T=c===x,w=Ia[E.type];return S.jsxs("div",{onClick:()=>l(x),className:`
                                        relative group p-4 mb-2 cursor-pointer border transition-all
                                        ${T?"bg-emerald-500/5 border-emerald-500/30":"bg-transparent border-transparent hover:bg-slate-800/40"}
                                    `,children:[S.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 ${T?"bg-emerald-500":"bg-transparent"}`}),S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("span",{className:`text-xs font-black truncate ${T?"text-white":"text-slate-400"}`,children:E.name}),S.jsx(w.icon,{className:`w-3 h-3 ${w.color} opacity-40`})]}),S.jsxs("div",{className:"flex justify-between items-center text-[9px] font-mono text-slate-600 uppercase",children:[S.jsx("span",{className:"truncate max-w-[150px]",children:E.group||"GLOBAL"}),S.jsx("button",{onClick:D=>{D.stopPropagation(),h(E.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-500 transition-all",children:S.jsx(Oc,{className:"w-3.5 h-3.5"})})]})]},E.id)})})]}),S.jsxs("div",{className:"flex-1 flex flex-col relative bg-slate-950 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),v?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"h-24 shrink-0 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:`p-4 border ${Ia[v.type].color.replace("text","border")}/40 bg-slate-900`,children:(()=>{const E=Ia[v.type].icon;return S.jsx(E,{className:`w-6 h-6 ${Ia[v.type].color}`})})()}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none",children:"External_Stimulus"}),S.jsx("div",{className:`w-1.5 h-1.5 rounded-none animate-pulse outline outline-1 outline-offset-2 ${Ia[v.type].btn.replace("bg-","bg-").replace("600","500")} ${Ia[v.type].btn.replace("bg-","outline-")}`})]}),S.jsx("input",{type:"text",value:v.name,onChange:E=>y(v.id,"name",E.target.value),className:"bg-transparent text-2xl font-black text-white leading-none font-mono focus:outline-none focus:border-b-2 border-emerald-500 w-full"})]})]}),S.jsx("div",{className:"flex gap-4 items-center",children:v.type!=="gravity"&&S.jsxs("div",{className:"text-right",children:[S.jsx("span",{className:"block text-[8px] font-black text-slate-600 uppercase tracking-widest mb-1",children:"Target_Boundary_Group"}),S.jsxs("select",{value:v.group,onChange:E=>y(v.id,"group",E.target.value),className:"bg-slate-900 border border-slate-800 text-xs font-bold text-white px-3 py-1.5 focus:outline-none focus:border-emerald-500",children:[S.jsx("option",{value:"",disabled:!0,children:"Select Target"}),e.map(E=>S.jsx("option",{value:E,children:E},E))]})]})})]}),S.jsx("div",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:S.jsxs("div",{className:"max-w-4xl mx-auto space-y-12",children:[S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[S.jsx(bc,{className:"w-4 h-4 text-emerald-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signal_Intensity_Console"})]}),v.type==="gravity"&&S.jsxs("div",{className:"space-y-10",children:[S.jsx("div",{className:"grid grid-cols-1 gap-6",children:S.jsx(au,{label:"Acceleration_Intensity",value:v.intensity,unit:"m/s",onChange:E=>y(v.id,"intensity",E),theme:"ORANGE",fullWidth:!0})}),S.jsx("div",{className:"grid grid-cols-3 gap-6",children:["ax","ay","az"].map(E=>S.jsx(au,{label:`Dir_${E.slice(1).toUpperCase()}`,value:v[E],unit:"vec",onChange:x=>y(v.id,E,x),theme:"ORANGE"},E))})]}),v.type==="force"&&S.jsx("div",{className:"grid grid-cols-3 gap-6",children:["fx","fy","fz"].map(E=>S.jsx(au,{label:`Force_${E.slice(-1).toUpperCase()}`,value:v[E],unit:"N",onChange:x=>y(v.id,E,x),theme:"EMERALD"},E))}),v.type==="pressure"&&S.jsx("div",{className:"max-w-md",children:S.jsx(au,{label:"Surface_Pressure",value:v.pressure,unit:"Pa",onChange:E=>y(v.id,"pressure",E),theme:"CYAN",fullWidth:!0})})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-8 border-t border-slate-800",children:[S.jsx("div",{className:"p-6 bg-slate-900 border border-slate-800",children:S.jsxs("div",{className:"flex gap-4",children:[S.jsx(B4,{className:"w-5 h-5 text-slate-700 shrink-0"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-white uppercase mb-2 tracking-widest",children:"Mesh_Entity_Link"}),S.jsxs("p",{className:"text-[9px] text-slate-600 font-mono leading-relaxed uppercase",children:[v.group||"GLOBAL_DOMAIN"," is currently selected as the active receiver for this Load command."]})]})]})}),S.jsx("div",{className:"p-6 bg-emerald-500/5 border border-emerald-500/10",children:S.jsxs("div",{className:"flex gap-4",children:[S.jsx(ba,{className:"w-5 h-5 text-emerald-500 shrink-0"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-emerald-400 uppercase mb-2 tracking-widest",children:"Aster_Operator"}),S.jsx("p",{className:"text-[9px] text-slate-500 font-mono leading-relaxed",children:"Interpreted by `AFFE_CHAR_MECA`. Force uses `FORCE_NODALE` or `FORCE_FACE`. Pressure uses `PRES_REP`."})]})]})})]}),S.jsxs("div",{className:"flex items-center gap-2 p-4 bg-slate-900/50 border border-slate-800/50",children:[S.jsx(VE,{className:"w-3.5 h-3.5 text-slate-600"}),S.jsx("span",{className:"text-[9px] font-mono text-slate-600 uppercase italic",children:"Note: Simulation results depend on consistent load signs relative to the global axis system."})]})]})})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center opacity-20 filter grayscale",children:[S.jsx(Od,{className:"w-16 h-16 text-slate-500 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400",children:"select_thermal_force_policy"})]})]})]})}function au({label:t,value:e,unit:n,onChange:r,theme:s,fullWidth:i}){const c=s==="ORANGE"?"text-orange-500":s==="CYAN"?"text-cyan-400":"text-emerald-400",l=s==="ORANGE"?"border-orange-500/30":s==="CYAN"?"border-cyan-500/30":"border-emerald-500/30";return S.jsxs("div",{className:`group relative bg-slate-950/50 border border-slate-800 p-6 transition-all hover:bg-slate-900 ${i?"w-full":""}`,children:[S.jsx("label",{className:"block text-[9px] font-black text-slate-600 uppercase mb-3 tracking-tighter",children:t}),S.jsxs("div",{className:"flex items-baseline gap-4",children:[S.jsx("input",{type:"text",value:e||"0",onChange:f=>r(f.target.value),className:`w-full bg-transparent text-3xl font-black ${c} font-mono focus:outline-none`}),S.jsx("span",{className:"text-[10px] font-black text-slate-700 tracking-widest",children:n})]}),S.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${l} bg-current opacity-0 group-hover:opacity-100 transition-opacity`})]})}const Ch={RECTANGLE:{label:"Solid Rectangle",default:{hy:100,hz:50,offset_y:0,offset_z:0,rotation:0,fiber_y:0,fiber_z:0}},BOX:{label:"Rectangular Tube",default:{hy:100,hz:50,t:5,offset_y:0,offset_z:0,rotation:0,fiber_y:0,fiber_z:0}},CIRCLE:{label:"Solid Circle",default:{r:50,offset_y:0,offset_z:0,rotation:0,fiber_y:0,fiber_z:0}},TUBE:{label:"Circular Tube",default:{r:50,t:5,offset_y:0,offset_z:0,rotation:0,fiber_y:0,fiber_z:0}},I_SECTION:{label:"I-Section",default:{h:200,tw:6.3,bf_top:100,tf_top:8,bf_bot:100,tf_bot:8,offset_y:0,offset_z:0,rotation:0,fiber_y:0,fiber_z:0}}},ak={thickness:10,offset:0,vx:1,vy:0,vz:0};function sk({projectPath:t,availableGeometries:e=[],onUpdate:n}){const[r,s]=Q.useState([]),[i,c]=Q.useState(0),[l,f]=Q.useState(null),[g,p]=Q.useState(null),[h,y]=Q.useState(!1),[v,E]=Q.useState(null),[x,T]=Q.useState("DIM"),w=r[i]||null;Q.useEffect(()=>{if(e.length>0&&r.length===0){const L=e.filter(k=>{const B=k._category||"";return B==="1D"||B==="2D"}).map(k=>{const B=k._category==="1D",j=k._category==="2D";let z={};return B?z={...Ch.I_SECTION.default,...k.section_params||{}}:j&&(z={...ak,...k.section_params||{}}),{...k,section_type:k.section_type||(B?"I_SECTION":"SHELL"),profile_name:k.profile_name||"Custom",section_params:z}});s(L)}},[e]),Q.useEffect(()=>{r.length>0&&n&&n(r)},[r,n]),Q.useEffect(()=>{r[i]&&(f(r[i].section_image||null),p(r[i].section_properties||null))},[i,r]);const D=async()=>{if(!w)return;if(!(w._category==="1D")){f(null),p(null);return}y(!0),E(null);try{const B=await(await fetch("/api/calculate_section",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:w.section_type,params:w.section_params})})).json();if(B.status==="success")f(B.image),p(B.properties),s(j=>j.map((z,$)=>$===i?{...z,section_properties:B.properties,section_mesh:B.mesh,section_image:B.image}:z));else throw new Error(B.message)}catch(k){E(`Critical: ${k.message}`)}finally{y(!1)}},M=(L,k,B)=>{s(j=>j.map((z,$)=>$===L?{...z,profile_name:"Custom",section_params:{...z.section_params,[k]:B}}:z))},O=(L,k)=>{s(B=>B.map((j,z)=>z===L?{...j,section_type:k,profile_name:"Custom",section_params:{...Ch[k].default}}:j))};if(!t)return S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono italic",children:"SESSION_HALTED: PROJECT_ID_NULL"});if(r.length===0)return S.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-20 bg-slate-950 border border-slate-800",children:[S.jsx(q2,{className:"w-16 h-16 text-slate-800 mb-6"}),S.jsx("h3",{className:"text-xl font-black text-slate-500 uppercase tracking-widest",children:"Dimension_Inventory_Empty"}),S.jsx("p",{className:"mt-4 text-xs font-mono text-slate-600 max-w-sm text-center",children:"No active 1D (Beam) or 2D (Shell) groups detected. Configure cross-sections in the Model panel first."})]});const R=w?._category==="1D",b=w?._category==="2D";return S.jsxs("div",{className:"flex h-full w-full bg-slate-950 text-slate-200 border border-slate-800 overflow-hidden font-sans",children:[S.jsxs("div",{className:"w-64 shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/10",children:[S.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/30 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Ei,{className:"w-4 h-4 text-orange-500"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Inventory"})]}),S.jsx("span",{className:"text-[9px] font-mono text-slate-600 bg-slate-950 px-1.5 border border-slate-800",children:r.length})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:r.map((L,k)=>{const B=i===k;return S.jsxs("div",{onClick:()=>c(k),className:`
                                    relative flex flex-col p-3 mb-1 cursor-pointer border transition-all
                                    ${B?"bg-orange-500/5 border-orange-500/30":"bg-transparent border-transparent hover:bg-slate-800/30"}
                                `,children:[S.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 ${B?L._category==="1D"?"bg-orange-500":"bg-cyan-500":"bg-transparent"}`}),S.jsxs("div",{className:"flex items-center justify-between mb-1",children:[S.jsx("span",{className:`text-xs font-black truncate pr-2 ${B?"text-white":"text-slate-400"}`,children:L.group}),S.jsx("span",{className:`text-[8px] font-bold px-1 border ${L._category==="1D"?"text-orange-500 border-orange-500/30 bg-orange-500/10":"text-cyan-400 border-cyan-400/30 bg-cyan-400/10"}`,children:L._category})]}),S.jsx("span",{className:"text-[9px] font-mono text-slate-600 uppercase truncate",children:L.section_type||"unassigned"})]},k)})})]}),S.jsxs("div",{className:"flex-1 flex flex-col bg-slate-950 overflow-hidden relative",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),S.jsxs("div",{className:"h-20 shrink-0 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:`p-4 border ${w._category==="1D"?"text-orange-500 border-orange-500/30":"text-cyan-400 border-cyan-400/30"}`,children:w._category==="1D"?S.jsx(Z4,{className:"w-5 h-5"}):S.jsx(Y2,{className:"w-5 h-5"})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none",children:"Resource_Integration"}),S.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"})]}),S.jsx("h3",{className:"text-xl font-black text-white leading-none font-mono",children:w.group})]})]}),S.jsxs("div",{className:"flex gap-4",children:[R&&S.jsxs("button",{onClick:D,disabled:h,className:`
                                    flex items-center gap-2 px-6 py-2 border font-black text-xs uppercase tracking-widest transition-all
                                    ${h?"bg-slate-800 border-slate-700 text-slate-500 cursor-not-allowed":"bg-orange-500 border-orange-400 text-slate-950 hover:bg-orange-400 shadow-[0_0_20px_rgba(249,115,22,0.15)]"}
                                `,children:[S.jsx(vh,{className:"w-4 h-4"}),h?"Analyzing...":"Execute Calculation"]}),S.jsx("div",{className:"h-10 w-[1px] bg-slate-800 mx-2"}),S.jsxs("div",{className:"flex bg-slate-900 border border-slate-800 p-0.5",children:[S.jsx("button",{onClick:()=>T("DIM"),className:`px-4 py-1.5 text-[10px] font-black uppercase transition-all ${x==="DIM"?"bg-slate-800 text-white shadow-xl":"text-slate-600 hover:text-slate-400"}`,children:"Dimensions"}),S.jsx("button",{onClick:()=>T("PROP"),className:`px-4 py-1.5 text-[10px] font-black uppercase transition-all ${x==="PROP"?"bg-slate-800 text-white shadow-xl":"text-slate-600 hover:text-slate-400"}`,children:"Datasheet"})]})]})]}),S.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[S.jsx("div",{className:"w-[380px] shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/5",children:S.jsx("div",{className:"flex-1 overflow-y-auto p-5 custom-scrollbar",children:x==="DIM"?S.jsxs("div",{className:"space-y-6",children:[S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[S.jsx(ba,{className:"w-3.5 h-3.5 text-orange-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Structural_Topology"})]}),S.jsx("div",{className:"bg-slate-950/50 border border-slate-800 p-1",children:S.jsx("select",{className:"w-full bg-transparent text-xs font-bold text-white p-2.5 focus:outline-none border-l-2 border-orange-500 hover:bg-slate-900 transition-all cursor-pointer",value:w.section_type||"I_SECTION",onChange:L=>O(i,L.target.value),disabled:!R,children:R?Object.entries(Ch).map(([L,k])=>S.jsx("option",{value:L,className:"bg-slate-950",children:k.label},L)):S.jsx("option",{value:"SHELL",children:"Shell Plate Formulation"})})})]}),S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[S.jsx(bc,{className:"w-3.5 h-3.5 text-slate-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Mathematical_Parameters"})]}),S.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(w.section_params||{}).map(([L,k])=>{const B=L.includes("offset")||L==="rotation",j=L.includes("fiber");let z="NORMAL";B&&(z="POSITION"),j&&(z="FIBER");const $={hy:"Height_Y",hz:"Width_Z",t:"Thick",r:"Radius",h:"Height",tw:"Web_T",bf_top:"TF_Width",tf_top:"TF_Thick",bf_bot:"BF_Width",tf_bot:"BF_Thick",rotation:"Rotation_",offset_y:"Shift_Y",offset_z:"Shift_Z",fiber_y:"Fiber_Y",fiber_z:"Fiber_Z",thickness:"Thickness_T",offset:"Shift_N",vx:"Dir_X",vy:"Dir_Y",vz:"Dir_Z"};return S.jsxs("div",{className:"group relative bg-slate-950/50 border border-slate-800 p-2.5 transition-all hover:bg-slate-900",children:[S.jsx("label",{className:"block text-[8px] font-black text-slate-500 uppercase mb-1 tracking-tighter",children:$[L]||L}),S.jsxs("div",{className:"flex items-baseline gap-2",children:[S.jsx("input",{type:"text",value:k||"0",onChange:W=>M(i,L,W.target.value),className:`w-full bg-transparent text-base font-black text-white font-mono focus:outline-none ${z==="POSITION"?"text-cyan-400":z==="FIBER"?"text-emerald-400":"text-slate-100"}`}),S.jsx("span",{className:"text-[8px] font-bold text-slate-700",children:B&&L!=="rotation"?"MM":L==="rotation"?"DEG":"MM"})]}),S.jsx("div",{className:"absolute top-0 right-0 p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:S.jsx("div",{className:`w-1 h-1 rounded-full ${z==="POSITION"?"bg-cyan-500":z==="FIBER"?"bg-emerald-500":"bg-slate-700"}`})})]},L)})})]}),S.jsx("div",{className:"p-4 bg-orange-500/5 border border-orange-500/20",children:S.jsxs("div",{className:"flex gap-3",children:[S.jsx(gc,{className:"w-4 h-4 text-orange-500 shrink-0 mt-0.5"}),S.jsx("p",{className:"text-[10px] text-orange-400 italic font-mono leading-relaxed",children:"All dimensions are strictly in [mm] for calculation, but converted to [M] for solver integration. Offset applies from the mesh node."})]})})]}):S.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[S.jsxs("div",{className:"flex items-center gap-3 border-b border-slate-800 pb-4",children:[S.jsx(ba,{className:"w-5 h-5 text-emerald-400"}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-sm font-black text-white uppercase italic",children:"Section_Datasheet"}),S.jsx("p",{className:"text-[10px] text-slate-600 font-mono",children:"Real-time evaluated mechanical properties"})]})]}),g?S.jsxs("div",{className:"space-y-6 mt-4",children:[S.jsx(su,{title:"Geometric_Domain",pairs:[["Area (A)",g["Area (A)"],"mm"],["Centroid Y",g["Centroid Y (cy)"],"mm"],["Centroid Z",g["Centroid Z (cx)"],"mm"]]}),S.jsx(su,{title:"Principal_Inertia",theme:"CYAN",pairs:[["Iyy (Local)",g["Iyy (Local)"],"mm"],["Izz (Local)",g["Izz (Local)"],"mm"],["Principal Angle",g["Angle (deg)"],"deg"],["Principal I1",g["I1 (Principal)"],"mm"],["Principal I2",g["I2 (Principal)"],"mm"]]}),S.jsx(su,{title:"Solver_Nodal_Data",theme:"ORANGE",pairs:[["Iyy (Origin)",g["Iyy (Node 0,0)"],"mm",!0],["Izz (Origin)",g["Izz (Node 0,0)"],"mm",!0],["Iyz (Origin)",g["Iyz (Node 0,0)"],"mm"],["Torsional J",g["Torsion J"],"mm",!0]]}),S.jsx(su,{title:"Resistance_Indicators",pairs:[["Shear Area Ay",g["Shear Area Ay"],"mm"],["Shear Area Az",g["Shear Area Az"],"mm"],["Elastic Mod. Wy",g["Elastic Mod. Wy (Zxx)"],"mm"],["Elastic Mod. Wz",g["Elastic Mod. Wz (Zyy)"],"mm"]]})]}):S.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4 opacity-30",children:[S.jsx(vh,{className:"w-12 h-12 text-slate-600"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.4em]",children:"awaiting_calculation"})]})]})})}),S.jsxs("div",{className:"flex-1 flex flex-col bg-[#020617] relative overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:"radial-gradient(#475569 1px, transparent 1px)",backgroundSize:"24px 24px"}}),S.jsx("div",{className:"absolute inset-4 border border-slate-900 pointer-events-none shadow-[inset_0_0_100px_rgba(0,0,0,1)]"}),S.jsxs("div",{className:"h-10 shrink-0 border-b border-white/5 flex items-center justify-between px-6 bg-black/40 z-10",children:[S.jsxs("div",{className:"flex items-center gap-3",children:[S.jsx(UE,{className:"w-3.5 h-3.5 text-emerald-500"}),S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Blueprint_Visualizer"})]}),R&&S.jsxs("div",{className:"flex items-center gap-4 text-[9px] font-mono text-slate-500",children:[S.jsxs("div",{className:"flex items-center gap-1.5",children:[S.jsx("div",{className:"w-1.5 h-1.5 border border-slate-600"})," PROFILE"]}),S.jsxs("div",{className:"flex items-center gap-1.5",children:[S.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500"})," NODES"]}),S.jsxs("div",{className:"flex items-center gap-1.5",children:[S.jsx("div",{className:"w-1.5 h-1.5 bg-cyan-500"})," NEUTRAL_AXIS"]})]})]}),S.jsx("div",{className:"flex-1 relative overflow-hidden flex items-center justify-center p-8 z-10",children:h?S.jsxs("div",{className:"flex flex-col items-center gap-4 text-orange-500",children:[S.jsx(vh,{className:"w-12 h-12 animate-spin-slow"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] animate-pulse",children:"Running_Numeric_Analysis"})]}):v?S.jsxs("div",{className:"text-red-500 font-mono text-[10px] p-8 border border-red-500/20 bg-red-500/5 max-w-sm",children:[S.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[S.jsx(gc,{className:"w-4 h-4"})," ENGINE_FAILURE_ABORT"]}),v]}):l?S.jsxs("div",{className:"relative group/view flex items-center justify-center w-full h-full",children:[S.jsx("img",{src:l,alt:"Section Blueprint",className:"max-w-full max-h-full object-contain filter invert opacity-90 transition-all group-hover:opacity-100",style:{imageRendering:"auto"}}),S.jsx("div",{className:"absolute -bottom-4 left-1/2 -translate-x-1/2 opacity-0 group-hover/view:opacity-100 transition-opacity",children:S.jsx("span",{className:"text-[9px] font-mono text-emerald-500/50 uppercase",children:"Analysis: Convergence_Success"})})]}):R?S.jsxs("div",{className:"flex flex-col items-center text-slate-800",children:[S.jsx(q2,{className:"w-24 h-24 mb-6 opacity-10"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-20",children:"Awaiting_Command: Calculate"})]}):S.jsxs("div",{className:"flex flex-col items-center text-cyan-900",children:[S.jsx(Y2,{className:"w-24 h-24 mb-6 opacity-20"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-30 text-cyan-800",children:"3D_Shell_Active"}),S.jsx("p",{className:"mt-2 text-[9px] font-mono text-cyan-900 uppercase",children:"Geometrically defined by mesh normals and thickness"})]})}),S.jsxs("div",{className:"h-8 px-6 bg-black/80 flex items-center justify-between text-[8px] font-mono text-slate-700 uppercase z-10",children:[S.jsxs("div",{className:"flex gap-4",children:[S.jsx("span",{children:"Render: Schematics v.1.2"}),S.jsx("span",{children:"Engine: Python_Section_Calc"})]}),S.jsx("span",{children:"Z-Axis Normal | Auto-Scale Active"})]})]})]})]})]})}const su=({title:t,pairs:e,theme:n})=>S.jsxs("div",{className:"space-y-2",children:[S.jsx("h5",{className:`text-[9px] font-black uppercase tracking-widest ${n==="CYAN"?"text-cyan-500":n==="ORANGE"?"text-orange-500":"text-slate-500"}`,children:t}),S.jsx("div",{className:"grid grid-cols-1 gap-1.5",children:e.map(([r,s,i,c])=>S.jsxs("div",{className:`flex items-center justify-between px-3 py-1.5 bg-slate-950/80 border ${c?"border-emerald-500/20":"border-slate-800"}`,children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("div",{className:`w-1 h-1 ${c?"bg-emerald-500 animate-pulse":"bg-slate-800"}`}),S.jsx("span",{className:"text-[8px] font-bold text-slate-600 uppercase tracking-tight",children:r})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("span",{className:`text-[10px] font-black font-mono ${c?n==="ORANGE"?"text-orange-400":"text-white":"text-slate-100"}`,children:ik(s)}),S.jsx("span",{className:"text-[8px] font-mono text-slate-600 w-8",children:i})]})]},r))})]}),ik=t=>{if(t==null)return"N/A";const e=typeof t=="string"?parseFloat(t):t;return isNaN(e)?t:Math.abs(e)<1e-9?"0.00":Math.abs(e)<.001||Math.abs(e)>1e6?e.toExponential(4):e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})};function ok({projectPath:t,availableLoads:e=[],availableRestrictions:n=[],availableGroups:r=[],initialLoadCases:s=[],onUpdate:i}){const c=Q.useRef(!0),[l,f]=Q.useState([]),[g,p]=Q.useState(null),h=Q.useRef(null);Q.useEffect(()=>{if(t&&h.current!==t)if(s&&s.length>0){const w=s.map((D,M)=>({id:(M+1).toString(),name:D.name,loads:D.loads||[],restrictions:D.restrictions||[]}));f(w),w.length>0&&p(0),h.current=t}else l.length===0&&(f([{id:"1",name:"LOAD_COMB_01",loads:[],restrictions:[]}]),p(0),h.current=t)},[t,s]),Q.useEffect(()=>{if(c.current){c.current=!1;return}i&&t===h.current&&i(l.map(w=>({name:String(w.name||""),loads:w.loads,restrictions:w.restrictions})))},[l,i,t]);const y=()=>{const w=(l.length+1).toString(),D={id:w,name:`LOAD_CASE_${w.padStart(2,"0")}`,loads:[],restrictions:[]};f([...l,D]),p(l.length)},v=w=>{const D=l.findIndex(M=>M.id===w);f(l.filter(M=>M.id!==w)),g===D&&p(null)},E=(w,D,M)=>{f(l.map(O=>O.id===w?{...O,[D]:M}:O))},x=(w,D,M)=>{f(l.map(O=>{if(O.id!==w)return O;const R=O[D]||[],b=R.includes(M)?R.filter(L=>L!==M):[...R,M];return{...O,[D]:b}}))};if(!t)return S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono italic uppercase tracking-widest",children:"HALT: UNSET_PROJECT_CONTEXT"});const T=g!==null?l[g]:null;return S.jsxs("div",{className:"flex h-full w-full bg-slate-950 border border-slate-800 overflow-hidden font-sans",children:[S.jsxs("div",{className:"w-[300px] shrink-0 border-r border-slate-800 flex flex-col bg-slate-900/10",children:[S.jsxs("div",{className:"p-4 border-b border-slate-800 bg-slate-900/30",children:[S.jsxs("div",{className:"flex items-center justify-between mb-4",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(Y4,{className:"w-4 h-4 text-indigo-500"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400",children:"Cases_Inventory"})]}),S.jsx("span",{className:"text-[9px] font-mono text-slate-600 bg-slate-950 px-1.5 border border-slate-800",children:l.length})]}),S.jsxs("button",{onClick:y,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-indigo-600 border border-indigo-500 text-slate-950 font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 transition-all shadow-[0_0_15px_rgba(99,102,241,0.2)]",children:[S.jsx(_p,{className:"w-3.5 h-3.5"}),"Init Combination"]})]}),S.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:l.length===0?S.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 opacity-20 grayscale",children:[S.jsx(ba,{className:"w-10 h-10 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-center",children:"No_Load_Cases_Defined"})]}):l.map((w,D)=>{const M=g===D,O=(w.loads?.length||0)+(w.restrictions?.length||0);return S.jsxs("div",{onClick:()=>p(D),className:`
                                        relative group p-4 mb-2 cursor-pointer border transition-all
                                        ${M?"bg-indigo-500/5 border-indigo-500/30":"bg-transparent border-transparent hover:bg-slate-800/40"}
                                    `,children:[S.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 ${M?"bg-indigo-500":"bg-transparent"}`}),S.jsxs("div",{className:"flex items-center justify-between mb-2",children:[S.jsx("span",{className:`text-xs font-black truncate ${M?"text-white":"text-slate-400"}`,children:w.name}),S.jsxs("span",{className:"text-[8px] font-mono p-1 border border-slate-800 bg-slate-950 text-slate-600 uppercase italic",children:["Comb_",O]})]}),S.jsx("button",{onClick:R=>{R.stopPropagation(),v(w.id)},className:"opacity-0 group-hover:opacity-100 p-1 hover:text-red-500 transition-all ml-auto block",children:S.jsx(Oc,{className:"w-3.5 h-3.5 text-slate-600"})})]},w.id)})})]}),S.jsxs("div",{className:"flex-1 flex flex-col relative bg-slate-950 overflow-hidden",children:[S.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-[0.02] bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-repeat"}),T?S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"h-24 shrink-0 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10",children:S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:"p-4 border border-indigo-500/40 bg-indigo-500/5",children:S.jsx(Ei,{className:"w-6 h-6 text-indigo-500"})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none",children:"Combination_Protocol"}),S.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-indigo-500 animate-pulse outline outline-1 outline-indigo-500 outline-offset-2"})]}),S.jsx("input",{type:"text",value:T.name,onChange:w=>E(T.id,"name",w.target.value),className:"bg-transparent text-2xl font-black text-white leading-none font-mono focus:outline-none focus:border-b-2 border-indigo-500 w-full uppercase"})]})]})}),S.jsx("div",{className:"flex-1 overflow-y-auto p-12 custom-scrollbar",children:S.jsxs("div",{className:"max-w-5xl mx-auto space-y-12",children:[S.jsxs("section",{children:[S.jsxs("div",{className:"flex items-center justify-between mb-8",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(bc,{className:"w-4 h-4 text-cyan-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Loads_Matrix_Configuration"})]}),S.jsxs("span",{className:"text-[9px] font-mono text-slate-600 uppercase italic",children:["Selected: ",T.loads.length]})]}),S.jsx("div",{className:"grid grid-cols-4 gap-3",children:e.length===0?S.jsx("div",{className:"col-span-4 p-8 border border-slate-800 border-dashed text-center",children:S.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase tracking-widest",children:"Neutral_State: No_Loads_Detected"})}):e.map(w=>S.jsx(J2,{label:w.name,active:T.loads.includes(w.name),onClick:()=>x(T.id,"loads",w.name),theme:"CYAN"},w.name))})]}),S.jsxs("section",{className:"pt-8 border-t border-slate-800",children:[S.jsxs("div",{className:"flex items-center justify-between mb-8",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(BE,{className:"w-4 h-4 text-purple-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Boundary_Condition_Coupling"})]}),S.jsxs("span",{className:"text-[9px] font-mono text-slate-600 uppercase italic",children:["Selected: ",T.restrictions.length]})]}),S.jsx("div",{className:"grid grid-cols-4 gap-3",children:(n.length>0?n:r).length===0?S.jsx("div",{className:"col-span-4 p-8 border border-slate-800 border-dashed text-center",children:S.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase tracking-widest",children:"Neutral_State: No_Conditions_Detected"})}):(n.length>0?n:r).map(w=>{const D=typeof w=="string"?w:w.name;return S.jsx(J2,{label:D,active:T.restrictions.includes(D),onClick:()=>x(T.id,"restrictions",D),theme:"PURPLE"},D)})})]}),S.jsx("div",{className:"p-6 bg-indigo-500/5 border border-indigo-500/20",children:S.jsxs("div",{className:"flex gap-4",children:[S.jsx(Vp,{className:"w-5 h-5 text-indigo-500 shrink-0"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-indigo-400 uppercase mb-2 tracking-widest",children:"Aster_Case_Synthesis"}),S.jsx("p",{className:"text-[9px] text-slate-500 font-mono leading-relaxed uppercase",children:"Each load case generates an independent `MECA_STATIQUE` resolution in the solver. Resulting displacements and stresses are extracted per combination protocol."})]})]})})]})})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center opacity-20 filter grayscale",children:[S.jsx(Ei,{className:"w-16 h-16 text-slate-500 mb-4"}),S.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.5em] text-slate-400",children:"awaiting_combination_selection"})]})]})]})}function J2({label:t,active:e,onClick:n,theme:r}){const s=r==="CYAN"?"bg-cyan-600 border-cyan-400 text-slate-950":"bg-purple-600 border-purple-400 text-slate-950",i="bg-slate-900 border-slate-800 text-slate-600 hover:border-slate-700",c=r==="CYAN"?"bg-cyan-400":"bg-purple-400";return S.jsxs("button",{onClick:n,className:`
                relative h-12 flex items-center justify-center border p-2 transition-all overflow-hidden
                ${e?s+" shadow-[0_0_15px_rgba(34,211,238,0.2)]":i}
            `,children:[S.jsx("span",{className:"text-[10px] font-black uppercase truncate",children:t}),e&&S.jsx("div",{className:`absolute top-0 right-0 w-2 h-2 ${c} translate-x-1 -translate-y-1 rotate-45`})]})}function ck({projectPath:t,meshes:e}){return t?S.jsxs("div",{className:"flex flex-col h-full w-full p-4",children:[S.jsx("h3",{className:"text-lg font-semibold text-slate-200 mb-4",children:"Detected Meshes"}),e.length===0?S.jsx("div",{className:"p-10 text-center text-slate-500 border border-dashed border-slate-700 rounded-lg",children:"No .med files detected in project folder."}):S.jsx("div",{className:"space-y-3",children:e.map(n=>S.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-800 border border-slate-700 rounded-lg",children:[S.jsx(n5,{className:"w-8 h-8 text-blue-500"}),S.jsxs("div",{children:[S.jsx("div",{className:"text-sm font-bold text-slate-200",children:n}),S.jsxs("div",{className:"text-xs text-slate-500",children:["Status: ",S.jsx("span",{className:"text-green-500",children:"Ready for Inspection"})]})]})]},n))}),S.jsxs("div",{className:"mt-8 p-4 bg-slate-900/50 rounded text-xs text-slate-500",children:[S.jsx("p",{children:"Mesh inspection runs automatically when opening the project."}),S.jsxs("p",{children:["Ensure ",S.jsx("b",{children:"Code_Aster path"})," is correctly set in Settings to enable group detection."]})]})]}):null}var Le=1e-6,Nt=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function jE(){var t=new Nt(9);return Nt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function kp(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function lk(t){var e=new Nt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function uk(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function fk(t,e,n,r,s,i,c,l,f){var g=new Nt(9);return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=s,g[5]=i,g[6]=c,g[7]=l,g[8]=f,g}function gk(t,e,n,r,s,i,c,l,f,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i,t[5]=c,t[6]=l,t[7]=f,t[8]=g,t}function Na(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function GE(t,e){if(t===e){var n=e[1],r=e[2],s=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=s}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Bp(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=e[4],l=e[5],f=e[6],g=e[7],p=e[8],h=p*c-l*g,y=-p*i+l*f,v=g*i-c*f,E=n*h+r*y+s*v;return E?(E=1/E,t[0]=h*E,t[1]=(-p*r+s*g)*E,t[2]=(l*r-s*c)*E,t[3]=y*E,t[4]=(p*n-s*f)*E,t[5]=(-l*n+s*i)*E,t[6]=v*E,t[7]=(-g*n+r*f)*E,t[8]=(c*n-r*i)*E,t):null}function hk(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=e[4],l=e[5],f=e[6],g=e[7],p=e[8];return t[0]=c*p-l*g,t[1]=s*g-r*p,t[2]=r*l-s*c,t[3]=l*f-i*p,t[4]=n*p-s*f,t[5]=s*i-n*l,t[6]=i*g-c*f,t[7]=r*f-n*g,t[8]=n*c-r*i,t}function dk(t){var e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],c=t[5],l=t[6],f=t[7],g=t[8];return e*(g*i-c*f)+n*(-g*s+c*l)+r*(f*s-i*l)}function zE(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3],l=e[4],f=e[5],g=e[6],p=e[7],h=e[8],y=n[0],v=n[1],E=n[2],x=n[3],T=n[4],w=n[5],D=n[6],M=n[7],O=n[8];return t[0]=y*r+v*c+E*g,t[1]=y*s+v*l+E*p,t[2]=y*i+v*f+E*h,t[3]=x*r+T*c+w*g,t[4]=x*s+T*l+w*p,t[5]=x*i+T*f+w*h,t[6]=D*r+M*c+O*g,t[7]=D*s+M*l+O*p,t[8]=D*i+M*f+O*h,t}function pk(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3],l=e[4],f=e[5],g=e[6],p=e[7],h=e[8],y=n[0],v=n[1];return t[0]=r,t[1]=s,t[2]=i,t[3]=c,t[4]=l,t[5]=f,t[6]=y*r+v*c+g,t[7]=y*s+v*l+p,t[8]=y*i+v*f+h,t}function yk(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3],l=e[4],f=e[5],g=e[6],p=e[7],h=e[8],y=Math.sin(n),v=Math.cos(n);return t[0]=v*r+y*c,t[1]=v*s+y*l,t[2]=v*i+y*f,t[3]=v*c-y*r,t[4]=v*l-y*s,t[5]=v*f-y*i,t[6]=g,t[7]=p,t[8]=h,t}function xk(t,e,n){var r=n[0],s=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=s*e[3],t[4]=s*e[4],t[5]=s*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function vk(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function mk(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Tk(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Sk(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ck(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=n+n,l=r+r,f=s+s,g=n*c,p=r*c,h=r*l,y=s*c,v=s*l,E=s*f,x=i*c,T=i*l,w=i*f;return t[0]=1-h-E,t[3]=p-w,t[6]=y+T,t[1]=p+w,t[4]=1-g-E,t[7]=v-x,t[2]=y-T,t[5]=v+x,t[8]=1-g-h,t}function Ek(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=e[4],l=e[5],f=e[6],g=e[7],p=e[8],h=e[9],y=e[10],v=e[11],E=e[12],x=e[13],T=e[14],w=e[15],D=n*l-r*c,M=n*f-s*c,O=n*g-i*c,R=r*f-s*l,b=r*g-i*l,L=s*g-i*f,k=p*x-h*E,B=p*T-y*E,j=p*w-v*E,z=h*T-y*x,$=h*w-v*x,W=y*w-v*T,Z=D*W-M*$+O*z+R*j-b*B+L*k;return Z?(Z=1/Z,t[0]=(l*W-f*$+g*z)*Z,t[1]=(f*j-c*W-g*B)*Z,t[2]=(c*$-l*j+g*k)*Z,t[3]=(s*$-r*W-i*z)*Z,t[4]=(n*W-s*j+i*B)*Z,t[5]=(r*j-n*$-i*k)*Z,t[6]=(x*L-T*b+w*R)*Z,t[7]=(T*O-E*L-w*M)*Z,t[8]=(E*b-x*O+w*D)*Z,t):null}function wk(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Mk(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function bk(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Ok(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function AE(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Dk(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function Rk(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Nk(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Lk(t,e){var n=t[0],r=t[1],s=t[2],i=t[3],c=t[4],l=t[5],f=t[6],g=t[7],p=t[8],h=e[0],y=e[1],v=e[2],E=e[3],x=e[4],T=e[5],w=e[6],D=e[7],M=e[8];return Math.abs(n-h)<=Le*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-y)<=Le*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(s-v)<=Le*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(i-E)<=Le*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(c-x)<=Le*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(l-T)<=Le*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-w)<=Le*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(g-D)<=Le*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(p-M)<=Le*Math.max(1,Math.abs(p),Math.abs(M))}var Vk=zE,_k=AE;const kk=Object.freeze(Object.defineProperty({__proto__:null,add:Ok,adjoint:hk,clone:lk,copy:uk,create:jE,determinant:dk,equals:Lk,exactEquals:Nk,frob:bk,fromMat2d:Sk,fromMat4:kp,fromQuat:Ck,fromRotation:mk,fromScaling:Tk,fromTranslation:vk,fromValues:fk,identity:Na,invert:Bp,mul:Vk,multiply:zE,multiplyScalar:Dk,multiplyScalarAndAdd:Rk,normalFromMat4:Ek,projection:wk,rotate:yk,scale:xk,set:gk,str:Mk,sub:_k,subtract:AE,translate:pk,transpose:GE},Symbol.toStringTag,{value:"Module"}));function Ef(){var t=new Nt(16);return Nt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Bk(t){var e=new Nt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Uk(t,e,n,r,s,i,c,l,f,g,p,h,y,v,E,x){var T=new Nt(16);return T[0]=t,T[1]=e,T[2]=n,T[3]=r,T[4]=s,T[5]=i,T[6]=c,T[7]=l,T[8]=f,T[9]=g,T[10]=p,T[11]=h,T[12]=y,T[13]=v,T[14]=E,T[15]=x,T}function Fk(t,e,n,r,s,i,c,l,f,g,p,h,y,v,E,x,T){return t[0]=e,t[1]=n,t[2]=r,t[3]=s,t[4]=i,t[5]=c,t[6]=l,t[7]=f,t[8]=g,t[9]=p,t[10]=h,t[11]=y,t[12]=v,t[13]=E,t[14]=x,t[15]=T,t}function Ve(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Je(t,e){if(t===e){var n=e[1],r=e[2],s=e[3],i=e[6],c=e[7],l=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=s,t[13]=c,t[14]=l}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function An(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=e[4],l=e[5],f=e[6],g=e[7],p=e[8],h=e[9],y=e[10],v=e[11],E=e[12],x=e[13],T=e[14],w=e[15],D=n*l-r*c,M=n*f-s*c,O=n*g-i*c,R=r*f-s*l,b=r*g-i*l,L=s*g-i*f,k=p*x-h*E,B=p*T-y*E,j=p*w-v*E,z=h*T-y*x,$=h*w-v*x,W=y*w-v*T,Z=D*W-M*$+O*z+R*j-b*B+L*k;return Z?(Z=1/Z,t[0]=(l*W-f*$+g*z)*Z,t[1]=(s*$-r*W-i*z)*Z,t[2]=(x*L-T*b+w*R)*Z,t[3]=(y*b-h*L-v*R)*Z,t[4]=(f*j-c*W-g*B)*Z,t[5]=(n*W-s*j+i*B)*Z,t[6]=(T*O-E*L-w*M)*Z,t[7]=(p*L-y*O+v*M)*Z,t[8]=(c*$-l*j+g*k)*Z,t[9]=(r*j-n*$-i*k)*Z,t[10]=(E*b-x*O+w*D)*Z,t[11]=(h*O-p*b-v*D)*Z,t[12]=(l*B-c*z-f*k)*Z,t[13]=(n*z-r*B+s*k)*Z,t[14]=(x*M-E*R-T*D)*Z,t[15]=(p*R-h*M+y*D)*Z,t):null}function jk(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=e[4],l=e[5],f=e[6],g=e[7],p=e[8],h=e[9],y=e[10],v=e[11],E=e[12],x=e[13],T=e[14],w=e[15];return t[0]=l*(y*w-v*T)-h*(f*w-g*T)+x*(f*v-g*y),t[1]=-(r*(y*w-v*T)-h*(s*w-i*T)+x*(s*v-i*y)),t[2]=r*(f*w-g*T)-l*(s*w-i*T)+x*(s*g-i*f),t[3]=-(r*(f*v-g*y)-l*(s*v-i*y)+h*(s*g-i*f)),t[4]=-(c*(y*w-v*T)-p*(f*w-g*T)+E*(f*v-g*y)),t[5]=n*(y*w-v*T)-p*(s*w-i*T)+E*(s*v-i*y),t[6]=-(n*(f*w-g*T)-c*(s*w-i*T)+E*(s*g-i*f)),t[7]=n*(f*v-g*y)-c*(s*v-i*y)+p*(s*g-i*f),t[8]=c*(h*w-v*x)-p*(l*w-g*x)+E*(l*v-g*h),t[9]=-(n*(h*w-v*x)-p*(r*w-i*x)+E*(r*v-i*h)),t[10]=n*(l*w-g*x)-c*(r*w-i*x)+E*(r*g-i*l),t[11]=-(n*(l*v-g*h)-c*(r*v-i*h)+p*(r*g-i*l)),t[12]=-(c*(h*T-y*x)-p*(l*T-f*x)+E*(l*y-f*h)),t[13]=n*(h*T-y*x)-p*(r*T-s*x)+E*(r*y-s*h),t[14]=-(n*(l*T-f*x)-c*(r*T-s*x)+E*(r*f-s*l)),t[15]=n*(l*y-f*h)-c*(r*y-s*h)+p*(r*f-s*l),t}function Gk(t){var e=t[0],n=t[1],r=t[2],s=t[3],i=t[4],c=t[5],l=t[6],f=t[7],g=t[8],p=t[9],h=t[10],y=t[11],v=t[12],E=t[13],x=t[14],T=t[15],w=e*c-n*i,D=e*l-r*i,M=e*f-s*i,O=n*l-r*c,R=n*f-s*c,b=r*f-s*l,L=g*E-p*v,k=g*x-h*v,B=g*T-y*v,j=p*x-h*E,z=p*T-y*E,$=h*T-y*x;return w*$-D*z+M*j+O*B-R*k+b*L}function Zt(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3],l=e[4],f=e[5],g=e[6],p=e[7],h=e[8],y=e[9],v=e[10],E=e[11],x=e[12],T=e[13],w=e[14],D=e[15],M=n[0],O=n[1],R=n[2],b=n[3];return t[0]=M*r+O*l+R*h+b*x,t[1]=M*s+O*f+R*y+b*T,t[2]=M*i+O*g+R*v+b*w,t[3]=M*c+O*p+R*E+b*D,M=n[4],O=n[5],R=n[6],b=n[7],t[4]=M*r+O*l+R*h+b*x,t[5]=M*s+O*f+R*y+b*T,t[6]=M*i+O*g+R*v+b*w,t[7]=M*c+O*p+R*E+b*D,M=n[8],O=n[9],R=n[10],b=n[11],t[8]=M*r+O*l+R*h+b*x,t[9]=M*s+O*f+R*y+b*T,t[10]=M*i+O*g+R*v+b*w,t[11]=M*c+O*p+R*E+b*D,M=n[12],O=n[13],R=n[14],b=n[15],t[12]=M*r+O*l+R*h+b*x,t[13]=M*s+O*f+R*y+b*T,t[14]=M*i+O*g+R*v+b*w,t[15]=M*c+O*p+R*E+b*D,t}function wt(t,e,n){var r=n[0],s=n[1],i=n[2],c,l,f,g,p,h,y,v,E,x,T,w;return e===t?(t[12]=e[0]*r+e[4]*s+e[8]*i+e[12],t[13]=e[1]*r+e[5]*s+e[9]*i+e[13],t[14]=e[2]*r+e[6]*s+e[10]*i+e[14],t[15]=e[3]*r+e[7]*s+e[11]*i+e[15]):(c=e[0],l=e[1],f=e[2],g=e[3],p=e[4],h=e[5],y=e[6],v=e[7],E=e[8],x=e[9],T=e[10],w=e[11],t[0]=c,t[1]=l,t[2]=f,t[3]=g,t[4]=p,t[5]=h,t[6]=y,t[7]=v,t[8]=E,t[9]=x,t[10]=T,t[11]=w,t[12]=c*r+p*s+E*i+e[12],t[13]=l*r+h*s+x*i+e[13],t[14]=f*r+y*s+T*i+e[14],t[15]=g*r+v*s+w*i+e[15]),t}function hc(t,e,n){var r=n[0],s=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ar(t,e,n,r){var s=r[0],i=r[1],c=r[2],l=Math.hypot(s,i,c),f,g,p,h,y,v,E,x,T,w,D,M,O,R,b,L,k,B,j,z,$,W,Z,te;return l<Le?null:(l=1/l,s*=l,i*=l,c*=l,f=Math.sin(n),g=Math.cos(n),p=1-g,h=e[0],y=e[1],v=e[2],E=e[3],x=e[4],T=e[5],w=e[6],D=e[7],M=e[8],O=e[9],R=e[10],b=e[11],L=s*s*p+g,k=i*s*p+c*f,B=c*s*p-i*f,j=s*i*p-c*f,z=i*i*p+g,$=c*i*p+s*f,W=s*c*p+i*f,Z=i*c*p-s*f,te=c*c*p+g,t[0]=h*L+x*k+M*B,t[1]=y*L+T*k+O*B,t[2]=v*L+w*k+R*B,t[3]=E*L+D*k+b*B,t[4]=h*j+x*z+M*$,t[5]=y*j+T*z+O*$,t[6]=v*j+w*z+R*$,t[7]=E*j+D*z+b*$,t[8]=h*W+x*Z+M*te,t[9]=y*W+T*Z+O*te,t[10]=v*W+w*Z+R*te,t[11]=E*W+D*Z+b*te,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function $E(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[4],c=e[5],l=e[6],f=e[7],g=e[8],p=e[9],h=e[10],y=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*s+g*r,t[5]=c*s+p*r,t[6]=l*s+h*r,t[7]=f*s+y*r,t[8]=g*s-i*r,t[9]=p*s-c*r,t[10]=h*s-l*r,t[11]=y*s-f*r,t}function HE(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[0],c=e[1],l=e[2],f=e[3],g=e[8],p=e[9],h=e[10],y=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s-g*r,t[1]=c*s-p*r,t[2]=l*s-h*r,t[3]=f*s-y*r,t[8]=i*r+g*s,t[9]=c*r+p*s,t[10]=l*r+h*s,t[11]=f*r+y*s,t}function WE(t,e,n){var r=Math.sin(n),s=Math.cos(n),i=e[0],c=e[1],l=e[2],f=e[3],g=e[4],p=e[5],h=e[6],y=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*s+g*r,t[1]=c*s+p*r,t[2]=l*s+h*r,t[3]=f*s+y*r,t[4]=g*s-i*r,t[5]=p*s-c*r,t[6]=h*s-l*r,t[7]=y*s-f*r,t}function KE(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function XE(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function zk(t,e,n){var r=n[0],s=n[1],i=n[2],c=Math.hypot(r,s,i),l,f,g;return c<Le?null:(c=1/c,r*=c,s*=c,i*=c,l=Math.sin(e),f=Math.cos(e),g=1-f,t[0]=r*r*g+f,t[1]=s*r*g+i*l,t[2]=i*r*g-s*l,t[3]=0,t[4]=r*s*g-i*l,t[5]=s*s*g+f,t[6]=i*s*g+r*l,t[7]=0,t[8]=r*i*g+s*l,t[9]=s*i*g-r*l,t[10]=i*i*g+f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Ak(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $k(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Hk(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function YE(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3],l=r+r,f=s+s,g=i+i,p=r*l,h=r*f,y=r*g,v=s*f,E=s*g,x=i*g,T=c*l,w=c*f,D=c*g;return t[0]=1-(v+x),t[1]=h+D,t[2]=y-w,t[3]=0,t[4]=h-D,t[5]=1-(p+x),t[6]=E+T,t[7]=0,t[8]=y+w,t[9]=E-T,t[10]=1-(p+v),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Wk(t,e){var n=new Nt(3),r=-e[0],s=-e[1],i=-e[2],c=e[3],l=e[4],f=e[5],g=e[6],p=e[7],h=r*r+s*s+i*i+c*c;return h>0?(n[0]=(l*c+p*r+f*i-g*s)*2/h,n[1]=(f*c+p*s+g*r-l*i)*2/h,n[2]=(g*c+p*i+l*s-f*r)*2/h):(n[0]=(l*c+p*r+f*i-g*s)*2,n[1]=(f*c+p*s+g*r-l*i)*2,n[2]=(g*c+p*i+l*s-f*r)*2),YE(t,e,n),t}function Kk(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function qE(t,e){var n=e[0],r=e[1],s=e[2],i=e[4],c=e[5],l=e[6],f=e[8],g=e[9],p=e[10];return t[0]=Math.hypot(n,r,s),t[1]=Math.hypot(i,c,l),t[2]=Math.hypot(f,g,p),t}function Dd(t,e){var n=new Nt(3);qE(n,e);var r=1/n[0],s=1/n[1],i=1/n[2],c=e[0]*r,l=e[1]*s,f=e[2]*i,g=e[4]*r,p=e[5]*s,h=e[6]*i,y=e[8]*r,v=e[9]*s,E=e[10]*i,x=c+p+E,T=0;return x>0?(T=Math.sqrt(x+1)*2,t[3]=.25*T,t[0]=(h-v)/T,t[1]=(y-f)/T,t[2]=(l-g)/T):c>p&&c>E?(T=Math.sqrt(1+c-p-E)*2,t[3]=(h-v)/T,t[0]=.25*T,t[1]=(l+g)/T,t[2]=(y+f)/T):p>E?(T=Math.sqrt(1+p-c-E)*2,t[3]=(y-f)/T,t[0]=(l+g)/T,t[1]=.25*T,t[2]=(h+v)/T):(T=Math.sqrt(1+E-c-p)*2,t[3]=(l-g)/T,t[0]=(y+f)/T,t[1]=(h+v)/T,t[2]=.25*T),t}function ZE(t,e,n,r){var s=e[0],i=e[1],c=e[2],l=e[3],f=s+s,g=i+i,p=c+c,h=s*f,y=s*g,v=s*p,E=i*g,x=i*p,T=c*p,w=l*f,D=l*g,M=l*p,O=r[0],R=r[1],b=r[2];return t[0]=(1-(E+T))*O,t[1]=(y+M)*O,t[2]=(v-D)*O,t[3]=0,t[4]=(y-M)*R,t[5]=(1-(h+T))*R,t[6]=(x+w)*R,t[7]=0,t[8]=(v+D)*b,t[9]=(x-w)*b,t[10]=(1-(h+E))*b,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Xk(t,e,n,r,s){var i=e[0],c=e[1],l=e[2],f=e[3],g=i+i,p=c+c,h=l+l,y=i*g,v=i*p,E=i*h,x=c*p,T=c*h,w=l*h,D=f*g,M=f*p,O=f*h,R=r[0],b=r[1],L=r[2],k=s[0],B=s[1],j=s[2],z=(1-(x+w))*R,$=(v+O)*R,W=(E-M)*R,Z=(v-O)*b,te=(1-(y+w))*b,F=(T+D)*b,P=(E+M)*L,ae=(T-D)*L,J=(1-(y+x))*L;return t[0]=z,t[1]=$,t[2]=W,t[3]=0,t[4]=Z,t[5]=te,t[6]=F,t[7]=0,t[8]=P,t[9]=ae,t[10]=J,t[11]=0,t[12]=n[0]+k-(z*k+Z*B+P*j),t[13]=n[1]+B-($*k+te*B+ae*j),t[14]=n[2]+j-(W*k+F*B+J*j),t[15]=1,t}function ec(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=n+n,l=r+r,f=s+s,g=n*c,p=r*c,h=r*l,y=s*c,v=s*l,E=s*f,x=i*c,T=i*l,w=i*f;return t[0]=1-h-E,t[1]=p+w,t[2]=y-T,t[3]=0,t[4]=p-w,t[5]=1-g-E,t[6]=v+x,t[7]=0,t[8]=y+T,t[9]=v-x,t[10]=1-g-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yk(t,e,n,r,s,i,c){var l=1/(n-e),f=1/(s-r),g=1/(i-c);return t[0]=i*2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*f,t[6]=0,t[7]=0,t[8]=(n+e)*l,t[9]=(s+r)*f,t[10]=(c+i)*g,t[11]=-1,t[12]=0,t[13]=0,t[14]=c*i*2*g,t[15]=0,t}function QE(t,e,n,r,s){var i=1/Math.tan(e/2),c;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(c=1/(r-s),t[10]=(s+r)*c,t[14]=2*s*r*c):(t[10]=-1,t[14]=-2*r),t}var qk=QE;function Zk(t,e,n,r,s){var i=1/Math.tan(e/2),c;return t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,s!=null&&s!==1/0?(c=1/(r-s),t[10]=s*c,t[14]=s*r*c):(t[10]=-1,t[14]=-r),t}function Qk(t,e,n,r){var s=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),c=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),f=2/(c+l),g=2/(s+i);return t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=g,t[6]=0,t[7]=0,t[8]=-((c-l)*f*.5),t[9]=(s-i)*g*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function PE(t,e,n,r,s,i,c){var l=1/(e-n),f=1/(r-s),g=1/(i-c);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*g,t[11]=0,t[12]=(e+n)*l,t[13]=(s+r)*f,t[14]=(c+i)*g,t[15]=1,t}var JE=PE;function Pk(t,e,n,r,s,i,c){var l=1/(e-n),f=1/(r-s),g=1/(i-c);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*f,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=g,t[11]=0,t[12]=(e+n)*l,t[13]=(s+r)*f,t[14]=i*g,t[15]=1,t}function IE(t,e,n,r){var s,i,c,l,f,g,p,h,y,v,E=e[0],x=e[1],T=e[2],w=r[0],D=r[1],M=r[2],O=n[0],R=n[1],b=n[2];return Math.abs(E-O)<Le&&Math.abs(x-R)<Le&&Math.abs(T-b)<Le?Ve(t):(p=E-O,h=x-R,y=T-b,v=1/Math.hypot(p,h,y),p*=v,h*=v,y*=v,s=D*y-M*h,i=M*p-w*y,c=w*h-D*p,v=Math.hypot(s,i,c),v?(v=1/v,s*=v,i*=v,c*=v):(s=0,i=0,c=0),l=h*c-y*i,f=y*s-p*c,g=p*i-h*s,v=Math.hypot(l,f,g),v?(v=1/v,l*=v,f*=v,g*=v):(l=0,f=0,g=0),t[0]=s,t[1]=l,t[2]=p,t[3]=0,t[4]=i,t[5]=f,t[6]=h,t[7]=0,t[8]=c,t[9]=g,t[10]=y,t[11]=0,t[12]=-(s*E+i*x+c*T),t[13]=-(l*E+f*x+g*T),t[14]=-(p*E+h*x+y*T),t[15]=1,t)}function Jk(t,e,n,r){var s=e[0],i=e[1],c=e[2],l=r[0],f=r[1],g=r[2],p=s-n[0],h=i-n[1],y=c-n[2],v=p*p+h*h+y*y;v>0&&(v=1/Math.sqrt(v),p*=v,h*=v,y*=v);var E=f*y-g*h,x=g*p-l*y,T=l*h-f*p;return v=E*E+x*x+T*T,v>0&&(v=1/Math.sqrt(v),E*=v,x*=v,T*=v),t[0]=E,t[1]=x,t[2]=T,t[3]=0,t[4]=h*T-y*x,t[5]=y*E-p*T,t[6]=p*x-h*E,t[7]=0,t[8]=p,t[9]=h,t[10]=y,t[11]=0,t[12]=s,t[13]=i,t[14]=c,t[15]=1,t}function Ik(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function eB(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function tB(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function ew(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function nB(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function rB(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function aB(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function sB(t,e){var n=t[0],r=t[1],s=t[2],i=t[3],c=t[4],l=t[5],f=t[6],g=t[7],p=t[8],h=t[9],y=t[10],v=t[11],E=t[12],x=t[13],T=t[14],w=t[15],D=e[0],M=e[1],O=e[2],R=e[3],b=e[4],L=e[5],k=e[6],B=e[7],j=e[8],z=e[9],$=e[10],W=e[11],Z=e[12],te=e[13],F=e[14],P=e[15];return Math.abs(n-D)<=Le*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(r-M)<=Le*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(s-O)<=Le*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(i-R)<=Le*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(c-b)<=Le*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-L)<=Le*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(f-k)<=Le*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(g-B)<=Le*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(p-j)<=Le*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(h-z)<=Le*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(y-$)<=Le*Math.max(1,Math.abs(y),Math.abs($))&&Math.abs(v-W)<=Le*Math.max(1,Math.abs(v),Math.abs(W))&&Math.abs(E-Z)<=Le*Math.max(1,Math.abs(E),Math.abs(Z))&&Math.abs(x-te)<=Le*Math.max(1,Math.abs(x),Math.abs(te))&&Math.abs(T-F)<=Le*Math.max(1,Math.abs(T),Math.abs(F))&&Math.abs(w-P)<=Le*Math.max(1,Math.abs(w),Math.abs(P))}var Rd=Zt,iB=ew;const Nd=Object.freeze(Object.defineProperty({__proto__:null,add:tB,adjoint:jk,clone:Bk,copy:$t,create:Ef,determinant:Gk,equals:sB,exactEquals:aB,frob:eB,fromQuat:ec,fromQuat2:Wk,fromRotation:zk,fromRotationTranslation:YE,fromRotationTranslationScale:ZE,fromRotationTranslationScaleOrigin:Xk,fromScaling:XE,fromTranslation:KE,fromValues:Uk,fromXRotation:Ak,fromYRotation:$k,fromZRotation:Hk,frustum:Yk,getRotation:Dd,getScaling:qE,getTranslation:Kk,identity:Ve,invert:An,lookAt:IE,mul:Rd,multiply:Zt,multiplyScalar:nB,multiplyScalarAndAdd:rB,ortho:JE,orthoNO:PE,orthoZO:Pk,perspective:qk,perspectiveFromFieldOfView:Qk,perspectiveNO:QE,perspectiveZO:Zk,rotate:ar,rotateX:$E,rotateY:HE,rotateZ:WE,scale:hc,set:Fk,str:Ik,sub:iB,subtract:ew,targetTo:Jk,translate:wt,transpose:Je},Symbol.toStringTag,{value:"Module"}));function tw(){var t=new Nt(3);return Nt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function oB(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function I2(t,e,n){var r=new Nt(3);return r[0]=t,r[1]=e,r[2]=n,r}function cB(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function nf(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ao(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Ea(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function xa(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function lB(t,e){var n=e[0]-t[0],r=e[1]-t[1],s=e[2]-t[2];return Math.hypot(n,r,s)}function uB(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function dc(t,e){var n=e[0],r=e[1],s=e[2],i=n*n+r*r+s*s;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function nw(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Eh(t,e,n){var r=e[0],s=e[1],i=e[2],c=n[0],l=n[1],f=n[2];return t[0]=s*f-i*l,t[1]=i*c-r*f,t[2]=r*l-s*c,t}function $e(t,e,n){var r=e[0],s=e[1],i=e[2],c=n[3]*r+n[7]*s+n[11]*i+n[15];return c=c||1,t[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/c,t[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/c,t[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/c,t}function eT(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function tT(t,e){var n=t[0],r=t[1],s=t[2],i=e[0],c=e[1],l=e[2];return Math.abs(n-i)<=Le*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-c)<=Le*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(s-l)<=Le*Math.max(1,Math.abs(s),Math.abs(l))}var Ld=Ea,fB=lB,rw=oB;(function(){var t=tw();return function(e,n,r,s,i,c){var l,f;for(n||(n=3),r||(r=0),s?f=Math.min(s*n+r,e.length):f=e.length,l=r;l<f;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],i(t,t,c),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2];return e}})();function gB(){var t=new Nt(4);return Nt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function hB(t,e,n,r){var s=new Nt(4);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s}function dB(t,e){var n=e[0],r=e[1],s=e[2],i=e[3],c=n*n+r*r+s*s+i*i;return c>0&&(c=1/Math.sqrt(c)),t[0]=n*c,t[1]=r*c,t[2]=s*c,t[3]=i*c,t}function _o(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3];return t[0]=n[0]*r+n[4]*s+n[8]*i+n[12]*c,t[1]=n[1]*r+n[5]*s+n[9]*i+n[13]*c,t[2]=n[2]*r+n[6]*s+n[10]*i+n[14]*c,t[3]=n[3]*r+n[7]*s+n[11]*i+n[15]*c,t}(function(){var t=gB();return function(e,n,r,s,i,c){var l,f;for(n||(n=4),r||(r=0),s?f=Math.min(s*n+r,e.length):f=e.length,l=r;l<f;l+=n)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],i(t,t,c),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();function ms(){var t=new Nt(4);return Nt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Up(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function pB(t,e){var n=Math.acos(e[3])*2,r=Math.sin(n/2);return r>Le?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function nT(t,e,n){var r=e[0],s=e[1],i=e[2],c=e[3],l=n[0],f=n[1],g=n[2],p=n[3];return t[0]=r*p+c*l+s*g-i*f,t[1]=s*p+c*f+i*l-r*g,t[2]=i*p+c*g+r*f-s*l,t[3]=c*p-r*l-s*f-i*g,t}function _u(t,e,n,r){var s=e[0],i=e[1],c=e[2],l=e[3],f=n[0],g=n[1],p=n[2],h=n[3],y,v,E,x,T;return v=s*f+i*g+c*p+l*h,v<0&&(v=-v,f=-f,g=-g,p=-p,h=-h),1-v>Le?(y=Math.acos(v),E=Math.sin(y),x=Math.sin((1-r)*y)/E,T=Math.sin(r*y)/E):(x=1-r,T=r),t[0]=x*s+T*f,t[1]=x*i+T*g,t[2]=x*c+T*p,t[3]=x*l+T*h,t}function yB(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function xB(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var s=0;e[4]>e[0]&&(s=1),e[8]>e[s*3+s]&&(s=2);var i=(s+1)%3,c=(s+2)%3;r=Math.sqrt(e[s*3+s]-e[i*3+i]-e[c*3+c]+1),t[s]=.5*r,r=.5/r,t[3]=(e[i*3+c]-e[c*3+i])*r,t[i]=(e[i*3+s]+e[s*3+i])*r,t[c]=(e[c*3+s]+e[s*3+c])*r}return t}var rT=hB,aw=dB;(function(){var t=tw(),e=I2(1,0,0),n=I2(0,1,0);return function(r,s,i){var c=nw(s,i);return c<-.999999?(Eh(t,e,s),rw(t)<1e-6&&Eh(t,n,s),dc(t,t),Up(r,t,Math.PI),r):c>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Eh(t,s,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+c,aw(r,r))}})();(function(){var t=ms(),e=ms();return function(n,r,s,i,c,l){return _u(t,r,c,l),_u(e,s,i,l),_u(n,t,e,2*l*(1-l)),n}})();(function(){var t=jE();return function(e,n,r,s){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=s[0],t[4]=s[1],t[7]=s[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],aw(e,xB(e,t))}})();var wh,aT;function vB(){return aT||(aT=1,wh=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var c=i[s];if(!t(e[c],n[c]))return!1}return!0}return e!==e&&n!==n}),wh}var mB=vB();const sw=Di(mB);var Mh,sT;function iw(){if(sT)return Mh;sT=1;var t=Object.prototype.toString;return Mh=function(n){var r=t.call(n),s=r==="[object Arguments]";return s||(s=r!=="[object Array]"&&n!==null&&typeof n=="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),s},Mh}var bh,iT;function TB(){if(iT)return bh;iT=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=iw(),s=Object.prototype.propertyIsEnumerable,i=!s.call({toString:null},"toString"),c=s.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(y){var v=y.constructor;return v&&v.prototype===y},g={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=(function(){if(typeof window>"u")return!1;for(var y in window)try{if(!g["$"+y]&&e.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{f(window[y])}catch{return!0}}catch{return!0}return!1})(),h=function(y){if(typeof window>"u"||!p)return f(y);try{return f(y)}catch{return!1}};t=function(v){var E=v!==null&&typeof v=="object",x=n.call(v)==="[object Function]",T=r(v),w=E&&n.call(v)==="[object String]",D=[];if(!E&&!x&&!T)throw new TypeError("Object.keys called on a non-object");var M=c&&x;if(w&&v.length>0&&!e.call(v,0))for(var O=0;O<v.length;++O)D.push(String(O));if(T&&v.length>0)for(var R=0;R<v.length;++R)D.push(String(R));else for(var b in v)!(M&&b==="prototype")&&e.call(v,b)&&D.push(String(b));if(i)for(var L=h(v),k=0;k<l.length;++k)!(L&&l[k]==="constructor")&&e.call(v,l[k])&&D.push(l[k]);return D}}return bh=t,bh}var Oh,oT;function SB(){if(oT)return Oh;oT=1;var t=Array.prototype.slice,e=iw(),n=Object.keys,r=n?function(c){return n(c)}:TB(),s=Object.keys;return r.shim=function(){if(Object.keys){var c=(function(){var l=Object.keys(arguments);return l&&l.length===arguments.length})(1,2);c||(Object.keys=function(f){return e(f)?s(t.call(f)):s(f)})}else Object.keys=r;return Object.keys||r},Oh=r,Oh}var Dh,cT;function ow(){if(cT)return Dh;cT=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return Dh=t,Dh}var Rh,lT;function CB(){return lT||(lT=1,Rh=SyntaxError),Rh}var Nh,uT;function EB(){return uT||(uT=1,Nh=TypeError),Nh}var Lh,fT;function wB(){return fT||(fT=1,Lh=Object.getOwnPropertyDescriptor),Lh}var Vh,gT;function MB(){if(gT)return Vh;gT=1;var t=wB();if(t)try{t([],"length")}catch{t=null}return Vh=t,Vh}var _h,hT;function bB(){if(hT)return _h;hT=1;var t=ow(),e=CB(),n=EB(),r=MB();return _h=function(i,c,l){if(!i||typeof i!="object"&&typeof i!="function")throw new n("`obj` must be an object or a function`");if(typeof c!="string"&&typeof c!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var f=arguments.length>3?arguments[3]:null,g=arguments.length>4?arguments[4]:null,p=arguments.length>5?arguments[5]:null,h=arguments.length>6?arguments[6]:!1,y=!!r&&r(i,c);if(t)t(i,c,{configurable:p===null&&y?y.configurable:!p,enumerable:f===null&&y?y.enumerable:!f,value:l,writable:g===null&&y?y.writable:!g});else if(h||!f&&!g&&!p)i[c]=l;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},_h}var kh,dT;function OB(){if(dT)return kh;dT=1;var t=ow(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},kh=e,kh}var Bh,pT;function cw(){if(pT)return Bh;pT=1;var t=SB(),e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",n=Object.prototype.toString,r=Array.prototype.concat,s=bB(),i=function(g){return typeof g=="function"&&n.call(g)==="[object Function]"},c=OB()(),l=function(g,p,h,y){if(p in g){if(y===!0){if(g[p]===h)return}else if(!i(y)||!y())return}c?s(g,p,h,!0):s(g,p,h)},f=function(g,p){var h=arguments.length>2?arguments[2]:{},y=t(p);e&&(y=r.call(y,Object.getOwnPropertySymbols(p)));for(var v=0;v<y.length;v+=1)l(g,y[v],p[y[v]],h[y[v]])};return f.supportsDescriptors=!!c,Bh=f,Bh}var ko={exports:{}},yT;function lw(){return yT||(yT=1,typeof self<"u"?ko.exports=self:typeof window<"u"?ko.exports=window:ko.exports=Function("return this")()),ko.exports}var Uh,xT;function uw(){if(xT)return Uh;xT=1;var t=lw();return Uh=function(){return typeof Ro!="object"||!Ro||Ro.Math!==Math||Ro.Array!==Array?t:Ro},Uh}var Fh,vT;function DB(){if(vT)return Fh;vT=1;var t=cw(),e=uw();return Fh=function(){var r=e();if(t.supportsDescriptors){var s=Object.getOwnPropertyDescriptor(r,"globalThis");(!s||s.configurable&&(s.enumerable||!s.writable||globalThis!==r))&&Object.defineProperty(r,"globalThis",{configurable:!0,enumerable:!1,value:r,writable:!0})}else(typeof globalThis!="object"||globalThis!==r)&&(r.globalThis=r);return r},Fh}var jh,mT;function RB(){if(mT)return jh;mT=1;var t=cw(),e=lw(),n=uw(),r=DB(),s=n(),i=function(){return s};return t(i,{getPolyfill:n,implementation:e,shim:r}),jh=i,jh}var NB=RB();const LB=Di(NB),Zn=LB(),fw={vtkObject:()=>null};function Pn(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Zn.console&&Zn.console.error&&Zn.console.error("Invalid VTK object"),null;const e=fw[t.vtkClass];if(!e)return Zn.console&&Zn.console.error&&Zn.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const n={...t};Object.keys(n).forEach(s=>{n[s]&&typeof n[s]=="object"&&n[s].vtkClass&&(n[s]=Pn(n[s]))});const r=e(n);return r&&r.modified&&r.modified(),r}function VB(t,e){fw[t]=e}Pn.register=VB;class Gh extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let Vd=0;const gw=t=>{throw new Error(`Named parameter '${t}' is missing`)},hw=Symbol("void");function _B(){return Vd}const dw={};function us(){}const kB=["log","debug","info","warn","error","time","timeEnd","group","groupEnd"];kB.forEach(t=>{dw[t]=us});Zn.console=console.hasOwnProperty("log")?console:dw;const Oa={debug:us,error:Zn.console.error||us,info:Zn.console.info||us,log:Zn.console.log||us,warn:Zn.console.warn||us};function pw(t,e){Oa[t]&&(Oa[t]=e||us)}function yw(){Oa.log(...arguments)}function xw(){Oa.info(...arguments)}function rf(){Oa.debug(...arguments)}function we(){Oa.error(...arguments)}function wf(){Oa.warn(...arguments)}const TT={};function vw(t){TT[t]||(Oa.error(t),TT[t]=!0)}const jt=Object.create(null);jt.Float32Array=Float32Array;jt.Float64Array=Float64Array;jt.Uint8Array=Uint8Array;jt.Int8Array=Int8Array;jt.Uint16Array=Uint16Array;jt.Int16Array=Int16Array;jt.Uint32Array=Uint32Array;jt.Int32Array=Int32Array;jt.Uint8ClampedArray=Uint8ClampedArray;try{jt.BigInt64Array=BigInt64Array,jt.BigUint64Array=BigUint64Array}catch{}function Vi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new(jt[t]||Float64Array)(...n)}function Fp(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return(jt[t]||Float64Array).from(...n)}function Mf(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ut(t){return Mf(t[0]==="_"?t.slice(1):t)}function mw(t){return t.charAt(0).toLowerCase()+t.slice(1)}function Tw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const r=["TB","GB","MB","KB"];let s=Number(t),i="B";for(;s>n;)s/=n,i=r.pop();return`${s.toFixed(e)} ${i}`}function Sw(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const n=[];let r=t;for(;r>1e3;)n.push(`000${r%1e3}`.slice(-3)),r=Math.floor(r/1e3);return r>0&&n.push(r),n.reverse(),n.join(e)}function Cw(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function BB(t){return Object.values(jt).some(e=>t instanceof e)}function UB(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}function FB(t,e){return Object.keys(t).find(n=>t[n]===e)}function Ew(t){return t&&t.isA?t.getState():t}function jp(t){setTimeout(t,0)}function ww(t,e){const n=performance.now();t.finally(()=>{const r=performance.now()-n;e(r)})}function Wt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Cw(e);const n=[];if(Number.isInteger(e.mtime)||(e.mtime=++Vd),!("classHierarchy"in e))e.classHierarchy=new Gh("vtkObject");else if(!(e.classHierarchy instanceof Gh)){const i=new Gh;for(let c=0;c<e.classHierarchy.length;c++)i.push(e.classHierarchy[c]);e.classHierarchy=i}function r(i){n[i]=null}function s(i){function c(){r(i)}return Object.freeze({unsubscribe:c})}return t.isDeleted=()=>!!e.deleted,t.modified=i=>{if(e.deleted){we("instance deleted - cannot call any method");return}i&&i<t.getMTime()||(e.mtime=++Vd,n.forEach(c=>c&&c(t)))},t.onModified=i=>{if(e.deleted)return we("instance deleted - cannot call any method"),null;const c=n.length;return n.push(i),s(c)},t.getMTime=()=>e.mtime,t.isA=i=>{let c=e.classHierarchy.length;for(;c--;)if(e.classHierarchy[c]===i)return!0;return!1},t.getClassName=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-i]},t.set=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=!1;return Object.keys(i).forEach(g=>{const p=l?null:t[`set${Mf(g)}`];p&&Array.isArray(i[g])&&p.length>1?f=p(...i[g])||f:p?f=p(i[g])||f:(["mtime"].indexOf(g)===-1&&!c&&wf(`Warning: Set value to model directly ${g}, ${i[g]}`),f=e[g]!==i[g]||f,e[g]=i[g])}),f},t.get=function(){for(var i=arguments.length,c=new Array(i),l=0;l<i;l++)c[l]=arguments[l];if(!c.length)return e;const f={};return c.forEach(g=>{f[g]=e[g]}),f},t.getReferenceByName=i=>e[i],t.delete=()=>{Object.keys(e).forEach(i=>delete e[i]),n.forEach((i,c)=>r(c)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const i={...e,vtkClass:t.getClassName()};Object.keys(i).forEach(l=>{i[l]===null||i[l]===void 0||l[0]==="_"?delete i[l]:i[l].isA?i[l]=i[l].getState():Array.isArray(i[l])?i[l]=i[l].map(Ew):BB(i[l])&&(i[l]=Array.from(i[l]))});const c={};return Object.keys(i).sort().forEach(l=>{c[l]=i[l]}),c.mtime&&delete c.mtime,c},t.shallowCopy=function(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${i.getClassName()} into ${t.getClassName()}`);const l=i.get(),f=Object.keys(e).sort();Object.keys(l).sort().forEach(p=>{const h=f.indexOf(p);h===-1?c&&rf(`add ${p} in shallowCopy`):f.splice(h,1),e[p]=l[p]}),f.length&&c&&rf(`Untouched keys: ${f.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const jB={object(t,e,n){return function(){return{...e[n.name]}}}};function Cn(t,e,n){n.forEach(r=>{if(typeof r=="object"){const s=jB[r.type];s?t[`get${ut(r.name)}`]=s(t,e,r):t[`get${ut(r.name)}`]=()=>e[r.name]}else t[`get${ut(r)}`]=()=>e[r]})}const Mw={enum(t,e,n){const r=`_on${ut(n.name)}Changed`;return s=>{if(typeof s=="string"){if(n.enum[s]!==void 0)return e[n.name]!==n.enum[s]?(e[n.name]=n.enum[s],t.modified(),!0):!1;throw we(`Set Enum with invalid argument ${n}, ${s}`),new RangeError("Set Enum with invalid string argument")}if(typeof s=="number"){if(e[n.name]!==s){if(Object.keys(n.enum).map(i=>n.enum[i]).indexOf(s)!==-1){const i=e[n.name];return e[n.name]=s,e[r]?.(t,e,s,i),t.modified(),!0}throw we(`Set Enum outside numeric range ${n}, ${s}`),new RangeError("Set Enum outside numeric range")}return!1}throw we(`Set Enum with invalid argument (String/Number) ${n}, ${s}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,n){n.params?.length===1&&wf('Setter of type "object" with a single "param" field is not supported');const r=`_on${ut(n.name)}Changed`;return function(){for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];let l;if(i.length>1&&n.params?.length?l=n.params.reduce((f,g,p)=>Object.assign(f,{[g]:i[p]}),{}):l=i[0],!sw(e[n.name],l)){const f=e[n.name];return e[n.name]=l,e[r]?.(t,e,l,f),t.modified(),!0}return!1}}};function ST(t){if(typeof t=="object"){const e=Mw[t.type];if(e)return(n,r)=>e(n,r,t);throw we(`No setter for field ${t}`),new TypeError("No setter for field")}return function(n,r){const s=`_on${ut(t)}Changed`;return function(c){if(r.deleted)return we("instance deleted - cannot call any method"),!1;if(r[t]!==c){const l=r[t.name];return r[t]=c,r[s]?.(n,r,c,l),n.modified(),!0}return!1}}}function Dc(t,e,n){n.forEach(r=>{typeof r=="object"?t[`set${ut(r.name)}`]=ST(r)(t,e):t[`set${ut(r)}`]=ST(r)(t,e)})}function Gt(t,e,n){Cn(t,e,n),Dc(t,e,n)}function _i(t,e,n){n.forEach(r=>{t[`get${ut(r)}`]=()=>e[r]?Array.from(e[r]):e[r],t[`get${ut(r)}ByReference`]=()=>e[r]})}function Gp(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;n.forEach(i=>{if(e[i]&&r&&e[i].length!==r)throw new RangeError(`Invalid initial number of values for array (${i})`);const c=`_on${ut(i)}Changed`;t[`set${ut(i)}`]=function(){if(e.deleted)return we("instance deleted - cannot call any method"),!1;for(var l=arguments.length,f=new Array(l),g=0;g<l;g++)f[g]=arguments[g];let p=f,h,y=!1;if(p.length===1&&(p[0]==null||p[0].length>=0)&&(p=p[0],y=!0),p==null)h=e[i]!==p;else{if(r&&p.length!==r)if(p.length<r&&s!==void 0)for(p=Array.from(p),y=!1;p.length<r;)p.push(s);else throw new RangeError(`Invalid number of values for array setter (${i})`);h=e[i]==null||e[i].length!==p.length;for(let v=0;!h&&v<p.length;++v)h=e[i][v]!==p[v];h&&y&&(p=Array.from(p))}if(h){const v=e[i.name];e[i]=p,e[c]?.(t,e,p,v),t.modified()}return h},t[`set${ut(i)}From`]=l=>{const f=e[i];l.forEach((g,p)=>{f[p]=g})}})}function zp(t,e,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;_i(t,e,n),Gp(t,e,n,r,s)}function Rc(t,e,n){for(let r=0;r<n.length;r++){const s=n[r];e[s]!==void 0&&(e[`_${s}`]=e[s],delete e[s])}}function bw(t,e,n,r){e.inputData?e.inputData=e.inputData.map(Pn):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(Pn):e.inputConnection=[],e.output?e.output=e.output.map(Pn):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(Pn):e.inputArrayToProcess=[],e.numberOfInputs=n;function s(v){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){we("instance deleted - cannot call any method");return}if(E>=e.numberOfInputs){we(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[E]!==v||e.inputConnection[E])&&(e.inputData[E]=v,e.inputConnection[E]=null,t.modified&&t.modified())}function i(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]&&(e.inputData[v]=e.inputConnection[v]()),e.inputData[v]}function c(v){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){we("instance deleted - cannot call any method");return}if(E>=e.numberOfInputs){let x=`algorithm ${t.getClassName()} only has `;x+=`${e.numberOfInputs}`,x+=" input ports. To add more input ports, use addInputConnection()",we(x);return}e.inputData[E]=null,e.inputConnection[E]=v}function l(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[v]}function f(){let v=e.numberOfInputs;for(;v&&!e.inputData[v-1]&&!e.inputConnection[v-1];)v--;return v===e.numberOfInputs&&e.numberOfInputs++,v}function g(v){if(e.deleted){we("instance deleted - cannot call any method");return}c(v,f())}function p(v){if(e.deleted){we("instance deleted - cannot call any method");return}s(v,f())}function h(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(we("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[v])}t.shouldUpdate=()=>{const v=t.getMTime();let E=1/0,x=r;for(;x--;){if(!e.output[x]||e.output[x].isDeleted())return!0;const T=e.output[x].getMTime();if(T<v)return!0;T<E&&(E=T)}for(x=e.numberOfInputs;x--;)if(e.inputConnection[x]?.filter.shouldUpdate()||t.getInputData(x)?.getMTime()>E)return!0;return!1};function y(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const E=()=>h(v);return E.filter=t,E}if(e.numberOfInputs){let v=e.numberOfInputs;for(;v--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=s,t.setInputConnection=c,t.addInputData=p,t.addInputConnection=g,t.getInputData=i,t.getInputConnection=l}r&&(t.getOutputData=h,t.getOutputPort=y),t.update=()=>{const v=[];if(e.numberOfInputs){let E=0;for(;E<e.numberOfInputs;)v[E]=t.getInputData(E),E++}t.requestData&&!t.isDeleted()&&t.shouldUpdate()&&t.requestData(v,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>r||e.output.length,t.getInputArrayToProcess=v=>{const E=e.inputArrayToProcess[v],x=e.inputData[v];return E&&x?x[`get${E.fieldAssociation}`]().getArray(E.arrayName):null},t.setInputArrayToProcess=function(v,E,x){let T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<v;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[v]={arrayName:E,fieldAssociation:x,attributeType:T}}}const Ap=Symbol("Event abort");function Ow(t,e,n){const r=[],s=t.delete;let i=1;function c(g){for(let p=0;p<r.length;++p){const[h]=r[p];if(h===g){r.splice(p,1);return}}}function l(g){function p(){c(g)}return Object.freeze({unsubscribe:p})}function f(){if(e.deleted){we("instance deleted - cannot call any method");return}const g=r.slice();for(let p=0;p<g.length;++p){const[,h,y]=g[p];if(h){if(y<0)setTimeout(()=>h.apply(t,arguments),1-y);else if(h.apply(t,arguments)===Ap)break}}}t[`invoke${ut(n)}`]=f,t[`on${ut(n)}`]=function(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!g.apply)return console.error(`Invalid callback for event ${n}`),null;if(e.deleted)return we("instance deleted - cannot call any method"),null;const h=i++;return r.push([h,g,p]),r.sort((y,v)=>v[2]-y[2]),l(h)},t.delete=()=>{s(),r.forEach(g=>{let[p]=g;return c(p)})}}function et(t,e){const n=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s={},i={};return t(i,s,r),Object.freeze(i)};return e&&Pn.register(e,n),n}function Dw(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return e.filter(c=>!!c).map(c=>c(...s))}}function $p(t){return t&&t.isA&&t.isA("vtkObject")}function af(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if($p(t)){if(r.indexOf(t)>=0)return n;r.push(t);const s=e(t);s!==void 0&&n.push(s);const i=t.get();Object.keys(i).forEach(c=>{const l=i[c];Array.isArray(l)?l.forEach(f=>{af(f,e,n,r)}):af(l,e,n,r)})}return n}function Rw(t,e,n){var r=this;let s;const i=function(){for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];const g=r,p=()=>{s=null,n||t.apply(g,l)},h=n&&!s;clearTimeout(s),s=setTimeout(p,e),h&&t.apply(g,l)};return i.cancel=()=>clearTimeout(s),i}function Nw(t,e){let n=!1,r=null;function s(){n=!1,r!==null&&(i(...r),r=null)}function i(){for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];if(n){r=l;return}n=!0,t(...l),setTimeout(s,e)}return i}function Hp(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},n),t.setKey=(r,s)=>{e.keystore[r]=s},t.getKey=r=>e.keystore[r],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=r=>delete e.keystore[r],t.clearKeystore=()=>t.getAllKeys().forEach(r=>delete e.keystore[r])}let GB=1;const iu="__root__";function Lw(t,e){Hp(t,e);const n=t.delete;e.proxyId=`${GB++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),Cn(t,e,["proxyId","proxyGroup","proxyName"]),Gt(t,e,["proxyManager"]);const r={},s={};function i(g,p){s[p]||(s[p]=[]);const h=s[p];for(let y=0;y<g.length;y++)h.push(g[y].name),r[g[y].name]=g[y],g[y].children&&g[y].children.length&&i(g[y].children,g[y].name)}i(e.ui,iu),t.updateUI=g=>{e.ui=JSON.parse(JSON.stringify(g||[])),Object.keys(r).forEach(p=>delete r[p]),Object.keys(s).forEach(p=>delete s[p]),i(e.ui,iu),t.modified()};function c(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iu;return s[g]}t.updateProxyProperty=(g,p)=>{const h=r[g];h?Object.assign(h,p):r[g]={...p}},t.activate=()=>{if(e.proxyManager){const g=`setActive${ut(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[g]&&e.proxyManager[g](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(g,p)=>{p in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[p]=[]),e.propertyLinkSubscribers[p].push(g)},t.gcPropertyLinks=g=>{const p=e.propertyLinkSubscribers[g]||[];for(;p.length;)p.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(g){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[g])return e.propertyLinkMap[g];let h=null;const y=[];let v=0,E=!1;function x(O){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E)return null;const b=[];let L=null;for(v=y.length;v--;){const B=y[v];B.instance===O?L=B:b.push(B)}if(!L)return null;const k=L.instance[`get${ut(L.propertyName)}`]();if(!UB(k,h)||R){for(h=k,E=!0;b.length;){const B=b.pop();B.instance.set({[B.propertyName]:h})}E=!1}return e.propertyLinkMap[g].persistent&&(e.propertyLinkMap[g].value=k),k}function T(O,R){const b=[];for(v=y.length;v--;){const L=y[v];L.instance===O&&(L.propertyName===R||R===void 0)&&(L.subscription.unsubscribe(),b.push(v))}for(;b.length;)y.splice(b.pop(),1)}function w(O,R){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const L=O.onModified(x),k=y[0];return y.push({instance:O,propertyName:R,subscription:L}),b&&(e.propertyLinkMap[g].persistent&&e.propertyLinkMap[g].value!==void 0?O.set({[R]:e.propertyLinkMap[g].value}):k&&x(k.instance,!0)),{unsubscribe:()=>T(O,R)}}function D(){for(;y.length;)y.pop().subscription.unsubscribe()}const M={bind:w,unbind:T,unsubscribe:D,persistent:p};return e.propertyLinkMap[g]=M,M};function l(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:iu;const p=[],h=e.proxyId,y=c(g)||[];for(let v=0;v<y.length;v++){const E=y[v],x=t[`get${ut(E)}`],T=x?x():void 0,w={id:h,name:E,value:T},D=l(E);D.length&&(w.children=D),p.push(w)}return p}t.listPropertyNames=()=>l().map(g=>g.name),t.getPropertyByName=g=>l().find(p=>p.name===g),t.getPropertyDomainByName=g=>(r[g]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:l()}),t.delete=()=>{const g=Object.keys(e.propertyLinkMap);let p=g.length;for(;p--;)e.propertyLinkMap[g[p]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),n()},t.getState=()=>null;function f(){if(e.links)for(let g=0;g<e.links.length;g++){const{link:p,property:h,persistent:y,updateOnBind:v,type:E}=e.links[g];if(E==="application"){const x=e.proxyManager.getPropertyLink(p,y);t.registerPropertyLinkForGC(x,"application"),x.bind(t,h,v)}}}jp(f)}function Vw(t,e,n){const r=t.delete,s=[],i=Object.keys(n);let c=i.length;for(;c--;){const l=i[c],{modelKey:f,property:g,modified:p=!0}=n[l],h=ut(g),y=ut(l);t[`get${y}`]=e[f][`get${h}`],t[`set${y}`]=e[f][`set${h}`],p&&s.push(e[f].onModified(t.modified))}t.delete=()=>{for(;s.length;)s.pop().unsubscribe();r()}}function _w(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function s(l){const f=Object.keys(l);let g=f.length;for(;g--;){const p=f[g];e[p].set(l[p])}}const i=Object.keys(r);let c=i.length;for(;c--;){const l=i[c];e[l]=r[l];const f=n[l];t[`set${ut(l)}`]=g=>{if(g!==e[l]){e[l]=g;const p=f[g];s(p),t.modified()}}}i.length&&Cn(t,e,i)}const CT=10,ET=40,wT=800;function kw(t){let e=0,n=0,r=0,s=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*CT,s=n*CT,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||s)&&t.deltaMode&&(t.deltaMode===1?(r*=ET,s*=ET):(r*=wT,s*=wT)),r&&!e&&(e=r<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:e,spinY:n||e,pixelX:r,pixelY:s||r}}var V={algo:bw,capitalize:Mf,chain:Dw,debounce:Rw,enumToString:FB,event:Ow,EVENT_ABORT:Ap,formatBytesToProperUnit:Tw,formatNumbersWithThousandSeparator:Sw,get:Cn,getArray:_i,getCurrentGlobalMTime:_B,getStateArrayMapFunc:Ew,isVtkObject:$p,keystore:Hp,measurePromiseExecution:ww,moveToProtected:Rc,newInstance:et,newTypedArray:Vi,newTypedArrayFrom:Fp,normalizeWheel:kw,obj:Wt,proxy:Lw,proxyPropertyMapping:Vw,proxyPropertyState:_w,safeArrays:Cw,set:Dc,setArray:Gp,setGet:Gt,setGetArray:zp,setImmediate:jp,setLoggerFunction:pw,throttle:Nw,traverseInstanceTree:af,TYPED_ARRAYS:jt,uncapitalize:mw,VOID:hw,vtkDebugMacro:rf,vtkErrorMacro:we,vtkInfoMacro:xw,vtkLogMacro:yw,vtkOnceErrorMacro:vw,vtkWarningMacro:wf,objectSetterMap:Mw,requiredParam:gw},fr=Object.freeze({__proto__:null,requiredParam:gw,VOID:hw,setLoggerFunction:pw,vtkLogMacro:yw,vtkInfoMacro:xw,vtkDebugMacro:rf,vtkErrorMacro:we,vtkWarningMacro:wf,vtkOnceErrorMacro:vw,TYPED_ARRAYS:jt,newTypedArray:Vi,newTypedArrayFrom:Fp,capitalize:Mf,_capitalize:ut,uncapitalize:mw,formatBytesToProperUnit:Tw,formatNumbersWithThousandSeparator:Sw,setImmediateVTK:jp,measurePromiseExecution:ww,obj:Wt,get:Cn,set:Dc,setGet:Gt,getArray:_i,setArray:Gp,setGetArray:zp,moveToProtected:Rc,algo:bw,EVENT_ABORT:Ap,event:Ow,newInstance:et,chain:Dw,isVtkObject:$p,traverseInstanceTree:af,debounce:Rw,throttle:Nw,keystore:Hp,proxy:Lw,proxyPropertyMapping:Vw,proxyPropertyState:_w,normalizeWheel:kw,default:V});const{vtkErrorMacro:zB}=V,AB=["Build","Render"];function $B(t,e){e.classHierarchy.push("vtkViewNode");function n(s,i){for(let c=0;c<e.children.length;++c){const l=(i+1+c)%e.children.length;if(e.children[l]===s)return e.children[l]=e.children[i],e.children[i]=s,!0}return!1}t.build=s=>{},t.render=s=>{},t.traverse=s=>{const i=s.getTraverseOperation(),c=t[i];if(c){c(s);return}t.apply(s,!0);for(let l=0;l<e.children.length;l++)e.children[l].traverse(s);t.apply(s,!1)},t.apply=(s,i)=>{const c=t[s.getOperation()];c&&c(i,s)},t.getViewNodeFor=function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(i&&i.renderable===s)return i;if(e.renderable===s)return t;for(let c=0;c<e.children.length;++c){const f=e.children[c].getViewNodeFor(s);if(f)return f}},t.getFirstAncestorOfType=s=>e._parent?e._parent.isA(s)?e._parent:e._parent.getFirstAncestorOfType(s):null,t.getLastAncestorOfType=s=>{if(!e._parent)return null;const i=e._parent.getLastAncestorOfType(s);return i||(e._parent.isA(s)?e._parent:null)},t.addMissingNode=s=>{if(!s)return;const i=e._renderableChildMap.get(s);if(i!==void 0)return i.setVisited(!0),i;const c=t.createViewNode(s);if(c)return c.setParent(t),c.setVisited(!0),e._renderableChildMap.set(s,c),e.children.push(c),c},t.addMissingNodes=function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!s||!s.length)return;let c;for(let l=0;l<s.length;++l){const f=s[l],g=t.addMissingNode(f);i&&g!==void 0&&(c===void 0?c=e.children.lastIndexOf(g):e.children[c]!==g&&n(e.children,g),c++)}},t.addMissingChildren=s=>{if(!(!s||!s.length))for(let i=0;i<s.length;++i){const c=s[i];if(e.children.indexOf(c)===-1){c.setParent(t),e.children.push(c);const f=c.getRenderable();f&&e._renderableChildMap.set(f,c)}c.setVisited(!0)}},t.removeNode=s=>{const i=e.children.findIndex(l=>l===s);if(i<0)return!1;const c=s.getRenderable();return c&&e._renderableChildMap.delete(c),s.delete(),e.children.splice(i,1),!0},t.prepareNodes=()=>{for(let s=0;s<e.children.length;++s)e.children[s].setVisited(!1)},t.setVisited=s=>{e.visited=s},t.removeUnusedNodes=()=>{let s=0;for(let i=0;i<e.children.length;++i){const c=e.children[i];if(c.getVisited())e.children[s++]=c,c.setVisited(!1);else{const f=c.getRenderable();f&&e._renderableChildMap.delete(f),c.delete()}}e.children.length=s},t.createViewNode=s=>{if(!e.myFactory)return zB("Cannot create view nodes without my own factory"),null;const i=e.myFactory.createNode(s);return i&&i.setRenderable(s),i};const r=t.delete;t.delete=()=>{for(let s=0;s<e.children.length;s++)e.children[s].delete();r()}}const HB={renderable:null,myFactory:null,children:[],visited:!1};function Bw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HB,n),V.obj(t,e),V.event(t,e,"event"),e._renderableChildMap=new Map,V.get(t,e,["visited"]),V.setGet(t,e,["_parent","renderable","myFactory"]),V.getArray(t,e,["children"]),V.moveToProtected(t,e,["parent"]),$B(t,e)}const WB=V.newInstance(Bw,"vtkViewNode");var ft={newInstance:WB,extend:Bw,PASS_TYPES:AB};function KB(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=n=>{if(n.isDeleted())return null;let r=0,s=n.getClassName(r++),i=!1;const c=Object.keys(e.overrides);for(;s&&!i;)c.indexOf(s)!==-1?i=!0:s=n.getClassName(r++);if(!i)return null;const l=e.overrides[s]();return l.setMyFactory(t),l}}const XB={};function Uw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XB,n),V.obj(t,e),KB(t,e)}const YB=V.newInstance(Uw,"vtkViewNodeFactory");var Fw={newInstance:YB,extend:Uw};const jw=Object.create(null);function $n(t,e){jw[t]=e}function qB(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const ZB={};function Gw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZB,n),e.overrides=jw,Fw.extend(t,e,n),qB(t,e)}const QB=V.newInstance(Gw,"vtkOpenGLViewNodeFactory");var PB={newInstance:QB,extend:Gw};function JB(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=n=>{if(n){const r=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),e.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=n=>{if(n!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||n.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){$t(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),kp(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),Bp(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Je(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const r=e._openGLRenderer.getAspectRatio();$t(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(r,-1,1)),Je(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Zt(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=n}return e.keyMatrices}}const IB={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function eU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,IB,n),ft.extend(t,e,n),e.keyMatrixTime={},Wt(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},Gt(t,e,["context","keyMatrixTime"]),JB(t,e)}const tU=et(eU);$n("vtkCamera",tU);const{vtkDebugMacro:nU}=fr;function rU(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps(),!0),t.removeUnusedNodes()}},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let s=0;s<r.length;++s)r[s].getSwitch()>0&&n++;return n||(nU("No lights are on, creating one."),e.renderable.createLight()),n},t.zBufferPass=n=>{if(n){let r=0;const s=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),r|=s.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(s.clearDepth(1),r|=s.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const i=t.getTiledSizeAndOrigin();s.enable(s.SCISSOR_TEST),s.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),s.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),s.colorMask(!0,!0,!0,!0),r&&s.clear(r),s.enable(s.DEPTH_TEST)}},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.cameraPass=n=>{n&&t.clear()},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],s=n[0]-r[0],i=n[1]-r[1],c=e._parent.normalizedDisplayToDisplay(s,i),l=Math.round(c[0]),f=Math.round(c[1]),g=n[2]-r[0],p=n[3]-r[1],h=e._parent.normalizedDisplayToDisplay(g,p);let y=Math.round(h[0])-l,v=Math.round(h[1])-f;return y<0&&(y=0),v<0&&(v=0),{usize:y,vsize:v,lowerLeftU:l,lowerLeftV:f}},t.clear=()=>{let n=0;const r=e.context;if(!e.renderable.getTransparent()){const i=e.renderable.getBackgroundByReference();r.clearColor(i[0],i[1],i[2],i[3]),n|=r.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,r.depthMask(!0)),r.colorMask(!0,!0,!0,!0);const s=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),r.viewport(s.lowerLeftU,s.lowerLeftV,s.usize,s.vsize),n&&r.clear(n),r.enable(r.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(n=>{n.modified()})},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const aU={context:null,_openGLRenderWindow:null,selector:null};function sU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aU,n),ft.extend(t,e,n),Cn(t,e,["shaderCache"]),Gt(t,e,["selector"]),Rc(t,e,["openGLRenderWindow"]),rU(t,e)}const iU=et(sU,"vtkOpenGLRenderer");$n("vtkRenderer",iU);function oU(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=n=>{if(n){e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const s=e.children[r];s.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(s)):e.oglmapper=s}}},t.traverseZBufferPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOpaqueZBufferPass=n=>t.traverseOpaquePass(n),t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.zBufferPass=(n,r)=>t.opaquePass(n,r),t.opaqueZBufferPass=(n,r)=>t.opaquePass(n,r),t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let s=0;s<e.activeTextures.length;s++)e.activeTextures[s].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(e._openGLRenderer.getSelector()&&e.renderable.getNestedPickable()),t.activateTextures();else if(e.activeTextures)for(let s=0;s<e.activeTextures.length;s++)e.activeTextures[s].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),$t(e.keyMatrices.mcwc,e.renderable.getMatrix()),Je(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?Na(e.keyMatrices.normalMatrix):(kp(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),Bp(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),GE(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const cU={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function lU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,cU,n),ft.extend(t,e,n),e.keyMatrixTime={},Wt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Na(new Float64Array(9)),mcwc:Ve(new Float64Array(16))},Gt(t,e,["context"]),Cn(t,e,["activeTextures"]),oU(t,e)}const uU=et(lU);$n("vtkActor",uU);function fU(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=n=>{if(n){if(!e.renderable)return;e._openGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let r=0;r<e.children.length;r++){const s=e.children[r];s.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(s)):e.oglmapper=s}}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOverlayActorCount()}},t.traverseOpaquePass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.traverseOverlayPass=n=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(n,!0),e.oglmapper.traverse(n),t.apply(n,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let n=0;n<e.ogltextures.length;n++){const r=e.ogltextures[n];r.render(),r.getHandle()&&e.activeTextures.push(r)}}},t.opaquePass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let s=0;s<e.activeTextures.length;s++)e.activeTextures[s].deactivate()},t.translucentPass=(n,r)=>{if(n)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let s=0;s<e.activeTextures.length;s++)e.activeTextures[s].deactivate()},t.overlayPass=(n,r)=>{if(n)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let s=0;s<e.activeTextures.length;s++)e.activeTextures[s].deactivate()}}const gU={context:null,activeTextures:null};function hU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gU,n),ft.extend(t,e,n),Gt(t,e,["context"]),Cn(t,e,["activeTextures"]),fU(t,e)}const dU=et(hU);$n("vtkActor2D",dU);function ku(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pU(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zw(t){let e,n,r;t.length!==2?(e=ku,n=(l,f)=>ku(t(l),f),r=(l,f)=>t(l)-f):(e=t===ku||t===pU?t:yU,n=t,r=t);function s(l,f,g=0,p=l.length){if(g<p){if(e(f,f)!==0)return p;do{const h=g+p>>>1;n(l[h],f)<0?g=h+1:p=h}while(g<p)}return g}function i(l,f,g=0,p=l.length){if(g<p){if(e(f,f)!==0)return p;do{const h=g+p>>>1;n(l[h],f)<=0?g=h+1:p=h}while(g<p)}return g}function c(l,f,g=0,p=l.length){const h=s(l,f,g,p-1);return h>g&&r(l[h-1],f)>-r(l[h],f)?h-1:h}return{left:s,center:c,right:i}}function yU(){return 0}function xU(t){return t===null?NaN:+t}const vU=zw(ku),mU=vU.right;zw(xU).center;const TU=Math.sqrt(50),SU=Math.sqrt(10),CU=Math.sqrt(2);function sf(t,e,n){const r=(e-t)/Math.max(0,n),s=Math.floor(Math.log10(r)),i=r/Math.pow(10,s),c=i>=TU?10:i>=SU?5:i>=CU?2:1;let l,f,g;return s<0?(g=Math.pow(10,-s)/c,l=Math.round(t*g),f=Math.round(e*g),l/g<t&&++l,f/g>e&&--f,g=-g):(g=Math.pow(10,s)*c,l=Math.round(t/g),f=Math.round(e/g),l*g<t&&++l,f*g>e&&--f),f<l&&.5<=n&&n<2?sf(t,e,n*2):[l,f,g]}function EU(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[s,i,c]=r?sf(e,t,n):sf(t,e,n);if(!(i>=s))return[];const l=i-s+1,f=new Array(l);if(r)if(c<0)for(let g=0;g<l;++g)f[g]=(i-g)/-c;else for(let g=0;g<l;++g)f[g]=(i-g)*c;else if(c<0)for(let g=0;g<l;++g)f[g]=(s+g)/-c;else for(let g=0;g<l;++g)f[g]=(s+g)*c;return f}function _d(t,e,n){return e=+e,t=+t,n=+n,sf(t,e,n)[2]}function wU(t,e,n){e=+e,t=+t,n=+n;const r=e<t,s=r?_d(e,t,n):_d(t,e,n);return(r?-1:1)*(s<0?1/-s:s)}function MU(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Wp(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Aw(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Nc(){}var pc=.7,of=1/pc,Ti="\\s*([+-]?\\d+)\\s*",yc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bU=/^#([0-9a-f]{3,8})$/,OU=new RegExp(`^rgb\\(${Ti},${Ti},${Ti}\\)$`),DU=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),RU=new RegExp(`^rgba\\(${Ti},${Ti},${Ti},${yc}\\)$`),NU=new RegExp(`^rgba\\(${lr},${lr},${lr},${yc}\\)$`),LU=new RegExp(`^hsl\\(${yc},${lr},${lr}\\)$`),VU=new RegExp(`^hsla\\(${yc},${lr},${lr},${yc}\\)$`),MT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wp(Nc,xc,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bT,formatHex:bT,formatHex8:_U,formatHsl:kU,formatRgb:OT,toString:OT});function bT(){return this.rgb().formatHex()}function _U(){return this.rgb().formatHex8()}function kU(){return $w(this).formatHsl()}function OT(){return this.rgb().formatRgb()}function xc(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=bU.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?DT(e):n===3?new cn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ou(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ou(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=OU.exec(t))?new cn(e[1],e[2],e[3],1):(e=DU.exec(t))?new cn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=RU.exec(t))?ou(e[1],e[2],e[3],e[4]):(e=NU.exec(t))?ou(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LU.exec(t))?LT(e[1],e[2]/100,e[3]/100,1):(e=VU.exec(t))?LT(e[1],e[2]/100,e[3]/100,e[4]):MT.hasOwnProperty(t)?DT(MT[t]):t==="transparent"?new cn(NaN,NaN,NaN,0):null}function DT(t){return new cn(t>>16&255,t>>8&255,t&255,1)}function ou(t,e,n,r){return r<=0&&(t=e=n=NaN),new cn(t,e,n,r)}function BU(t){return t instanceof Nc||(t=xc(t)),t?(t=t.rgb(),new cn(t.r,t.g,t.b,t.opacity)):new cn}function kd(t,e,n,r){return arguments.length===1?BU(t):new cn(t,e,n,r??1)}function cn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Wp(cn,kd,Aw(Nc,{brighter(t){return t=t==null?of:Math.pow(of,t),new cn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pc:Math.pow(pc,t),new cn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new cn(vs(this.r),vs(this.g),vs(this.b),cf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RT,formatHex:RT,formatHex8:UU,formatRgb:NT,toString:NT}));function RT(){return`#${ys(this.r)}${ys(this.g)}${ys(this.b)}`}function UU(){return`#${ys(this.r)}${ys(this.g)}${ys(this.b)}${ys((isNaN(this.opacity)?1:this.opacity)*255)}`}function NT(){const t=cf(this.opacity);return`${t===1?"rgb(":"rgba("}${vs(this.r)}, ${vs(this.g)}, ${vs(this.b)}${t===1?")":`, ${t})`}`}function cf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function vs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ys(t){return t=vs(t),(t<16?"0":"")+t.toString(16)}function LT(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Qn(t,e,n,r)}function $w(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);if(t instanceof Nc||(t=xc(t)),!t)return new Qn;if(t instanceof Qn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),i=Math.max(e,n,r),c=NaN,l=i-s,f=(i+s)/2;return l?(e===i?c=(n-r)/l+(n<r)*6:n===i?c=(r-e)/l+2:c=(e-n)/l+4,l/=f<.5?i+s:2-i-s,c*=60):l=f>0&&f<1?0:c,new Qn(c,l,f,t.opacity)}function FU(t,e,n,r){return arguments.length===1?$w(t):new Qn(t,e,n,r??1)}function Qn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Wp(Qn,FU,Aw(Nc,{brighter(t){return t=t==null?of:Math.pow(of,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pc:Math.pow(pc,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new cn(zh(t>=240?t-240:t+120,s,r),zh(t,s,r),zh(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new Qn(VT(this.h),cu(this.s),cu(this.l),cf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cf(this.opacity);return`${t===1?"hsl(":"hsla("}${VT(this.h)}, ${cu(this.s)*100}%, ${cu(this.l)*100}%${t===1?")":`, ${t})`}`}}));function VT(t){return t=(t||0)%360,t<0?t+360:t}function cu(t){return Math.max(0,Math.min(1,t||0))}function zh(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Kp=t=>()=>t;function jU(t,e){return function(n){return t+n*e}}function GU(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function zU(t){return(t=+t)==1?Hw:function(e,n){return n-e?GU(e,n,t):Kp(isNaN(e)?n:e)}}function Hw(t,e){var n=e-t;return n?jU(t,n):Kp(isNaN(t)?e:t)}const _T=(function t(e){var n=zU(e);function r(s,i){var c=n((s=kd(s)).r,(i=kd(i)).r),l=n(s.g,i.g),f=n(s.b,i.b),g=Hw(s.opacity,i.opacity);return function(p){return s.r=c(p),s.g=l(p),s.b=f(p),s.opacity=g(p),s+""}}return r.gamma=t,r})(1);function AU(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),s;return function(i){for(s=0;s<n;++s)r[s]=t[s]*(1-i)+e[s]*i;return r}}function $U(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function HU(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),i=new Array(n),c;for(c=0;c<r;++c)s[c]=Xp(t[c],e[c]);for(;c<n;++c)i[c]=e[c];return function(l){for(c=0;c<r;++c)i[c]=s[c](l);return i}}function WU(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function lf(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function KU(t,e){var n={},r={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?n[s]=Xp(t[s],e[s]):r[s]=e[s];return function(i){for(s in n)r[s]=n[s](i);return r}}var Bd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ah=new RegExp(Bd.source,"g");function XU(t){return function(){return t}}function YU(t){return function(e){return t(e)+""}}function qU(t,e){var n=Bd.lastIndex=Ah.lastIndex=0,r,s,i,c=-1,l=[],f=[];for(t=t+"",e=e+"";(r=Bd.exec(t))&&(s=Ah.exec(e));)(i=s.index)>n&&(i=e.slice(n,i),l[c]?l[c]+=i:l[++c]=i),(r=r[0])===(s=s[0])?l[c]?l[c]+=s:l[++c]=s:(l[++c]=null,f.push({i:c,x:lf(r,s)})),n=Ah.lastIndex;return n<e.length&&(i=e.slice(n),l[c]?l[c]+=i:l[++c]=i),l.length<2?f[0]?YU(f[0].x):XU(e):(e=f.length,function(g){for(var p=0,h;p<e;++p)l[(h=f[p]).i]=h.x(g);return l.join("")})}function Xp(t,e){var n=typeof e,r;return e==null||n==="boolean"?Kp(e):(n==="number"?lf:n==="string"?(r=xc(e))?(e=r,_T):qU:e instanceof xc?_T:e instanceof Date?WU:$U(e)?AU:Array.isArray(e)?HU:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?KU:lf)(t,e)}function ZU(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function QU(t){return function(){return t}}function PU(t){return+t}var kT=[0,1];function xi(t){return t}function Ud(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:QU(isNaN(e)?NaN:.5)}function JU(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function IU(t,e,n){var r=t[0],s=t[1],i=e[0],c=e[1];return s<r?(r=Ud(s,r),i=n(c,i)):(r=Ud(r,s),i=n(i,c)),function(l){return i(r(l))}}function eF(t,e,n){var r=Math.min(t.length,e.length)-1,s=new Array(r),i=new Array(r),c=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<r;)s[c]=Ud(t[c],t[c+1]),i[c]=n(e[c],e[c+1]);return function(l){var f=mU(t,l,1,r)-1;return i[f](s[f](l))}}function tF(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nF(){var t=kT,e=kT,n=Xp,r,s,i,c=xi,l,f,g;function p(){var y=Math.min(t.length,e.length);return c!==xi&&(c=JU(t[0],t[y-1])),l=y>2?eF:IU,f=g=null,h}function h(y){return y==null||isNaN(y=+y)?i:(f||(f=l(t.map(r),e,n)))(r(c(y)))}return h.invert=function(y){return c(s((g||(g=l(e,t.map(r),lf)))(y)))},h.domain=function(y){return arguments.length?(t=Array.from(y,PU),p()):t.slice()},h.range=function(y){return arguments.length?(e=Array.from(y),p()):e.slice()},h.rangeRound=function(y){return e=Array.from(y),n=ZU,p()},h.clamp=function(y){return arguments.length?(c=y?!0:xi,p()):c!==xi},h.interpolate=function(y){return arguments.length?(n=y,p()):n},h.unknown=function(y){return arguments.length?(i=y,h):i},function(y,v){return r=y,s=v,p()}}function rF(){return nF()(xi,xi)}function aF(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function uf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function wi(t){return t=uf(Math.abs(t)),t?t[1]:NaN}function sF(t,e){return function(n,r){for(var s=n.length,i=[],c=0,l=t[0],f=0;s>0&&l>0&&(f+l+1>r&&(l=Math.max(1,r-f)),i.push(n.substring(s-=l,s+l)),!((f+=l+1)>r));)l=t[c=(c+1)%t.length];return i.reverse().join(e)}}function iF(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var oF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ff(t){if(!(e=oF.exec(t)))throw new Error("invalid format: "+t);var e;return new Yp({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ff.prototype=Yp.prototype;function Yp(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Yp.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cF(t){e:for(var e=t.length,n=1,r=-1,s;n<e;++n)switch(t[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(s+1):t}var Ww;function lF(t,e){var n=uf(t,e);if(!n)return t+"";var r=n[0],s=n[1],i=s-(Ww=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,c=r.length;return i===c?r:i>c?r+new Array(i-c+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+uf(t,Math.max(0,e+i-1))[0]}function BT(t,e){var n=uf(t,e);if(!n)return t+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const UT={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:aF,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return BT(t*100,e)},r:BT,s:lF,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function FT(t){return t}var jT=Array.prototype.map,GT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uF(t){var e=t.grouping===void 0||t.thousands===void 0?FT:sF(jT.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",s=t.decimal+"",i=t.numerals===void 0?FT:iF(jT.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",l=t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function g(h){h=ff(h);var y=h.fill,v=h.align,E=h.sign,x=h.symbol,T=h.zero,w=h.width,D=h.comma,M=h.precision,O=h.trim,R=h.type;R==="n"?(D=!0,R="g"):UT[R]||(M===void 0&&(M=12),O=!0,R="g"),(T||y==="0"&&v==="=")&&(T=!0,y="0",v="=");var b=x==="$"?n:x==="#"&&/[boxX]/.test(R)?"0"+R.toLowerCase():"",L=x==="$"?r:/[%p]/.test(R)?c:"",k=UT[R],B=/[defgprs%]/.test(R);M=M===void 0?6:/[gprs]/.test(R)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function j(z){var $=b,W=L,Z,te,F;if(R==="c")W=k(z)+W,z="";else{z=+z;var P=z<0||1/z<0;if(z=isNaN(z)?f:k(Math.abs(z),M),O&&(z=cF(z)),P&&+z==0&&E!=="+"&&(P=!1),$=(P?E==="("?E:l:E==="-"||E==="("?"":E)+$,W=(R==="s"?GT[8+Ww/3]:"")+W+(P&&E==="("?")":""),B){for(Z=-1,te=z.length;++Z<te;)if(F=z.charCodeAt(Z),48>F||F>57){W=(F===46?s+z.slice(Z+1):z.slice(Z))+W,z=z.slice(0,Z);break}}}D&&!T&&(z=e(z,1/0));var ae=$.length+z.length+W.length,J=ae<w?new Array(w-ae+1).join(y):"";switch(D&&T&&(z=e(J+z,J.length?w-W.length:1/0),J=""),v){case"<":z=$+z+W+J;break;case"=":z=$+J+z+W;break;case"^":z=J.slice(0,ae=J.length>>1)+$+z+W+J.slice(ae);break;default:z=J+$+z+W;break}return i(z)}return j.toString=function(){return h+""},j}function p(h,y){var v=g((h=ff(h),h.type="f",h)),E=Math.max(-8,Math.min(8,Math.floor(wi(y)/3)))*3,x=Math.pow(10,-E),T=GT[8+E/3];return function(w){return v(x*w)+T}}return{format:g,formatPrefix:p}}var lu,Kw,Xw;fF({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function fF(t){return lu=uF(t),Kw=lu.format,Xw=lu.formatPrefix,lu}function gF(t){return Math.max(0,-wi(Math.abs(t)))}function hF(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wi(e)/3)))*3-wi(Math.abs(t)))}function dF(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wi(e)-wi(t))+1}function pF(t,e,n,r){var s=wU(t,e,n),i;switch(r=ff(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(i=hF(s,c))&&(r.precision=i),Xw(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=dF(s,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=gF(s))&&(r.precision=i-(r.type==="%")*2);break}}return Kw(r)}function yF(t){var e=t.domain;return t.ticks=function(n){var r=e();return EU(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var s=e();return pF(s[0],s[s.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),s=0,i=r.length-1,c=r[s],l=r[i],f,g,p=10;for(l<c&&(g=c,c=l,l=g,g=s,s=i,i=g);p-- >0;){if(g=_d(c,l,n),g===f)return r[s]=c,r[i]=l,e(r);if(g>0)c=Math.floor(c/g)*g,l=Math.ceil(l/g)*g;else if(g<0)c=Math.ceil(c*g)/g,l=Math.floor(l*g)/g;else break;f=g}return t},t}function qp(){var t=rF();return t.copy=function(){return tF(t,qp())},MU.apply(t,arguments),yF(t)}var Bu={exports:{}},xF=Bu.exports,zT;function vF(){return zT||(zT=1,(function(t){(function(e,n,r){function s(f){var g=this,p=l();g.next=function(){var h=2091639*g.s0+g.c*23283064365386963e-26;return g.s0=g.s1,g.s1=g.s2,g.s2=h-(g.c=h|0)},g.c=1,g.s0=p(" "),g.s1=p(" "),g.s2=p(" "),g.s0-=p(f),g.s0<0&&(g.s0+=1),g.s1-=p(f),g.s1<0&&(g.s1+=1),g.s2-=p(f),g.s2<0&&(g.s2+=1),p=null}function i(f,g){return g.c=f.c,g.s0=f.s0,g.s1=f.s1,g.s2=f.s2,g}function c(f,g){var p=new s(f),h=g&&g.state,y=p.next;return y.int32=function(){return p.next()*4294967296|0},y.double=function(){return y()+(y()*2097152|0)*11102230246251565e-32},y.quick=y,h&&(typeof h=="object"&&i(h,p),y.state=function(){return i(p,{})}),y}function l(){var f=4022871197,g=function(p){p=String(p);for(var h=0;h<p.length;h++){f+=p.charCodeAt(h);var y=.02519603282416938*f;f=y>>>0,y-=f,y*=f,f=y>>>0,y-=f,f+=y*4294967296}return(f>>>0)*23283064365386963e-26};return g}n&&n.exports?n.exports=c:this.alea=c})(xF,t)})(Bu)),Bu.exports}var Uu={exports:{}},mF=Uu.exports,AT;function TF(){return AT||(AT=1,(function(t){(function(e,n,r){function s(l){var f=this,g="";f.x=0,f.y=0,f.z=0,f.w=0,f.next=function(){var h=f.x^f.x<<11;return f.x=f.y,f.y=f.z,f.z=f.w,f.w^=f.w>>>19^h^h>>>8},l===(l|0)?f.x=l:g+=l;for(var p=0;p<g.length+64;p++)f.x^=g.charCodeAt(p)|0,f.next()}function i(l,f){return f.x=l.x,f.y=l.y,f.z=l.z,f.w=l.w,f}function c(l,f){var g=new s(l),p=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,E=(y+v)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,p&&(typeof p=="object"&&i(p,g),h.state=function(){return i(g,{})}),h}n&&n.exports?n.exports=c:this.xor128=c})(mF,t)})(Uu)),Uu.exports}var Fu={exports:{}},SF=Fu.exports,$T;function CF(){return $T||($T=1,(function(t){(function(e,n,r){function s(l){var f=this,g="";f.next=function(){var h=f.x^f.x>>>2;return f.x=f.y,f.y=f.z,f.z=f.w,f.w=f.v,(f.d=f.d+362437|0)+(f.v=f.v^f.v<<4^(h^h<<1))|0},f.x=0,f.y=0,f.z=0,f.w=0,f.v=0,l===(l|0)?f.x=l:g+=l;for(var p=0;p<g.length+64;p++)f.x^=g.charCodeAt(p)|0,p==g.length&&(f.d=f.x<<10^f.x>>>4),f.next()}function i(l,f){return f.x=l.x,f.y=l.y,f.z=l.z,f.w=l.w,f.v=l.v,f.d=l.d,f}function c(l,f){var g=new s(l),p=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,E=(y+v)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,p&&(typeof p=="object"&&i(p,g),h.state=function(){return i(g,{})}),h}n&&n.exports?n.exports=c:this.xorwow=c})(SF,t)})(Fu)),Fu.exports}var ju={exports:{}},EF=ju.exports,HT;function wF(){return HT||(HT=1,(function(t){(function(e,n,r){function s(l){var f=this;f.next=function(){var p=f.x,h=f.i,y,v;return y=p[h],y^=y>>>7,v=y^y<<24,y=p[h+1&7],v^=y^y>>>10,y=p[h+3&7],v^=y^y>>>3,y=p[h+4&7],v^=y^y<<7,y=p[h+7&7],y=y^y<<13,v^=y^y<<9,p[h]=v,f.i=h+1&7,v};function g(p,h){var y,v=[];if(h===(h|0))v[0]=h;else for(h=""+h,y=0;y<h.length;++y)v[y&7]=v[y&7]<<15^h.charCodeAt(y)+v[y+1&7]<<13;for(;v.length<8;)v.push(0);for(y=0;y<8&&v[y]===0;++y);for(y==8?v[7]=-1:v[y],p.x=v,p.i=0,y=256;y>0;--y)p.next()}g(f,l)}function i(l,f){return f.x=l.x.slice(),f.i=l.i,f}function c(l,f){l==null&&(l=+new Date);var g=new s(l),p=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,E=(y+v)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,p&&(p.x&&i(p,g),h.state=function(){return i(g,{})}),h}n&&n.exports?n.exports=c:this.xorshift7=c})(EF,t)})(ju)),ju.exports}var Gu={exports:{}},MF=Gu.exports,WT;function bF(){return WT||(WT=1,(function(t){(function(e,n,r){function s(l){var f=this;f.next=function(){var p=f.w,h=f.X,y=f.i,v,E;return f.w=p=p+1640531527|0,E=h[y+34&127],v=h[y=y+1&127],E^=E<<13,v^=v<<17,E^=E>>>15,v^=v>>>12,E=h[y]=E^v,f.i=y,E+(p^p>>>16)|0};function g(p,h){var y,v,E,x,T,w=[],D=128;for(h===(h|0)?(v=h,h=null):(h=h+"\0",v=0,D=Math.max(D,h.length)),E=0,x=-32;x<D;++x)h&&(v^=h.charCodeAt((x+32)%h.length)),x===0&&(T=v),v^=v<<10,v^=v>>>15,v^=v<<4,v^=v>>>13,x>=0&&(T=T+1640531527|0,y=w[x&127]^=v+T,E=y==0?E+1:0);for(E>=128&&(w[(h&&h.length||0)&127]=-1),E=127,x=512;x>0;--x)v=w[E+34&127],y=w[E=E+1&127],v^=v<<13,y^=y<<17,v^=v>>>15,y^=y>>>12,w[E]=v^y;p.w=T,p.X=w,p.i=E}g(f,l)}function i(l,f){return f.i=l.i,f.w=l.w,f.X=l.X.slice(),f}function c(l,f){l==null&&(l=+new Date);var g=new s(l),p=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,E=(y+v)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,p&&(p.X&&i(p,g),h.state=function(){return i(g,{})}),h}n&&n.exports?n.exports=c:this.xor4096=c})(MF,t)})(Gu)),Gu.exports}var zu={exports:{}},OF=zu.exports,KT;function DF(){return KT||(KT=1,(function(t){(function(e,n,r){function s(l){var f=this,g="";f.next=function(){var h=f.b,y=f.c,v=f.d,E=f.a;return h=h<<25^h>>>7^y,y=y-v|0,v=v<<24^v>>>8^E,E=E-h|0,f.b=h=h<<20^h>>>12^y,f.c=y=y-v|0,f.d=v<<16^y>>>16^E,f.a=E-h|0},f.a=0,f.b=0,f.c=-1640531527,f.d=1367130551,l===Math.floor(l)?(f.a=l/4294967296|0,f.b=l|0):g+=l;for(var p=0;p<g.length+20;p++)f.b^=g.charCodeAt(p)|0,f.next()}function i(l,f){return f.a=l.a,f.b=l.b,f.c=l.c,f.d=l.d,f}function c(l,f){var g=new s(l),p=f&&f.state,h=function(){return(g.next()>>>0)/4294967296};return h.double=function(){do var y=g.next()>>>11,v=(g.next()>>>0)/4294967296,E=(y+v)/(1<<21);while(E===0);return E},h.int32=g.next,h.quick=h,p&&(typeof p=="object"&&i(p,g),h.state=function(){return i(g,{})}),h}n&&n.exports?n.exports=c:this.tychei=c})(OF,t)})(zu)),zu.exports}var Au={exports:{}};const RF={},NF=Object.freeze(Object.defineProperty({__proto__:null,default:RF},Symbol.toStringTag,{value:"Module"})),LF=CN(NF);var VF=Au.exports,XT;function _F(){return XT||(XT=1,(function(t){(function(e,n,r){var s=256,i=6,c=52,l="random",f=r.pow(s,i),g=r.pow(2,c),p=g*2,h=s-1,y;function v(O,R,b){var L=[];R=R==!0?{entropy:!0}:R||{};var k=w(T(R.entropy?[O,M(n)]:O??D(),3),L),B=new E(L),j=function(){for(var z=B.g(i),$=f,W=0;z<g;)z=(z+W)*s,$*=s,W=B.g(1);for(;z>=p;)z/=2,$/=2,W>>>=1;return(z+W)/$};return j.int32=function(){return B.g(4)|0},j.quick=function(){return B.g(4)/4294967296},j.double=j,w(M(B.S),n),(R.pass||b||function(z,$,W,Z){return Z&&(Z.S&&x(Z,B),z.state=function(){return x(B,{})}),W?(r[l]=z,$):z})(j,k,"global"in R?R.global:this==r,R.state)}function E(O){var R,b=O.length,L=this,k=0,B=L.i=L.j=0,j=L.S=[];for(b||(O=[b++]);k<s;)j[k]=k++;for(k=0;k<s;k++)j[k]=j[B=h&B+O[k%b]+(R=j[k])],j[B]=R;(L.g=function(z){for(var $,W=0,Z=L.i,te=L.j,F=L.S;z--;)$=F[Z=h&Z+1],W=W*s+F[h&(F[Z]=F[te=h&te+$])+(F[te]=$)];return L.i=Z,L.j=te,W})(s)}function x(O,R){return R.i=O.i,R.j=O.j,R.S=O.S.slice(),R}function T(O,R){var b=[],L=typeof O,k;if(R&&L=="object")for(k in O)try{b.push(T(O[k],R-1))}catch{}return b.length?b:L=="string"?O:O+"\0"}function w(O,R){for(var b=O+"",L,k=0;k<b.length;)R[h&k]=h&(L^=R[h&k]*19)+b.charCodeAt(k++);return M(R)}function D(){try{var O;return y&&(O=y.randomBytes)?O=O(s):(O=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(O)),M(O)}catch{var R=e.navigator,b=R&&R.plugins;return[+new Date,e,b,e.screen,M(n)]}}function M(O){return String.fromCharCode.apply(0,O)}if(w(r.random(),n),t.exports){t.exports=v;try{y=LF}catch{}}else r["seed"+l]=v})(typeof self<"u"?self:VF,[],Math)})(Au)),Au.exports}var $h,YT;function kF(){if(YT)return $h;YT=1;var t=vF(),e=TF(),n=CF(),r=wF(),s=bF(),i=DF(),c=_F();return c.alea=t,c.xor128=e,c.xorwow=n,c.xorshift7=r,c.xor4096=s,c.tychei=i,$h=c,$h}var BF=kF();const UF=Di(BF),FF=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],jF=[1,0,0,0,1,0,0,0,1],Zp=1e-6,Qp=1e-12,{vtkErrorMacro:Yw,vtkWarningMacro:Ts}=V;let qw=0;const qT=20;function Lc(t){return()=>Yw(`vtkMath::${t} - NOT IMPLEMENTED`)}function tc(t,e,n,r){let s;for(let i=0;i<e;i++)s=t[n*e+i],t[n*e+i]=t[r*e+i],t[r*e+i]=s}function $o(t,e,n,r){let s;for(let i=0;i<e;i++)s=t[i*e+n],t[i*e+n]=t[i*e+r],t[i*e+r]=s}function qe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let n=0;n<t;++n)e[n]=0;return e}const GF=()=>Math.PI;function zF(t,e){return e>1023?t*2**1023*2**(e-1023):e<-1074?t*2**-1074*2**(e+1074):t*2**e}function ct(t){return t/180*Math.PI}function Mi(t){return t*180/Math.PI}const{round:Ho,floor:AF,ceil:$F,min:HF,max:WF}=Math;function KF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0;for(let s=e,i=t.length;s<i;s+=n)t[s]<r&&(r=t[s]);return r}function XF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=-1/0;for(let s=e,i=t.length;s<i;s+=n)r<t[s]&&(r=t[s]);return r}function YF(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=1/0,s=-1/0;for(let i=e,c=t.length;i<c;i+=n)t[i]<r&&(r=t[i]),s<t[i]&&(s=t[i]);return[r,s]}const qF=Lc("ceilLog2"),ZF=Lc("factorial");function Fn(t){let e=1;for(;e<t;)e*=2;return e}function Wo(t){return t===Fn(t)}function QF(t,e){let n=1;for(let r=1;r<=e;++r)n*=(t-r+1)/r;return Math.floor(n)}function PF(t,e){if(t<e)return 0;const n=qe(e);for(let r=0;r<e;++r)n[r]=r;return n}function JF(t,e,n){let r=0;for(let s=e-1;s>=0;--s)if(n[s]<t-e+s){let i=n[s]+1;for(;s<e;)n[s++]=i++;r=1;break}return r}function IF(t){UF(`${t}`,{global:!0}),qw=t}function ej(){return qw}function tj(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+n*Math.random()}const nj=Lc("gaussian");function bi(t,e,n){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Mt(t,e,n){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function Zw(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function Qw(t,e){return t[0]*=e,t[1]*=e,t}function Fd(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r[2]=t[2]+e[2]*n,r}function rj(t,e,n,r){return r[0]=t[0]+e[0]*n,r[1]=t[1]+e[1]*n,r}function xe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function aj(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[0]*e[2],n[3]=t[1]*e[0],n[4]=t[1]*e[1],n[5]=t[1]*e[2],n[6]=t[2]*e[0],n[7]=t[2]*e[1],n[8]=t[2]*e[2]}function Jt(t,e,n){const r=t[1]*e[2]-t[2]*e[1],s=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return n[0]=r,n[1]=s,n[2]=i,n}function Tn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let n=0;for(let r=0;r<e;r++)n+=t[r]*t[r];return Math.sqrt(n)}}}function Sn(t){const e=Tn(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function sj(t){const e=Tn(t,3);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e),e}function ij(t,e,n,r){const s=t[0]*t[0],i=t[1]*t[1],c=t[2]*t[2],l=Math.sqrt(s+i+c);let f,g,p;s>i&&s>c?(f=0,g=1,p=2):i>c?(f=1,g=2,p=0):(f=2,g=0,p=1);const h=t[f]/l,y=t[g]/l,v=t[p]/l,E=Math.sqrt(h*h+v*v);if(r!==0){const x=Math.sin(r),T=Math.cos(r);e&&(e[f]=(v*T-h*y*x)/E,e[g]=x*E,e[p]=(-(h*T)-y*v*x)/E),n&&(n[f]=(-(v*x)-h*y*T)/E,n[g]=T*E,n[p]=(h*x-y*v*T)/E)}else e&&(e[f]=v/E,e[g]=0,e[p]=-h/E),n&&(n[f]=-h*y/E,n[g]=E,n[p]=-y*v/E)}function oj(t,e,n){const r=xe(e,e);if(r===0)return n[0]=0,n[1]=0,n[2]=0,!1;const s=xe(t,e)/r;for(let i=0;i<3;i++)n[i]=e[i];return Zw(n,s),!0}function jd(t,e){return t[0]*e[0]+t[1]*e[1]}function cj(t,e,n){const r=jd(e,e);if(r===0)return n[0]=0,n[1]=0,!1;const s=jd(t,e)/r;for(let i=0;i<2;i++)n[i]=e[i];return Qw(n,s),!0}function mn(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function lj(t,e){const n=[0,0,0];return Jt(t,e,n),Math.atan2(Tn(n),xe(t,e))}function uj(t,e,n){const r=Math.abs(t-n);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(r**2)/(2*e))}function fj(t,e,n){const r=Math.abs(t-n);return Math.exp(-(r**2)/(2*e))}function gj(t,e,n){n[0]=t[0]*e[0],n[1]=t[0]*e[1],n[2]=t[1]*e[0],n[3]=t[1]*e[1]}function Pw(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Jw(t){const e=Pw(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function at(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function hj(t,e){let n,r,s;const i=[0,0,0];for(let c=0;c<3;c++)s=Math.abs(t[c*3]),(r=Math.abs(t[c*3+1]))>s&&(s=r),(r=Math.abs(t[c*3+2]))>s&&(s=r),i[c]=1/s;s=i[0]*Math.abs(t[0]),n=0,(r=i[1]*Math.abs(t[3]))>=s&&(s=r,n=1),(r=i[2]*Math.abs(t[6]))>=s&&(n=2),n!==0&&(tc(t,3,n,0),i[n]=i[0]),e[0]=n,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],s=i[1]*Math.abs(t[4]),n=1,(r=i[2]*Math.abs(t[7]))>=s&&(n=2,tc(t,3,1,2),i[2]=i[1]),e[1]=n,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function dj(t,e,n){let r=n[e[0]];n[e[0]]=n[0],n[0]=r,r=n[e[1]],n[e[1]]=n[1],n[1]=r-t[3]*n[0],r=n[e[2]],n[e[2]]=n[2],n[2]=r-t[6]*n[0]-t[7]*n[1],n[2]/=t[8],n[1]=(n[1]-t[5]*n[2])/t[4],n[0]=(n[0]-t[1]*n[1]-t[2]*n[2])/t[0]}function pj(t,e,n){const r=t[0],s=t[1],i=t[2],c=t[3],l=t[4],f=t[5],g=t[6],p=t[7],h=t[8],y=+at(l,p,f,h),v=-at(c,g,f,h),E=+at(c,g,l,p),x=-at(s,p,i,h),T=+at(r,g,i,h),w=-at(r,g,s,p),D=+at(s,l,i,f),M=-at(r,c,i,f),O=+at(r,c,s,l),R=r*y+s*v+i*E,b=y*e[0]+x*e[1]+D*e[2],L=v*e[0]+T*e[1]+M*e[2],k=E*e[0]+w*e[1]+O*e[2];n[0]=b/R,n[1]=L/R,n[2]=k/R}function yj(t,e,n){const r=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],s=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];n[0]=r,n[1]=s,n[2]=i}function Gd(t,e,n){const r=[...t],s=[...e];for(let i=0;i<3;i++)n[i]=r[0]*s[i]+r[1]*s[i+3]+r[2]*s[i+6],n[i+3]=r[3]*s[i]+r[4]*s[i+3]+r[5]*s[i+6],n[i+6]=r[6]*s[i]+r[7]*s[i+3]+r[8]*s[i+6]}function xj(t,e,n,r,s,i,c){r!==s&&Yw("Number of columns of A must match number of rows of B.");const l=[...t],f=[...e];for(let g=0;g<n;g++)for(let p=0;p<i;p++){c[g*i+p]=0;for(let h=0;h<r;h++)c[g*i+p]+=l[g*r+h]*f[p+i*h]}}function Si(t,e){let n;n=t[3],e[3]=t[1],e[1]=n,n=t[6],e[6]=t[2],e[2]=n,n=t[7],e[7]=t[5],e[5]=n,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function vj(t,e){const n=t[0],r=t[1],s=t[2],i=t[3],c=t[4],l=t[5],f=t[6],g=t[7],p=t[8],h=+at(c,g,l,p),y=-at(i,f,l,p),v=+at(i,f,c,g),E=-at(r,g,s,p),x=+at(n,f,s,p),T=-at(n,f,r,g),w=+at(r,c,s,l),D=-at(n,i,s,l),M=+at(n,i,r,c),O=n*h+r*y+s*v;O===0&&Ts("Matrix has 0 determinant"),e[0]=h/O,e[3]=y/O,e[6]=v/O,e[1]=E/O,e[4]=x/O,e[7]=T/O,e[2]=w/O,e[5]=D/O,e[8]=M/O}function bf(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function Iw(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Zp;if(t.length!==e.length)return!1;function r(s,i){return Math.abs(s-e[i])<=n}return t.every(r)}const vc=Iw;function eM(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function tM(t,e){for(let n=0;n<t;n++){for(let r=0;r<t;r++)e[n*t+r]=0;e[n*t+n]=1}return e}function mj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zp;return vc(t,FF,e)}function Tj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zp;return vc(t,jF,e)}function nM(t,e){const n=t[0]*t[0],r=t[0]*t[1],s=t[0]*t[2],i=t[0]*t[3],c=t[1]*t[1],l=t[2]*t[2],f=t[3]*t[3],g=t[1]*t[2],p=t[1]*t[3],h=t[2]*t[3],y=c+l+f;let v=1/(n+y);const E=(n-y)*v;v*=2,e[0]=c*v+E,e[3]=(g+i)*v,e[6]=(p-s)*v,e[1]=(g-i)*v,e[4]=l*v+E,e[7]=(h+r)*v,e[2]=(p+s)*v,e[5]=(h-r)*v,e[8]=f*v+E}function $u(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const n=`${t}`.split("e");let r="";return+n[1]+e>0&&(r="+"),+`${Math.round(`${+n[0]}e${r}${+n[1]+e}`)}e-${e}`}function zd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=$u(t[0],n),e[1]=$u(t[1],n),e[2]=$u(t[2],n),e}function Vc(t,e,n,r){let s,i,c,l,f,g,p,h,y,v,E,x,T,w,D,M;const O=qe(e),R=qe(e),b=(k,B,j)=>{w=k[B],T=k[j],k[B]=w-x*(T+w*v),k[j]=T+x*(w-T*v)};for(tM(e,r),f=0;f<e;f++)O[f]=n[f]=t[f+f*e],R[f]=0;for(s=0;s<qT;s++){for(E=0,f=0;f<e-1;f++)for(l=f+1;l<e;l++)E+=Math.abs(t[f*e+l]);if(E===0)break;for(s<3?p=.2*E/(e*e):p=0,f=0;f<e-1;f++)for(l=f+1;l<e;l++)if(w=100*Math.abs(t[f*e+l]),s>3&&Math.abs(n[f])+w===Math.abs(n[f])&&Math.abs(n[l])+w===Math.abs(n[l]))t[f*e+l]=0;else if(Math.abs(t[f*e+l])>p){for(T=n[l]-n[f],Math.abs(T)+w===Math.abs(T)?y=t[f*e+l]/T:(h=.5*T/t[f*e+l],y=1/(Math.abs(h)+Math.sqrt(1+h*h)),h<0&&(y=-y)),D=1/Math.sqrt(1+y*y),x=y*D,v=x/(1+D),T=y*t[f*e+l],R[f]-=T,R[l]+=T,n[f]-=T,n[l]+=T,t[f*e+l]=0,i=0;i<=f-1;i++)b(t,i*e+f,i*e+l);for(i=f+1;i<=l-1;i++)b(t,f*e+i,i*e+l);for(i=l+1;i<e;i++)b(t,f*e+i,l*e+i);for(i=0;i<e;i++)b(r,i*e+f,i*e+l)}for(f=0;f<e;f++)O[f]+=R[f],n[f]=O[f],R[f]=0}if(s>=qT)return Ts("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<e-1;i++){for(c=i,M=n[c],s=i+1;s<e;s++)(n[s]>=M||Math.abs(n[s]-M)<Qp)&&(c=s,M=n[c]);c!==i&&(n[c]=n[i],n[i]=M,$o(r,e,i,c))}const L=(e>>1)+(e&1);for(g=0,s=0;s<e*e;s++)r[s]>=0&&g++;if(g<L)for(s=0;s<e;s++)r[s*e+i]*=-1;return 1}function rM(t,e){const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];n[0]=t[0]+t[4]+t[8],n[5]=t[0]-t[4]-t[8],n[10]=-t[0]+t[4]-t[8],n[15]=-t[0]-t[4]+t[8],n[1]=n[4]=t[7]-t[5],n[2]=n[8]=t[2]-t[6],n[3]=n[12]=t[3]-t[1],n[6]=n[9]=t[3]+t[1],n[7]=n[13]=t[2]+t[6],n[11]=n[14]=t[7]+t[5];const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=[0,0,0,0],i=[...n];Vc(i,4,s,r),e[0]=r[0],e[1]=r[4],e[2]=r[8],e[3]=r[12]}function Sj(t,e,n){const r=t[0]*e[0],s=t[0]*e[1],i=t[0]*e[2],c=t[0]*e[3],l=t[1]*e[0],f=t[1]*e[1],g=t[1]*e[2],p=t[1]*e[3],h=t[2]*e[0],y=t[2]*e[1],v=t[2]*e[2],E=t[2]*e[3],x=t[3]*e[0],T=t[3]*e[1],w=t[3]*e[2],D=t[3]*e[3];n[0]=r-f-v-D,n[1]=s+l+E-w,n[2]=i-p+h+T,n[3]=c+g-y+x}function aM(t,e){for(let y=0;y<9;y++)e[y]=t[y];const n=qe(3),r=qe(3);let s;for(let y=0;y<3;y++){const v=Math.abs(e[y*3]),E=Math.abs(e[y*3+1]),x=Math.abs(e[y*3+2]);s=E>v?E:v,s=x>s?x:s,n[y]=1,s!==0&&(n[y]/=s)}const i=Math.abs(e[0])*n[0],c=Math.abs(e[3])*n[1],l=Math.abs(e[6])*n[2];r[0]=0,s=i,c>=s&&(s=c,r[0]=1),l>=s&&(r[0]=2),r[0]!==0&&($o(e,3,r[0],0),n[r[0]]=n[0]);const f=Math.abs(e[4])*n[1],g=Math.abs(e[7])*n[2];r[1]=1,s=f,g>=s&&(r[1]=2,$o(e,3,1,2)),r[2]=2;let p=0;if(bf(e)<0){p=1;for(let y=0;y<9;y++)e[y]=-e[y]}const h=qe(4);if(rM(e,h),nM(h,e),p)for(let y=0;y<9;y++)e[y]=-e[y];r[1]!==1&&$o(e,3,r[1],1),r[0]!==0&&$o(e,3,r[0],0)}function sM(t,e,n){let r,s,i,c,l,f;const g=[...t];if(Vc(g,3,e,n),e[0]===e[1]&&e[0]===e[2]){eM(n);return}for(Si(n,n),r=0;r<3;r++)if(e[(r+1)%3]===e[(r+2)%3]){for(f=Math.abs(n[r*3]),c=0,s=1;s<3;s++)f<(l=Math.abs(n[r*3+s]))&&(f=l,c=s);c!==r&&(l=e[c],e[c]=e[r],e[r]=l,tc(n,3,r,c)),n[c*3+c]<0&&(n[c*3]=-n[c*3],n[c*3+1]=-n[c*3+1],n[c*3+2]=-n[c*3+2]),s=(c+1)%3,i=(c+2)%3,n[s*3]=0,n[s*3+1]=0,n[s*3+2]=0,n[s*3+s]=1;const p=Jt([n[c*3],n[c*3+1],n[c*3+2]],[n[s*3],n[s*3+1],n[s*3+2]],[]);Sn(p);const h=Jt(p,[n[c*3],n[c*3+1],n[c*3+2]],[]);for(let y=0;y<3;y++)n[i*3+y]=p[y],n[s*3+y]=h[y];Si(n,n);return}for(f=Math.abs(n[0]),c=0,r=1;r<3;r++)f<(l=Math.abs(n[r*3]))&&(f=l,c=r);if(c!==0){const p=e[c];e[c]=e[0],e[0]=p,tc(n,3,c,0)}if(Math.abs(n[4])<Math.abs(n[7])){const p=e[2];e[2]=e[1],e[1]=p,tc(n,3,1,2)}for(r=0;r<2;r++)n[r*3+r]<0&&(n[r*3]=-n[r*3],n[r*3+1]=-n[r*3+1],n[r*3+2]=-n[r*3+2]);bf(n)<0&&(n[6]=-n[6],n[7]=-n[7],n[8]=-n[8]),Si(n,n)}function Cj(t,e,n,r){let s;const i=[...t],c=bf(i);if(c<0)for(s=0;s<9;s++)i[s]=-i[s];aM(i,e),Si(i,i),Gd(i,e,r),sM(r,n,r),Gd(e,r,e),Si(r,r),c<0&&(n[0]=-n[0],n[1]=-n[1],n[2]=-n[2])}function Pp(t,e,n){let r,s,i,c,l=0,f,g,p;const h=qe(n);for(r=0;r<n;r++){for(c=0,s=0;s<n;s++)(p=Math.abs(t[r*n+s]))>c&&(c=p);if(c===0)return Ts("Unable to factor linear system"),0;h[r]=1/c}for(s=0;s<n;s++){for(r=0;r<s;r++){for(f=t[r*n+s],i=0;i<r;i++)f-=t[r*n+i]*t[i*n+s];t[r*n+s]=f}for(c=0,r=s;r<n;r++){for(f=t[r*n+s],i=0;i<s;i++)f-=t[r*n+i]*t[i*n+s];t[r*n+s]=f,(g=h[r]*Math.abs(f))>=c&&(c=g,l=r)}if(s!==l){for(i=0;i<n;i++)g=t[l*n+i],t[l*n+i]=t[s*n+i],t[s*n+i]=g;h[l]=h[s]}if(e[s]=l,Math.abs(t[s*n+s])<=Qp)return Ts("Unable to factor linear system"),0;if(s!==n-1)for(g=1/t[s*n+s],r=s+1;r<n;r++)t[r*n+s]*=g}return 1}function Jp(t,e,n,r){let s,i,c,l,f;for(c=-1,s=0;s<r;s++){if(l=e[s],f=n[l],n[l]=n[s],c>=0)for(i=c;i<=s-1;i++)f-=t[s*r+i]*n[i];else f!==0&&(c=s);n[s]=f}for(s=r-1;s>=0;s--){for(f=n[s],i=s+1;i<r;i++)f-=t[s*r+i]*n[i];n[s]=f/t[s*r+s]}}function iM(t,e,n){if(n===2){const s=qe(2),i=at(t[0],t[1],t[2],t[3]);return i===0?0:(s[0]=(t[3]*e[0]-t[1]*e[1])/i,s[1]=(-(t[2]*e[0])+t[0]*e[1])/i,e[0]=s[0],e[1]=s[1],1)}if(n===1)return t[0]===0?0:(e[0]/=t[0],1);const r=qe(n);return Pp(t,r,n)===0?0:(Jp(t,r,e,n),1)}function Ip(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const i=r||qe(n),c=s||qe(n);if(Pp(t,i,n)===0)return null;for(let l=0;l<n;l++){for(let f=0;f<n;f++)c[f]=0;c[l]=1,Jp(t,i,c,n);for(let f=0;f<n;f++)e[f*n+l]=c[f]}return e}function Ej(t,e){let n=+Number.MAX_VALUE,r=-Number.MAX_VALUE;for(let s=0;s<e;s++)for(let i=s;i<e;i++)Math.abs(t[s*e+i])>r&&(r=Math.abs(t[s*e+i]));for(let s=0;s<e;s++)Math.abs(t[s*e+s])<n&&(n=Math.abs(t[s*e+s]));return n===0?Number.MAX_VALUE:r/n}function wj(t,e,n){return Vc(t,3,e,n)}function Ad(t,e,n,r){if(t<n)return Ts("Insufficient number of samples. Underdetermined."),0;let s,i,c;const l=qe(n*n),f=qe(n),g=qe(n*n);for(c=0;c<t;c++)for(s=0;s<n;s++)for(i=s;i<n;i++)l[s*n+i]+=e[c*n+s]*e[c*n+i];for(s=0;s<n;s++)for(i=0;i<s;i++)l[s*n+i]=l[i*n+s];for(Vc(l,n,f,g),s=0;s<n;s++)r[s]=g[s*n+n-1];return 1}function Mj(t,e,n,r,s,i){let c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<n||t<s)return Ts("Insufficient number of samples. Underdetermined."),0;const l=qe(s);let f=1,g,p=0,h,y,v,E=0;if(c){for(y=0;y<s;y++)l[y]=1;for(h=0;h<t;h++)for(y=0;y<s;y++)Math.abs(r[h*s+y])>Qp&&(f=0,l[y]=0);if(f&&s===1)return Ts("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),Ad(t,e,n,i);if(f)E=1;else for(y=0;y<s;y++)l[y]&&(E=1)}E&&(g=qe(n),p=Ad(t,e,n,g));const x=qe(n*n),T=qe(n*n),w=qe(n*s);for(v=0;v<t;v++)for(h=0;h<n;h++){for(y=h;y<n;y++)x[h*n+y]+=e[v*n+h]*e[v*n+y];for(y=0;y<s;y++)w[h*s+y]+=e[v*n+h]*r[v*s+y]}for(h=0;h<n;h++)for(y=0;y<h;y++)x[h*n+y]=x[y*n+h];const D=Ip(x,T,n);if(D)for(h=0;h<n;h++)for(y=0;y<s;y++)for(i[h*s+y]=0,v=0;v<n;v++)i[h*s+y]+=T[h*n+v]*w[v*s+y];if(E){for(y=0;y<s;y++)if(l[y])for(h=0;h<n;h++)i[h*s+y]=g[h*s]}return E?p&&D:D}function bj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function Oj(t,e){let n,r;const[s,i,c]=t,l=1/3,f=1/6,g=2/3;let p=s,h=s;i>p?p=i:i<h&&(h=i),c>p?p=c:c<h&&(h=c);const y=p;y>0?r=(p-h)/p:r=0,r>0?(s===p?n=f*(i-c)/(p-h):i===p?n=l+f*(c-s)/(p-h):n=g+f*(s-i)/(p-h),n<0&&(n+=1)):n=0,e[0]=n,e[1]=r,e[2]=y}function oM(t,e){const[n,r,s]=t,i=1/3,c=1/6,l=2/3,f=5/6;let g,p,h;n>c&&n<=i?(p=1,g=(i-n)/c,h=0):n>i&&n<=.5?(p=1,h=(n-i)/c,g=0):n>.5&&n<=l?(h=1,p=(l-n)/c,g=0):n>l&&n<=f?(h=1,g=(n-l)/c,p=0):n>f&&n<=1?(g=1,h=(1-n)/c,p=0):(g=1,p=n/c,h=0),g=r*g+(1-r),p=r*p+(1-r),h=r*h+(1-r),g*=s,p*=s,h*=s,e[0]=g,e[1]=p,e[2]=h}function cM(t,e){const[n,r,s]=t;let i=(n+16)/116,c=r/500+i,l=i-s/200;i**3>.008856?i**=3:i=(i-16/116)/7.787,c**3>.008856?c**=3:c=(c-16/116)/7.787,l**3>.008856?l**=3:l=(l-16/116)/7.787;const f=.9505,g=1,p=1.089;e[0]=f*c,e[1]=g*i,e[2]=p*l}function lM(t,e){const[n,r,s]=t,i=.9505,c=1,l=1.089;let f=n/i,g=r/c,p=s/l;f>.008856?f**=1/3:f=7.787*f+16/116,g>.008856?g**=1/3:g=7.787*g+16/116,p>.008856?p**=1/3:p=7.787*p+16/116,e[0]=116*g-16,e[1]=500*(f-g),e[2]=200*(g-p)}function uM(t,e){const[n,r,s]=t;let i=n*3.2406+r*-1.5372+s*-.4986,c=n*-.9689+r*1.8758+s*.0415,l=n*.0557+r*-.204+s*1.057;i>.0031308?i=1.055*i**(1/2.4)-.055:i*=12.92,c>.0031308?c=1.055*c**(1/2.4)-.055:c*=12.92,l>.0031308?l=1.055*l**(1/2.4)-.055:l*=12.92;let f=i;f<c&&(f=c),f<l&&(f=l),f>1&&(i/=f,c/=f,l/=f),i<0&&(i=0),c<0&&(c=0),l<0&&(l=0),e[0]=i,e[1]=c,e[2]=l}function fM(t,e){let[n,r,s]=t;n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,s>.04045?s=((s+.055)/1.055)**2.4:s/=12.92,e[0]=n*.4124+r*.3576+s*.1805,e[1]=n*.2126+r*.7152+s*.0722,e[2]=n*.0193+r*.1192+s*.9505}function Dj(t,e){const n=[0,0,0];fM(t,n),lM(n,e)}function Rj(t,e){const n=[0,0,0];cM(t,n),uM(n,e)}function e1(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function Hu(t){return!(t[1]-t[0]<0)}function Nj(t,e,n){return n[0]=Math.min(t[0],e[0]),n[1]=Math.max(t[0],e[0]),n[2]=Math.min(t[1],e[1]),n[3]=Math.max(t[1],e[1]),n[4]=Math.min(t[2],e[2]),n[5]=Math.max(t[2],e[2]),n}function Wu(t,e,n){return t<e?e:t>n?n:t}function $d(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return r[0]=Wu(t[0],e[0],n[0]),r[1]=Wu(t[1],e[1],n[1]),r[2]=Wu(t[2],e[2],n[2]),r}function Lj(t,e){let n=0;return e[0]!==e[1]&&(t<e[0]?n=e[0]:t>e[1]?n=e[1]:n=t,n=(n-e[0])/(e[1]-e[0])),n}const Vj=Lc("GetScalarTypeFittingRange"),_j=Lc("GetAdjustedScalarRange");function kj(t,e){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]<e[n]||t[n]>e[n+1]||t[n+1]<e[n]||t[n+1]>e[n+1])return 0;return 1}function Bj(t,e,n){if(!t||!e)return 0;for(let r=0;r<6;r+=2)if(t[r]+n[r/2]<e[r]||t[r]-n[r/2]>e[r+1]||t[r+1]+n[r/2]<e[r]||t[r+1]-n[r/2]>e[r+1])return 0;return 1}function Uj(t,e,n){if(!t||!e||!n)return 0;for(let r=0;r<3;r++)if(t[r]+n[r]<e[2*r]||t[r]-n[r]>e[2*r+1])return 0;return 1}function Fj(t,e,n,r){const s=qe(3),i=qe(3),c=qe(3),l=qe(3),f=qe(3),g=qe(3);for(let O=0;O<3;++O)s[O]=t[O]-e[O],i[O]=e[O]-n[O],c[O]=n[O]-t[O],l[O]=-s[O],f[O]=-i[O],g[O]=-c[O];const p=Tn(l),h=Tn(f),y=Tn(c),v=qe(3);Jt(s,i,v);const E=Tn(v),x=p*h*y/(2*E),T=2*E*E,w=h*h*xe(s,g)/T,D=y*y*xe(l,i)/T,M=p*p*xe(c,f)/T;for(let O=0;O<3;++O)r[O]=w*t[O]+D*e[O]+M*n[O];return x}const jj=1/0,Gj=-1/0,zj=t=>!Number.isFinite(t),{isFinite:Aj,isNaN:Hd}=Number,gM=Hd;function Of(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function $j(t){let e=-1,n=-1;for(let r=0;r<t.length;r++){const s=Math.abs(t[r]);s>e&&(n=r,e=s)}return n}function Hj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const n=new Array(e),r=new Array(e);for(let i=0;i<e;++i)n[i]=i,r[i]=i;for(let i=e-1;i>0;i--){let c=-1/0,l=0,f=0;for(let g=0;g<=i;++g){const p=n[g];for(let h=0;h<=i;++h){const y=r[h],v=Math.abs(t[p+e*y]);v>c&&(c=v,l=g,f=h)}}[n[i],n[l]]=[n[l],n[i]],[r[i],r[f]]=[r[f],r[i]]}const s=new Array(e*e).fill(0);for(let i=0;i<e;++i){const c=n[i]+e*r[i];s[c]=t[c]<0?-1:1}return s}function hM(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function Wj(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(hM).join("")}`}function uu(t){return Math.round(t*255)}function Kj(t){return t.length===3?`rgb(${t.map(uu).join(", ")})`:`rgba(${uu(t[0]||0)}, ${uu(t[1]||0)}, ${uu(t[2]||0)}, ${t[3]||0})`}var ZT={Pi:GF,ldexp:zF,radiansFromDegrees:ct,degreesFromRadians:Mi,round:Ho,floor:AF,ceil:$F,ceilLog2:qF,min:HF,max:WF,arrayMin:KF,arrayMax:XF,arrayRange:YF,isPowerOfTwo:Wo,nearestPowerOfTwo:Fn,factorial:ZF,binomial:QF,beginCombination:PF,nextCombination:JF,randomSeed:IF,getSeed:ej,random:tj,gaussian:nj,add:bi,subtract:Mt,multiplyScalar:Zw,multiplyScalar2D:Qw,multiplyAccumulate:Fd,multiplyAccumulate2D:rj,dot:xe,outer:aj,cross:Jt,norm:Tn,normalize:Sn,perpendiculars:ij,projectVector:oj,projectVector2D:cj,distance2BetweenPoints:mn,angleBetweenVectors:lj,gaussianAmplitude:uj,gaussianWeight:fj,dot2D:jd,outer2D:gj,norm2D:Pw,normalize2D:Jw,determinant2x2:at,LUFactor3x3:hj,LUSolve3x3:dj,linearSolve3x3:pj,multiply3x3_vect3:yj,multiply3x3_mat3:Gd,multiplyMatrix:xj,transpose3x3:Si,invert3x3:vj,identity3x3:eM,identity:tM,isIdentity:mj,isIdentity3x3:Tj,determinant3x3:bf,quaternionToMatrix3x3:nM,areEquals:Iw,areMatricesEqual:vc,roundNumber:$u,roundVector:zd,matrix3x3ToQuaternion:rM,multiplyQuaternion:Sj,orthogonalize3x3:aM,diagonalize3x3:sM,singularValueDecomposition3x3:Cj,solveLinearSystem:iM,invertMatrix:Ip,luFactorLinearSystem:Pp,luSolveLinearSystem:Jp,estimateMatrixCondition:Ej,jacobi:wj,jacobiN:Vc,solveHomogeneousLeastSquares:Ad,solveLeastSquares:Mj,hex2float:bj,rgb2hsv:Oj,hsv2rgb:oM,lab2xyz:cM,xyz2lab:lM,xyz2rgb:uM,rgb2xyz:fM,rgb2lab:Dj,lab2rgb:Rj,uninitializeBounds:e1,areBoundsInitialized:Hu,computeBoundsFromPoints:Nj,clampValue:Wu,clampVector:$d,clampAndNormalizeValue:Lj,getScalarTypeFittingRange:Vj,getAdjustedScalarRange:_j,extentIsWithinOtherExtent:kj,boundsIsWithinOtherBounds:Bj,pointIsWithinBounds:Uj,solve3PointCircle:Fj,inf:jj,negInf:Gj,isInf:zj,isNan:Hd,isNaN:Hd,isFinite:Aj,createUninitializedBounds:Of,getMajorAxisIndex:$j,getSparseOrthogonalMatrix:Hj,floatToHex2:hM,floatRGB2HexCode:Wj,float2CssRGBA:Kj};function Xj(t,e){e.classHierarchy.push("vtkImplicitFunction"),t.functionValue=n=>{if(!e.transform)return t.evaluateFunction(n);const r=[];return e.transform.transformPoint(n,r),t.evaluateFunction(r)},t.evaluateFunction=n=>{V.vtkErrorMacro("not implemented")}}const Yj={};function dM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Yj,n),V.obj(t,e),V.setGet(t,e,["transform"]),Xj(t,e)}const qj=V.newInstance(dM,"vtkImplicitFunction");var Zj={newInstance:qj,extend:dM};const Wd=1e-6,pM="coincide",yM="disjoint";function Qj(t,e,n){return t[0]*(n[0]-e[0])+t[1]*(n[1]-e[1])+t[2]*(n[2]-e[2])}function xM(t,e,n){const r=n[0]*(t[0]-e[0])+n[1]*(t[1]-e[1])+n[2]*(t[2]-e[2]);return Math.abs(r)}function vM(t,e,n,r){const s=[];Mt(t,e,s);const i=xe(n,s);r[0]=t[0]-i*n[0],r[1]=t[1]-i*n[1],r[2]=t[2]-i*n[2]}function mM(t,e,n){const r=xe(t,e);let s=xe(e,e);return s===0&&(s=1),n[0]=t[0]-r*e[0]/s,n[1]=t[1]-r*e[1]/s,n[2]=t[2]-r*e[2]/s,n}function TM(t,e,n,r){const s=[];Mt(t,e,s);const i=xe(n,s),c=xe(n,n);c!==0?(r[0]=t[0]-i*n[0]/c,r[1]=t[1]-i*n[1]/c,r[2]=t[2]-i*n[2]/c):(r[0]=t[0],r[1]=t[1],r[2]=t[2])}function SM(t,e,n,r){const s={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],c=[];Mt(e,t,i),Mt(n,t,c);const l=xe(r,c),f=xe(r,i);let g,p;return f<0?g=-f:g=f,l<0?p=-l*Wd:p=l*Wd,g<=p||(s.t=l/f,s.x[0]=t[0]+s.t*i[0],s.x[1]=t[1]+s.t*i[1],s.x[2]=t[2]+s.t*i[2],s.intersection=!0,s.betweenPoints=s.t>=0&&s.t<=1),s}function CM(t,e,n,r){const s={intersection:!1,l0:[],l1:[],error:null},i=[];Jt(e,r,i);const c=i.map(h=>Math.abs(h));if(c[0]+c[1]+c[2]<Wd){const h=[];return Mt(t,n,h),xe(e,h)===0?s.error=pM:s.error=yM,s}let l;c[0]>c[1]&&c[0]>c[2]?l="x":c[1]>c[2]?l="y":l="z";const f=[],g=-xe(e,t),p=-xe(r,n);switch(l){case"x":f[0]=0,f[1]=(p*e[2]-g*r[2])/i[0],f[2]=(g*r[1]-p*e[1])/i[0];break;case"y":f[0]=(g*r[2]-p*e[2])/i[1],f[1]=0,f[2]=(p*e[0]-g*r[0])/i[1];break;case"z":f[0]=(p*e[1]-g*r[1])/i[2],f[1]=(g*r[0]-p*e[0])/i[2],f[2]=0;break}return s.l0=f,bi(f,i,s.l1),s.intersection=!0,s}const Pj={evaluate:Qj,distanceToPlane:xM,projectPoint:vM,projectVector:mM,generalizedProjectPoint:TM,intersectWithLine:SM,intersectWithPlane:CM,DISJOINT:yM,COINCIDE:pM};function Jj(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=n=>xM(n,e.origin,e.normal),t.projectPoint=(n,r)=>{vM(n,e.origin,e.normal,r)},t.projectVector=(n,r)=>mM(n,e.normal,r),t.push=n=>{if(n!==0)for(let r=0;r<3;r++)e.origin[r]+=n*e.normal[r]},t.generalizedProjectPoint=(n,r)=>{TM(n,e.origin,e.normal,r)},t.evaluateFunction=(n,r,s)=>Array.isArray(n)?e.normal[0]*(n[0]-e.origin[0])+e.normal[1]*(n[1]-e.origin[1])+e.normal[2]*(n[2]-e.origin[2]):e.normal[0]*(n-e.origin[0])+e.normal[1]*(r-e.origin[1])+e.normal[2]*(s-e.origin[2]),t.evaluateGradient=n=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(n,r)=>SM(n,r,e.origin,e.normal),t.intersectWithPlane=(n,r)=>CM(n,r,e.origin,e.normal)}const Ij={normal:[0,0,1],origin:[0,0,0]};function EM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ij,n),Zj.extend(t,e,n),V.setGetArray(t,e,["normal","origin"],3),Jj(t,e)}const eG=V.newInstance(EM,"vtkPlane");var Da={newInstance:eG,extend:EM,...Pj};const Df=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function wM(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Fr(t){return t?.length>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function t1(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function n1(t){return t1(t,Df)}function gf(t,e,n,r){const[s,i,c,l,f,g]=t;return t[0]=s<e?s:e,t[1]=i>e?i:e,t[2]=c<n?c:n,t[3]=l>n?l:n,t[4]=f<r?f:r,t[5]=g>r?g:r,t}function r1(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let n=0;n<e.length;++n)gf(t,...e[n]);else for(let n=0;n<e.length;n+=3)gf(t,...e.slice(n,n+3));return t}function MM(t,e,n,r,s,i,c){const[l,f,g,p,h,y]=t;return c===void 0?(t[0]=Math.min(e[0],l),t[1]=Math.max(e[1],f),t[2]=Math.min(e[2],g),t[3]=Math.max(e[3],p),t[4]=Math.min(e[4],h),t[5]=Math.max(e[5],y)):(t[0]=Math.min(e,l),t[1]=Math.max(n,f),t[2]=Math.min(r,g),t[3]=Math.max(s,p),t[4]=Math.min(i,h),t[5]=Math.max(c,y)),t}function bM(t,e,n,r){const[s,i,c,l,f,g]=t;return t[0]=e,t[1]=e>i?e:i,t[2]=n,t[3]=n>l?n:l,t[4]=r,t[5]=r>g?r:g,s!==e||c!==n||f!==r}function OM(t,e,n,r){const[s,i,c,l,f,g]=t;return t[0]=e<s?e:s,t[1]=e,t[2]=n<c?n:c,t[3]=n,t[4]=r<f?r:f,t[5]=r,i!==e||l!==n||g!==r}function a1(t,e){return e==null?tG(t):(t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t)}function tG(t){const e=[0,0,0];let n=-1,r=0,s=0;for(let i=0;i<3;++i)s=t[i*2+1]-t[i*2],s>r&&(r=s,n=i),e[i]=s>0?1:0;if(n<0)return a1(t,.5);for(let i=0;i<3;++i)if(!e[i]){const c=.005*r;t[i*2]-=c,t[i*2+1]+=c}return t}function s1(t,e,n,r){return Fr(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),n>=0?(t[2]*=n,t[3]*=n):(t[2]=n*t[3],t[3]=n*t[2]),r>=0?(t[4]*=r,t[5]*=r):(t[4]=r*t[5],t[5]=r*t[4]),!0):!1}function i1(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function nG(t,e,n,r){if(!Fr(t))return!1;const s=i1(t);return t[0]-=s[0],t[1]-=s[0],t[2]-=s[1],t[3]-=s[1],t[4]-=s[2],t[5]-=s[2],s1(t,e,n,r),t[0]+=s[0],t[1]+=s[0],t[2]+=s[1],t[3]+=s[1],t[4]+=s[2],t[5]+=s[2],!0}function nc(t,e){return t[e*2+1]-t[e*2]}function _c(t){return[nc(t,0),nc(t,1),nc(t,2)]}function DM(t){return t.slice(0,2)}function RM(t){return t.slice(2,4)}function NM(t){return t.slice(4,6)}function LM(t){const e=_c(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function o1(t){if(Fr(t)){const e=_c(t);return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}return null}function VM(t){const e=o1(t);return e!==null?Math.sqrt(e):null}function Rf(t){return[t[0],t[2],t[4]]}function Nf(t){return[t[1],t[3],t[5]]}function fu(t,e){return t<=0&&e>=0||t>=0&&e<=0}function c1(t,e){return e[0]=[t[0],t[2],t[4]],e[1]=[t[0],t[2],t[5]],e[2]=[t[0],t[3],t[4]],e[3]=[t[0],t[3],t[5]],e[4]=[t[1],t[2],t[4]],e[5]=[t[1],t[2],t[5]],e[6]=[t[1],t[3],t[4]],e[7]=[t[1],t[3],t[5]],e}function _M(t,e,n){return e[0]=t[0],e[1]=t[2],e[2]=t[4],n[0]=t[1],n[1]=t[3],n[2]=t[5],e}function kM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const r=c1(t,[]);for(let s=0;s<r.length;++s)$e(r[s],r[s],e);return n1(n),r1(n,r)}function BM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function UM(t,e,n,r){const s=[].concat(Df),i=t.getData();for(let c=0;c<i.length;c+=3){const l=[i[c],i[c+1],i[c+2]],f=xe(l,e);s[0]=Math.min(f,s[0]),s[1]=Math.max(f,s[1]);const g=xe(l,n);s[2]=Math.min(g,s[2]),s[3]=Math.max(g,s[3]);const p=xe(l,r);s[4]=Math.min(p,s[4]),s[5]=Math.max(p,s[5])}return s}function FM(t,e,n,r,s){let i=!0;const c=[];let l=0;const f=[],g=[0,0,0],p=0,h=1,y=2;for(let v=0;v<3;v++)e[v]<t[2*v]?(c[v]=h,g[v]=t[2*v],i=!1):e[v]>t[2*v+1]?(c[v]=p,g[v]=t[2*v+1],i=!1):c[v]=y;if(i)return r[0]=e[0],r[1]=e[1],r[2]=e[2],s[0]=0,1;for(let v=0;v<3;v++)c[v]!==y&&n[v]!==0?f[v]=(g[v]-e[v])/n[v]:f[v]=-1;for(let v=0;v<3;v++)f[l]<f[v]&&(l=v);if(f[l]>1||f[l]<0)return 0;s[0]=f[l];for(let v=0;v<3;v++)if(l!==v){if(r[v]=e[v]+f[l]*n[v],r[v]<t[2*v]||r[v]>t[2*v+1])return 0}else r[v]=g[v];return 1}function jM(t,e,n){const r=[];let s=0,i=1,c=1;for(let l=4;l<=5;++l){r[2]=t[l];for(let f=2;f<=3;++f){r[1]=t[f];for(let g=0;g<=1;++g)if(r[0]=t[g],s=Da.evaluate(n,e,r),c&&(i=s>=0?1:-1,c=0),s===0||i>0&&s<0||i<0&&s>0)return 1}}return 0}function GM(t,e){if(!(Fr(t)&&Fr(e)))return!1;const n=[0,0,0,0,0,0];let r;for(let s=0;s<3;s++)if(r=!1,e[s*2]>=t[s*2]&&e[s*2]<=t[s*2+1]?(r=!0,n[s*2]=e[s*2]):t[s*2]>=e[s*2]&&t[s*2]<=e[s*2+1]&&(r=!0,n[s*2]=t[s*2]),e[s*2+1]>=t[s*2]&&e[s*2+1]<=t[s*2+1]?(r=!0,n[s*2+1]=e[2*s+1]):t[s*2+1]>=e[s*2]&&t[s*2+1]<=e[s*2+1]&&(r=!0,n[s*2+1]=t[s*2+1]),!r)return!1;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],!0}function hf(t,e){if(!(Fr(t)&&Fr(e)))return!1;for(let n=0;n<3;n++)if(!(e[n*2]>=t[n*2]&&e[n*2]<=t[n*2+1])&&!(t[n*2]>=e[n*2]&&t[n*2]<=e[n*2+1])&&!(e[n*2+1]>=t[n*2]&&e[n*2+1]<=t[n*2+1])&&!(t[n*2+1]>=e[n*2]&&t[n*2+1]<=e[n*2+1]))return!1;return!0}function df(t,e,n,r){return!(e<t[0]||e>t[1]||n<t[2]||n>t[3]||r<t[4]||r>t[5])}function rG(t,e){return!(!hf(t,e)||!df(t,...Rf(e))||!df(t,...Nf(e)))}function zM(t,e,n){const r=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],s=[0,0,0,0,0,0,0,0];let i=0;for(let h=0;h<2;h++)for(let y=2;y<4;y++)for(let v=4;v<6;v++){const E=[t[h],t[y],t[v]];s[i++]=Da.evaluate(n,e,E)}let c=2;for(;c--&&!(fu(s[r[c][0]],s[r[c][4]])&&fu(s[r[c][1]],s[r[c][5]])&&fu(s[r[c][2]],s[r[c][6]])&&fu(s[r[c][3]],s[r[c][7]])););if(c<0)return!1;const l=Math.sign(n[c]),f=Math.abs((t[c*2+1]-t[c*2])*n[c]);let g=l>0?1:0;for(let h=0;h<4;h++){if(f===0)continue;const y=Math.abs(s[r[c][h]])/f;l>0&&y<g&&(g=y),l<0&&y>g&&(g=y)}const p=(1-g)*t[c*2]+g*t[c*2+1];return l>0?t[c*2]=p:t[c*2+1]=p,!0}function AM(t,e){for(let r=0;r<3;++r)e[r]=e[r]<1?1:e[r];let n=e[0]*e[1]*e[2];for(;n>t;){for(let r=0;r<3;++r)e[r]=e[r]>1?e[r]-1:1;n=e[0]*e[1]*e[2]}}function $M(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];e=e<=0?1:e;let s=0;const i=[0,0,0];let c=-1,l=0;const f=_c(t),g=f[0]+f[1]+f[2],p=g*(.001/3);for(let x=0;x<3;++x)f[x]>l&&(c=x,l=f[x]),f[x]>p?(i[x]=1,s++):i[x]=0;const h=Rf(t),y=Nf(t);if(s<1)return n[0]=1,n[1]=1,n[2]=1,r[0]=h[0]-.5,r[1]=y[0]+.5,r[2]=h[1]-.5,r[3]=y[1]+.5,r[4]=h[2]-.5,r[5]=y[2]+.5,1;let v=e;v/=i[0]?f[0]/g:1,v/=i[1]?f[1]/g:1,v/=i[2]?f[2]/g:1,v**=1/s;for(let x=0;x<3;++x)n[x]=i[x]?Math.floor(v*f[x]/g):1,n[x]=n[x]<1?1:n[x];AM(e,n);const E=.5*f[c]/n[c];for(let x=0;x<3;++x)i[x]?(r[2*x]=h[x],r[2*x+1]=y[x]):(r[2*x]=h[x]-E,r[2*x+1]=y[x]+E);return n[0]*n[1]*n[2]}function HM(t,e){if(t[0]>=e[0]&&t[0]<=e[1]&&t[1]>=e[2]&&t[1]<=e[3]&&t[2]>=e[4]&&t[2]<=e[5])return 0;const n=[0,0,0];return t[0]<e[0]?n[0]=e[0]-t[0]:t[0]>e[1]&&(n[0]=t[0]-e[1]),t[1]<e[2]?n[1]=e[2]-t[1]:t[1]>e[3]&&(n[1]=t[1]-e[3]),t[2]<e[4]?n[2]=e[4]-t[2]:t[2]>e[5]&&(n[2]=t[2]-e[5]),xe(n,n)}class aG{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(Df))}getBounds(){return this.bounds}equals(e){return wM(this.bounds,e)}isValid(){return Fr(this.bounds)}setBounds(e){return t1(this.bounds,e)}reset(){return n1(this.bounds)}addPoint(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gf(this.bounds,...n)}addPoints(e){return r1(this.bounds,e)}addBounds(e,n,r,s,i,c){return MM(this.bounds,e,n,r,s,i,c)}setMinPoint(e,n,r){return bM(this.bounds,e,n,r)}setMaxPoint(e,n,r){return OM(this.bounds,e,n,r)}inflate(e){return a1(this.bounds,e)}scale(e,n,r){return s1(this.bounds,e,n,r)}getCenter(){return i1(this.bounds)}getLength(e){return nc(this.bounds,e)}getLengths(){return _c(this.bounds)}getMaxLength(){return LM(this.bounds)}getDiagonalLength(){return VM(this.bounds)}getDiagonalLength2(){return o1(this.bounds)}getMinPoint(){return Rf(this.bounds)}getMaxPoint(){return Nf(this.bounds)}getXRange(){return DM(this.bounds)}getYRange(){return RM(this.bounds)}getZRange(){return NM(this.bounds)}getCorners(e){return c1(this.bounds,e)}computeCornerPoints(e,n){return _M(this.bounds,e,n)}computeLocalBounds(e,n,r){return UM(this.bounds,e,n,r)}transformBounds(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return kM(this.bounds,e,n)}computeScale3(e){return BM(this.bounds,e)}cutWithPlane(e,n){return zM(this.bounds,e,n)}intersectBox(e,n,r,s){return FM(this.bounds,e,n,r,s)}intersectPlane(e,n){return jM(this.bounds,e,n)}intersect(e){return GM(this.bounds,e)}intersects(e){return hf(this.bounds,e)}containsPoint(e,n,r){return df(this.bounds,e,n,r)}contains(e){return hf(this.bounds,e)}computeDivisions(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return $M(this.bounds,e,n,r)}distance2ToBounds(e){return HM(e,this.bounds)}}function sG(t){const e=t&&t.bounds;return new aG(e)}const iG={equals:wM,isValid:Fr,setBounds:t1,reset:n1,addPoint:gf,addPoints:r1,addBounds:MM,setMinPoint:bM,setMaxPoint:OM,inflate:a1,scale:s1,scaleAboutCenter:nG,getCenter:i1,getLength:nc,getLengths:_c,getMaxLength:LM,getDiagonalLength:VM,getDiagonalLength2:o1,getMinPoint:Rf,getMaxPoint:Nf,getXRange:DM,getYRange:RM,getZRange:NM,getCorners:c1,computeCornerPoints:_M,computeLocalBounds:UM,transformBounds:kM,computeScale3:BM,cutWithPlane:zM,intersectBox:FM,intersectPlane:jM,intersect:GM,intersects:hf,containsPoint:df,contains:rG,computeDivisions:$M,clampDivisions:AM,distance2ToBounds:HM,INIT_BOUNDS:Df};var _e={newInstance:sG,...iG};const oG={DISPLAY:0,WORLD:1};var WM={CoordinateSystem:oG};const{CoordinateSystem:Kd}=WM;function QT(t){return()=>V.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function cG(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let n=e.mtime;for(let r=0;r<e.textures.length;++r){const s=e.textures[r].getMTime();s>n&&(n=s)}return n},t.processSelectorPixelBuffers=(n,r)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=QT("pick"),t.hasKey=QT("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=n=>{e.estimatedRenderTime=n,e.savedEstimatedRenderTime=n},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=n=>{e.estimatedRenderTime+=n},t.setAllocatedRenderTime=n=>{e.allocatedRenderTime=n,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=n=>e.textures.indexOf(n)!==-1,t.addTexture=n=>{n&&!t.hasTexture(n)&&(e.textures=e.textures.concat(n),t.modified())},t.removeTexture=n=>{const r=e.textures.filter(s=>s!==n);e.textures.length!==r.length&&(e.textures=r,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(Kd.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(Kd.DISPLAY)}const lG={allocatedRenderTime:10,coordinateSystem:Kd.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function KM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lG,n),V.obj(t,e),V.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),V.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),V.moveToProtected(t,e,["parentProp"]),cG(t,e)}const uG=V.newInstance(KM,"vtkProp");var kc={newInstance:uG,extend:KM,...WM};const fG=1e-6;function gG(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=r=>{e.position=e.position.map((s,i)=>s+r[i]),t.modified()},t.getOrientationWXYZ=()=>{const r=ms();Dd(r,e.rotation);const s=new Float64Array(3),i=pB(s,r);return[Mi(i),s[0],s[1],s[2]]},t.getOrientationQuaternion=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Dd(r,e.rotation)},t.rotateX=r=>{r!==0&&($E(e.rotation,e.rotation,ct(r)),t.modified())},t.rotateY=r=>{r!==0&&(HE(e.rotation,e.rotation,ct(r)),t.modified())},t.rotateZ=r=>{r!==0&&(WE(e.rotation,e.rotation,ct(r)),t.modified())},t.rotateWXYZ=(r,s,i,c)=>{if(r===0||s===0&&i===0&&c===0)return;const l=ct(r),f=ms();Up(f,[s,i,c],l);const g=new Float64Array(16);ec(g,f),Zt(e.rotation,e.rotation,g),t.modified()},t.rotateQuaternion=r=>{if(Math.abs(r[3])>=1-fG)return;const s=ec(new Float64Array(16),r);Zt(e.rotation,e.rotation,s),t.modified()},t.setOrientation=(r,s,i)=>r===e.orientation[0]&&s===e.orientation[1]&&i===e.orientation[2]?!1:(e.orientation=[r,s,i],Ve(e.rotation),t.rotateZ(i),t.rotateX(r),t.rotateY(s),t.modified(),!0),t.setOrientationFromQuaternion=r=>{const s=Ef();return ec(s,r),vc(s,e.rotation)?!1:(e.rotation=s,t.modified(),!0)},t.setUserMatrix=r=>vc(e.userMatrix,r)?!1:($t(e.userMatrix,r),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Ve(e.matrix),e.userMatrix&&Zt(e.matrix,e.matrix,e.userMatrix),wt(e.matrix,e.matrix,e.origin),wt(e.matrix,e.matrix,e.position),Zt(e.matrix,e.matrix,e.rotation),hc(e.matrix,e.matrix,e.scale),wt(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),Je(e.matrix,e.matrix),e.isIdentity=!0;for(let r=0;r<4;++r)for(let s=0;s<4;++s)(r===s?1:0)!==e.matrix[r+s*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getBoundsByReference=()=>{if(e.mapper===null)return e.bounds;const r=e.mapper.getBounds();if(!r||r.length!==6)return r;if(r[0]>r[1])return e.mapperBounds=r,e.bounds=[..._e.INIT_BOUNDS],e.boundsMTime.modified(),r;if(!e.mapperBounds||!r.every((s,i)=>r[i]===e.mapperBounds[i])||t.getMTime()>e.boundsMTime.getMTime()){V.vtkDebugMacro("Recomputing bounds..."),e.mapperBounds=r,t.computeMatrix();const s=new Float64Array(16);Je(s,e.matrix),_e.transformBounds(r,s,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBounds=()=>{const r=t.getBoundsByReference();try{return[...r]}catch{return r}},t.getCenter=()=>_e.getCenter(e.bounds),t.getLength=()=>_e.getLength(e.bounds),t.getXRange=()=>_e.getXRange(e.bounds),t.getYRange=()=>_e.getYRange(e.bounds),t.getZRange=()=>_e.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function n(){t.computeMatrix()}t.onModified(n),t.getProperty=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.properties[r]==null&&(e.properties[r]=t.makeProperty?.()),e.properties[r]},t.getProperties=()=>(e.properties.length===0&&(e.properties[0]=t.makeProperty?.()),e.properties),t.setProperty=(r,s)=>{const i=Number.isInteger(r),[c,l]=i?[r,s]:[0,r];return e.properties[c]===l?!1:(e.properties[c]=l,!0)},t.getMTime=()=>{let r=e.mtime;return e.properties.forEach(s=>{if(s!==null){const i=s.getMTime();r=i>r?i:r}}),r}}const hG={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[..._e.INIT_BOUNDS],properties:[],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function XM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,hG,n),kc.extend(t,e,n),e.matrixMTime={},V.obj(e.matrixMTime),V.get(t,e,["isIdentity"]),V.getArray(t,e,["orientation"]),V.setGetArray(t,e,["origin","position","scale"],3),V.setGet(t,e,["properties"]),e.matrix=Ve(new Float64Array(16)),e.rotation=Ve(new Float64Array(16)),e.userMatrix=Ve(new Float64Array(16)),e.transform=null,gG(t,e)}const dG=V.newInstance(XM,"vtkProp3D");var pG={newInstance:dG,extend:XM};const YM={FLAT:0,GOURAUD:1,PHONG:2},Gn={POINTS:0,WIREFRAME:1,SURFACE:2},yG=YM;var qM={Shading:YM,Representation:Gn,Interpolation:yG};const{Representation:Ko,Interpolation:Xo}=qM;function PT(t){return()=>V.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function xG(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(n,r,s)=>{Array.isArray(n)?(e.color[0]!==n[0]||e.color[1]!==n[1]||e.color[2]!==n[2])&&(e.color[0]=n[0],e.color[1]=n[1],e.color[2]=n[2],t.modified()):(e.color[0]!==n||e.color[1]!==r||e.color[2]!==s)&&(e.color[0]=n,e.color[1]=r,e.color[2]=s,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=PT("ComputeCompositeColor"),t.getColor=()=>{let n=0;e.ambient+e.diffuse+e.specular>0&&(n=1/(e.ambient+e.diffuse+e.specular));for(let r=0;r<3;r++)e.color[r]=n*(e.ambient*e.ambientColor[r]+e.diffuse*e.diffuseColor[r]+e.specular*e.specularColor[r]);return[].concat(e.color)},t.setSpecularPower=n=>{const r=1/Math.max(1,n);(e.roughness!==r||e.specularPower!==n)&&(e.specularPower=n,e.roughness=r,t.modified())},t.addShaderVariable=PT("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Xo.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Xo.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Xo.PHONG),t.getInterpolationAsString=()=>V.enumToString(Xo,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(Ko.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Ko.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Ko.POINTS),t.getRepresentationAsString=()=>V.enumToString(Ko,e.representation)}const vG={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Xo.GOURAUD,representation:Ko.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null,ORMTexture:null,RMTexture:null};function mG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vG,n),V.obj(t,e),V.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture","ORMTexture","RMTexture"]),V.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),xG(t,e)}const TG=V.newInstance(mG,"vtkProperty");var Bc={newInstance:TG,...qM};function SG(t,e){e.classHierarchy.push("vtkActor");const n={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.properties[0]||t.getProperty();let r=e.properties[0].getOpacity()>=1;return r=r&&(!e.texture||!e.texture.isTranslucent()),r=r&&(!e.mapper||e.mapper.getIsOpaque()),r},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.properties[0]||t.getProperty(),!t.getIsOpaque()),t.makeProperty=Bc.newInstance,t.getMTime=()=>{let r=n.getMTime();if(e.backfaceProperty!==null){const s=e.backfaceProperty.getMTime();r=s>r?s:r}return r},t.getRedrawMTime=()=>{let r=e.mtime;if(e.mapper!==null){let s=e.mapper.getMTime();r=s>r?s:r,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),s=e.mapper.getInput().getMTime(),r=s>r?s:r)}return r},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(r,s)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(r,s)}}const CG={mapper:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1};function ZM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,CG,n),pG.extend(t,e,n),e.boundsMTime={},V.obj(e.boundsMTime),V.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),SG(t,e)}const EG=V.newInstance(ZM,"vtkActor");var Ss={newInstance:EG,extend:ZM};const wG={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Rt={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",UNSIGNED_CHAR_CLAMPED:"Uint8ClampedArray",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},MG=Rt.FLOAT;var QM={DefaultDataType:MG,DataTypeByteSize:wG,VtkDataTypes:Rt};const{vtkErrorMacro:bG}=fr,{DefaultDataType:OG}=QM,DG=1e-6;function Xd(t,e,n){const r=t.length;let s=Number.MAX_VALUE,i=-Number.MAX_VALUE,c,l;for(l=e;l<r;l+=n)if(!Number.isNaN(t[l])){s=t[l],i=s;break}for(;l<r;l+=n)c=t[l],c<s?s=c:c>i&&(i=c);return{min:s,max:i}}function RG(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,n=0,r=0;return{add(s){t>s&&(t=s),e<s&&(e=s),n++,r+=s},get(){return{min:t,max:e,count:n,sum:r,mean:r/n}},getRange(){return{min:t,max:e}}}}function PM(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&n>1){const s=t.length/n,i=new Float64Array(s);for(let c=0,l=0;c<s;++c){for(let f=l+n;l<f;++l)i[c]+=t[l]*t[l];i[c]**=.5}return Xd(i,0,1)}return Xd(t,e<0?0:e,n)}function JT(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=t||[];for(;n.length<=e;)n.push(null);return n}function l1(t){return Object.prototype.toString.call(t).slice(8,-1)}function NG(t){const e=t.getNumberOfComponents();let n=0;const r=new Array(e);for(let s=0;s<t.getNumberOfTuples();++s){t.getTuple(s,r);const i=Tn(r,e);i>n&&(n=i)}return n}const LG={computeRange:PM,createRangeHelper:RG,fastComputeRange:Xd,getDataType:l1,getMaxNorm:NG};function VG(t,e){e.classHierarchy.push("vtkDataArray");function n(r){if(r<0)return!1;const s=t.getNumberOfComponents(),i=e.values.length/(s>0?s:1);if(r===i)return!0;if(r>i){const c=e.values;return e.values=Vi(e.dataType,(r+i)*s),e.values.set(c),!0}return e.size>r*s&&(e.size=r*s,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.allocate=r=>{n(t.getNumberOfTuples()+r)},t.resize=r=>{n(r);const s=r*t.getNumberOfComponents();return e.size!==s?(e.size=s,t.dataChange(),!0):!1},t.initialize=()=>(t.resize(0),t),t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[r*e.numberOfComponents+s]},t.setComponent=(r,s,i)=>{i!==e.values[r*e.numberOfComponents+s]&&(e.values[r*e.numberOfComponents+s]=i,t.dataChange())},t.getValue=r=>{const s=r/e.numberOfComponents,i=r%e.numberOfComponents;return t.getComponent(s,i)},t.setValue=(r,s)=>{const i=r/e.numberOfComponents,c=r%e.numberOfComponents;t.setComponent(i,c,s)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,s=r;s<0&&(s=e.numberOfComponents===1?0:e.numberOfComponents);let i=null;return e.ranges||(e.ranges=JT(e.ranges,e.numberOfComponents)),i=e.ranges[s],i?(e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple):(i=PM(t.getData(),r,e.numberOfComponents),e.ranges[s]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple)},t.setRange=(r,s)=>{e.ranges||(e.ranges=JT(e.ranges,e.numberOfComponents));const i={min:r.min,max:r.max};return e.ranges[s]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple},t.getRanges=function(){if(!(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0))return structuredClone(e.ranges);const s=[];for(let i=0;i<e.numberOfComponents;i++){const[c,l]=t.getRange(i),f={min:c,max:l};s.push(f)}if(e.numberOfComponents>1){const[i,c]=t.getRange(-1),l={min:i,max:c};s.push(l)}return s},t.setTuple=(r,s)=>{const i=r*e.numberOfComponents;for(let c=0;c<e.numberOfComponents;c++)e.values[i+c]=s[c]},t.setTuples=(r,s)=>{let i=r*e.numberOfComponents;const c=Math.min(s.length,e.size-i);for(let l=0;l<c;)e.values[i++]=s[l++]},t.insertTuple=(r,s)=>(e.size<=r*e.numberOfComponents&&(e.size=(r+1)*e.numberOfComponents,n(r+1)),t.setTuple(r,s),r),t.insertTuples=(r,s)=>{const i=r+s.length/e.numberOfComponents;return e.size<i*e.numberOfComponents&&(e.size=i*e.numberOfComponents,n(i)),t.setTuples(r,s),i},t.insertNextTuple=r=>{const s=e.size/e.numberOfComponents;return t.insertTuple(s,r)},t.insertNextTuples=r=>{const s=e.size/e.numberOfComponents;return t.insertTuples(s,r)},t.findTuple=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DG;for(let i=0;i<e.size;i+=e.numberOfComponents)if(Math.abs(r[0]-e.values[i])<=s){let c=!0;for(let l=1;l<e.numberOfComponents;++l)if(Math.abs(r[l]-e.values[i+l])>s){c=!1;break}if(c)return i/e.numberOfComponents}return-1},t.getTuple=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e.numberOfComponents||1,c=r*i;switch(i){case 4:s[3]=e.values[c+3];case 3:s[2]=e.values[c+2];case 2:s[1]=e.values[c+1];case 1:s[0]=e.values[c];break;default:for(let l=i-1;l>=0;--l)s[l]=e.values[c+l]}return s},t.getTuples=(r,s)=>{const i=(r??0)*e.numberOfComponents,c=(s??t.getNumberOfTuples())*e.numberOfComponents,l=t.getData().subarray(i,c);return l.length>0?l:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>IM({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(r,s)=>{e.values=r,e.size=r.length,e.dataType=l1(r),s&&(e.numberOfComponents=s),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const r={...e,vtkClass:t.getClassName()};r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach(i=>{r[i]||delete r[i]});const s={};return Object.keys(r).sort().forEach(i=>{s[i]=r[i]}),s.mtime&&delete s.mtime,s},t.deepCopy=r=>{const s=t.getDataType(),i=e.values;t.shallowCopy(r),e.ranges=structuredClone(r.getRanges()),i?.length>=r.getNumberOfValues()&&s===r.getDataType()?(i.set(r.getData()),e.values=i,t.dataChange()):t.setData(r.getData().slice())},t.interpolateTuple=(r,s,i,c,l,f)=>{const g=e.numberOfComponents||1;(g!==s.getNumberOfComponents()||g!==c.getNumberOfComponents())&&bG("numberOfComponents must match");const p=s.getTuple(i),h=c.getTuple(l),y=[];switch(y.length=g,g){case 4:y[3]=p[3]+(h[3]-p[3])*f;case 3:y[2]=p[2]+(h[2]-p[2])*f;case 2:y[1]=p[1]+(h[1]-p[1])*f;case 1:y[0]=p[0]+(h[0]-p[0])*f;break;default:for(let v=0;v<g;v++)y[v]=p[v]+(h[v]-p[v])*f}return t.insertTuple(r,y)}}const _G={name:"",numberOfComponents:1,dataType:OG,rangeTuple:[0,0]};function JM(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,_G,n),Array.isArray(n.values)&&n.dataType===void 0&&console.warn("vtkDataArray.newInstance: no dataType provided, converting to Float32Array"),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=Fp(e.dataType,e.values)):e.values=Vi(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=l1(e.values)),Wt(t,e),Dc(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");VG(t,e)}const IM=et(JM,"vtkDataArray");var rt={newInstance:IM,extend:JM,...LG,...QM};function kG(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=n=>n.isA("vtkPlane")?e.clippingPlanes.includes(n)?!1:(e.clippingPlanes.push(n),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=n=>{const r=e.clippingPlanes.indexOf(n);return r===-1?!1:(e.clippingPlanes.splice(r,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=n=>{if(n)if(!Array.isArray(n))t.addClippingPlane(n);else{const r=n.length;for(let s=0;s<r&&s<6;s++)t.addClippingPlane(n[s])}},t.getClippingPlaneInDataCoords=(n,r,s)=>{const i=e.clippingPlanes,c=n;if(i){const l=i.length;if(r>=0&&r<l){const f=i[r],g=f.getNormal(),p=f.getOrigin(),h=g[0],y=g[1],v=g[2],E=-(h*p[0]+y*p[1]+v*p[2]);s[0]=h*c[0]+y*c[4]+v*c[8]+E*c[12],s[1]=h*c[1]+y*c[5]+v*c[9]+E*c[13],s[2]=h*c[2]+y*c[6]+v*c[10]+E*c[14],s[3]=h*c[3]+y*c[7]+v*c[11]+E*c[15];return}}V.vtkErrorMacro(`Clipping plane index ${r} is out of range.`)}}const BG={clippingPlanes:[]};function UG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,BG,n),V.obj(t,e),V.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),kG(t,e)}var FG={extend:UG};function jG(t,e){t.getBounds=()=>(V.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),Of()),t.getCenter=()=>{const n=t.getBounds();return e.center=_e.isValid(n)?_e.getCenter(n):null,e.center?.slice()},t.getLength=()=>{const n=t.getBounds();return _e.getDiagonalLength(n)}}const GG=t=>({bounds:[..._e.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function zG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GG(n)),FG.extend(t,e,n),V.setGet(t,e,["viewSpecificProperties"]),jG(t,e)}var AG={extend:zG};const{vtkErrorMacro:IT,vtkWarningMacro:$G}=V;function HG(t,e){e.classHierarchy.push("vtkFieldData");const n=t.getState;e.arrays&&(e.arrays=e.arrays.map(r=>({data:Pn(r.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=r=>{t.initializeFields(),e.copyFieldFlags=r.getCopyFieldFlags().map(s=>s),e.arrays=r.getArrays().map(s=>({data:s}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=r=>{const s=r.getName(),{array:i,index:c}=t.getArrayWithIndex(s);return i!=null?(e.arrays[c]={data:r},c):(e.arrays=[].concat(e.arrays,{data:r}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=r=>{const s=e.arrays.findIndex(i=>i.data.getName()===r);return t.removeArrayByIndex(s)},t.removeArrayByIndex=r=>r!==-1&&r<e.arrays.length?(e.arrays.splice(r,1),!0):!1,t.getArrays=()=>e.arrays.map(r=>r.data),t.getArray=r=>typeof r=="number"?t.getArrayByIndex(r):t.getArrayByName(r),t.getArrayByName=r=>e.arrays.reduce((s,i,c)=>i.data.getName()===r?i.data:s,null),t.getArrayWithIndex=r=>{const s=e.arrays.findIndex(i=>i.data.getName()===r);return{array:s!==-1?e.arrays[s].data:null,index:s}},t.getArrayByIndex=r=>r>=0&&r<e.arrays.length?e.arrays[r].data:null,t.hasArray=r=>t.getArrayWithIndex(r).index>=0,t.getArrayName=r=>{const s=e.arrays[r];return s?s.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=r=>e.copyFieldFlags[r],t.passData=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;r.getArrays().forEach(c=>{const l=t.getFlag(c.getName());if(l!==!1&&!(e.doCopyAllOff&&l!==!0)&&c){let f=t.getArrayByName(c.getName());if(f)if(c.getNumberOfComponents()===f.getNumberOfComponents())if(s>-1&&s<c.getNumberOfTuples()){const g=i>-1?i:s;f.insertTuple(g,c.getTuple(s))}else f.insertTuples(0,c.getTuples());else IT("Unhandled case in passData");else if(s<0||s>c.getNumberOfTuples())t.addArray(c),r.getAttributes(c).forEach(g=>{t.setAttribute(c,g)});else{const g=c.getNumberOfComponents();let p=c.getNumberOfValues();const h=i>-1?i:s;p<=h*g&&(p=(h+1)*g),f=rt.newInstance({name:c.getName(),dataType:c.getDataType(),numberOfComponents:g,values:V.newTypedArray(c.getDataType(),p),size:0}),f.insertTuple(h,c.getTuple(s)),t.addArray(f),r.getAttributes(c).forEach(y=>{t.setAttribute(f,y)})}}})},t.interpolateData=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;r.getArrays().forEach(f=>{const g=t.getFlag(f.getName());if(g!==!1&&!(e.doCopyAllOff&&g!==!0)&&f){let p=t.getArrayByName(f.getName());if(p)if(f.getNumberOfComponents()===p.getNumberOfComponents())if(s>-1&&s<f.getNumberOfTuples()){const h=c>-1?c:s;p.interpolateTuple(h,f,s,f,i,l),$G("Unexpected case in interpolateData")}else p.insertTuples(f.getTuples());else IT("Unhandled case in interpolateData");else if(s<0||i<0||s>f.getNumberOfTuples())t.addArray(f),r.getAttributes(f).forEach(h=>{t.setAttribute(f,h)});else{const h=f.getNumberOfComponents();let y=f.getNumberOfValues();const v=c>-1?c:s;y<=v*h&&(y=(v+1)*h),p=rt.newInstance({name:f.getName(),dataType:f.getDataType(),numberOfComponents:h,values:V.newTypedArray(f.getDataType(),y),size:0}),p.interpolateTuple(v,f,s,f,i,l),t.addArray(p),r.getAttributes(f).forEach(E=>{t.setAttribute(p,E)})}}})},t.copyFieldOn=r=>{e.copyFieldFlags[r]=!0},t.copyFieldOff=r=>{e.copyFieldFlags[r]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=r=>{e.arrays=r.getArrays().map(s=>{const i=s.newClone();return i.deepCopy(s),{data:i}})},t.copyFlags=r=>r.getCopyFieldFlags().map(s=>s),t.reset=()=>e.arrays.forEach(r=>r.data.reset()),t.getMTime=()=>e.arrays.reduce((r,s)=>s.data.getMTime()>r?s.data.getMTime():r,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((r,s)=>r+s.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const r=n();return r&&(r.arrays=e.arrays.map(s=>({data:s.data.getState()}))),r}}const WG={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function eb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WG,n),V.obj(t,e),HG(t,e)}const KG=V.newInstance(eb,"vtkFieldData");var XG={newInstance:KG,extend:eb};const YG={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},qG={MAX:0,EXACT:1,NOLIMIT:2},ZG={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},QG={DUPLICATEPOINT:1,HIDDENPOINT:2},PG={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},JG="vtkGhostType",IG={DEFAULT:0,SINGLE:1,DOUBLE:2};var tb={AttributeCopyOperations:PG,AttributeLimitTypes:qG,AttributeTypes:YG,CellGhostTypes:ZG,DesiredOutputPrecision:IG,PointGhostTypes:QG,ghostArrayName:JG};const{AttributeTypes:fa,AttributeCopyOperations:es}=tb,{vtkWarningMacro:gu}=V;function e6(t,e){const n=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function r(c){let l=n.find(f=>fa[f.toUpperCase()]===c||typeof c!="number"&&f.toLowerCase()===c.toLowerCase());return typeof l>"u"&&(l=null),l}e.classHierarchy.push("vtkDataSetAttributes");const s={...t};t.checkNumberOfComponents=c=>!0,t.setAttribute=(c,l)=>{const f=r(l);if(c&&f.toUpperCase()==="PEDIGREEIDS"&&!c.isA("vtkDataArray"))return gu(`Cannot set attribute ${f}. The attribute must be a vtkDataArray.`),-1;if(c&&!t.checkNumberOfComponents(c,f))return gu(`Cannot set attribute ${f}. Incorrect number of components.`),-1;if(c){const g=t.addArray(c);e[`active${f}`]=g}else e[`active${f}`]=-1;return t.modified(),e[`active${f}`]},t.getAttributes=c=>n.filter(l=>t[`get${l}`]()===c),t.setActiveAttributeByName=(c,l)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(c).index,l),t.setActiveAttributeByIndex=(c,l)=>{const f=r(l);if(c>=0&&c<e.arrays.length){if(f.toUpperCase()!=="PEDIGREEIDS"){const g=t.getArrayByIndex(c);if(!g.isA("vtkDataArray"))return gu(`Cannot set attribute ${f}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(g,f))return gu(`Cannot set attribute ${f}. Incorrect number of components.`),-1}return e[`active${f}`]=c,t.modified(),c}return c===-1&&(e[`active${f}`]=c,t.modified()),-1},t.getActiveAttribute=c=>{const l=r(c);return t[`get${l}`]()},t.removeAllArrays=()=>{n.forEach(c=>{e[`active${c}`]=-1}),s.removeAllArrays()},t.removeArrayByIndex=c=>(c!==-1&&n.forEach(l=>{c===e[`active${l}`]?e[`active${l}`]=-1:c<e[`active${l}`]&&(e[`active${l}`]-=1)}),s.removeArrayByIndex(c)),n.forEach(c=>{const l=`active${c}`;t[`get${c}`]=()=>t.getArrayByIndex(e[l]),t[`set${c}`]=f=>t.setAttribute(f,c),t[`setActive${c}`]=f=>t.setActiveAttributeByIndex(t.getArrayWithIndex(f).index,c),t[`copy${c}Off`]=()=>{const f=c.toUpperCase();e.copyAttributeFlags[es.PASSDATA][fa[f]]=!1},t[`copy${c}On`]=()=>{const f=c.toUpperCase();e.copyAttributeFlags[es.PASSDATA][fa[f]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(es).filter(c=>c!=="ALLCOPY").forEach(c=>{e.copyAttributeFlags[es[c]]=Object.keys(fa).filter(l=>l!=="NUM_ATTRIBUTES").reduce((l,f)=>(l[fa[f]]=!0,l),[])}),e.copyAttributeFlags[es.COPYTUPLE][fa.GLOBALIDS]=!1,e.copyAttributeFlags[es.INTERPOLATE][fa.GLOBALIDS]=!1,e.copyAttributeFlags[es.COPYTUPLE][fa.PEDIGREEIDS]=!1},t.initialize=V.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(c=>{!e.dataArrays[c].ref&&e.dataArrays[c].type==="vtkDataArray"&&t.addArray(rt.newInstance(e.dataArrays[c]))});const i=t.shallowCopy;t.shallowCopy=(c,l)=>{i(c,l),e.arrays=c.getArrays().map(f=>{const g=f.newClone();return g.shallowCopy(f,l),{data:g}})},t.initializeAttributeCopyFlags()}const t6={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function nb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,t6,n),XG.extend(t,e,n),V.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),e6(t,e)}const n6=V.newInstance(nb,"vtkDataSetAttributes");var eS={newInstance:n6,extend:nb,...tb};const r6={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},a6={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var s6={FieldDataTypes:r6,FieldAssociations:a6};const Yo=["pointData","cellData","fieldData"];function i6(t,e){e.classHierarchy.push("vtkDataSet"),Yo.forEach(s=>{e[s]?e[s]=Pn(e[s]):e[s]=eS.newInstance()}),t.computeBounds=()=>{if(e.modifiedTime&&e.computeTime&&e.modifiedTime>e.computeTime||!e.computeTime){const s=t.getPoints();s?.getNumberOfPoints()?_e.setBounds(e.bounds,s.getBoundsByReference()):e.bounds=ZT.createUninitializedBounds(),e.computeTime=V.getCurrentGlobalMTime()}},t.getLength2=()=>{const s=t.getBoundsByReference();return!s||s.length!==6?0:_e.getDiagonalLength2(s)},t.getLength=()=>Math.sqrt(t.getLength2()),t.getCenter=()=>{const s=t.getBoundsByReference();return!s||s.length!==6?[0,0,0]:_e.getCenter(s)},t.getCellBounds=s=>{const i=t.getCell(s);return i?i.getBounds():ZT.createUninitializedBounds()},t.getBounds=V.chain(()=>t.computeBounds,t.getBounds),t.getBoundsByReference=V.chain(()=>t.computeBounds,t.getBoundsByReference);const n=t.shallowCopy;t.shallowCopy=function(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(s,i),Yo.forEach(c=>{e[c]=eS.newInstance(),e[c].shallowCopy(s.getReferenceByName(c))})};const r=t.getMTime;t.getMTime=()=>Yo.reduce((s,i)=>Math.max(s,e[i]?.getMTime()??s),r()),t.initialize=()=>(Yo.forEach(s=>e[s]?.initialize()),t)}const o6={};function rb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o6,n),V.obj(t,e),V.setGet(t,e,Yo),V.getArray(t,e,["bounds"],6),i6(t,e)}const c6=V.newInstance(rb,"vtkDataSet");var ki={newInstance:c6,extend:rb,...s6};const Un={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var ab={StructuredType:Un};const{StructuredType:Nr}=ab;function l6(t){let e=0;for(let n=0;n<3;++n)t[n*2]<t[n*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?Nr.EMPTY:e===3?Nr.XYZ_GRID:e===2?t[0]===t[1]?Nr.YZ_PLANE:t[2]===t[3]?Nr.XZ_PLANE:Nr.XY_PLANE:e===1?t[0]<t[1]?Nr.X_LINE:t[2]<t[3]?Nr.Y_LINE:Nr.Z_LINE:Nr.SINGLE_POINT}var u6={getDataDescriptionFromExtent:l6,...ab};const{vtkErrorMacro:ts}=V;function f6(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return ts("instance deleted - cannot call any method"),!1;for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];const c=s.length===1?s[0]:s;if(c.length!==6)return!1;const l=e.extent.some((f,g)=>f!==c[g]);return l&&(e.extent=c.slice(),e.dataDescription=u6.getDataDescriptionFromExtent(e.extent),t.modified()),l},t.setDimensions=function(){let r,s,i;if(e.deleted){ts("instance deleted - cannot call any method");return}if(arguments.length===1){const c=arguments.length<=0?void 0:arguments[0];r=c[0],s=c[1],i=c[2]}else if(arguments.length===3)r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2];else{ts("Bad dimension specification");return}t.setExtent(0,r-1,0,s-1,0,i-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const r=t.getDimensions();let s=1;for(let i=0;i<3;i++){if(r[i]===0)return 0;r[i]>1&&(s*=r[i]-1)}return s},t.getNumberOfPoints=()=>{const r=t.getDimensions();return r[0]*r[1]*r[2]},t.getPoint=r=>{const s=t.getDimensions();if(s[0]===0||s[1]===0||s[2]===0)return ts("Requesting a point from an empty image."),null;const i=new Float64Array(3);switch(e.dataDescription){case Un.EMPTY:return null;case Un.SINGLE_POINT:break;case Un.X_LINE:i[0]=r;break;case Un.Y_LINE:i[1]=r;break;case Un.Z_LINE:i[2]=r;break;case Un.XY_PLANE:i[0]=r%s[0],i[1]=r/s[0];break;case Un.YZ_PLANE:i[1]=r%s[1],i[2]=r/s[1];break;case Un.XZ_PLANE:i[0]=r%s[0],i[2]=r/s[0];break;case Un.XYZ_GRID:i[0]=r%s[0],i[1]=r/s[0]%s[1],i[2]=r/(s[0]*s[1]);break;default:ts("Invalid dataDescription");break}const c=[0,0,0];return t.indexToWorld(i,c),c},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=r=>_e.transformBounds(r,e.indexToWorld),t.getSpatialExtent=()=>_e.inflate([...e.extent],.5),t.computeTransforms=()=>{KE(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],hc(e.indexToWorld,e.indexToWorld,e.spacing),An(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return $e(s,r,e.indexToWorld),s},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return $e(s,r,e.worldToIndex),s},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _e.transformBounds(r,e.indexToWorld,s)},t.worldToIndexBounds=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return _e.transformBounds(r,e.worldToIndex,s)},e._onOriginChanged=t.computeTransforms,e._onDirectionChanged=t.computeTransforms,e._onSpacingChanged=t.computeTransforms,t.computeTransforms(),t.getCenter=()=>_e.getCenter(t.getBounds()),t.computeHistogram=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const i=[0,0,0,0,0,0];t.worldToIndexBounds(r,i);const c=[0,0,0],l=[0,0,0];_e.computeCornerPoints(i,c,l),zd(c,c),zd(l,l);const f=t.getDimensions();$d(c,[0,0,0],[f[0]-1,f[1]-1,f[2]-1],c),$d(l,[0,0,0],[f[0]-1,f[1]-1,f[2]-1],l);const g=f[0],p=f[0]*f[1],h=t.getPointData().getScalars().getData();let y=-1/0,v=1/0,E=0,x=0,T=0;for(let O=c[2];O<=l[2];O++)for(let R=c[1];R<=l[1];R++){let b=c[0]+R*g+O*p;for(let L=c[0];L<=l[0];L++){if(!s||s([L,R,O],i)){const k=h[b];k>y&&(y=k),k<v&&(v=k),E+=k*k,x+=k,T+=1}++b}}const w=T>0?x/T:0,D=T?Math.abs(E/T-w*w):0,M=Math.sqrt(D);return{minimum:v,maximum:y,average:w,variance:D,sigma:M,count:T}},t.computeIncrements=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const i=[];let c=s;for(let l=0;l<3;++l)i[l]=c,c*=r[l*2+1]-r[l*2]+1;return i},t.computeOffsetIndex=r=>{let[s,i,c]=r;const l=t.getExtent(),f=t.getPointData().getScalars().getNumberOfComponents(),g=t.computeIncrements(l,f);return Math.floor((Math.round(s)-l[0])*g[0]+(Math.round(i)-l[2])*g[1]+(Math.round(c)-l[4])*g[2])},t.getOffsetIndexFromWorld=r=>{const s=t.getExtent(),i=t.worldToIndex(r);for(let c=0;c<3;++c)if(i[c]<s[c*2]||i[c]>s[c*2+1])return ts(`GetScalarPointer: Pixel ${i} is not in memory. Current extent = ${s}`),NaN;return t.computeOffsetIndex(i)},t.getScalarValueFromWorld=function(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getPointData().getScalars().getNumberOfComponents();if(s<0||s>=i)return ts(`GetScalarPointer: Scalar Component ${s} is not within bounds. Current Scalar numberOfComponents: ${i}`),NaN;const c=t.getOffsetIndexFromWorld(r);return Number.isNaN(c)?c:t.getPointData().getScalars().getComponent(c,s)};const n=t.initialize;t.initialize=()=>(t.set({direction:Na(e.direction),spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Un.EMPTY}),n())}const g6={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Un.EMPTY};function sb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g6,n),ki.extend(t,e,n),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=Na(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),V.get(t,e,["indexToWorld","worldToIndex"]),V.setGetArray(t,e,["origin","spacing"],3),V.setGetArray(t,e,["direction"],9),V.getArray(t,e,["extent"],6),f6(t,e)}const h6=V.newInstance(sb,"vtkImageData");var d6={newInstance:h6,extend:sb};const p6={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},Yd={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},y6={LINEAR:0,LOG10:1};var u1={VectorMode:p6,ScalarMappingTarget:Yd,Scale:y6};const x6={DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},v6={DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5},m6={BY_ID:0,BY_NAME:1};var f1={ColorMode:x6,GetArray:m6,ScalarMode:v6};const{ScalarMappingTarget:tS,Scale:T6,VectorMode:sr}=u1,{VtkDataTypes:ga}=rt,{ColorMode:hu}=f1,{vtkErrorMacro:nS}=V;function S6(t){return t}function rS(t){return Math.floor(t*255+.5)}function C6(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(sr.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(sr.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(sr.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(n,r)=>{if(!(n&&!r||!n&&r)){if(n&&r&&n.length!==r.length){nS("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],r&&n){const s=r.length;for(let i=0;i<s;i++)e.annotationArray.push({value:n[i],annotation:String(r[i])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(n,r)=>{let s=t.checkForAnnotatedValue(n),i=!1;return s>=0?e.annotationArray[s].annotation!==r&&(e.annotationArray[s].annotation=r,i=!0):(e.annotationArray.push({value:n,annotation:r}),s=e.annotationArray.length-1,i=!0),i&&(t.updateAnnotatedValueMap(),t.modified()),s},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=n=>n<0||n>=e.annotationArray.length?null:e.annotationArray[n].value,t.getAnnotation=n=>e.annotationArray[n]===void 0?null:e.annotationArray[n].annotation,t.getAnnotatedValueIndex=n=>e.annotationArray.length?t.checkForAnnotatedValue(n):-1,t.removeAnnotation=n=>{const r=t.checkForAnnotatedValue(n),s=r>=0;return s&&(e.annotationArray.splice(r,1),t.updateAnnotatedValueMap(),t.modified()),s},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(n,r)=>{if(e.indexedLookup){const s=t.getAnnotatedValueIndex(n);t.getIndexedColor(s,r)}else t.getColor(parseFloat(n),r),r[3]=1},t.checkForAnnotatedValue=n=>t.getAnnotatedValueIndexInternal(n),t.getAnnotatedValueIndexInternal=n=>{if(e.annotatedValueMap[n]!==void 0){const r=e.annotationArray.length;return e.annotatedValueMap[n]%r}return-1},t.getIndexedColor=(n,r)=>{r[0]=0,r[1]=0,r[2]=0,r[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const n=e.annotationArray.length;for(let r=0;r<n;r++)e.annotatedValueMap[e.annotationArray[r].value]=r},t.mapScalars=(n,r,s)=>{const i=n.getNumberOfComponents();let c=null;if(r===hu.DEFAULT&&(n.getDataType()===ga.UNSIGNED_CHAR||n.getDataType()===ga.UNSIGNED_CHAR_CLAMPED)||r===hu.DIRECT_SCALARS&&n)c=t.convertToRGBA(n,i,n.getNumberOfTuples());else{const l={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:ga.UNSIGNED_CHAR},f=V.newTypedArray(l.dataType,4*n.getNumberOfTuples());l.values=f,l.size=f.length,c=rt.newInstance(l);let g=s;g<0&&i>1?t.mapVectorsThroughTable(n,c,tS.RGBA,-1,-1):(g<0&&(g=0),g>=i&&(g=i-1),t.mapScalarsThroughTable(n,c,tS.RGBA,g))}return c},t.mapVectorsToMagnitude=(n,r,s)=>{const i=n.getNumberOfTuples(),c=n.getNumberOfComponents(),l=r.getData(),f=n.getData();for(let g=0;g<i;g++){let p=0;for(let h=0;h<s;h++)p+=f[g*c+h]*f[g*c+h];l[g]=Math.sqrt(p)}},t.mapVectorsThroughTable=(n,r,s,i,c)=>{let l=t.getVectorMode(),f=c,g=i;const p=n.getNumberOfComponents();l===sr.COMPONENT?(g===-1&&(g=t.getVectorComponent()),g<0&&(g=0),g>=p&&(g=p-1)):(f===-1&&(f=t.getVectorSize()),f<=0?(g=0,f=p):(g<0&&(g=0),g>=p&&(g=p-1),g+f>p&&(f=p-g)),l===sr.MAGNITUDE&&(p===1||f===1)&&(l=sr.COMPONENT));let h=0;switch(g>0&&(h=g),l){case sr.COMPONENT:{t.mapScalarsThroughTable(n,r,s,h);break}case sr.RGBCOLORS:break;case sr.MAGNITUDE:default:{const y=rt.newInstance({numberOfComponents:1,values:new Float32Array(n.getNumberOfTuples())});t.mapVectorsToMagnitude(n,y,f),t.mapScalarsThroughTable(y,r,s,0);break}}},t.luminanceToRGBA=(n,r,s,i)=>{const c=i(s),l=r.getData(),f=n.getData(),g=l.length,p=0,h=1;let y=0;for(let v=p;v<g;v+=h){const E=i(l[v]);f[y*4]=E,f[y*4+1]=E,f[y*4+2]=E,f[y*4+3]=c,y++}},t.luminanceAlphaToRGBA=(n,r,s,i)=>{const c=r.getData(),l=n.getData(),f=c.length,g=0,p=2;let h=0;for(let y=g;y<f;y+=p){const v=i(c[y]);l[h]=v,l[h+1]=v,l[h+2]=v,l[h+3]=i(c[y+1])*s,h+=4}},t.rGBToRGBA=(n,r,s,i)=>{const c=rS(s),l=r.getData(),f=n.getData(),g=l.length,p=0,h=3;let y=0;for(let v=p;v<g;v+=h)f[y*4]=i(l[v]),f[y*4+1]=i(l[v+1]),f[y*4+2]=i(l[v+2]),f[y*4+3]=c,y++},t.rGBAToRGBA=(n,r,s,i)=>{const c=r.getData(),l=n.getData(),f=c.length,g=0,p=4;let h=0;for(let y=g;y<f;y+=p)l[h*4]=i(c[y]),l[h*4+1]=i(c[y+1]),l[h*4+2]=i(c[y+2]),l[h*4+3]=i(c[y+3])*s,h++},t.convertToRGBA=(n,r,s)=>{let{alpha:i}=e;if(r===4&&i>=1&&n.getDataType()===ga.UNSIGNED_CHAR)return n;const c=rt.newInstance({numberOfComponents:4,empty:!0,size:4*s,dataType:ga.UNSIGNED_CHAR});if(s<=0)return c;i=i>0?i:0,i=i<1?i:1;let l=S6;switch((n.getDataType()===ga.FLOAT||n.getDataType()===ga.DOUBLE)&&(l=rS),r){case 1:t.luminanceToRGBA(c,n,i,l);break;case 2:t.luminanceAlphaToRGBA(c,n,l);break;case 3:t.rGBToRGBA(c,n,i,l);break;case 4:t.rGBAToRGBA(c,n,i,l);break;default:return nS("Cannot convert colors"),null}return c},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(n,r)=>t.setMappingRange(n,r),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(n,r,s)=>{if(!n)return t.isOpaque();const i=n.getNumberOfComponents();return r===hu.DEFAULT&&n.getDataType()===ga.UNSIGNED_CHAR||r===hu.DIRECT_SCALARS?i===3||i===1?e.alpha>=1:n.getRange(i-1)[0]===255:!0}}const E6={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:sr.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1,scale:T6.LINEAR};function ib(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,E6,n),V.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],V.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),V.setArray(t,e,["mappingRange"],2),V.getArray(t,e,["mappingRange"]),C6(t,e)}const w6=V.newInstance(ib,"vtkScalarsToColors");var ob={newInstance:w6,extend:ib,...u1};const{vtkErrorMacro:aS}=V,sS=0,iS=1,Hh=2;function M6(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let n=!0;e.nanColor[3]<1&&(n=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(n=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(n=0);for(let r=3;r<e.table.length&&n;r+=4)e.table[r]<255&&(n=!1);e.opaqueFlag=n,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4-3,t.linearIndexLookup=(n,r)=>{let s=0;const i=Number(n);return i<r.range[0]?s=r.maxIndex+sS+1.5:i>r.range[1]?s=r.maxIndex+iS+1.5:(s=(i+r.shift)*r.scale,s=s<r.maxIndex?s:r.maxIndex),Math.floor(s)},t.linearLookup=(n,r,s)=>{let i=0;gM(n)?i=Math.floor(s.maxIndex+1.5+Hh):i=t.linearIndexLookup(n,s);const c=4*i;return r.slice(c,c+4)},t.indexedLookupFunction=(n,r,s)=>{let i=t.getAnnotatedValueIndexInternal(n);i===-1&&(i=e.numberOfColors+Hh);const c=4*i;return[r[c],r[c+1],r[c+2],r[c+3]]},t.lookupShiftAndScale=(n,r)=>{r.shift=-n[0],r.scale=Number.MAX_VALUE,n[1]>n[0]&&(r.scale=(r.maxIndex+1)/(n[1]-n[0]))},t.mapScalarsThroughTable=(n,r,s,i)=>{let c=t.linearLookup;e.indexedLookup&&(c=t.indexedLookupFunction);const l=t.getMappingRange(),f={maxIndex:t.getNumberOfColors()-1,range:l,shift:0,scale:0};t.lookupShiftAndScale(l,f);const g=t.getAlpha(),p=n.getNumberOfTuples(),h=n.getNumberOfComponents(),y=r.getData(),v=n.getData();if(g>=1){if(s===Yd.RGBA)for(let E=0;E<p;E++){const x=c(v[E*h+i],e.table,f);y[E*4]=x[0],y[E*4+1]=x[1],y[E*4+2]=x[2],y[E*4+3]=x[3]}}else if(s===Yd.RGBA)for(let E=0;E<p;E++){const x=c(v[E*h+i],e.table,f);y[E*4]=x[0],y[E*4+1]=x[1],y[E*4+2]=x[2],y[E*4+3]=Math.floor(x[3]*g+.5)}},t.forceBuild=()=>{let n=0,r=0,s=0,i=0;const c=e.numberOfColors-1;c&&(n=(e.hueRange[1]-e.hueRange[0])/c,r=(e.saturationRange[1]-e.saturationRange[0])/c,s=(e.valueRange[1]-e.valueRange[0])/c,i=(e.alphaRange[1]-e.alphaRange[0])/c),e.table.length=4*c+16;const l=[],f=[];for(let g=0;g<=c;g++)l[0]=e.hueRange[0]+g*n,l[1]=e.saturationRange[0]+g*r,l[2]=e.valueRange[0]+g*s,oM(l,f),f[3]=e.alphaRange[0]+g*i,e.table[g*4]=f[0]*255+.5,e.table[g*4+1]=f[1]*255+.5,e.table[g*4+2]=f[2]*255+.5,e.table[g*4+3]=f[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=n=>{if(Array.isArray(n)){const s=n[0].length;e.numberOfColors=n.length;const i=4-s;let c=0;for(let l=0;l<e.numberOfColors;l++)e.table[l*4]=255,e.table[l*4+1]=255,e.table[l*4+2]=255,e.table[l*4+3]=255;for(let l=0;l<n.length;l++){const f=n[l];for(let g=0;g<s;g++)e.table[c++]=f[g];c+=i}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(n.getNumberOfComponents()!==4)return aS("Expected 4 components for RGBA colors"),!1;if(n.getDataType()!==Rt.UNSIGNED_CHAR)return aS("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=n.getNumberOfTuples();const r=n.getData();e.table.length=r.length;for(let s=0;s<r.length;s++)e.table[s]=r[s];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:n}=e,r=e.table;let s=(n+sS)*4;e.useBelowRangeColor||n===0?(r[s]=e.belowRangeColor[0]*255+.5,r[s+1]=e.belowRangeColor[1]*255+.5,r[s+2]=e.belowRangeColor[2]*255+.5,r[s+3]=e.belowRangeColor[3]*255+.5):(r[s]=r[0],r[s+1]=r[1],r[s+2]=r[2],r[s+3]=r[3]),s=(n+iS)*4,e.useAboveRangeColor||n===0?(r[s]=e.aboveRangeColor[0]*255+.5,r[s+1]=e.aboveRangeColor[1]*255+.5,r[s+2]=e.aboveRangeColor[2]*255+.5,r[s+3]=e.aboveRangeColor[3]*255+.5):(r[s]=r[4*(n-1)+0],r[s+1]=r[4*(n-1)+1],r[s+2]=r[4*(n-1)+2],r[s+3]=r[4*(n-1)+3]),s=(n+Hh)*4,r[s]=e.nanColor[0]*255+.5,r[s+1]=e.nanColor[1]*255+.5,r[s+2]=e.nanColor[2]*255+.5,r[s+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const b6={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function cb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b6,n),ob.extend(t,e,n),e.table||(e.table=[]),e.buildTime={},V.obj(e.buildTime),e.opaqueFlagBuildTime={},V.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},V.obj(e.insertTime,{mtime:0}),V.get(t,e,["buildTime"]),V.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),V.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),V.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),V.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),M6(t,e)}const O6=V.newInstance(cb,"vtkLookupTable");var D6={newInstance:O6,extend:cb};const La={Off:0,PolygonOffset:1};let qd=La.PolygonOffset,pf=La.Off;const R6=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function N6(){return qd}function L6(t){const e=qd===t;return qd=t,e}function V6(){return pf}function Lf(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const e=pf===t;return pf=t,e}function _6(){return Lf(La.Off)}function k6(){return Lf(La.Off)}function B6(){return Lf(La.PolygonOffset)}function U6(){return R6[pf]}var Zd={Resolve:La,getResolveCoincidentTopologyAsString:U6,getResolveCoincidentTopologyPolygonOffsetFaces:N6,getResolveCoincidentTopology:V6,setResolveCoincidentTopology:Lf,setResolveCoincidentTopologyPolygonOffsetFaces:L6,setResolveCoincidentTopologyToDefault:_6,setResolveCoincidentTopologyToOff:k6,setResolveCoincidentTopologyToPolygonOffset:B6};function lb(t,e,n){n.forEach(r=>{t[`get${r.method}`]=()=>e[r.key],t[`set${r.method}`]=V.objectSetterMap.object(t,e,{name:r.key,params:["factor","offset"]})})}const g1=["Polygon","Line","Point"],F6={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},j6=()=>{},fs={modified:j6};lb(fs,F6,g1.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function G6(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),V.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Zd).forEach(n=>{t[n]=Zd[n]}),Object.keys(fs).filter(n=>n!=="modified").forEach(n=>{t[n]=fs[n]}),lb(t,e.topologyOffset,g1.map(n=>({key:n,method:`RelativeCoincidentTopology${n}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const n=fs.getResolveCoincidentTopologyPolygonOffsetParameters(),r=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const n=fs.getResolveCoincidentTopologyLineOffsetParameters(),r=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const n=fs.getResolveCoincidentTopologyPointOffsetParameters(),r=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:n.factor+r.factor,offset:n.offset+r.offset}}}var ub={implementCoincidentTopologyMethods:G6,staticOffsetAPI:fs,otherStaticMethods:Zd,CATEGORIES:g1,Resolve:La};const qt={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var fb={PassTypes:qt};const{FieldAssociations:oS}=ki,{staticOffsetAPI:z6,otherStaticMethods:A6}=ub,{ColorMode:du,ScalarMode:ns,GetArray:Wh}=f1,{VectorMode:$6}=u1,{VtkDataTypes:H6}=rt;function Bo(t){return()=>V.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function W6(t,e){const n=t[1]%2===0?1:-1;if(t[0]+=n,t[0]>=e[0]||t[0]<0){const r=t[2]%2===0?1:-1;t[0]-=n,t[1]+=r,(t[1]>=e[1]||t[1]<0)&&(t[1]-=r,t[2]++)}}function K6(t,e){return t[0]+e[0]*(t[1]+e[1]*t[2])}function cS(t,e,n){const r=Math.floor(e),s=r%(2*n[0]);let i,c;s<n[0]?(t[0]=s,i=1,c=t[0]===n[0]-1):(t[0]=2*n[0]-1-s,i=-1,c=t[0]===0);const l=Math.floor(r/n[0]),f=l%(2*n[1]);let g,p;f<n[1]?(t[1]=f,g=1,p=t[1]===n[1]-1):(t[1]=2*n[1]-1-f,g=-1,p=t[1]===0),t[2]=Math.floor(l/n[1]);const h=e-r;c?p?t[2]+=h:t[1]+=g*h:t[0]+=i*h,t[0]=(t[0]+.5)/n[0],t[1]=(t[1]+.5)/n[1],t[2]=(t[2]+.5)/n[2]}const lS=new WeakMap;function X6(t,e,n,r,s,i,c){const l=new Array(arguments.length);for(let $=0;$<arguments.length;++$){const W=arguments[$];l[$]=W.getMTime?.()??W}const f=l.join("/"),g=lS.get(t);if(g&&g.stringHash===f)return g.textureCoordinates;const p=(n[1]-n[0])/(s-1),[h,y]=[n[0]-p,n[1]+p],v=h-.5*p,E=1/(y-h+p),x=h,T=(s+1)/(y-h),w=t.getData(),D=t.getNumberOfTuples(),M=t.getNumberOfComponents(),O=e<0||e>=M,R=i[2]<=1?2:3,b=rt.newInstance({numberOfComponents:R,values:new Float32Array(D*R)}),L=b.getData(),k=[0,0,0];cS(k,s+2,i);let B=0,j=0;const z=[.5,.5,.5];for(let $=0;$<D;++$){let W;if(O){let Z=0;for(let te=0;te<M;++te){const F=Number(w[B+te]);Z+=F*F}W=Math.sqrt(Z)}else W=Number(w[B+e]);if(r&&(W=Math.log10(W)),B+=M,gM(W))z[0]=k[0],z[1]=k[1],z[2]=k[2];else if(c){let Z=(W-x)*T;Z<1?Z=0:Z>s&&(Z=s+1),cS(z,Z,i)}else{z[1]=.49;const Z=(W-v)*E;Z>1e3?z[0]=1e3:Z<-1e3?z[0]=-1e3:z[0]=Z}for(let Z=0;Z<R;++Z)L[j++]=z[Z]}return lS.set(t,{stringHash:f,textureCoordinates:b}),b}function Y6(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=Of(),e.bounds},t.setForceCompileOnly=n=>{e.forceCompileOnly=n},t.setSelectionWebGLIdsToVTKIds=n=>{e.selectionWebGLIdsToVTKIds=n},t.createDefaultLookupTable=()=>{e.lookupTable=D6.newInstance()},t.getColorModeAsString=()=>V.enumToString(du,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>V.enumToString(ns,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(n,r,s,i,c)=>{if(!n||!e.scalarVisibility)return{scalars:null,cellFlag:!1};let l=null,f=!1;if(r===ns.DEFAULT)l=n.getPointData().getScalars(),l||(l=n.getCellData().getScalars(),f=!0);else if(r===ns.USE_POINT_DATA)l=n.getPointData().getScalars();else if(r===ns.USE_CELL_DATA)l=n.getCellData().getScalars(),f=!0;else if(r===ns.USE_POINT_FIELD_DATA){const g=n.getPointData();s===Wh.BY_ID?l=g.getArrayByIndex(i):l=g.getArrayByName(c)}else if(r===ns.USE_CELL_FIELD_DATA){const g=n.getCellData();f=!0,s===Wh.BY_ID?l=g.getArrayByIndex(i):l=g.getArrayByName(c)}else if(r===ns.USE_FIELD_DATA){const g=n.getFieldData();s===Wh.BY_ID?l=g.getArrayByIndex(i):l=g.getArrayByName(c)}return{scalars:l,cellFlag:f}},t.mapScalars=(n,r)=>{const{scalars:s,cellFlag:i}=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName);if(e.areScalarsMappedFromCells=i,!s){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const c=`${t.getMTime()}${s.getMTime()}${r}`;if(e.colorBuildString!==c){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(s,i))e.mapScalarsToTexture(s,i,r);else{e.colorCoordinates=null,e.colorTextureMap=null;const l=t.getLookupTable();l&&(l.build(),e.colorMapColors=l.mapScalars(s,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${s.getMTime()}${r}`}},e.mapScalarsToTexture=(n,r,s)=>{const i=e.lookupTable.getRange(),c=e.lookupTable.usingLogScale(),l=e.lookupTable.getAlpha(),f=c?[Math.log10(i[0]),Math.log10(i[1])]:i;if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==s){e.lookupTable.setAlpha(s),e.colorTextureMap=null,e.lookupTable.build();const p=e.lookupTable.getNumberOfAvailableColors(),h=2048,y=h**3-3,E=4096-2,x=2,T=r?y:E;e.numberOfColorsInRange=Math.min(Math.max(p,x),T);const w=e.numberOfColorsInRange+3,D=e.numberOfColorsInRange+2,M=r?[Math.min(Math.ceil(w/h**0),h),Math.min(Math.ceil(w/h**1),h),Math.min(Math.ceil(w/h**2),h)]:[D,2,1],O=M[0]*M[1]*M[2],R=new Float64Array(O);R.fill(NaN);const b=e.numberOfColorsInRange,L=b+2,k=[0,0,0],B=f[0],j=f[1]-f[0];for(let W=0;W<L;++W){const Z=K6(k,M),te=B+j*(W-1)/(b-1),F=c?10**te:te;R[Z]=F,W6(k,M)}const z=rt.newInstance({numberOfComponents:1,values:R}),$=e.lookupTable.mapScalars(z,e.colorMode,0);e.colorTextureMap=d6.newInstance(),e.colorTextureMap.setDimensions(M),e.colorTextureMap.getPointData().setScalars($),e.lookupTable.setAlpha(l)}const g=e.lookupTable.getVectorMode()===$6.MAGNITUDE&&n.getNumberOfComponents()>1?-1:e.lookupTable.getVectorComponent();e.colorCoordinates=X6(n,g,f,c,e.numberOfColorsInRange,e.colorTextureMap.getDimensions(),r)},t.getIsOpaque=()=>{const n=t.getInputData(),s=t.getAbstractScalars(n,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||s==null)return!0;const i=t.getLookupTable();return i?(i.build(),i.areScalarsOpaque(s,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=(n,r)=>r&&e.colorMode!==du.DIRECT_SCALARS?!0:!(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup()||!n||e.colorMode===du.DEFAULT&&n.getDataType()===H6.UNSIGNED_CHAR||e.colorMode===du.DIRECT_SCALARS),t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let n=e.mtime;if(e.lookupTable!==null){const r=e.lookupTable.getMTime();n=r>n?r:n}return n},t.getPrimitiveCount=()=>{const n=t.getInputData();return{points:n.getPoints().getNumberOfValues()/3,verts:n.getVerts().getNumberOfValues()-n.getVerts().getNumberOfCells(),lines:n.getLines().getNumberOfValues()-2*n.getLines().getNumberOfCells(),triangles:n.getPolys().getNumberOfValues()-3*n.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=Bo("AcquireInvertibleLookupTable"),t.valueToColor=Bo("ValueToColor"),t.colorToValue=Bo("ColorToValue"),t.useInvertibleColorFor=Bo("UseInvertibleColorFor"),t.clearInvertibleColor=Bo("ClearInvertibleColor"),t.processSelectorPixelBuffers=(n,r)=>{if(!n||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const s=n.getRawPixelBuffer(qt.ID_LOW24),i=n.getRawPixelBuffer(qt.ID_HIGH24),c=n.getCurrentPass(),l=n.getFieldAssociation();let f=null;l===oS.FIELD_ASSOCIATION_POINTS?f=e.selectionWebGLIdsToVTKIds.points:l===oS.FIELD_ASSOCIATION_CELLS&&(f=e.selectionWebGLIdsToVTKIds.cells),f&&r.forEach(g=>{if(c===qt.ID_LOW24){let p=0;i&&(p+=i[g],p*=256),p+=s[g+2],p*=256,p+=s[g+1],p*=256,p+=s[g];const h=f[p],y=n.getPixelBuffer(qt.ID_LOW24);y[g]=h&255,y[g+1]=(h&65280)>>8,y[g+2]=(h&16711680)>>16}else if(c===qt.ID_HIGH24&&i){let p=0;p+=i[g],p*=256,p+=s[g+2],p*=256,p+=s[g+1],p*=256,p+=s[g];const h=f[p],y=n.getPixelBuffer(qt.ID_HIGH24);y[g]=(h&4278190080)>>24}})}}const q6={colorMapColors:null,areScalarsMappedFromCells:!1,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,numberOfColorsInRange:0,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function gb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,q6,n),AG.extend(t,e,n),V.get(t,e,["areScalarsMappedFromCells","colorCoordinates","colorMapColors","colorTextureMap","numberOfColorsInRange","selectionWebGLIdsToVTKIds"]),V.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),V.setGetArray(t,e,["scalarRange"],2),ub.implementCoincidentTopologyMethods(t,e),Y6(t,e)}const Z6=V.newInstance(gb,"vtkMapper");var Cs={newInstance:Z6,extend:gb,...z6,...A6,...f1};const{isVtkObject:Q6}=V;function hb(t){let e=0;return t.filter((n,r)=>r===e?(e+=n+1,!0):!1)}function db(t){let e=0;for(let n=0;n<t.length;)n+=t[n]+1,e++;return e}const P6={extractCellSizes:hb,getNumberOfCells:db};function J6(t,e){e.classHierarchy.push("vtkCellArray");const n={...t};t.getNumberOfCells=r=>(e.numberOfCells!==void 0&&!r||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=db(t.getData())),e.numberOfCells),t.getCellSizes=r=>(e.cellSizes!==void 0&&!r||(e.cellSizes=hb(t.getData())),e.cellSizes),t.resize=r=>{const s=t.getNumberOfTuples();n.resize(r);const i=t.getNumberOfTuples();i<s&&(i===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=r=>{n.setData(r,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=r=>{let s=r;const i=e.values[s++];return e.values.subarray(s,s+i)},t.insertNextCell=r=>{let s;Q6(r)?s=r.getPointsIds():s=r;const i=t.getNumberOfCells();return t.insertNextTuples([s.length,...s]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(s.length),i},t.getMaxCellSize=()=>t.getCellSizes().reduce((r,s)=>Math.max(r,s),0)}function I6(t){return{empty:!0,numberOfComponents:1,dataType:Rt.UNSIGNED_INT,...t}}function pb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rt.extend(t,e,I6(n)),J6(t,e)}const ez=V.newInstance(pb,"vtkCellArray");var uS={newInstance:ez,extend:pb,...P6};const{vtkErrorMacro:tz}=V;function nz(t,e){let n=0;e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==i&&(e.size=i*c,e.values=V.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(c),t.modified())},t.setPoint=function(i){for(var c=arguments.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=arguments[f];t.setTuple(i,l)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(i,c,l)=>t.insertNextTuple([i,c,l]),t.insertPoint=(i,c)=>t.insertTuple(i,c);const r=t.getBounds;t.getBounds=()=>(n<e.mtime&&t.computeBounds(),r());const s=t.getBoundsByReference;t.getBoundsByReference=()=>(n<e.mtime&&t.computeBounds(),s()),t.computeBounds=()=>{if(t.getNumberOfComponents()===3){const i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];const c=t.getRange(1);e.bounds[2]=c[0],e.bounds[3]=c[1];const l=t.getRange(2);e.bounds[4]=l[0],e.bounds[5]=l[1]}else if(t.getNumberOfComponents()===2){const i=t.getRange(0);e.bounds[0]=i[0],e.bounds[1]=i[1];const c=t.getRange(1);e.bounds[2]=c[0],e.bounds[3]=c[1],e.bounds[4]=0,e.bounds[5]=0}else tz(`getBounds called on an array with components of ${t.getNumberOfComponents()}`),e1(e.bounds);n=V.getCurrentGlobalMTime()},t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const rz={empty:!0,numberOfComponents:3,dataType:Rt.FLOAT,bounds:[1,-1,1,-1,1,-1]};function yb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rz,n),rt.extend(t,e,n),V.getArray(t,e,["bounds"],6),nz(t,e)}const az=V.newInstance(yb,"vtkPoints");var mc={newInstance:az,extend:yb};function sz(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(r){e.pointsIds=r;let s=e.points.getData();s.length!==3*e.pointsIds.length&&(s=V.newTypedArray(n.getDataType(),3*e.pointsIds.length));const i=n.getData();e.pointsIds.forEach((c,l)=>{let f=3*c,g=3*l;s[g]=i[f],s[++g]=i[++f],s[++g]=i[++f]}),e.points.setData(s)}else{e.points=n,e.pointsIds=new Array(n.getNumberOfPoints());for(let s=n.getNumberOfPoints()-1;s>=0;--s)e.pointsIds[s]=s}},t.getBounds=()=>e.points.getBounds(),t.getLength2=()=>{const n=_e.getLengths(t.getBounds());return n[0]*n[0]+n[1]*n[1]+n[2]*n[2]},t.getParametricDistance=n=>{let r,s=0;for(let i=0;i<3;i++)n[i]<0?r=-n[i]:n[i]>1?r=n[i]-1:r=0,r>s&&(s=r);return s},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=n=>{n.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(n,r,s,i,c,l,f)=>{},t.evaluatePosition=(n,r,s,i,c,l)=>{V.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const iz={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function xb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iz,n),V.obj(t,e),e.points||(e.points=mc.newInstance()),V.get(t,e,["points","pointsIds"]),sz(t,e)}const oz=V.newInstance(xb,"vtkCell");var Es={newInstance:oz,extend:xb};function cz(t,e){let n=e;for(e>=t.array.length&&(n+=t.array.length);n>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=n}function lz(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=n=>{const r=n.getPoints().getNumberOfPoints(),s=n.getNumberOfCells(),i=new Uint32Array(r);if(n.isA("vtkPolyData")){for(let c=0;c<s;++c){const{cellPointIds:l}=n.getCellPoints(c);l.forEach(f=>{t.incrementLinkCount(f)})}t.allocateLinks(r),e.maxId=r-1;for(let c=0;c<s;++c){const{cellPointIds:l}=n.getCellPoints(c);l.forEach(f=>{t.insertCellReference(f,i[f]++,c)})}}else{for(let c=0;c<s;c++)Es.newInstance().getPointsIds().forEach(f=>{t.incrementLinkCount(f)});t.allocateLinks(r),e.maxId=r-1;for(let c=0;c<s;++c)Es.newInstance().getPointsIds().forEach(f=>{t.insertCellReference(f,i[f]++,c)})}},t.allocate=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(n).fill().map(()=>({ncells:0,cells:null})),e.extend=r,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=n=>e.array[n],t.getNcells=n=>e.array[n].ncells,t.getCells=n=>e.array[n].cells,t.insertNextPoint=n=>{e.array.push({ncells:n,cells:Array(n)}),++e.maxId},t.insertNextCellReference=(n,r)=>{e.array[n].cells[e.array[n].ncells++]=r},t.deletePoint=n=>{e.array[n].ncells=0,e.array[n].cells=null},t.removeCellReference=(n,r)=>{e.array[r].cells=e.array[r].cells.filter(s=>s!==n),e.array[r].ncells=e.array[r].cells.length},t.addCellReference=(n,r)=>{e.array[r].cells[e.array[r].ncells++]=n},t.resizeCellList=(n,r)=>{e.array[n].cells.length=r},t.squeeze=()=>{cz(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{e.array=[...n.array],e.extend=n.extend,e.maxId=n.maxId},t.incrementLinkCount=n=>{++e.array[n].ncells},t.allocateLinks=n=>{for(let r=0;r<n;++r)e.array[r].cells=new Array(e.array[r].ncells)},t.insertCellReference=(n,r,s)=>{e.array[n].cells[r]=s}}const uz={array:null,maxId:0,extend:0};function vb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uz,n),V.obj(t,e),lz(t,e)}const fz=V.newInstance(vb,"vtkCellLinks");var gz={newInstance:fz,extend:vb};const Ue={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_QUAD:9,VTK_QUADRATIC_EDGE:21,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42},Qd=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function hz(t){return t<Qd.length?Qd[t]:"UnknownClass"}function dz(t){return Qd.findIndex(t)}function pz(t){return t<Ue.VTK_QUADRATIC_EDGE||t===Ue.VTK_CONVEX_POINT_SET||t===Ue.VTK_POLYHEDRON}function yz(t){return t===Ue.VTK_TRIANGLE_STRIP||t===Ue.VTK_POLY_LINE||t===Ue.VTK_POLY_VERTEX}const xz={getClassNameFromTypeId:hz,getTypeIdFromClassName:dz,isLinear:pz,hasSubCells:yz};function vz(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=n>0?n:1,e.extend=r>0?r:1,e.maxId=-1,e.typeArray=new Uint8Array(n),e.locationArray=new Uint32Array(n)},t.insertCell=(n,r,s)=>{e.typeArray[n]=r,e.locationArray[n]=s,n>e.maxId&&(e.maxId=n)},t.insertNextCell=(n,r)=>(t.insertCell(++e.maxId,n,r),e.maxId),t.setCellTypes=(n,r,s)=>{e.size=n,e.typeArray=r,e.locationArray=s,e.maxId=n-1},t.getCellLocation=n=>e.locationArray[n],t.deleteCell=n=>{e.typeArray[n]=Ue.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=n=>{const r=t.getNumberOfTypes();for(let s=0;s<r;++s)if(n===t.getCellType(s))return!0;return!1},t.insertNextType=n=>t.insertNextCell(n,-1),t.getCellType=n=>e.typeArray[n],t.reset=()=>{e.maxId=-1},t.deepCopy=n=>{t.allocate(n.getSize(),n.getExtend()),e.typeArray.set(n.getTypeArray()),e.locationArray.set(n.getLocationArray()),e.maxId=n.getMaxId()}}const mz={size:0,maxId:-1,extend:1e3};function mb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mz,n),V.obj(t,e),V.get(t,e,["size","maxId","extend"]),V.getArray(t,e,["typeArray","locationArray"]),vz(t,e)}const Tz=V.newInstance(mb,"vtkCellTypes");var Sz={newInstance:Tz,extend:mb,...xz};const Tb={NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2};var Sb={IntersectionState:Tb};const{IntersectionState:Ku}=Sb;function vi(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const s={t:Number.MIN_VALUE,distance:0},i=[];let c;i[0]=n[0]-e[0],i[1]=n[1]-e[1],i[2]=n[2]-e[2];const l=i[0]*(t[0]-e[0])+i[1]*(t[1]-e[1])+i[2]*(t[2]-e[2]),f=xe(i,i);let g=1e-5*l;return f!==0&&(s.t=l/f),g<0&&(g=-g),-g<f&&f<g||f<=0||s.t<0?c=e:s.t>1?c=n:(c=i,i[0]=e[0]+s.t*i[0],i[1]=e[1]+s.t*i[1],i[2]=e[2]+s.t*i[2]),r&&(r[0]=c[0],r[1]=c[1],r[2]=c[2]),s.distance=mn(c,t),s}function Cb(t,e,n,r,s,i){const c=[],l=[],f=[];s[0]=0,i[0]=0,Mt(e,t,c),Mt(r,n,l),Mt(n,t,f);const g=[xe(c,c),-xe(c,l),-xe(c,l),xe(l,l)],p=[];if(p[0]=xe(c,f),p[1]=-xe(l,f),iM(g,p,2)===0){let h=Number.MAX_VALUE;const y=[t,e,n,r],v=[n,n,t,t],E=[r,r,e,e];i[0],i[0],s[0],s[0],s[0],s[0],i[0],i[0];let x;for(let T=0;T<4;T++)x=vi(y[T],v[T],E[T]),x.distance<h&&(h=x.distance,x.t);return Ku.ON_LINE}return s[0]=p[0],i[0]=p[1],s[0]>=0&&s[0]<=1&&i[0]>=0&&i[0]<=1?Ku.YES_INTERSECTION:Ku.NO_INTERSECTION}const Cz={distanceToLine:vi,intersection:Cb};function Ez(t,e){e.classHierarchy.push("vtkLine");function n(r){return r>=0&&r<=1}t.getCellDimension=()=>1,t.intersectWithLine=(r,s,i,c,l)=>{const f={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};l[1]=0,l[2]=0;const g=[],p=[],h=[];e.points.getPoint(0,p),e.points.getPoint(1,h);const y=[],v=[],E=Cb(r,s,p,h,y,v);if(f.t=y[0],f.betweenPoints=n(f.t),l[0]=v[0],E===Ku.YES_INTERSECTION){for(let x=0;x<3;x++)c[x]=p[x]+l[0]*(h[x]-p[x]),g[x]=r[x]+f.t*(s[x]-r[x]);if(mn(c,g)<=i*i)return f.intersect=1,f}else{let x;if(f.t<0)return x=vi(r,p,h,c),x.distance<=i*i&&(f.t=0,f.intersect=1,f.betweenPoints=!0),f;if(f.t>1)return x=vi(s,p,h,c),x.distance<=i*i&&(f.t=1,f.intersect=1,f.betweenPoints=!0),f;if(l[0]<0)return l[0]=0,x=vi(p,r,s,c),f.t=x.t,x.distance<=i*i&&(f.intersect=1),f;if(l[0]>1)return l[0]=1,x=vi(h,r,s,c),f.t=x.t,x.distance<=i*i&&(f.intersect=1),f}return f},t.evaluateLocation=(r,s,i)=>{const c=[],l=[];e.points.getPoint(0,c),e.points.getPoint(1,l);for(let f=0;f<3;f++)s[f]=c[f]+r[0]*(l[f]-c[f]);i[0]=1-r[0],i[1]=r[0]},t.evaluateOrientation=(r,s,i)=>e.orientations?(_u(s,e.orientations[0],e.orientations[1],r[0]),i[0]=1-r[0],i[1]=r[0],!0):!1}const wz={orientations:null};function Eb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wz,n),Es.extend(t,e,n),V.setGet(t,e,["orientations"]),Ez(t,e)}const Mz=V.newInstance(Eb,"vtkLine");var At={newInstance:Mz,extend:Eb,...Cz,...Sb};function bz(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=Pn(e.points):e.points=mc.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const n=t.shallowCopy;t.shallowCopy=function(i){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(i,c),e.points=mc.newInstance(),e.points.shallowCopy(i.getPoints())};const r=t.getMTime;t.getMTime=()=>{const i=r();return Math.max(i,e.points?.getMTime()??i)};const s=t.initialize;t.initialize=()=>(e.points?.initialize(),s())}const Oz={};function wb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Oz,n),ki.extend(t,e,n),V.setGet(t,e,["points"]),bz(t,e)}const Dz=V.newInstance(wb,"vtkPointSet");var Rz={newInstance:Dz,extend:wb};function Nz(t,e){e.classHierarchy.push("vtkPolyLine");const n=At.newInstance();n.getPoints().setNumberOfPoints(2),t.getCellDimension=()=>1,t.intersectWithLine=(r,s,i,c,l,f,g)=>{const p={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null},h=t.getNumberOfPoints()-1;let y=Number.MAX_VALUE;for(let v=0;v<h;v++){const E=[0,0,0];n.getPoints().getData().set(e.points.getData().subarray(3*v,3*(v+2)));const x=n.intersectWithLine(i,c,l,f,g);if(x.intersect===1&&x.t<=p.t+l&&x.t>=r&&x.t<=s){p.intersect=1;const T=n.getParametricDistance(E);if(T<y||T===y&&x.t<p.t){p.subId=v,p.t=x.t,y=T;for(let w=0;w<3;w++)f[w],E[w]}}}return p},t.evaluateLocation=(r,s,i,c)=>(n.getPoints().getData().set(e.points.getData().subarray(3*r,3*(r+2))),n.evaluateLocation(s,i,c)),t.evaluateOrientation=(r,s,i,c)=>(e.orientations?n.setOrientations([e.orientations[r],e.orientations[r+1]]):n.setOrientations(null),n.evaluateOrientation(s,i,c)),t.getDistancesToFirstPoint=()=>{const r=e.distancesTime.getMTime();if(r<e.points.getMTime()||r<t.getMTime()){const s=t.getNumberOfPoints();if(e.distances?e.distances.length=s:e.distances=new Array(s),s>0){const i=new Array(3),c=new Array(3);let l=0;e.distances[0]=l,e.points.getPoint(0,i);for(let f=1;f<s;++f)e.points.getPoint(f,c),l+=e.distanceFunction(i,c),e.distances[f]=l,cB(i,c)}e.distancesTime.modified()}return e.distances},t.findPointIdAtDistanceFromFirstPoint=r=>{const s=t.getDistancesToFirstPoint();if(s.length<2)return-1;let i=0,c=s.length-1;if(r<s[i]||r>s[c]||s[c]===0)return-1;for(;c-i>1;){const l=Math.floor((i+c)/2);s[l]<=r?i=l:c=l}return i}}const Lz={orientations:null,distanceFunction:fB};function Mb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Lz,n),Es.extend(t,e,n),V.setGet(t,e,["orientations","distanceFunction"]),e.distancesTime={},V.obj(e.distancesTime,{mtime:0}),Nz(t,e)}const Vz=V.newInstance(Mb,"vtkPolyLine");var _z={newInstance:Vz,extend:Mb};function kz(t,e){e.classHierarchy.push("vtkPriorityQueue"),t.push=(n,r)=>{const s=e.elements.findIndex(i=>i.priority>n);e.elements.splice(s,0,{priority:n,element:r})},t.pop=()=>e.elements.length>0?e.elements.shift().element:null,t.deleteById=n=>{e.elements=e.elements.filter(r=>{let{element:s}=r;return s.id!==n})},t.length=()=>e.elements.length}const Bz={elements:[]};function bb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Bz,n),V.obj(t,e),kz(t,e)}const Uz=V.newInstance(bb,"vtkPriorityQueue");var Fz={newInstance:Uz,extend:bb};const pu=1e-6,fS=11920929e-14,jz=1e-8,cs={FAILURE:-1,OUTSIDE:0,INSIDE:1,INTERSECTION:2,ON_LINE:3};function gS(t,e,n,r,s){return(r[t]-n[t])*(s[e]-n[e])-(s[t]-n[t])*(r[e]-n[e])}function Gz(t,e,n,r){if(t[0]<n[0]||t[0]>n[1]||t[1]<n[2]||t[1]>n[3]||t[2]<n[4]||t[2]>n[5])return cs.OUTSIDE;if(Sn(r)<=fS)return cs.FAILURE;let s=jz*((n[1]-n[0])*(n[1]-n[0])+(n[3]-n[2])*(n[3]-n[2])+(n[5]-n[4])*(n[5]-n[4]));s*=s,s=s===0?fS:s;const i=[],c=[];for(let p=0;p<e.length;){if(i[0]=e[p++],i[1]=e[p++],i[2]=e[p++],mn(t,i)<=s)return cs.INSIDE;const{distance:h,t:y}=At.distanceToLine(t,i,c);if(h<=s&&y>0&&y<1)return cs.INSIDE}let l,f;Math.abs(r[0])>Math.abs(r[1])?Math.abs(r[0])>Math.abs(r[2])?(l=1,f=2):(l=0,f=1):Math.abs(r[1])>Math.abs(r[2])?(l=0,f=2):(l=0,f=1);let g=0;for(let p=0;p<e.length;)i[0]=e[p++],i[1]=e[p++],i[2]=e[p++],p<e.length?(c[0]=e[p],c[1]=e[p+1],c[2]=e[p+2]):(c[0]=e[0],c[1]=e[1],c[2]=e[2]),i[f]<=t[f]?c[f]>t[f]&&gS(l,f,i,c,t)>0&&++g:c[f]<=t[f]&&gS(l,f,i,c,t)<0&&--g;return g===0?cs.OUTSIDE:cs.INSIDE}function zz(t,e,n){const r=t.length,s=[];e.getPoint(t[0],s),n[0]=s[0],n[1]=s[0],n[2]=s[1],n[3]=s[1],n[4]=s[2],n[5]=s[2];for(let c=1;c<r;c++)e.getPoint(t[c],s),_e.addPoint(n,...s);const i=_e.getLengths(n);return xe(i,i)}function Az(t,e,n){n.length=3,n[0]=0,n[1]=0,n[2]=0;const r=[];let s=[],i=[];const c=[],l=[];e.getPoint(t[0],r),e.getPoint(t[1],s);for(let f=2;f<t.length;f++){e.getPoint(t[f],i),Mt(i,s,c),Mt(r,s,l);const g=[0,0,0];Jt(c,l,g),bi(n,g,n),[s,i]=[i,s]}return Sn(n)}function $z(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[0,0,0];n[0]=0,n[1]=0,n[2]=0;const r=t.length,s=[];for(let i=0;i<r;i++)e.getPoint(t[i],s),n[0]+=s[0],n[1]+=s[1],n[2]+=s[2];return n[0]/=r,n[1]/=r,n[2]/=r,n}const Hz={PolygonWithPointIntersectionState:cs,pointInPolygon:Gz,getBounds:zz,getNormal:Az,computeCentroid:$z};function Wz(t,e){e.classHierarchy.push("vtkPolygon");function n(){const l=[0,0,0],f=[0,0,0];e.normal=[0,0,0];const g=[...e.firstPoint.point];let p=e.firstPoint;for(let h=0;h<e.pointCount;h++){Mt(p.point,g,l),Mt(p.next.point,g,f);const y=[0,0,0];Jt(l,f,y),bi(e.normal,y,e.normal),p=p.next}return Sn(e.normal)}function r(l){const f=[0,0,0],g=[0,0,0],p=[0,0,0],h=[0,0,0];Mt(l.point,l.previous.point,f),Mt(l.next.point,l.point,g),Mt(l.previous.point,l.next.point,p),Jt(f,g,h);const y=xe(h,e.normal);if(y<=0)return-1;const v=Tn(f)+Tn(g)+Tn(p);return v*v/y}function s(l){if(e.pointCount<=3)return!0;const f=l.previous,g=l.next,p=[0,0,0];Mt(g.point,f.point,p);const h=[0,0,0];if(Jt(p,e.normal,h),Sn(h),Tn(h)===0)return!1;let y=Da.evaluate(h,f.point,g.next.point),v=y>pu?1:y<-pu?-1:0,E=v<0?1:0;for(let x=g.next.next;x.id!==f.id;x=x.next){const T=x.previous;y=Da.evaluate(h,f.point,x.point);const w=y>pu?1:y<-pu?-1:0;if(w!==v){if(E||(E=w<=0?1:0),At.intersection(f.point,g.point,x.point,T.point,[0],[0])===Tb.YES_INTERSECTION)return!1;v=w}}return E===1}function i(l,f){e.pointCount-=1;const g=l.previous,p=l.next;e.tris=e.tris.concat(l.point),e.tris=e.tris.concat(p.point),e.tris=e.tris.concat(g.point),g.next=p,p.previous=g,f.deleteById(g.id),f.deleteById(p.id);const h=r(g);h>0&&f.push(h,g);const y=r(p);y>0&&f.push(y,p),l.id===e.firstPoint.id&&(e.firstPoint=p)}function c(){n();const l=Fz.newInstance();let f=e.firstPoint;for(let g=0;g<e.pointCount;g++){const p=r(f);p>0&&l.push(p,f),f=f.next}for(;e.pointCount>2&&l.length()>0;)if(e.pointCount===l.length()){const g=l.pop();i(g,l)}else{const g=l.pop();s(g)&&i(g,l)}return e.pointCount<=2}t.triangulate=()=>e.firstPoint?c():null,t.setPoints=l=>{e.pointCount=l.length,e.firstPoint={id:0,point:l[0],next:null,previous:null};let f=e.firstPoint;for(let g=1;g<e.pointCount;g++)f.next={id:g,point:l[g],next:null,previous:f},f=f.next;e.firstPoint.previous=f,f.next=e.firstPoint},t.getPointArray=()=>e.tris}const Kz={firstPoint:null,pointCount:0,tris:[]};function Ob(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Kz,n),V.obj(t,e),Wz(t,e)}const Xz=V.newInstance(Ob,"vtkPolygon");var Yz={newInstance:Xz,extend:Ob,...Hz};function h1(t,e,n,r){const s=n[0]-e[0],i=n[1]-e[1],c=n[2]-e[2],l=t[0]-e[0],f=t[1]-e[1],g=t[2]-e[2];r[0]=i*g-c*f,r[1]=c*l-s*g,r[2]=s*f-i*l}function Tc(t,e,n,r){h1(t,e,n,r);const s=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);s!==0&&(r[0]/=s,r[1]/=s,r[2]/=s)}function Db(t){t[0]=-1,t[1]=1,t[2]=0,t[3]=-1,t[4]=0,t[5]=1}function qz(t,e,n,r,s,i){let c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,l=!1;const f=[],g=[],p=[],h=[],y=[];Tc(t,e,n,h),Tc(r,s,i,y);const v=-xe(h,t),E=-xe(y,r),x=[xe(y,t)+E,xe(y,e)+E,xe(y,n)+E];if(x[0]*x[1]>c&&x[0]*x[2]>c)return{intersect:!1,coplanar:l,pt1:f,pt2:g,surfaceId:p};const T=[xe(h,r)+v,xe(h,s)+v,xe(h,i)+v];if(T[0]*T[1]>c&&T[0]*T[2]>c)return{intersect:!1,coplanar:l,pt1:f,pt2:g,surfaceId:p};if(Math.abs(h[0]-y[0])<1e-9&&Math.abs(h[1]-y[1])<1e-9&&Math.abs(h[2]-y[2])<1e-9&&Math.abs(v-E)<1e-9)return l=!0,{intersect:!1,coplanar:l,pt1:f,pt2:g,surfaceId:p};const w=[t,e,n],D=[r,s,i],M=xe(h,y),O=(v-E*M)/(M*M-1),R=(E-v*M)/(M*M-1),b=[O*h[0]+R*y[0],O*h[1]+R*y[1],O*h[2]+R*y[2]],L=Jt(h,y,[]);Sn(L);let k=0,B=0;const j=[],z=[];let $=50,W=50;for(let F=0;F<3;F++){const P=F,ae=(F+1)%3,J=Da.intersectWithLine(w[P],w[ae],r,y);J.intersection&&J.t>0-c&&J.t<1+c&&(J.t<1+c&&J.t>1-c&&($=k),j[k++]=xe(J.x,L)-xe(b,L));const oe=Da.intersectWithLine(D[P],D[ae],t,h);oe.intersection&&oe.t>0-c&&oe.t<1+c&&(oe.t<1+c&&oe.t>1-c&&(W=B),z[B++]=xe(oe.x,L)-xe(b,L))}if(k>2){k--;const F=j[2];j[2]=j[$],j[$]=F}if(B>2){B--;const F=z[2];z[2]=z[W],z[W]=F}if(k!==2||B!==2)return{intersect:!1,coplanar:l,pt1:f,pt2:g,surfaceId:p};if(Number.isNaN(j[0])||Number.isNaN(j[1])||Number.isNaN(z[0])||Number.isNaN(z[1]))return{intersect:!1,coplanar:l,pt1:f,pt2:g,surfaceId:p};if(j[0]>j[1]){const F=j[1];j[1]=j[0],j[0]=F}if(z[0]>z[1]){const F=z[1];z[1]=z[0],z[0]=F}let Z,te;return j[1]<z[0]||z[1]<j[0]?{intersect:!1,coplanar:l,pt1:f,pt2:g,surfaceId:p}:(j[0]<z[0]?j[1]<z[1]?(p[0]=2,p[1]=1,Z=z[0],te=j[1]):(p[0]=2,p[1]=2,Z=z[0],te=z[1]):j[1]<z[1]?(p[0]=1,p[1]=1,Z=j[0],te=j[1]):(p[0]=1,p[1]=2,Z=j[0],te=z[1]),Fd(b,L,Z,f),Fd(b,L,te,g),{intersect:!0,coplanar:l,pt1:f,pt2:g,surfaceId:p})}const Zz={computeNormalDirection:h1,computeNormal:Tc,interpolationDerivs:Db,intersectWithTriangle:qz};function Qz(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(n,r,s,i,c)=>{const l={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};c[2]=0;const f=[],g=s*s,p=[],h=[],y=[];e.points.getPoint(0,p),e.points.getPoint(1,h),e.points.getPoint(2,y);const v=[],E=[];if(Tc(p,h,y,v),v[0]!==0||v[1]!==0||v[2]!==0){const M=Da.intersectWithLine(n,r,p,v);if(l.betweenPoints=M.betweenPoints,l.t=M.t,i[0]=M.x[0],i[1]=M.x[1],i[2]=M.x[2],!M.intersection)return c[0]=0,c[1]=0,l.intersect=0,l;const O=t.evaluatePosition(i,f,c,E);if(O.evaluation>=0)return O.dist2<=g?(l.intersect=1,l):(l.intersect=O.evaluation,l)}const x=mn(p,h),T=mn(h,y),w=mn(y,p);e.line||(e.line=At.newInstance()),x>T&&x>w?(e.line.getPoints().setPoint(0,p),e.line.getPoints().setPoint(1,h)):T>w&&T>x?(e.line.getPoints().setPoint(0,h),e.line.getPoints().setPoint(1,y)):(e.line.getPoints().setPoint(0,y),e.line.getPoints().setPoint(1,p));const D=e.line.intersectWithLine(n,r,s,i,c);if(l.betweenPoints=D.betweenPoints,l.t=D.t,D.intersect){const M=[],O=[],R=[];for(let b=0;b<3;b++)M[b]=p[b]-y[b],O[b]=h[b]-y[b],R[b]=i[b]-y[b];return c[0]=xe(R,M)/w,c[1]=xe(R,O)/T,l.intersect=1,l}return c[0]=0,c[1]=0,l.intersect=0,l},t.evaluatePosition=(n,r,s,i)=>{const c={subId:0,dist2:0,evaluation:-1};let l,f;const g=[],p=[],h=[],y=[];let v;const E=[],x=[],T=[];let w=0,D=0;const M=[];let O,R,b,L=[];const k=[],B=[],j=[];c.subId=0,s[2]=0,e.points.getPoint(1,g),e.points.getPoint(2,p),e.points.getPoint(0,h),h1(g,p,h,y),Da.generalizedProjectPoint(n,g,y,j);let z=0;for(l=0;l<3;l++)y[l]<0?v=-y[l]:v=y[l],v>z&&(z=v,D=l);for(f=0,l=0;l<3;l++)l!==D&&(M[f++]=l);for(l=0;l<2;l++)E[l]=j[M[l]]-h[M[l]],x[l]=g[M[l]]-h[M[l]],T[l]=p[M[l]]-h[M[l]];if(w=at(x,T),w===0)return s[0]=0,s[1]=0,c.evaluation=-1,c;if(s[0]=at(E,T)/w,s[1]=at(x,E)/w,i[0]=1-(s[0]+s[1]),i[1]=s[0],i[2]=s[1],i[0]>=0&&i[0]<=1&&i[1]>=0&&i[1]<=1&&i[2]>=0&&i[2]<=1)r&&(c.dist2=mn(j,n),r[0]=j[0],r[1]=j[1],r[2]=j[2]),c.evaluation=1;else{let $;if(r){if(i[1]<0&&i[2]<0)for(O=mn(n,h),R=At.distanceToLine(n,g,h,$,k),b=At.distanceToLine(n,h,p,$,B),O<R?(c.dist2=O,L=h):(c.dist2=R,L=k),b<c.dist2&&(c.dist2=b,L=B),l=0;l<3;l++)r[l]=L[l];else if(i[2]<0&&i[0]<0)for(O=mn(n,g),R=At.distanceToLine(n,g,h,$,k),b=At.distanceToLine(n,g,p,$,B),O<R?(c.dist2=O,L=g):(c.dist2=R,L=k),b<c.dist2&&(c.dist2=b,L=B),l=0;l<3;l++)r[l]=L[l];else if(i[1]<0&&i[0]<0)for(O=mn(n,p),R=At.distanceToLine(n,p,h,$,k),b=At.distanceToLine(n,g,p,$,B),O<R?(c.dist2=O,L=p):(c.dist2=R,L=k),b<c.dist2&&(c.dist2=b,L=B),l=0;l<3;l++)r[l]=L[l];else if(i[0]<0){const W=At.distanceToLine(n,g,p,r);c.dist2=W.distance}else if(i[1]<0){const W=At.distanceToLine(n,p,h,r);c.dist2=W.distance}else if(i[2]<0){const W=At.distanceToLine(n,g,h,r);c.dist2=W.distance}}c.evaluation=0}return c},t.evaluateLocation=(n,r,s)=>{const i=[],c=[],l=[];e.points.getPoint(0,i),e.points.getPoint(1,c),e.points.getPoint(2,l);const f=1-n[0]-n[1];for(let g=0;g<3;g++)r[g]=i[g]*f+c[g]*n[0]+l[g]*n[1];s[0]=f,s[1]=n[0],s[2]=n[1]},t.getParametricDistance=n=>{let r,s=0;const i=[];i[0]=n[0],i[1]=n[1],i[2]=1-n[0]-n[1];for(let c=0;c<3;c++)i[c]<0?r=-i[c]:i[c]>1?r=i[c]-1:r=0,r>s&&(s=r);return s},t.derivatives=(n,r,s,i,c)=>{const l=e.points.getPoint(0),f=e.points.getPoint(1),g=e.points.getPoint(2),p=[],h=[],y=[],v=[];Tc(l,f,g,p),Mt(f,l,h),Mt(g,l,v),Jt(p,h,y);const E=Sn(h);if(E<=0||Sn(y)<=0){for(let R=0;R<i;R++)for(let b=0;b<3;b++)c[R*i+b]=0;return}const x=[0,0],T=[E,0],w=[xe(v,h),xe(v,y)],D=new Array(6);Db(D);const M=[T[0]-x[0],T[1]-x[1],w[0]-x[0],w[1]-x[1]],O=V.newTypedArray(jt.Float64Array,4);Ip(M,O,2);for(let R=0;R<i;R++){let b=0,L=0;for(let j=0;j<3;j++)b+=D[j]*s[i*j+R],L+=D[3+j]*s[i*j+R];const k=b*O[0]+L*O[1],B=b*O[2]+L*O[3];c[3*R]=k*h[0]+B*y[0],c[3*R+1]=k*h[1]+B*y[1],c[3*R+2]=k*h[2]+B*y[2]}},t.cellBoundary=(n,r,s)=>{const i=r[0]-r[1],c=.5*(1-r[0])-r[1],l=2*r[0]+r[1]-1;return i>=0&&c>=0?(s[0]=e.pointsIds[0],s[1]=e.pointsIds[1]):c<0&&l>=0?(s[0]=e.pointsIds[1],s[1]=e.pointsIds[2]):(s[0]=e.pointsIds[2],s[1]=e.pointsIds[0]),!(r[0]<0||r[1]<0||r[0]>1||r[1]>1||1-r[0]-r[1]<0)}}const Pz={};function Rb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Pz,n),Es.extend(t,e,n),Qz(t,e)}const Jz=V.newInstance(Rb,"vtkTriangle");var d1={newInstance:Jz,extend:Rb,...Zz};function hS(){return{intersected:!1,subId:-1,x:[0,0,0],pCoords:[0,0,0],t:-1}}function Iz(t,e){e.classHierarchy.push("vtkQuad"),t.getCellDimension=()=>2,t.getCellType=()=>Ue.VTK_QUAD,t.getNumberOfEdges=()=>4,t.getNumberOfFaces=()=>0,t.intersectWithLine=(n,r,s,i,c)=>{let l={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1},f;const g=e.points.getPoint(0,[]),p=e.points.getPoint(1,[]),h=e.points.getPoint(2,[]),y=e.points.getPoint(3,[]),v=mn(g,h),E=mn(p,y);if(v===E){let b,L=0,k=0;for(let B=0;B<4;B++)b=e.pointsIds[B],b>L&&(L=b,k=B);k===0||k===2?f=0:f=1}else v<E?f=0:f=1;let x=null;e.triangle?x=e.triangle.getPoints():(e.triangle=d1.newInstance(),x=mc.newInstance(),x.setNumberOfPoints(3),e.triangle.initialize(x));let T;const w=hS();let D;const M=hS();let O,R;switch(f){case 0:x.setPoint(0,...g),x.setPoint(1,...p),x.setPoint(2,...h),T=e.triangle.intersectWithLine(n,r,s,w.x,w.pCoords),x.setPoint(0,...h),x.setPoint(1,...y),x.setPoint(2,...g),D=e.triangle.intersectWithLine(n,r,s,M.x,M.pCoords),O=T.intersect&&D.intersect?T.t<=D.t:T.intersect,R=T.intersect&&D.intersect?D.t<T.t:D.intersect,O?(l=T,i[0]=w.x[0],i[1]=w.x[1],i[2]=w.x[2],c[0]=w.pCoords[0]+w.pCoords[1],c[1]=w.pCoords[1],c[2]=w.pCoords[2]):R&&(l=D,i[0]=M.x[0],i[1]=M.x[1],i[2]=M.x[2],c[0]=1-(M.pCoords[0]+M.pCoords[1]),c[1]=1-M.pCoords[1],c[2]=M.pCoords[2]);break;case 1:x.setPoint(0,...g),x.setPoint(1,...p),x.setPoint(2,...y),T=e.triangle.intersectWithLine(n,r,s,w.x,w.pCoords),x.setPoint(0,...h),x.setPoint(1,...y),x.setPoint(2,...p),D=e.triangle.intersectWithLine(n,r,s,M.x,M.pCoords),O=T.intersect&&D.intersect?T.t<=D.t:T.intersect,R=T.intersect&&D.intersect?D.t<T.t:D.intersect,O?(l=T,i[0]=w.x[0],i[1]=w.x[1],i[2]=w.x[2],c[0]=w.pCoords[0],c[1]=w.pCoords[1],c[2]=w.pCoords[2]):R&&(l=D,i[0]=M.x[0],i[1]=M.x[1],i[2]=M.x[2],c[0]=1-M.pCoords[0],c[1]=1-M.pCoords[1],c[2]=M.pCoords[2]);break}return l},t.interpolationFunctions=(n,r)=>{const s=1-n[0],i=1-n[1];r[0]=s*i,r[1]=n[0]*i,r[2]=n[0]*n[1],r[3]=s*n[1]},t.evaluateLocation=(n,r,s)=>{const i=[];t.interpolationFunctions(n,s),r[0]=0,r[1]=0,r[2]=0;for(let c=0;c<4;c++){e.points.getPoint(c,i);for(let l=0;l<3;l++)r[l]+=i[l]*s[c]}}}const eA={};function Nb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,eA,n),Es.extend(t,e,n),Iz(t,e)}const tA=V.newInstance(Nb,"vtkQuad");var nA={newInstance:tA,extend:Nb};const{vtkErrorMacro:Lb}=V;function dS(t){return()=>Lb(`vtkTriangleStrip.${t} - NOT IMPLEMENTED`)}function rA(t,e){if(!Array.isArray(t)||t.length<3){Lb("decomposeStrip - Invalid points array");return}let n=t[0],r=t[1];for(let s=0;s<t.length-2;s++){const i=t[s+2];s%2?e.insertNextCell([r,n,i]):e.insertNextCell([n,r,i]),n=r,r=i}}const aA={decomposeStrip:rA};function sA(t,e){e.classHierarchy.push("vtkTriangleStrip");const n=t.initialize;t.initialize=(r,s)=>{e.triangle.initialize(r,s),n(r,s)},t.getCellType=()=>Ue.VTK_TRIANGLE_STRIP,t.getCellDimension=()=>2,t.getNumberOfEdges=()=>e.pointsIds.length,t.getNumberOfFaces=()=>0,t.evaluatePosition=(r,s,i,c,l)=>{const f=[0,0,0];let g=Number.MAX_VALUE,p=0;const h=[],y=[],v=[];i[2]=0,y[0]=0,y[1]=0,y[2]=0;const E=e.triangle.getPoints();E.setNumberOfPoints(3);const T=e.triangle.getPointsIds().length;for(let w=0;w<T;w++)l[w]=0;for(let w=0;w<T-2;w++){const D=[];E.getPoint(w,D);const M=[];E.getPoint(w+1,M);const O=[];E.getPoint(w+2,O),E.setData(Float32Array.from([...D,...M,...O]),3);const R=e.triangle.evaluatePosition(r,v,f,h),b=R.dist2;R.evaluation>=0&&(b<g||b===g&&p===0)&&(p=R,s&&(s[0]=v[0],s[1]=v[1],s[2]=v[2]),i[0]=f[0],i[1]=f[1],g=b,y[0]=h[0],y[1]=h[1],y[2]=h[2])}return c[0]=g,l[0]=y[0],l[1]=y[1],l[2]=y[2],p},t.evaluateLocation=(r,s,i,c)=>{const l=[[0,1,2],[1,0,2]],f=r%2,g=e.pointsIds.length;for(let E=0;E<g;E++)c[E]=0;const p=1-s[0]-s[1];c[r]=p,c[r+1]=s[0],c[r+2]=s[1];const h=[];e.points.getPoint(r+l[f][0],h);const y=[];e.points.getPoint(r+l[f][1],y);const v=[];e.points.getPoint(r+l[f][2],v);for(let E=0;E<3;E++)i[E]=h[E]*c[r]+y[E]*c[r+1]+v[E]*c[r+2]},t.cellBoundary=(r,s,i)=>{const c=[[0,1,2],[1,0,2]],l=r%2,f=e.triangle.getPointsIds();return f[0]=e.pointsIds[c[l][0]],f[1]=e.pointsIds[c[l][1]],f[2]=e.pointsIds[c[l][2]],e.triangle.cellBoundary(0,s,i)},t.getEdge=r=>{let s,i;const c=e.pointsIds.length;return r===0?(s=0,i=1):r===c-1?(s=r-1,i=r):(s=r-1,i=r+1),e.line.getPointsIds()[0]=e.pointsIds[s],e.line.getPointsIds()[1]=e.pointsIds[i],e.line.getPoints().setPoint(0,e.points.getPoint(s)),e.line.getPoints().setPoint(1,e.points.getPoint(i)),e.line},t.intersectWithLine=(r,s,i,c,l)=>{const f=e.pointsIds.length-2,g=e.triangle.getPoints();g.setNumberOfPoints(3);for(let p=0;p<f;p++){const h=[];e.points.getPoint(e.pointsIds[p],h);const y=[];e.points.getPoint(e.pointsIds[p+1],y);const v=[];e.points.getPoint(e.pointsIds[p+2],v),g.setData(Float32Array.from([...h,...y,...v]),3);const E=e.triangle.intersectWithLine(r,s,i,c,l);if(E.intersect)return E}return!1},t.triangulate=()=>{const r=e.points.getNumberOfPoints()-2;e.tris=new Array(3*r);const s=[[0,1,2],[1,0,2]];for(let i=0;i<r;i++){const c=i%2;for(let l=0;l<3;l++)e.tris[i*3+l]=i+s[c][l]}return!0},t.getPointArray=()=>e.tris,t.derivatives=(r,s,i,c,l)=>{const f=[];e.points.getPoint(r,f);const g=[];e.points.getPoint(r+1,g);const p=[];e.points.getPoint(r+2,p);const h=e.triangle.getPoints();h.setPoint(0,...f),h.setPoint(1,...g),h.setPoint(2,...p),e.triangle.derivatives(0,s,i,c,l)},t.getParametricCenter=r=>(r[0]=.333333,r[1]=.333333,r[2]=0,Math.floor((e.pointsIds.length-2)/2)),t.contour=(r,s,i,c,l,f,g,p,h,y,v)=>dS("contour")(),t.clip=(r,s,i,c,l,f,g,p,h,y)=>dS("clip")()}const iA={line:null,triangle:null,tris:null};function Vb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,iA,n),Es.extend(t,e,n),e.line||(e.line=At.newInstance()),e.triangle||(e.triangle=d1.newInstance()),sA(t,e)}const oA=V.newInstance(Vb,"vtkTriangleStrip");var cA={newInstance:oA,extend:Vb,...aA};const li=["verts","lines","polys","strips"],{vtkWarningMacro:pS}=V,lA={[Ue.VTK_LINE]:At,[Ue.VTK_QUAD]:nA,[Ue.VTK_POLY_LINE]:At,[Ue.VTK_TRIANGLE]:d1,[Ue.VTK_TRIANGLE_STRIP]:cA,[Ue.VTK_POLY_LINE]:_z,[Ue.VTK_POLYGON]:Yz};function uA(t,e){e.classHierarchy.push("vtkPolyData");function n(l){return l.replace(/(?:^\w|[A-Z]|\b\w)/g,f=>f.toUpperCase()).replace(/\s+/g,"")}function r(){e.cells=void 0,e.links=void 0}li.forEach(l=>{t[`getNumberOf${n(l)}`]=()=>e[l].getNumberOfCells(),e[l]?e[l]=Pn(e[l]):e[l]=uS.newInstance(),e[`_on${n(l)}Changed`]=r}),t.getNumberOfCells=()=>li.reduce((l,f)=>l+e[f].getNumberOfCells(),0);const s=t.shallowCopy;t.shallowCopy=function(l){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s(l,f),li.forEach(g=>{e[g]=uS.newInstance(),e[g].shallowCopy(l.getReferenceByName(g))})};const i=t.getMTime;t.getMTime=()=>li.reduce((l,f)=>Math.max(l,e[f]?.getMTime()??l),i());const c=t.initialize;t.initialize=()=>(li.forEach(l=>e[l]?.initialize()),r(),c()),t.buildCells=()=>{const l=t.getNumberOfVerts(),f=t.getNumberOfLines(),g=t.getNumberOfPolys(),p=t.getNumberOfStrips(),h=l+f+g+p,y=new Uint8Array(h);let v=y;const E=new Uint32Array(h);let x=E;if(l){let T=0;e.verts.getCellSizes().forEach((w,D)=>{x[D]=T,v[D]=w>1?Ue.VTK_POLY_VERTEX:Ue.VTK_VERTEX,T+=w+1}),x=x.subarray(l),v=v.subarray(l)}if(f){let T=0;e.lines.getCellSizes().forEach((w,D)=>{x[D]=T,v[D]=w>2?Ue.VTK_POLY_LINE:Ue.VTK_LINE,w===1&&pS("Building VTK_LINE ",D," with only one point, but VTK_LINE needs at least two points. Check the input."),T+=w+1}),x=x.subarray(f),v=v.subarray(f)}if(g){let T=0;e.polys.getCellSizes().forEach((w,D)=>{switch(x[D]=T,w){case 3:v[D]=Ue.VTK_TRIANGLE;break;case 4:v[D]=Ue.VTK_QUAD;break;default:v[D]=Ue.VTK_POLYGON;break}w<3&&pS("Building VTK_TRIANGLE ",D," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),T+=w+1}),x+=x.subarray(g),v+=v.subarray(g)}if(p){let T=0;v.fill(Ue.VTK_TRIANGLE_STRIP,0,p),e.strips.getCellSizes().forEach((w,D)=>{x[D]=T,T+=w+1})}e.cells=Sz.newInstance(),e.cells.setCellTypes(h,y,E)},t.buildLinks=function(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells==null&&t.buildCells(),e.links=gz.newInstance(),l>0?e.links.allocate(l):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=l=>e.cells.getCellType(l),t.getCellPoints=l=>{const f=t.getCellType(l);let g=null;switch(f){case Ue.VTK_VERTEX:case Ue.VTK_POLY_VERTEX:g=e.verts;break;case Ue.VTK_LINE:case Ue.VTK_POLY_LINE:g=e.lines;break;case Ue.VTK_TRIANGLE:case Ue.VTK_QUAD:case Ue.VTK_POLYGON:g=e.polys;break;case Ue.VTK_TRIANGLE_STRIP:g=e.strips;break;default:return g=null,{type:0,cellPointIds:null}}const p=e.cells.getCellLocation(l),h=g.getCell(p);return{cellType:f,cellPointIds:h}},t.getPointCells=l=>e.links.getCells(l),t.getCellEdgeNeighbors=(l,f,g)=>{const p=e.links.getLink(f),h=e.links.getLink(g);return p.cells.filter(y=>y!==l&&h.cells.indexOf(y)!==-1)},t.getCell=function(l){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const g=t.getCellPoints(l),p=f||lA[g.cellType].newInstance();return p.initialize(t.getPoints(),g.cellPointIds),p},t.getMaxCellSize=()=>li.reduce((l,f)=>Math.max(l,e[f]?.getMaxCellSize?.()??0),0)}const fA={};function _b(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fA,n),Rz.extend(t,e,n),V.get(t,e,["cells","links"]),V.setGet(t,e,["verts","lines","polys","strips"]),uA(t,e)}const gA=V.newInstance(_b,"vtkPolyData");var Oi={newInstance:gA,extend:_b};function hA(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=n=>{e.jsImageData!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.imageBitmap=null),e.jsImageData=n,e.imageLoaded=!0,t.modified())},t.setImageBitmap=n=>{e.imageBitmap!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null,e.jsImageData=null),e.imageBitmap=n,e.imageLoaded=!0,t.modified())},t.setCanvas=n=>{e.canvas!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.imageBitmap=null,e.jsImageData=null),e.canvas=n,t.modified())},t.setImage=n=>{e.image!==n&&(n!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null,e.imageBitmap=null),e.image=n,e.imageLoaded=!1,n.complete?t.imageLoaded():n.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let n=0,r=0,s=1;if(t.getInputData()){const c=t.getInputData();n=c.getDimensions()[0],r=c.getDimensions()[1],s=c.getDimensions()[2]}return e.jsImageData&&(n=e.jsImageData.width,r=e.jsImageData.height),e.canvas&&(n=e.canvas.width,r=e.canvas.height),e.image&&(n=e.image.width,r=e.image.height),e.imageBitmap&&(n=e.imageBitmap.width,r=e.imageBitmap.height),(n>1)+(r>1)+(s>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData;if(e.imageBitmap)return e.imageBitmap;if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const n=e.image.width,r=e.image.height,i=new OffscreenCanvas(n,r).getContext("2d");return i.translate(0,r),i.scale(1,-1),i.drawImage(e.image,0,0,n,r),i.getImageData(0,0,n,r)}return null}}const dA=(t,e,n)=>{const s=t.createShaderModule({code:`
    @group(0) @binding(0) var inputTexture: texture_2d<f32>;
    @group(0) @binding(1) var outputTexture: texture_storage_2d<rgba8unorm, write>;

    @compute @workgroup_size(8, 8)
    fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
      let texelCoord = vec2<i32>(global_id.xy);
      let outputSize = textureDimensions(outputTexture);

      if (texelCoord.x >= i32(outputSize.x) || texelCoord.y >= i32(outputSize.y)) {
        return;
      }

      let inputSize = textureDimensions(inputTexture);
      let scale = vec2<f32>(inputSize) / vec2<f32>(outputSize);

      // Compute the floating-point source coordinate
      let srcCoord = (vec2<f32>(texelCoord) + 0.5) * scale - 0.5;

      // Get integer coordinates for the four surrounding texels
      let x0 = i32(floor(srcCoord.x));
      let x1 = min(x0 + 1, i32(inputSize.x) - 1);
      let y0 = i32(floor(srcCoord.y));
      let y1 = min(y0 + 1, i32(inputSize.y) - 1);

      // Compute the weights
      let wx = srcCoord.x - f32(x0);
      let wy = srcCoord.y - f32(y0);

      // Fetch the four texels
      let c00 = textureLoad(inputTexture, vec2<i32>(x0, y0), 0);
      let c10 = textureLoad(inputTexture, vec2<i32>(x1, y0), 0);
      let c01 = textureLoad(inputTexture, vec2<i32>(x0, y1), 0);
      let c11 = textureLoad(inputTexture, vec2<i32>(x1, y1), 0);

      // Bilinear interpolation
      let color = mix(
        mix(c00, c10, wx),
        mix(c01, c11, wx),
        wy
      );

      textureStore(outputTexture, texelCoord, color);
    }
  `}),i=t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,texture:{sampleType:"float"}},{binding:1,visibility:GPUShaderStage.COMPUTE,storageTexture:{format:"rgba8unorm",access:"write-only"}},{binding:2,visibility:GPUShaderStage.COMPUTE,sampler:{type:"filtering"}}]}),c=t.createPipelineLayout({bindGroupLayouts:[i]}),l=t.createComputePipeline({label:"ComputeMipmapPipeline",layout:c,compute:{module:s,entryPoint:"main"}}),f=t.createSampler({magFilter:"linear",minFilter:"linear"});for(let g=1;g<n;g++){const p=e.createView({baseMipLevel:g-1,mipLevelCount:1}),h=e.createView({baseMipLevel:g,mipLevelCount:1}),y=t.createBindGroup({layout:l.getBindGroupLayout(0),entries:[{binding:0,resource:p},{binding:1,resource:h},{binding:2,resource:f}]}),v=t.createCommandEncoder({label:"MipmapGenerateCommandEncoder"}),E=v.beginComputePass();E.setPipeline(l),E.setBindGroup(0,y);const x=Math.max(1,e.width>>g),T=Math.max(1,e.height>>g),w=Math.ceil(x/8),D=Math.ceil(T/8);E.dispatchWorkgroups(w,D),E.end(),t.queue.submit([v.finish()])}},pA={image:null,canvas:null,jsImageData:null,imageBitmap:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function kb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pA,n),V.obj(t,e),V.algo(t,e,6,0),V.get(t,e,["canvas","image","jsImageData","imageBitmap","imageLoaded","resizable"]),V.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),hA(t,e)}const yA=V.newInstance(kb,"vtkTexture"),xA={generateMipmaps:dA};var Sc={newInstance:yA,extend:kb,...xA};const vA=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],yS=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],yu=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],xS=[0,1,0,1,0,1,0,1,2,2,2,2],nt=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],ve=new Float64Array(3),xu=new Float64Array(3),Ge=new Float64Array(3),gs=new Float64Array(3),rs=new Float64Array(3),vu=new Float64Array(3),Kh=new Float64Array(16);function Xh(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function Bb(t){const e=[],n=[];for(let r=0;r<3;r++){const s=qp().domain([t[r*2],t[r*2+1]]);e[r]=s.ticks(5);const i=s.tickFormat(5);n[r]=e[r].map(i)}return{ticks:e,tickStrings:n}}function mA(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=n=>{e.renderable!==n&&(e.renderable=n,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(n.getProperty()),e.tmActor.setParentProp(n),t.modified())},t.createPolyDataForOneLabel=(n,r,s,i,c,l,f)=>{const g=e.renderable.get_tmAtlas().get(n);if(!g)return;const p=e.renderable.getTextPolyData().getPoints().getData(),h=e.lastSize;ve[0]=p[r*3],ve[1]=p[r*3+1],ve[2]=p[r*3+2],$e(Ge,ve,s),Ge[0]+=.1,$e(xu,Ge,i),Ea(rs,xu,ve),Ge[0]-=.1,Ge[1]+=.1,$e(xu,Ge,i),Ea(vu,xu,ve);for(let E=0;E<3;E++)rs[E]/=.5*.1*h[0],vu[E]/=.5*.1*h[1];let y=f.ptIdx,v=f.cellIdx;ve[0]=p[r*3],ve[1]=p[r*3+1],ve[2]=p[r*3+2],c[0]<-.5?xa(Ge,rs,c[0]*l-g.width):c[0]>.5?xa(Ge,rs,c[0]*l):xa(Ge,rs,c[0]*l-g.width/2),Ao(ve,ve,Ge),xa(Ge,vu,c[1]*l-g.height/2),Ao(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[0],f.tcoords[y*2+1]=g.tcoords[1],y++,xa(Ge,rs,g.width),Ao(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[2],f.tcoords[y*2+1]=g.tcoords[3],y++,xa(Ge,vu,g.height),Ao(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[4],f.tcoords[y*2+1]=g.tcoords[5],y++,xa(Ge,rs,g.width),Ea(ve,ve,Ge),f.points[y*3]=ve[0],f.points[y*3+1]=ve[1],f.points[y*3+2]=ve[2],f.tcoords[y*2]=g.tcoords[6],f.tcoords[y*2+1]=g.tcoords[7],y++,f.polys[v*4]=3,f.polys[v*4+1]=y-4,f.polys[v*4+2]=y-3,f.polys[v*4+3]=y-2,v++,f.polys[v*4]=3,f.polys[v*4+1]=y-4,f.polys[v*4+2]=y-2,f.polys[v*4+3]=y-1,f.ptIdx+=4,f.cellIdx+=2},t.updateTexturePolyData=()=>{const n=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);Je(n,n);const r=e.renderable.getTextValues().length,s=r*4,i=r*2,c=new Float64Array(s*3),l=new Uint16Array(i*4),f=new Float32Array(s*2);An(Kh,n);const g={ptIdx:0,cellIdx:0,polys:l,points:c,tcoords:f};let p=0,h=0,y=0;const v=e.renderable.getTextPolyData().getPoints().getData(),E=e.renderable.getTextValues();for(;p<v.length/3;){ve[0]=v[p*3],ve[1]=v[p*3+1],ve[2]=v[p*3+2],$e(Ge,ve,n),ve[0]=v[p*3+3],ve[1]=v[p*3+4],ve[2]=v[p*3+5],$e(gs,ve,n),Ea(Ge,Ge,gs);const T=[Ge[0],Ge[1]];Jw(T),t.createPolyDataForOneLabel(E[h],p,n,Kh,T,e.renderable.getAxisTitlePixelOffset(),g),p+=2,h++;for(let w=0;w<e.renderable.getTickCounts()[y];w++)t.createPolyDataForOneLabel(E[h],p,n,Kh,T,e.renderable.getTickLabelPixelOffset(),g),p++,h++;y++}const x=rt.newInstance({numberOfComponents:2,values:f,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(x),e.tmPolyData.getPoints().setData(c,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(l,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(n,r,s)=>{(e.lastSize[0]!==n[0]||e.lastSize[1]!==n[1])&&(e.lastSize[0]=n[0],e.lastSize[1]=n[1],e.lastAspectRatio=n[0]/n[1],e.forceUpdate=!0),e.camera=r,t.updateTexturePolyData()}}const TA=V.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),V.obj(t,e),e.tmPolyData=Oi.newInstance(),e.tmMapper=Cs.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=Ss.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),V.setGet(t,e,["renderable"]),V.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},V.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},V.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],mA(t,e)},"vtkCubeAxesActorHelper");function SA(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=r=>{e.camera!==r&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=r,r&&(e.cameraModifiedSub=r.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const r=e.camera.getViewMatrix();Je(r,r);let s=!1;const i=_e.getDiagonalLength(e.dataBounds),c=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let l=0;l<6;l++){let f=!1;const g=Math.floor(l/2),p=(g+1)%3,h=(g+2)%3;e.dataBounds[p*2]!==e.dataBounds[p*2+1]&&e.dataBounds[h*2]!==e.dataBounds[h*2+1]&&(ve[g]=e.dataBounds[l]-.1*i*vA[l][g],ve[p]=.5*(e.dataBounds[p*2]+e.dataBounds[p*2+1]),ve[h]=.5*(e.dataBounds[h*2]+e.dataBounds[h*2+1]),$e(Ge,ve,r),ve[g]=e.dataBounds[l],$e(gs,ve,r),Ea(Ge,gs,Ge),dc(Ge,Ge),f=Ge[2]>c,e.camera.getParallelProjection()||(dc(gs,gs),f=nw(gs,Ge)>c)),f!==e.lastFacesToDraw[l]&&(e.lastFacesToDraw[l]=f,s=!0)}return s},t.updatePolyData=(r,s,i)=>{let c=0,l=0;c+=8;let f=0;for(let v=0;v<12;v++)s[v]>0&&f++;if(l+=f,e.gridLines)for(let v=0;v<6;v++)r[v]&&(c+=i[nt[v][0]].length*2+i[nt[v][1]].length*2,l+=i[nt[v][0]].length+i[nt[v][1]].length);const g=new Float64Array(c*3),p=new Uint32Array(l*3);let h=0,y=0;for(let v=0;v<2;v++)for(let E=0;E<2;E++)for(let x=0;x<2;x++)g[h*3]=e.dataBounds[x],g[h*3+1]=e.dataBounds[2+E],g[h*3+2]=e.dataBounds[4+v],h++;for(let v=0;v<12;v++)s[v]>0&&(p[y*3]=2,p[y*3+1]=yu[v][0],p[y*3+2]=yu[v][1],y++);if(e.gridLines){for(let v=0;v<6;v++)if(r[v]){const E=Math.floor(v/2);let x=i[nt[v][0]];for(let T=0;T<x.length;T++)g[h*3+E]=e.dataBounds[v],g[h*3+nt[v][0]]=x[T],g[h*3+nt[v][1]]=e.dataBounds[nt[v][1]*2],h++,g[h*3+E]=e.dataBounds[v],g[h*3+nt[v][0]]=x[T],g[h*3+nt[v][1]]=e.dataBounds[nt[v][1]*2+1],h++,p[y*3]=2,p[y*3+1]=h-2,p[y*3+2]=h-1,y++;x=i[nt[v][1]];for(let T=0;T<x.length;T++)g[h*3+E]=e.dataBounds[v],g[h*3+nt[v][1]]=x[T],g[h*3+nt[v][0]]=e.dataBounds[nt[v][0]*2],h++,g[h*3+E]=e.dataBounds[v],g[h*3+nt[v][1]]=x[T],g[h*3+nt[v][0]]=e.dataBounds[nt[v][0]*2+1],h++,p[y*3]=2,p[y*3+1]=h-2,p[y*3+2]=h-1,y++}}e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(p,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(r,s,i,c)=>{let l=0;for(let v=0;v<12;v++)s[v]===1&&(l+=2,l+=i[xS[v]].length);const f=e.polyData.getPoints().getData(),g=new Float64Array(l*3);let p=0,h=0,y=0;for(let v=0;v<6;v++)if(r[v])for(let E=0;E<4;E++){const x=yS[v][E];if(s[x]===1){const T=xS[x],w=yu[x][0]*3,D=yu[x][1]*3;g[p*3]=.5*(f[w]+f[D]),g[p*3+1]=.5*(f[w+1]+f[D+1]),g[p*3+2]=.5*(f[w+2]+f[D+2]),p++;const M=Math.floor(v/2);g[p*3+M]=e.dataBounds[v],g[p*3+nt[v][0]]=.5*(e.dataBounds[nt[v][0]*2]+e.dataBounds[nt[v][0]*2+1]),g[p*3+nt[v][1]]=.5*(e.dataBounds[nt[v][1]*2]+e.dataBounds[nt[v][1]*2+1]),p++,e.textValues[h]=e.axisLabels[T],h++;const O=(T+1)%3,R=(T+2)%3,b=i[T],L=c[T];e.tickCounts[y]=b.length;for(let k=0;k<b.length;k++)g[p*3+T]=b[k],g[p*3+O]=f[w+O],g[p*3+R]=f[w+R],p++,e.textValues[h]=L[k],h++;y++}}e.textPolyData.getPoints().setData(g,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const r=t.computeFacesToDraw(),s=e.lastFacesToDraw;let i=!1;for(let c=0;c<6;c++)e.dataBounds[c]!==e.lastTickBounds[c]&&(i=!0,e.lastTickBounds[c]=e.dataBounds[c]);if(r||i||e.forceUpdate){const c=new Array(12).fill(0);for(let f=0;f<6;f++)if(s[f])for(let g=0;g<4;g++)c[yS[f][g]]++;const l=e.generateTicks(e.dataBounds);t.updatePolyData(s,c,l.ticks),t.updateTextData(s,c,l.ticks,l.tickStrings),(i||e.forceUpdate)&&t.updateTextureAtlas(l.tickStrings)}e.forceUpdate=!1},t.updateTextureAtlas=r=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let s=0,i=1;for(let c=0;c<3;c++){if(!e._tmAtlas.has(e.axisLabels[c])){Xh(e.tmContext,e.axisTextStyle);const l=e.tmContext.measureText(e.axisLabels[c]),f={height:l.actualBoundingBoxAscent+2,startingHeight:i,width:l.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[c],f),i+=f.height,s<f.width&&(s=f.width)}Xh(e.tmContext,e.tickTextStyle);for(let l=0;l<r[c].length;l++)if(!e._tmAtlas.has(r[c][l])){const f=e.tmContext.measureText(r[c][l]),g={height:f.actualBoundingBoxAscent+2,startingHeight:i,width:f.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(r[c][l],g),i+=g.height,s<g.width&&(s=g.width)}}s=Fn(s),i=Fn(i),e._tmAtlas.forEach(c=>{c.tcoords=[0,(i-c.startingHeight-c.height)/i,c.width/s,(i-c.startingHeight-c.height)/i,c.width/s,(i-c.startingHeight)/i,0,(i-c.startingHeight)/i]}),e.tmCanvas.width=s,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,s,i),e._tmAtlas.forEach((c,l)=>{Xh(e.tmContext,c.textStyle),e.tmContext.fillText(l,1,c.startingHeight+c.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=r=>{e.tickTextStyle={...e.tickTextStyle,...r},t.modified()},t.setAxisTextStyle=r=>{e.axisTextStyle={...e.axisTextStyle,...r},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),_e.setBounds(e.bounds,e.gridActor.getBounds()),_e.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const n=V.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=r=>n(r)[0]}function CA(t,e,n){return{boundsScaleFactor:1.3,camera:null,dataBounds:[..._e.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,tickLabelPixelOffset:12,generateTicks:Bb,...n,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif",...n?.axisTextStyle},tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif",...n?.tickTextStyle}}}function Ub(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Ss.extend(t,e,CA(t,e,n)),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=Sc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=Cs.newInstance(),e.polyData=Oi.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=Ss.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=Oi.newInstance(),V.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset","generateTicks"]),V.setGetArray(t,e,["dataBounds"],6),V.setGetArray(t,e,["axisLabels"],3),V.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),SA(t,e)}const EA=V.newInstance(Ub,"vtkCubeAxesActor");var Fb={newInstance:EA,extend:Ub,newCubeAxesActorHelper:TA,defaultGenerateTicks:Bb};function wA(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const s=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],s,e._openGLRenderWindow.getRenderable())}}}const MA={};function bA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,MA,n),ft.extend(t,e,n),e.CubeAxesActorHelper=Fb.newCubeAxesActorHelper(),wA(t,e)}const OA=et(bA,"vtkOpenGLCubeAxesActor");$n("vtkCubeAxesActor",OA);const rc={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var jb={ObjectType:rc};const{ObjectType:Xu}=jb,DA={};function RA(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function n(l){switch(l){case Xu.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case Xu.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case Xu.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let r=null,s=null,i=!0,c="";t.getType=()=>r,t.setType=l=>{r=l},t.getHandle=()=>s,t.isReady=()=>i===!1,t.generateBuffer=l=>{const f=n(l);return s===null&&(s=e.context.createBuffer(),r=l),n(r)===f},t.upload=(l,f)=>t.generateBuffer(f)?(e.context.bindBuffer(n(r),s),e.context.bufferData(n(r),l,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=l.length*l.BYTES_PER_ELEMENT,i=!1,!0):(c="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>s?(e.context.bindBuffer(n(r),s),!0):!1,t.release=()=>s?(e.context.bindBuffer(n(r),null),!0):!1,t.releaseGraphicsResources=()=>{s!==null&&(e.context.bindBuffer(n(r),null),e.context.deleteBuffer(s),s=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=l=>{e._openGLRenderWindow!==l&&(t.releaseGraphicsResources(),e._openGLRenderWindow=l,e.context=null,l&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>c}const NA={objectType:Xu.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function Gb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,NA,n),V.obj(t,e),V.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),V.moveToProtected(t,e,["openGLRenderWindow"]),RA(t,e)}const LA=V.newInstance(Gb);var zb={newInstance:LA,extend:Gb,...DA,...jb};function VA(t){let e=0,n=0;for(let s=0;s<3;++s){const i=t.getRange(s),c=i[1]-i[0];e+=c*c;const l=.5*(i[1]+i[0]);n+=l*l}const r=e>0&&(Math.abs(n)/e>1e6||Math.abs(Math.log10(e))>3||e===0&&n>1e6);if(r){const s=new Float64Array(3),i=new Float64Array(3);for(let c=0;c<3;++c){const l=t.getRange(c),f=l[1]-l[0];s[c]=.5*(l[1]+l[0]),i[c]=f>0?1/f:1}return{useShiftAndScale:r,coordShift:s,coordScale:i}}return{useShiftAndScale:r,coordShift:new Float32Array([0,0,0]),coordScale:new Float32Array([1,1,1])}}function _A(t,e){const n=new Float64Array(3);uB(n,e);const r=new Float64Array(16);return ZE(r,ms(),t,n),r}const{vtkErrorMacro:vS}=V;function kA(t,e){return t===null||e===null?!1:!(eT(t,[0,0,0])&&eT(e,[1,1,1]))}function BA(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(rc.ARRAY_BUFFER),t.createVBO=function(n,r,s,i){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!n.getData()||!n.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const l=i.points.getData();let f=null,g=null,p=null;const h=i.colors?i.colors.getNumberOfComponents():0,y=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,f=i.normals.getData()),i.customAttributes&&i.customAttributes.forEach(J=>{J&&(e.customData.push({data:J.getData(),offset:4*e.blockSize,components:J.getNumberOfComponents(),name:J.getName()}),e.blockSize+=J.getNumberOfComponents())}),i.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=y,e.blockSize+=y,g=i.tcoords.getData()),i.colors?(e.colorComponents=i.colors.getNumberOfComponents(),e.colorOffset=0,p=i.colors.getData(),e.colorBO||(e.colorBO=zb.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let v=0,E=0,x=0,T=0,w=0,D=0,M;const O={anythingToPoints(J,oe,U,Y){for(let ee=0;ee<J;++ee)M(oe[U+ee],Y)},linesToWireframe(J,oe,U,Y){for(let ee=0;ee<J-1;++ee)M(oe[U+ee],Y),M(oe[U+ee+1],Y)},polysToWireframe(J,oe,U,Y){if(J>2)for(let ee=0;ee<J;++ee)M(oe[U+ee],Y),M(oe[U+(ee+1)%J],Y)},stripsToWireframe(J,oe,U,Y){if(J>2){for(let ee=0;ee<J-1;++ee)M(oe[U+ee],Y),M(oe[U+ee+1],Y);for(let ee=0;ee<J-2;ee++)M(oe[U+ee],Y),M(oe[U+ee+2],Y)}},polysToSurface(J,oe,U,Y){for(let ee=0;ee<J-2;ee++)M(oe[U+0],Y),M(oe[U+ee+1],Y),M(oe[U+ee+2],Y)},stripsToSurface(J,oe,U,Y){for(let ee=0;ee<J-2;ee++)M(oe[U+ee],Y),M(oe[U+ee+1+ee%2],Y),M(oe[U+ee+1+(ee+1)%2],Y)}},R={anythingToPoints(J,oe){return J},linesToWireframe(J,oe){return J>1?(J-1)*2:0},polysToWireframe(J,oe){return J>2?J*2:0},stripsToWireframe(J,oe){return J>2?J*4-6:0},polysToSurface(J,oe){return J>2?(J-2)*3:0},stripsToSurface(J,oe,U){return J>2?(J-2)*3:0}};let b=null,L=null;s===Gn.POINTS||r==="verts"?(b=O.anythingToPoints,L=R.anythingToPoints):s===Gn.WIREFRAME||r==="lines"?(b=O[`${r}ToWireframe`],L=R[`${r}ToWireframe`]):(b=O[`${r}ToSurface`],L=R[`${r}ToSurface`]);const k=n.getData(),B=k.length;let j=0;for(let J=0;J<B;)j+=L(k[J],k),J+=k[J]+1;let z=null;const $=new Float32Array(j*e.blockSize);p&&(z=new Uint8Array(j*4));let W=0,Z=0;const{useShiftAndScale:te,coordShift:F,coordScale:P}=VA(i.points);if(te?t.setCoordShiftAndScale(F,P):e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null),c)if(!c.points&&!c.cells)c.points=new Int32Array(j),c.cells=new Int32Array(j);else{const J=new Int32Array(j+c.points.length);J.set(c.points),c.points=J;const oe=new Int32Array(j+c.cells.length);oe.set(c.cells),c.cells=oe}let ae=i.vertexOffset;M=function(oe,U){if(c&&(c.points[ae]=oe,c.cells[ae]=D+i.cellOffset),++ae,v=oe*3,e.coordShiftAndScaleEnabled?($[W++]=(l[v++]-e.coordShift[0])*e.coordScale[0],$[W++]=(l[v++]-e.coordShift[1])*e.coordScale[1],$[W++]=(l[v++]-e.coordShift[2])*e.coordScale[2]):($[W++]=l[v++],$[W++]=l[v++],$[W++]=l[v++]),f!==null&&(i.haveCellNormals?E=(D+i.cellOffset)*3:E=oe*3,$[W++]=f[E++],$[W++]=f[E++],$[W++]=f[E++]),e.customData.forEach(Y=>{w=oe*Y.components;for(let ee=0;ee<Y.components;++ee)$[W++]=Y.data[w++]}),g!==null){i.useTCoordsPerCell?x=U*y:x=oe*y;for(let Y=0;Y<y;++Y)$[W++]=g[x++]}p!==null&&(i.haveCellScalars?T=(D+i.cellOffset)*h:T=oe*h,z[Z++]=p[T++],z[Z++]=p[T++],z[Z++]=p[T++],z[Z++]=h===4?p[T++]:255)};for(let J=0;J<B;J+=k[J]+1,D++)b(k[J],k,J+1,D+i.cellOffset);return e.elementCount=j,t.upload($,rc.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(z,rc.ARRAY_BUFFER)),D},t.setCoordShiftAndScale=(n,r)=>{if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){vS("Wrong type for coordShift, expected vec3 or null");return}if(r!==null&&(r.constructor!==Float64Array||r.length!==3)){vS("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||n===null||!tT(n,e.coordShift))&&(e.coordShift=n),(e.coordScale===null||r===null||!tT(r,e.coordScale))&&(e.coordScale=r),e.coordShiftAndScaleEnabled=kA(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=_A(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const UA={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function Ab(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UA,n),zb.extend(t,e,n),V.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),V.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),BA(t,e)}const FA=V.newInstance(Ab);var jA={newInstance:FA,extend:Ab};const{vtkErrorMacro:GA}=V;function zA(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let n=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;if(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType==="Fragment"?n=e.context.FRAGMENT_SHADER:n=e.context.VERTEX_SHADER,e.handle=e.context.createShader(n),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const s=e.context.getShaderInfoLog(e.handle);return GA(`Error compiling shader '${e.source}': ${s}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const AA={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function $b(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,AA,n),V.obj(t,e),V.setGet(t,e,["shaderType","source","error","handle","context"]),zA(t,e)}const $A=V.newInstance($b,"vtkShader");var Yh={newInstance:$A,extend:$b};const{vtkErrorMacro:nr}=V;function HA(t,e,n,r){const s=typeof n=="string"?n:n.join(`
`),i=r===!1?e:new RegExp(e,"g"),c=t.replace(i,s);return{replace:c!==s,result:c}}function WA(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(nr(e.error),0):t.link()?(t.setCompiled(!0),1):(nr(`Links failed: ${e.error}`),0):(nr(e.fragmentShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),nr(e.fragmentShader.getError()),0):(nr(e.vertexShader.getSource().split(`
`).map((n,r)=>`${r}: ${n}`).join(`
`)),nr(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=n=>{e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const r=e.context.getProgramInfoLog(e.handle);return nr(`Error linking shader ${r}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(n,r)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const i=new Float32Array(r);return e.context.uniformMatrix4fv(s,!1,i),!0},t.setUniformMatrix3x3=(n,r)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;const i=new Float32Array(r);return e.context.uniformMatrix3fv(s,!1,i),!0},t.setUniformf=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1f(s,r),!0)},t.setUniformfv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1fv(s,r),!0)},t.setUniformi=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1i(s,r),!0)},t.setUniformiv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform1iv(s,r),!0)},t.setUniform2f=(n,r,s)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(s===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(i,r,s),!0},t.setUniform2fv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2fv(s,r),!0)},t.setUniform2i=(n,r,s)=>{const i=t.findUniform(n);if(i===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(s===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(i,r,s),!0},t.setUniform2iv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform2iv(s,r),!0)},t.setUniform3f=(n,r,s,i)=>{const c=t.findUniform(n);if(c===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(c,r,s,i),!0},t.setUniform3fArray=(n,r)=>{const s=t.findUniform(n);if(s===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;if(!Array.isArray(r)||r.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(s,r[0],r[1],r[2]),!0},t.setUniform3fv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3fv(s,r),!0)},t.setUniform3i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var s=arguments.length,i=new Array(s>1?s-1:0),c=1;c<s;c++)i[c-1]=arguments[c];let l=i;if(l.length===1&&Array.isArray(l[0])&&(l=l[0]),l.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(r,l[0],l[1],l[2]),!0},t.setUniform3iv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform3iv(s,r),!0)},t.setUniform4f=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var s=arguments.length,i=new Array(s>1?s-1:0),c=1;c<s;c++)i[c-1]=arguments[c];let l=i;if(l.length===1&&Array.isArray(l[0])&&(l=l[0]),l.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(r,l[0],l[1],l[2],l[3]),!0},t.setUniform4fv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4fv(s,r),!0)},t.setUniform4i=function(n){const r=t.findUniform(n);if(r===-1)return e.error=`Could not set uniform ${n} . No such uniform.`,!1;for(var s=arguments.length,i=new Array(s>1?s-1:0),c=1;c<s;c++)i[c-1]=arguments[c];let l=i;if(l.length===1&&Array.isArray(l[0])&&(l=l[0]),l.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(r,l[0],l[1],l[2],l[3]),!0},t.setUniform4iv=(n,r)=>{const s=t.findUniform(n);return s===-1?(e.error=`Could not set uniform ${n} . No such uniform.`,!1):(e.context.uniform4iv(s,r),!0)},t.findUniform=n=>{if(!n||!e.linked)return-1;let r=e.uniformLocs[n];return r!==void 0?r:(r=e.context.getUniformLocation(e.handle,n),r===null?(e.error=`Uniform ${n} not found in current shader program.`,e.uniformLocs[n]=-1,-1):(e.uniformLocs[n]=r,r))},t.isUniformUsed=n=>{if(!n)return!1;let r=e.uniformLocs[n];return r!==void 0?r!==null:e.linked?(r=e.context.getUniformLocation(e.handle,n),e.uniformLocs[n]=r,r!==null):(nr("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=n=>{if(!n)return!1;if(n in e.attributeLocs)return!0;if(!e.linked)return nr("attempt to find uniform when the shader program is not linked"),!1;const r=e.context.getAttribLocation(e.handle,n);return r===-1?!1:(e.attributeLocs[n]=r,!0)},t.attachShader=n=>{if(n.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const r=e.context.createProgram();if(r===0)return e.error="Could not create shader program.",!1;e.handle=r,e.linked=!1}return n.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=n.getHandle()),n.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=n.getHandle()),e.context.attachShader(e.handle,n.getHandle()),t.setLinked(!1),!0},t.detachShader=n=>{if(n.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(n.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),n.getShaderType()){case"Vertex":return e.vertexShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==n.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,n.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=n=>{e.context=n,e.vertexShader.setContext(n),e.fragmentShader.setContext(n),e.geometryShader.setContext(n)},t.setLastCameraMTime=n=>{e.lastCameraMTime=n}}const KA={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function Hb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,KA,n),e.attributesLocs={},e.uniformLocs={},e.vertexShader=Yh.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=Yh.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=Yh.newInstance(),e.geometryShader.setShaderType("Geometry"),V.obj(t,e),V.get(t,e,["lastCameraMTime"]),V.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),WA(t,e)}const XA=V.newInstance(Hb,"vtkShaderProgram");var ie={newInstance:XA,extend:Hb,substitute:HA};function YA(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const s=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,s.buffer);for(let i=0;i<s.attributes.length;++i){const c=s.attributes[i],l=c.isMatrix?c.size:1;for(let f=0;f<l;++f)n.enableVertexAttribArray(c.index+f),n.vertexAttribPointer(c.index+f,c.size,c.type,c.normalize,c.stride,c.offset+c.stride*f/c.size),c.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(c.index+f,1):n.vertexAttribDivisor(c.index+f,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const n=e.context;for(let r=0;r<e.buffers.length;++r){const s=e.buffers[r];e.context.bindBuffer(n.ARRAY_BUFFER,s.buffer);for(let i=0;i<s.attributes.length;++i){const c=s.attributes[i],l=c.isMatrix?c.size:1;for(let f=0;f<l;++f)n.enableVertexAttribArray(c.index+f),n.vertexAttribPointer(c.index+f,c.size,c.type,c.normalize,c.stride,c.offset+c.stride*f/c.size),c.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(c.index+f,0):n.vertexAttribDivisor(c.index+f,0)),n.disableVertexAttribArray(c.index+f)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(n,r,s,i,c,l,f,g)=>t.addAttributeArrayWithDivisor(n,r,s,i,c,l,f,g,0,!1),t.addAttributeArrayWithDivisor=(n,r,s,i,c,l,f,g,p,h)=>{if(!n||!n.isBound()||r.getHandle()===0||r.getType()!==rc.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=n.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==n.getHandle()))return!1;const y=e.context,v={};if(v.name=s,v.index=y.getAttribLocation(e.handleProgram,s),v.offset=i,v.stride=c,v.type=l,v.size=f,v.normalize=g,v.isMatrix=h,v.divisor=p,v.Index===-1)return!1;if(r.bind(),y.enableVertexAttribArray(v.index),y.vertexAttribPointer(v.index,v.size,v.type,v.normalize,v.stride,v.offset),p>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(v.index,1):y.vertexAttribDivisor(v.index,1)),v.buffer=r.getHandle(),!e.supported){let E=!1;for(let x=0;x<e.buffers.length;++x){const T=e.buffers[x];if(T.buffer===v.buffer){E=!0;let w=!1;for(let D=0;D<T.attributes.length;++D)T.attributes[D].name===s&&(w=!0,T.attributes[D]=v);w||T.attributes.push(v)}}E||e.buffers.push({buffer:v.buffer,attributes:[v]})}return!0},t.addAttributeMatrixWithDivisor=(n,r,s,i,c,l,f,g,p)=>{const h=t.addAttributeArrayWithDivisor(n,r,s,i,c,l,f,g,p,!0);if(!h)return h;const y=e.context,v=y.getAttribLocation(e.handleProgram,s);for(let E=1;E<f;E++)y.enableVertexAttribArray(v+E),y.vertexAttribPointer(v+E,f,l,g,c,i+c*E/f),p>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(v+E,1):y.vertexAttribDivisor(v+E,1));return!0},t.removeAttributeArray=n=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let r=0;r<e.buffers.length;++r){const s=e.buffers[r];for(let i=0;i<s.attributes.length;++i)if(s.attributes[i].name===n)return s.attributes.splice(i,1),s.attributes.length||e.buffers.splice(r,1),!0}return!0},t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))}}const qA={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function Wb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qA,n),e.buffers=[],V.obj(t,e),V.get(t,e,["supported"]),V.setGet(t,e,["forceEmulation"]),YA(t,e)}const ZA=V.newInstance(Wb,"vtkOpenGLVertexArrayObject");var Kb={newInstance:ZA,extend:Wb};const va={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function QA(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=n=>{e.context=n.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(n),e.CABO.setOpenGLRenderWindow(n)},t.releaseGraphicsResources=n=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(n,r,s,i)=>{if(e.CABO.getElementCount()){const c=t.getOpenGLMode(s),l=t.haveWideLines(n,r),f=e.context,g=f.getParameter(f.DEPTH_WRITEMASK);e.pointPicking&&f.depthMask(!1),c===f.LINES&&l?(t.updateShaders(n,r,i),f.drawArraysInstanced(c,0,e.CABO.getElementCount(),2*Math.ceil(r.getProperty().getLineWidth()))):(f.lineWidth(r.getProperty().getLineWidth()),t.updateShaders(n,r,i),f.drawArrays(c,0,e.CABO.getElementCount()),f.lineWidth(1));const h=(c===f.POINTS?1:0)||(c===f.LINES?2:3);return e.pointPicking&&f.depthMask(g),e.CABO.getElementCount()/h}return 0},t.getOpenGLMode=n=>{if(e.pointPicking)return e.context.POINTS;const r=e.primitiveType;return n===Gn.POINTS||r===va.Points?e.context.POINTS:n===Gn.WIREFRAME||r===va.Lines||r===va.TrisEdges||r===va.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(n,r)=>r.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(n,r,s)=>!!(s.getNeedToRebuildShaders(t,n,r)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<s.getMTime()||t.getShaderSourceTime().getMTime()<r.getMTime()),t.updateShaders=(n,r,s)=>{if(t.getNeedToRebuildShaders(n,r,s)){const i={Vertex:null,Fragment:null,Geometry:null};s.buildShaders(i,n,r);const c=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);c!==t.getProgram()&&(t.setProgram(c),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),s.setMapperShaderParameters(t,n,r),s.setPropertyShaderParameters(t,n,r),s.setCameraShaderParameters(t,n,r),s.setLightingShaderParameters(t,n,r),s.invokeShaderCallbacks(t,n,r)},t.setMapperShaderParameters=(n,r,s)=>{if(t.haveWideLines(n,r)){t.getProgram().setUniform2f("viewportSize",s.usize,s.vsize);const i=parseFloat(r.getProperty().getLineWidth()),c=i/2;t.getProgram().setUniformf("lineWidthStepSize",i/Math.ceil(i)),t.getProgram().setUniformf("halfLineWidth",c)}e.primitiveType===va.Points||r.getProperty().getRepresentation()===Gn.POINTS?t.getProgram().setUniformf("pointSize",r.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(n,r,s)=>{let i=n.Vertex;i=ie.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,i=ie.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(s.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(r,s)&&(i=ie.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,i=ie.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),n.Vertex=i},t.getPointPickingPrimitiveSize=()=>e.primitiveType===va.Points?2:e.primitiveType===va.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const PA={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function Xb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PA,n),V.obj(t,e),e.shaderSourceTime={},V.obj(e.shaderSourceTime),e.attributeUpdateTime={},V.obj(e.attributeUpdateTime),V.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=ie.newInstance(),e.VAO=Kb.newInstance(),e.CABO=jA.newInstance(),QA(t,e)}const JA=V.newInstance(Xb);var Bi={newInstance:JA,extend:Xb,primTypes:va};const IA={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Pd={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var Yb={Wrap:IA,Filter:Pd};const qb=new Float32Array(1),e8=new Int32Array(qb.buffer);function t8(t){qb[0]=t;const e=e8[0];let n=e>>16&32768,r=e>>12&2047;const s=e>>23&255;return s<103?n:s>142?(n|=31744,n|=(s===255?0:1)&&e&8388607,n):s<113?(r|=2048,n|=(r>>114-s)+(r>>113-s&1),n):(n|=s-112<<10|r>>1,n+=r&1,n)}function n8(t){const e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*2**-14*(r/2**10):n===31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(n-15)*(1+r/2**10)}var hs={fromHalf:n8,toHalf:t8};function r8(){try{const r=new Int16Array([0,32767]),s=[1,1],i=document.createElement("canvas");i.width=4,i.height=4;const c=i.getContext("webgl2");if(!c)return!1;const l=c.getExtension("EXT_texture_norm16");if(!l)return!1;const f=`#version 300 es
    void main() {
      gl_PointSize = ${4 .toFixed(1)};
      gl_Position = vec4(0, 0, 0, 1);
    }
  `,g=`#version 300 es
    precision highp float;
    precision highp int;
    precision highp sampler2D;

    uniform sampler2D u_image;

    out vec4 color;

    void main() {
        vec4 intColor = texture(u_image, gl_PointCoord.xy);
        color = vec4(vec3(intColor.rrr), 1);
    }
    `,p=c.createShader(c.VERTEX_SHADER);if(c.shaderSource(p,f),c.compileShader(p),!c.getShaderParameter(p,c.COMPILE_STATUS))return!1;const h=c.createShader(c.FRAGMENT_SHADER);if(c.shaderSource(h,g),c.compileShader(h),!c.getShaderParameter(h,c.COMPILE_STATUS))return!1;const y=c.createProgram();if(c.attachShader(y,p),c.attachShader(y,h),c.linkProgram(y),!c.getProgramParameter(y,c.LINK_STATUS))return!1;const v=c.createTexture();c.bindTexture(c.TEXTURE_2D,v),c.texImage2D(c.TEXTURE_2D,0,l.R16_SNORM_EXT,2,1,0,c.RED,c.SHORT,r),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.useProgram(y),c.drawArrays(c.POINTS,0,1);const E=new Uint8Array(4);c.readPixels(s[0],s[1],1,1,c.RGBA,c.UNSIGNED_BYTE,E);const[x,T,w]=E,D=c.getExtension("WEBGL_lose_context");return D&&D.loseContext(),x===T&&T===w&&x!==0}catch{return!1}}let qh;function a8(){return qh===void 0&&(qh=r8()),qh}const{Wrap:Vr,Filter:mt}=Yb,{VtkDataTypes:Ee}=rt,{vtkDebugMacro:Zh,vtkErrorMacro:as,vtkWarningMacro:mS,requiredParam:Me}=fr,{toHalf:s8}=hs;function i8(t,e){e.classHierarchy.push("vtkOpenGLTexture");function n(){return{internalFormat:e.internalFormat,format:e.format,openGLDataType:e.openGLDataType,width:e.width,height:e.height}}t.render=function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(E?e._openGLRenderWindow=E:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow")),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(mt.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(mt.LINEAR),t.setMagnificationFilter(mt.LINEAR)):(t.setMinificationFilter(mt.NEAREST),t.setMagnificationFilter(mt.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(Vr.REPEAT),t.setWrapS(Vr.REPEAT),t.setWrapT(Vr.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImageBitmap()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(mt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImageBitmap()&&e.renderable.getImageLoaded()&&(t.create2DFromImageBitmap(e.renderable.getImageBitmap()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(mt.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(mt.LINEAR_MIPMAP_LINEAR));const T=e.renderable.getCanvas();t.create2DFromRaw({width:T.width,height:T.height,numComps:4,dataType:Ee.UNSIGNED_CHAR,data:T,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const T=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(mt.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw({width:T.width,height:T.height,numComps:4,dataType:Ee.UNSIGNED_CHAR,data:T.data,flip:!0}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const x=e.renderable.getInputData(0);if(x&&x.getPointData().getScalars()){const T=x.getExtent(),w=x.getPointData().getScalars(),D=[];for(let M=0;M<e.renderable.getNumberOfInputPorts();++M){const O=e.renderable.getInputData(M),R=O?O.getPointData().getScalars().getData():null;R&&D.push(R)}e.renderable.getInterpolate()&&w.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(mt.LINEAR_MIPMAP_LINEAR)),D.length%6===0?t.createCubeFromRaw({width:T[1]-T[0]+1,height:T[3]-T[2]+1,numComps:w.getNumberOfComponents(),dataType:w.getDataType(),data:D}):t.create2DFromRaw({width:T[1]-T[0]+1,height:T[3]-T[2]+1,numComps:w.getNumberOfComponents(),dataType:w.getDataType(),data:w.getData()}),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()};const r=()=>{if(!((e.minificationFilter===mt.LINEAR||e.magnificationFilter===mt.LINEAR)&&!a8()))return e.oglNorm16Ext};t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=E=>{E&&e.handle&&(E.activateTexture(t),E.deactivateTexture(t),e.context.deleteTexture(e.handle),e._prevTexParams=null,e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(E),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let E=!1;if(e.context&&e.handle){let x=0;e.target===e.context.TEXTURE_2D?x=e.context.TEXTURE_BINDING_2D:mS("impossible case"),E=e.context.getIntegerv(x)===e.handle}return E},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(E,x)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(E,x)),e.internalFormat||Zh(`Unable to find suitable internal format for T=${E} NC= ${x}`),[e.context.R32F,e.context.RG32F,e.context.RGB32F,e.context.RGBA32F].includes(e.internalFormat)&&!e.context.getExtension("OES_texture_float_linear")&&mS("Failed to load OES_texture_float_linear. Texture filtering is not available for *32F internal formats."),e.internalFormat),t.getDefaultInternalFormat=(E,x)=>{let T=0;return T=e._openGLRenderWindow.getDefaultTextureInternalFormat(E,x,r(),t.useHalfFloat()),T||(T||(Zh("Unsupported internal texture type!"),Zh(`Unable to find suitable internal format for T=${E} NC= ${x}`)),T)},t.useHalfFloat=()=>e.enableUseHalfFloat&&e.canUseHalfFloat,t.setInternalFormat=E=>{e._forceInternalFormat=!0,E!==e.internalFormat&&(e.internalFormat=E,t.modified())},t.getFormat=(E,x)=>(e.format=t.getDefaultFormat(E,x),e.format),t.getDefaultFormat=(E,x)=>{if(e._openGLRenderWindow.getWebgl2())switch(x){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(x){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e._prevTexParams=null,e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=E=>{const x=t.useHalfFloat();if(e._openGLRenderWindow.getWebgl2())switch(E){case Ee.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(r()&&!x&&Ee.SHORT):return e.context.SHORT;case(r()&&!x&&Ee.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(x&&Ee.SHORT):return e.context.HALF_FLOAT;case(x&&Ee.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case Ee.FLOAT:case Ee.VOID:default:return e.context.FLOAT}switch(E){case Ee.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case Ee.FLOAT:case Ee.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const T=e.context.getExtension("OES_texture_half_float");if(T&&e.context.getExtension("OES_texture_half_float_linear"))return T.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(E){let x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||x)&&(e.openGLDataType=t.getDefaultDataType(E)),e.openGLDataType},t.getShiftAndScale=()=>{let E=0,x=1;switch(e.openGLDataType){case e.context.BYTE:x=127.5,E=x-128;break;case e.context.UNSIGNED_BYTE:x=255,E=0;break;case e.context.SHORT:x=32767.5,E=x-32768;break;case e.context.UNSIGNED_SHORT:x=65536,E=0;break;case e.context.INT:x=21474836475e-1,E=x-2147483648;break;case e.context.UNSIGNED_INT:x=4294967295,E=0;break;case e.context.FLOAT:}return{shift:E,scale:x}},t.getOpenGLFilterMode=E=>{switch(E){case mt.NEAREST:return e.context.NEAREST;case mt.LINEAR:return e.context.LINEAR;case mt.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case mt.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case mt.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case mt.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=E=>{switch(E){case Vr.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case Vr.REPEAT:return e.context.REPEAT;case Vr.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function s(E){const[x,T,w,D,M,O]=E;return[T-x+1,D-w+1,O-M+1]}function i(E){const[x,T,w]=s(E);return x*T*w}function c(E,x,T,w,D){const[M,O,R,b,L,k]=T,[B,j]=x,z=B*j;let $=D;for(let W=L;W<=k;W++){const Z=W*z;for(let te=R;te<=b;te++){const F=Z+te*B;for(let P=F+M,ae=F+O;P<=ae;P++,$++)w[$]=E[P]}}}function l(E,x){const w=(arguments.length>2&&arguments[2]!==void 0?arguments[2]:null)||E.constructor,D=x.reduce((b,L)=>b+i(L),0),M=new w(D),O=[e.width,e.height,e.depth];let R=0;return x.forEach(b=>{c(E,O,b,M,R),R+=i(b)}),M}t.updateArrayDataTypeForGL=function(E,x){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,w=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];const D=[];let M=e.width*e.height*e.components;T&&(M*=e.depth);const O=!!w.length;if(E!==Ee.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let b=0;b<x.length;b++)if(x[b])if(O)D.push(l(x[b],w,Float32Array));else{const L=x[b].length>M?x[b].subarray(0,M):x[b];D.push(new Float32Array(L))}else D.push(null);if(E!==Ee.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let b=0;b<x.length;b++)if(x[b])if(O)D.push(l(x[b],w,Uint8Array));else{const L=x[b].length>M?x[b].subarray(0,M):x[b];D.push(new Uint8Array(L))}else D.push(null);let R=!1;if(e._openGLRenderWindow.getWebgl2())R=e.openGLDataType===e.context.HALF_FLOAT;else{const b=e.context.getExtension("OES_texture_half_float");R=b&&e.openGLDataType===b.HALF_FLOAT_OES}if(R)for(let b=0;b<x.length;b++)if(x[b]){const L=O?l(x[b],w):x[b],k=new Uint16Array(O?L.length:M),B=k.length;for(let j=0;j<B;j++)k[j]=s8(L[j]);D.push(k)}else D.push(null);if(D.length===0)for(let b=0;b<x.length;b++)D.push(O&&x[b]?l(x[b],w):x[b]);return D};function f(E){if(e._openGLRenderWindow.getWebgl2())return E;const x=[],T=e.width,w=e.height,D=e.components;if(E&&(!Wo(T)||!Wo(w))){const M=e.context.getExtension("OES_texture_half_float"),O=Fn(T),R=Fn(w),b=O*R*e.components;for(let L=0;L<E.length;L++)if(E[L]!==null){let k=null;const B=w/R,j=T/O;let z=!1;e.openGLDataType===e.context.FLOAT?k=new Float32Array(b):M&&e.openGLDataType===M.HALF_FLOAT_OES?(k=new Uint16Array(b),z=!0):k=new Uint8Array(b);for(let $=0;$<R;$++){const W=$*O*D,Z=$*B;let te=Math.floor(Z),F=Math.ceil(Z);F>=w&&(F=w-1);const P=Z-te,ae=1-P;te=te*T*D,F=F*T*D;for(let J=0;J<O;J++){const oe=J*D,U=J*j;let Y=Math.floor(U),ee=Math.ceil(U);ee>=T&&(ee=T-1);const ce=U-Y;Y*=D,ee*=D;for(let he=0;he<D;he++)z?k[W+oe+he]=hs.toHalf(hs.fromHalf(E[L][te+Y+he])*ae*(1-ce)+hs.fromHalf(E[L][te+ee+he])*ae*ce+hs.fromHalf(E[L][F+Y+he])*P*(1-ce)+hs.fromHalf(E[L][F+ee+he])*P*ce):k[W+oe+he]=E[L][te+Y+he]*ae*(1-ce)+E[L][te+ee+he]*ae*ce+E[L][F+Y+he]*P*(1-ce)+E[L][F+ee+he]*P*ce}}x.push(k),e.width=O,e.height=R}else x.push(null)}if(x.length===0)for(let M=0;M<E.length;M++)x.push(E[M]);return x}function g(E){return e._openGLRenderWindow?e.resizable||e.renderable?.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&r()&&(E===Ee.UNSIGNED_SHORT||E===Ee.SHORT)):!1:!1}t.create2DFromRaw=function(){let{width:E=Me("width"),height:x=Me("height"),numComps:T=Me("numComps"),dataType:w=Me("dataType"),data:D=Me("data"),flip:M=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(w,!0),t.getInternalFormat(w,T),t.getFormat(w,T),!e.internalFormat||!e.format||!e.openGLDataType)return as("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=T,e.width=E,e.height=x,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const O=[D],R=t.updateArrayDataTypeForGL(w,O),b=f(R);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,M),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(w)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),b[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,b[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,b[0]),e.generateMipmap&&e.context.generateMipmap(e.target),M&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*T*e._openGLRenderWindow.getDefaultTextureByteSize(w,r(),t.useHalfFloat()),t.deactivate(),!0},t.createCubeFromRaw=function(){let{width:E=Me("width"),height:x=Me("height"),numComps:T=Me("numComps"),dataType:w=Me("dataType"),data:D=Me("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.getOpenGLDataType(w),t.getInternalFormat(w,T),t.getFormat(w,T),!e.internalFormat||!e.format||!e.openGLDataType)return as("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=T,e.width=E,e.height=x,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=D.length/6-1,t.createTexture(),t.bind();const M=t.updateArrayDataTypeForGL(w,D),O=f(M),R=[];let b=e.width,L=e.height;for(let k=0;k<O.length;k++){k%6===0&&k!==0&&(b/=2,L/=2),R[k]=Vi(w,L*b*e.components);for(let B=0;B<L;++B){const j=B*b*e.components,z=(L-B-1)*b*e.components;R[k].set(O[k].slice(z,z+b*e.components),j)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(w)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let k=0;k<6;k++){let B=0,j=e.width,z=e.height;for(;j>=1&&z>=1;){let $=null;B<=e.maxLevel&&($=R[6*B+k]),g(w)?$!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+k,B,0,0,j,z,e.format,e.openGLDataType,$):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+k,B,e.internalFormat,j,z,0,e.format,e.openGLDataType,$),B++,j/=2,z/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*T*e._openGLRenderWindow.getDefaultTextureByteSize(w,r(),t.useHalfFloat()),t.deactivate(),!0},t.createDepthFromRaw=function(){let{width:E=Me("width"),height:x=Me("height"),dataType:T=Me("dataType"),data:w=Me("data")}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.getOpenGLDataType(T),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?T===Ee.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(as("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=E,e.height=x,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(T)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),w!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,w)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,w),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(T,r(),t.useHalfFloat()),t.deactivate(),!0)},t.create2DFromImage=E=>{if(t.getOpenGLDataType(Ee.UNSIGNED_CHAR),t.getInternalFormat(Ee.UNSIGNED_CHAR,4),t.getFormat(Ee.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return as("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const x=!e._openGLRenderWindow.getWebgl2()&&(!Wo(E.width)||!Wo(E.height));let T=E,w=E.width,D=E.height,M=!0;const O=window.chrome;if(x||O){const R=new OffscreenCanvas(Fn(E.width),Fn(E.height));w=R.width,D=R.height;const b=R.getContext("2d");b.translate(0,R.height),b.scale(1,-1),b.drawImage(E,0,0,E.width,E.height,0,0,R.width,R.height),T=R,M=!1}return e.width=w,e.height=D,e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,M),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(Ee.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,T)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,T),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ee.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0},t.create2DFromImageBitmap=E=>(t.getOpenGLDataType(Ee.UNSIGNED_CHAR),t.getInternalFormat(Ee.UNSIGNED_CHAR,4),t.getFormat(Ee.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType?(as("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),e.width=E.width,e.height=E.height,g(Ee.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,E)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,E),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ee.UNSIGNED_CHAR,r(),t.useHalfFloat()),t.deactivate(),!0));function p(E,x,T){const w=new Array(T),D=new Array(T);for(let M=0;M<T;++M)w[M]=E[M],D[M]=x[M]-E[M]||1;return{scale:D,offset:w}}function h(E,x){for(let T=0;T<E.length;T++){const w=E[T],D=x[T]+w;if(w<-2048||w>2048||D<-2048||D>2048)return!1}return!0}function y(E,x,T,w){t.getOpenGLDataType(E);const D=h(x,T)||w;let M=!1;if(e._openGLRenderWindow.getWebgl2())M=e.openGLDataType===e.context.FLOAT&&e.context.getExtension("OES_texture_float_linear")===null&&D||e.openGLDataType===e.context.HALF_FLOAT;else{const O=e.context.getExtension("OES_texture_half_float");M=O&&e.openGLDataType===O.HALF_FLOAT_OES}e.canUseHalfFloat=M&&D}function v(E,x){const T=E.getNumberOfComponents(),w=E.getDataType(),D=E.getData(),M=new Array(T),O=new Array(T);for(let b=0;b<T;++b){const[L,k]=E.getRange(b);M[b]=L,O[b]=k}const R=p(M,O,T);return y(w,R.offset,R.scale,x),t.useHalfFloat()||t.getOpenGLDataType(w,!0),{numComps:T,dataType:w,data:D,scaleOffsets:R}}t.create2DFilterableFromRaw=function(){let{width:E=Me("width"),height:x=Me("height"),numComps:T=Me("numComps"),dataType:w=Me("dataType"),data:D=Me("data"),preferSizeOverAccuracy:M=!1,ranges:O=void 0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create2DFilterableFromDataArray({width:E,height:x,dataArray:rt.newInstance({numberOfComponents:T,dataType:w,values:D,ranges:O}),preferSizeOverAccuracy:M})},t.create2DFilterableFromDataArray=function(){let{width:E=Me("width"),height:x=Me("height"),dataArray:T=Me("dataArray"),preferSizeOverAccuracy:w=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:D,dataType:M,data:O}=v(T,w);t.create2DFromRaw({width:E,height:x,numComps:D,dataType:M,data:O})},t.updateVolumeInfoForGL=(E,x)=>{let T=!1;const w=t.useHalfFloat();(!e.volumeInfo?.scale||!e.volumeInfo?.offset)&&(e.volumeInfo={scale:new Array(x),offset:new Array(x)});for(let D=0;D<x;++D)e.volumeInfo.scale[D]=1,e.volumeInfo.offset[D]=0;if(r()&&!w&&E===Ee.SHORT){for(let D=0;D<x;++D)e.volumeInfo.scale[D]=32767;T=!0}if(r()&&!w&&E===Ee.UNSIGNED_SHORT){for(let D=0;D<x;++D)e.volumeInfo.scale[D]=65535;T=!0}if(E===Ee.UNSIGNED_CHAR){for(let D=0;D<x;++D)e.volumeInfo.scale[D]=255;T=!0}return(E===Ee.FLOAT||w&&(E===Ee.SHORT||E===Ee.UNSIGNED_SHORT))&&(T=!0),T},t.create3DFromRaw=function(){let{width:E=Me("width"),height:x=Me("height"),depth:T=Me("depth"),numComps:w=Me("numComps"),dataType:D=Me("dataType"),data:M=Me("data"),updatedExtents:O=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},R=D,b=M;if(!t.updateVolumeInfoForGL(R,w)&&b){const W=E*x*T,Z=structuredClone(e.volumeInfo),te=new Float32Array(W*w);e.volumeInfo.offset=Z.offset,e.volumeInfo.scale=Z.scale;let F=0;const P=Z.scale.map(ae=>1/ae);for(let ae=0;ae<W;ae++)for(let J=0;J<w;J++)te[F]=(b[F]-Z.offset[J])*P[J],F++;R=Ee.FLOAT,b=te}if(t.getOpenGLDataType(R),t.getInternalFormat(R,w),t.getFormat(R,w),!e.internalFormat||!e.format||!e.openGLDataType)return as("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=w,e.width=E,e.height=x,e.depth=T,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const L=O.length>0,k=!L||!sw(e._prevTexParams,n()),B=[b],z=t.updateArrayDataTypeForGL(R,B,!0,k?[]:O),$=f(z);if(e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),k)g(R)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),$[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,$[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,$[0]),e._prevTexParams=n();else if(L){const W=$[0];let Z=0;for(let te=0;te<O.length;te++){const F=O[te],P=s(F),ae=i(F),J=new W.constructor(W.buffer,Z,ae);Z+=J.byteLength,e.context.texSubImage3D(e.target,0,F[0],F[2],F[4],P[0],P[1],P[2],e.format,e.openGLDataType,J)}}return e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(R,r(),t.useHalfFloat()),t.deactivate(),!0},t.create3DFilterableFromRaw=function(){let{width:E=Me("width"),height:x=Me("height"),depth:T=Me("depth"),numComps:w=Me("numComps"),dataType:D=Me("dataType"),data:M=Me("data"),preferSizeOverAccuracy:O=!1,ranges:R=void 0,updatedExtents:b=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.create3DFilterableFromDataArray({width:E,height:x,depth:T,dataArray:rt.newInstance({numberOfComponents:w,dataType:D,values:M,ranges:R}),preferSizeOverAccuracy:O,updatedExtents:b})},t.create3DFilterableFromDataArray=function(){let{width:E=Me("width"),height:x=Me("height"),depth:T=Me("depth"),dataArray:w=Me("dataArray"),preferSizeOverAccuracy:D=!1,updatedExtents:M=[]}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{numComps:O,dataType:R,data:b,scaleOffsets:L}=v(w,D),k=[],B=[];for(let fe=0;fe<O;++fe)k[fe]=0,B[fe]=1;if(e.volumeInfo={scale:B,offset:k,dataComputedScale:L.scale,dataComputedOffset:L.offset,width:E,height:x,depth:T},e._openGLRenderWindow.getWebgl2())return t.create3DFromRaw({width:E,height:x,depth:T,numComps:O,dataType:R,data:b,updatedExtents:M});const j=E*x*T,z=structuredClone(L);let $=(fe,Te,Ze,je,It)=>{fe[Te]=Ze},W=Ee.UNSIGNED_CHAR;if(R===Ee.UNSIGNED_CHAR)for(let fe=0;fe<O;++fe)z.offset[fe]=0,z.scale[fe]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(W=Ee.FLOAT,$=(fe,Te,Ze,je,It)=>{fe[Te]=(Ze-je)/It}):(W=Ee.UNSIGNED_CHAR,$=(fe,Te,Ze,je,It)=>{fe[Te]=255*(Ze-je)/It});if(t.getOpenGLDataType(W),t.getInternalFormat(W,O),t.getFormat(W,O),!e.internalFormat||!e.format||!e.openGLDataType)return as("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=O,e.depth=1,e.numberOfDimensions=2;let Z=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);Z>4096&&(W===Ee.FLOAT||O>=3)&&(Z=4096);let te=1,F=1;j>Z*Z&&(te=Math.ceil(Math.sqrt(j/(Z*Z))),F=te);let P=Math.sqrt(j)/te;P=Fn(P);const ae=Math.floor(P*te/E),J=Math.ceil(T/ae),oe=Fn(x*J/F);e.width=P,e.height=oe,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=ae,e.volumeInfo.yreps=J,e.volumeInfo.xstride=te,e.volumeInfo.ystride=F,e.volumeInfo.offset=z.offset,e.volumeInfo.scale=z.scale;let U;const Y=P*oe*O;W===Ee.FLOAT?U=new Float32Array(Y):U=new Uint8Array(Y);let ee=0;const ce=Math.floor(E/te),he=Math.floor(x/F);for(let fe=0;fe<J;fe++){const Te=Math.min(ae,T-fe*ae),Ze=O*(e.width-Te*Math.floor(E/te));for(let je=0;je<he;je++){for(let It=0;It<Te;It++){const ws=O*((fe*ae+It)*E*x+F*je*E);for(let Va=0;Va<ce;Va++)for(let Gr=0;Gr<O;Gr++)$(U,ee,b[ws+te*Va*O+Gr],z.offset[Gr],z.scale[Gr]),ee++}ee+=Ze}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),g(W)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),U!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,U)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,U),t.deactivate(),!0},t.setOpenGLRenderWindow=E=>{e._openGLRenderWindow!==E&&(t.releaseGraphicsResources(),e._openGLRenderWindow=E,e.context=null,E&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=E=>E&&E.isCurrent()?E.getIntegerv(E.MAX_TEXTURE_SIZE):-1,t.enableUseHalfFloat=E=>{e.enableUseHalfFloat=E}}const o8={_openGLRenderWindow:null,_forceInternalFormat:!1,_prevTexParams:null,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:Vr.CLAMP_TO_EDGE,wrapT:Vr.CLAMP_TO_EDGE,wrapR:Vr.CLAMP_TO_EDGE,minificationFilter:mt.NEAREST,magnificationFilter:mt.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0,enableUseHalfFloat:!0,canUseHalfFloat:!1};function Zb(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o8,n),ft.extend(t,e,n),e.sendParametersTime={},Wt(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},Wt(e.textureBuildTime,{mtime:0}),Dc(t,e,["format","openGLDataType"]),Gt(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Cn(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),Rc(t,e,["openGLRenderWindow"]),i8(t,e)}const Qb=et(Zb,"vtkOpenGLTexture");var Br={newInstance:Qb,extend:Zb,...Yb};$n("vtkTexture",Qb);var c8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,l8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function u8(t,e){t.replaceShaderCoincidentOffset=(n,r,s)=>{const i=t.getCoincidentParameters(r,s);if(i&&(i.factor!==0||i.offset!==0)){let c=n.Fragment;c=ie.substitute(c,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(i.factor!==0?(c=ie.substitute(c,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,c=ie.substitute(c,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):c=ie.substitute(c,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(i.factor!==0?(c=ie.substitute(c,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,c=ie.substitute(c,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):c=ie.substitute(c,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),n.Fragment=c}}}function f8(t,e){t.applyShaderReplacements=(n,r,s)=>{let i=null;if(r&&(i=r.ShaderReplacements),i)for(let c=0;c<i.length;c++){const l=i[c];if(s&&l.replaceFirst||!s&&!l.replaceFirst){const f=l.shaderType,g=n[f],p=ie.substitute(g,l.originalValue,l.replacementValue,l.replaceAll);n[f]=p.result}}},t.buildShaders=(n,r,s)=>{t.getReplacedShaderTemplate(n,r,s),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(n);const i=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(n,i,!0),t.replaceShaderValues(n,r,s),t.applyShaderReplacements(n,i)},t.getReplacedShaderTemplate=(n,r,s)=>{const i=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(n,r,s);let c=n.Vertex;if(i){const g=i.VertexShaderCode;g!==void 0&&g!==""&&(c=g)}n.Vertex=c;let l=n.Fragment;if(i){const g=i.FragmentShaderCode;g!==void 0&&g!==""&&(l=g)}n.Fragment=l;let f=n.Geometry;if(i){const g=i.GeometryShaderCode;g!==void 0&&(f=g)}n.Geometry=f}}var yf={implementReplaceShaderCoincidentOffset:u8,implementBuildShadersWithReplacements:f8};const{FieldAssociations:Qh}=ki,{primTypes:Ct}=Bi,{Representation:ui,Shading:TS}=Bc,{ScalarMode:mu}=Cs,{Filter:SS,Wrap:CS}=Br,{vtkErrorMacro:ss}=fr,g8={type:"StartEvent"},h8={type:"EndEvent"},{CoordinateSystem:d8}=kc;function p8(t){const e=t.getSelector();return e?e.getCurrentPass():qt.MIN_KNOWN_PASS-1}function y8(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=r=>{r&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera))},t.translucentPass=(r,s)=>{r&&(e.currentRenderPass=s,t.render())},t.zBufferPass=r=>{r&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=r=>t.zBufferPass(r),t.opaquePass=r=>{r&&t.render()},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let c=Ct.Start;c<Ct.End;c++)e.primitives[c].setOpenGLRenderWindow(e._openGLRenderWindow)}const s=e.openGLActor.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,s)},t.getShaderTemplate=(r,s,i)=>{r.Vertex=c8,r.Fragment=l8,r.Geometry=""},t.replaceShaderColor=(r,s,i)=>{let c=r.Vertex,l=r.Geometry,f=r.Fragment;const g=e.lastBoundBO.getReferenceByName("lastLightComplexity");let p=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];g&&(p=p.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let h=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];g&&(h=h.concat(["  vec3 specularColor;","  float specularPower;"])),h=h.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),g&&(h=h.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(p=p.concat(["varying vec4 vertexColorVSOutput;"]),c=ie.substitute(c,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,c=ie.substitute(c,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,l=ie.substitute(l,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,l=ie.substitute(l,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?f=ie.substitute(f,"//VTK::Color::Impl",h.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:(e.renderable.getAreScalarsMappedFromCells()||e.renderable.getInterpolateScalarsBeforeMapping())&&e.renderable.getColorCoordinates()&&!e.drawingEdges?f=ie.substitute(f,"//VTK::Color::Impl",h.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(i.getBackfaceProperty()&&!e.drawingEdges&&(p=p.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),g?(p=p.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),h=h.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):h=h.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(p=p.concat(["uniform samplerBuffer texture1;"])),f=ie.substitute(f,"//VTK::Color::Impl",h).result),f=ie.substitute(f,"//VTK::Color::Dec",p).result,r.Vertex=c,r.Geometry=l,r.Fragment=f},t.replaceShaderLight=(r,s,i)=>{let c=r.Fragment;const l="",f=e.lastBoundBO.getReferenceByName("lastLightComplexity"),g=e.lastBoundBO.getReferenceByName("lastLightCount");let p=[];switch(f){case 0:c=ie.substitute(c,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:c=ie.substitute(c,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let h=0;h<g;++h)p=p.concat([`uniform vec3 lightColor${h};`,`uniform vec3 lightDirectionVC${h}; // normalized`,`uniform vec3 lightHalfAngleVC${h}; // normalized`]);c=ie.substitute(c,"//VTK::Light::Dec",p).result,p=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let h=0;h<g;++h)p=p.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${h}));`,`  diffuseL += ((df${l}) * lightColor${h});`,`  if (dot(normalVCVSOutput, lightDirectionVC${h}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${h},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${l} * lightColor${h});`,"    }"]);p=p.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),c=ie.substitute(c,"//VTK::Light::Impl",p,!1).result;break;case 3:for(let h=0;h<g;++h)p=p.concat([`uniform vec3 lightColor${h};`,`uniform vec3 lightDirectionVC${h}; // normalized`,`uniform vec3 lightHalfAngleVC${h}; // normalized`,`uniform vec3 lightPositionVC${h};`,`uniform vec3 lightAttenuation${h};`,`uniform float lightConeAngle${h};`,`uniform float lightExponent${h};`,`uniform int lightPositional${h};`]);c=ie.substitute(c,"//VTK::Light::Dec",p).result,p=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let h=0;h<g;++h)p=p.concat(["  attenuation = 1.0;",`  if (lightPositional${h} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${h};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${h};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${h}.x`,`       + lightAttenuation${h}.y * distanceVC`,`       + lightAttenuation${h}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${h} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${h});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${h})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${h});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${l}) * lightColor${h});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${h},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${l}) * lightColor${h});`,"    }"]);p=p.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),c=ie.substitute(c,"//VTK::Light::Impl",p,!1).result;break;default:ss("bad light complexity")}r.Fragment=c},t.replaceShaderNormal=(r,s,i)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let l=r.Vertex,f=r.Geometry,g=r.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(l=ie.substitute(l,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,l=ie.substitute(l,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,f=ie.substitute(f,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,f=ie.substitute(f,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,g=ie.substitute(g,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(g=ie.substitute(g,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES?(g=ie.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(g=ie.substitute(g,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,g=ie.substitute(g,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,g=ie.substitute(g,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),r.Vertex=l,r.Geometry=f,r.Fragment=g}},t.replaceShaderPositionVC=(r,s,i)=>{e.lastBoundBO.replaceShaderPositionVC(r,s,i);let c=r.Vertex,l=r.Geometry,f=r.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(c=ie.substitute(c,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,c=ie.substitute(c,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,c=ie.substitute(c,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,l=ie.substitute(l,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,l=ie.substitute(l,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,f=ie.substitute(f,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,f=ie.substitute(f,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(c=ie.substitute(c,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,c=ie.substitute(c,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),r.Vertex=c,r.Geometry=l,r.Fragment=f},t.replaceShaderTCoord=(r,s,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let c=r.Vertex,l=r.Geometry,f=r.Fragment;if(e.drawingEdges)return;c=ie.substitute(c,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const g=e.openGLActor.getActiveTextures();let p=2,h=2;if(g&&g.length>0&&(p=g[0].getComponents(),g[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(h=3)),e.renderable.getColorTextureMap()&&(p=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),h=2),h===2){if(c=ie.substitute(c,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,l=ie.substitute(l,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,l=ie.substitute(l,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,f=ie.substitute(f,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,g&&g.length>=1)switch(p){case 1:f=ie.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:f=ie.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:f=ie.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(c=ie.substitute(c,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,l=ie.substitute(l,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,l=ie.substitute(l,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,f=ie.substitute(f,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,p){case 1:f=ie.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:f=ie.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:f=ie.substitute(f,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}r.Vertex=c,r.Geometry=l,r.Fragment=f}},t.replaceShaderClip=(r,s,i)=>{let c=r.Vertex,l=r.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const f=e.renderable.getNumberOfClippingPlanes();c=ie.substitute(c,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${f}];`,`varying float clipDistancesVSOutput[${f}];`]).result,c=ie.substitute(c,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${f}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,l=ie.substitute(l,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${f}];`]).result,l=ie.substitute(l,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${f}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}r.Vertex=c,r.Fragment=l},t.getCoincidentParameters=(r,s)=>{let i={factor:0,offset:0};const c=s.getProperty();if(e.renderable.getResolveCoincidentTopology()==La.PolygonOffset||c.getEdgeVisibility()&&c.getRepresentation()===ui.SURFACE){const f=e.lastBoundBO.getPrimitiveType();f===Ct.Points||c.getRepresentation()===ui.POINTS?i=e.renderable.getCoincidentTopologyPointOffsetParameter():f===Ct.Lines||c.getRepresentation()===ui.WIREFRAME?i=e.renderable.getCoincidentTopologyLineOffsetParameters():(f===Ct.Tris||f===Ct.TriStrips)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(f===Ct.TrisEdges||f===Ct.TriStripsEdges)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),i.factor/=2,i.offset/=2)}const l=e._openGLRenderer.getSelector();return l&&l.getFieldAssociation()===Qh.FIELD_ASSOCIATION_POINTS&&(i.offset-=2),i},t.replaceShaderPicking=(r,s,i)=>{let c=r.Fragment,l=r.Vertex;if(c=ie.substitute(c,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===qt.ID_LOW24||e.lastSelectionState===qt.ID_HIGH24)&&(l=ie.substitute(l,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,l=ie.substitute(l,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,c=ie.substitute(c,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,c=ie.substitute(c,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case qt.ID_LOW24:c=ie.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case qt.ID_HIGH24:c=ie.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float((idx/16777216)%256)/255.0, 0.0, 0.0, 1.0);").result;break;default:c=ie.substitute(c,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,c=ie.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}r.Fragment=c,r.Vertex=l}},t.replaceShaderValues=(r,s,i)=>{if(t.replaceShaderColor(r,s,i),t.replaceShaderNormal(r,s,i),t.replaceShaderLight(r,s,i),t.replaceShaderTCoord(r,s,i),t.replaceShaderPicking(r,s,i),t.replaceShaderClip(r,s,i),t.replaceShaderCoincidentOffset(r,s,i),t.replaceShaderPositionVC(r,s,i),e.haveSeenDepthRequest){let c=r.Fragment;c=ie.substitute(c,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,c=ie.substitute(c,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,r.Fragment=c}},t.getNeedToRebuildShaders=(r,s,i)=>{let c=0,l=0;const f=r.getPrimitiveType(),g=e.currentInput;let p=!1;const h=g.getPointData().getNormals(),y=g.getCellData().getNormals(),v=i.getProperty().getInterpolation()===TS.FLAT,E=i.getProperty().getRepresentation(),x=r.getOpenGLMode(E,f);if((x===e.context.TRIANGLES||y&&!h||!v&&h||!v&&x===e.context.LINES)&&(p=!0),i.getProperty().getLighting()&&p){c=0;const M=s.getLightsByReference();for(let O=0;O<M.length;++O){const R=M[O];R.getSwitch()>0&&(l++,c===0&&(c=1)),c===1&&(l>1||R.getIntensity()!==1||!R.lightTypeIsHeadLight())&&(c=2),c<3&&R.getPositional()&&(c=3)}}let T=!1;const w=e.lastBoundBO.getReferenceByName("lastLightComplexity"),D=e.lastBoundBO.getReferenceByName("lastLightCount");return(w!==c||D!==l)&&(e.lastBoundBO.set({lastLightComplexity:c},!0),e.lastBoundBO.set({lastLightCount:l},!0),T=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(T=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||r.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||T?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(r,s,i)=>{const c=e.renderable.getViewSpecificProperties().ShadersCallbacks;c&&c.forEach(l=>{l.callback(l.userData,r,s,i)})},t.setMapperShaderParameters=(r,s,i)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isUniformUsed("VertexIDOffset")&&r.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){const f=e.lastBoundBO.getReferenceByName("lastLightComplexity");r.getProgram().isAttributeUsed("vertexMC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexMC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||ss("Error setting vertexMC in shader VAO.")),r.getProgram().isAttributeUsed("normalMC")&&r.getCABO().getNormalOffset()&&f>0?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"normalMC",r.getCABO().getNormalOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||ss("Error setting normalMC in shader VAO."):r.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((g,p)=>{r.getProgram().isAttributeUsed(`${g}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${g}MC`,r.getCABO().getCustomData()[p].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[p].components,!1)||ss(`Error setting ${g}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||ss("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||ss("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),r.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const f=e.renderable.getNumberOfClippingPlanes(),g=[],h=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,y=h?$t(e.tmpMat4,i.getMatrix()):i.getMatrix();h&&(Je(y,y),Zt(y,y,h),Je(y,y));for(let v=0;v<f;v++){const E=[];e.renderable.getClippingPlaneInDataCoords(y,v,E);for(let x=0;x<4;x++)g.push(E[x])}r.getProgram().setUniformi("numClipPlanes",f),r.getProgram().setUniform4fv("clipPlanes",g)}e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const c=e.openGLActor.getActiveTextures();if(c)for(let f=0;f<c.length;++f){const p=c[f].getTextureUnit(),h=`texture${p+1}`;r.getProgram().isUniformUsed(h)&&r.getProgram().setUniformi(h,p)}if(e.haveSeenDepthRequest&&r.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),r.getProgram().isUniformUsed("coffset")){const f=t.getCoincidentParameters(s,i);r.getProgram().setUniformf("coffset",f.offset),r.getProgram().isUniformUsed("cfactor")&&r.getProgram().setUniformf("cfactor",f.factor)}r.setMapperShaderParameters(s,i,e._openGLRenderer.getTiledSizeAndOrigin());const l=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",l?l.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",l?l.getCurrentPass()+1:0)},t.setLightingShaderParameters=(r,s,i)=>{const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(c<2)return;const l=r.getProgram();let f=0;const g=s.getLightsByReference();for(let y=0;y<g.length;++y){const v=g[y];if(v.getSwitch()>0){const x=v.getColorByReference(),T=v.getIntensity();e.lightColor[0]=x[0]*T,e.lightColor[1]=x[1]*T,e.lightColor[2]=x[2]*T;const w=v.getDirection(),D=s.getActiveCamera().getViewMatrix(),M=[...w];v.lightTypeIsSceneLight()&&(M[0]=D[0]*w[0]+D[1]*w[1]+D[2]*w[2],M[1]=D[4]*w[0]+D[5]*w[1]+D[6]*w[2],M[2]=D[8]*w[0]+D[9]*w[1]+D[10]*w[2],Sn(M)),e.lightDirection[0]=M[0],e.lightDirection[1]=M[1],e.lightDirection[2]=M[2],Sn(e.lightDirection),l.setUniform3fArray(`lightColor${f}`,e.lightColor),l.setUniform3fArray(`lightDirectionVC${f}`,e.lightDirection),f++}}if(c<3)return;const h=s.getActiveCamera().getViewMatrix();Je(h,h),f=0;for(let y=0;y<g.length;++y){const v=g[y];if(v.getSwitch()>0){const x=v.getTransformedPosition(),T=new Float64Array(3);$e(T,x,h),l.setUniform3fArray(`lightAttenuation${f}`,v.getAttenuationValuesByReference()),l.setUniformi(`lightPositional${f}`,v.getPositional()),l.setUniformf(`lightExponent${f}`,v.getExponent()),l.setUniformf(`lightConeAngle${f}`,v.getConeAngle()),l.setUniform3fArray(`lightPositionVC${f}`,[T[0],T[1],T[2]]),f++}}};function n(r,s,i){return s.identity(i),r.reduce((c,l,f)=>f===0?l?s.copy(c,l):s.identity(c):l?s.multiply(c,c,l):c,i)}t.setCameraShaderParameters=(r,s,i)=>{const c=r.getProgram(),l=e.openGLCamera.getKeyMatrices(s),f=s.getActiveCamera(),g=e.openGLCamera.getKeyMatrixTime().getMTime(),p=c.getLastCameraMTime(),y=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,v=i.getIsIdentity(),E=v?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===d8.DISPLAY){const x=e._openGLRenderer.getTiledSizeAndOrigin();Ve(e.tmpMat4),e.tmpMat4[0]=2/x.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/x.vsize,e.tmpMat4[13]=-1,Zt(e.tmpMat4,e.tmpMat4,y),c.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else c.setUniformMatrix("MCPCMatrix",n([l.wcpc,E.mcwc,y],Nd,e.tmpMat4));c.isUniformUsed("MCVCMatrix")&&c.setUniformMatrix("MCVCMatrix",n([l.wcvc,E.mcwc,y],Nd,e.tmpMat4)),c.isUniformUsed("normalMatrix")&&c.setUniformMatrix3x3("normalMatrix",n([l.normalMatrix,E.normalMatrix],kk,e.tmpMat3)),p!==g&&(c.isUniformUsed("cameraParallel")&&c.setUniformi("cameraParallel",f.getParallelProjection()),c.setLastCameraMTime(g)),v||c.setLastCameraMTime(0)},t.setPropertyShaderParameters=(r,s,i)=>{const c=r.getProgram();let l=i.getProperty(),f=l.getOpacity(),g=e.drawingEdges?l.getEdgeColorByReference():l.getAmbientColorByReference(),p=e.drawingEdges?l.getEdgeColorByReference():l.getDiffuseColorByReference(),h=e.drawingEdges?1:l.getAmbient(),y=e.drawingEdges?0:l.getDiffuse(),v=e.drawingEdges?0:l.getSpecular();const E=l.getSpecularPower();c.setUniformf("opacityUniform",f),c.setUniform3fArray("ambientColorUniform",g),c.setUniform3fArray("diffuseColorUniform",p),c.setUniformf("ambient",h),c.setUniformf("diffuse",y);const x=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(x<1)return;let T=l.getSpecularColorByReference();if(c.setUniform3fArray("specularColorUniform",T),c.setUniformf("specularPowerUniform",E),c.setUniformf("specular",v),c.isUniformUsed("ambientIntensityBF")){if(l=i.getBackfaceProperty(),f=l.getOpacity(),g=l.getAmbientColor(),h=l.getAmbient(),p=l.getDiffuseColor(),y=l.getDiffuse(),T=l.getSpecularColor(),v=l.getSpecular(),c.setUniformf("ambientIntensityBF",h),c.setUniformf("diffuseIntensityBF",y),c.setUniformf("opacityUniformBF",f),c.setUniform3fArray("ambientColorUniformBF",g),c.setUniform3fArray("diffuseColorUniformBF",p),x<1)return;c.setUniformf("specularIntensityBF",v),c.setUniform3fArray("specularColorUniformBF",T),c.setUniformf("specularPowerUniformBF",E)}},t.updateMaximumPointCellIds=(r,s)=>{const i=e._openGLRenderer.getSelector();if(!i)return;if(e.selectionWebGLIdsToVTKIds?.points?.length){const l=e.selectionWebGLIdsToVTKIds.points.length;i.setMaximumPointId(l-1)}if(e.selectionWebGLIdsToVTKIds?.cells?.length){const l=e.selectionWebGLIdsToVTKIds.cells.length;i.setMaximumCellId(l-1)}i.getFieldAssociation()===Qh.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(r,s)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const i=p8(e._openGLRenderer);e.lastSelectionState!==i&&(e.selectionStateChanged.modified(),e.lastSelectionState=i),e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().renderProp(s),t.updateBufferObjects(r,s),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(r,s)=>{const i=s.getProperty().getRepresentation(),c=s.getProperty().getEdgeVisibility()&&i===ui.SURFACE,l=e._openGLRenderer.getSelector(),f=l&&l.getFieldAssociation()===Qh.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===qt.ID_LOW24||e.lastSelectionState===qt.ID_HIGH24);for(let g=Ct.Start;g<Ct.End;g++)e.primitives[g].setPointPicking(f),e.primitives[g].getCABO().getElementCount()&&(e.drawingEdges=c&&(g===Ct.TrisEdges||g===Ct.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[g],e.primitiveIDOffset+=e.primitives[g].drawArrays(r,s,i,t),e.vertexIDOffset+=e.primitives[g].getCABO().getElementCount()))},t.renderPieceFinish=(r,s)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(r,s)=>{if(t.invokeEvent(g8),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(h8),!e.currentInput){ss("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context,c=s.getProperty().getBackfaceCulling(),l=s.getProperty().getFrontfaceCulling();!c&&!l?e._openGLRenderWindow.disableCullFace():l?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(r,s),t.renderPieceDraw(r,s),t.renderPieceFinish(r,s)},t.updateBufferObjects=(r,s)=>{t.getNeedToRebuildBufferObjects(r,s)&&t.buildBufferObjects(r,s),t.updateMaximumPointCellIds()},t.getNeedToRebuildBufferObjects=(r,s)=>{const i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<s.getMTime()||i<e.currentInput.getMTime()},t.buildBufferObjects=(r,s)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const c=e.renderable.getColorMapColors();e.haveCellScalars=!1;const l=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(l===mu.USE_CELL_DATA||l===mu.USE_CELL_FIELD_DATA||l===mu.USE_FIELD_DATA||!i.getPointData().getScalars())&&l!==mu.USE_POINT_FIELD_DATA&&c&&(e.haveCellScalars=!0);let f=s.getProperty().getInterpolation()!==TS.FLAT?i.getPointData().getNormals():null;f===null&&i.getCellData().getNormals()&&(e.haveCellNormals=!0,f=i.getCellData().getNormals());const g=s.getProperty().getRepresentation();let p=i.getPointData().getTCoords();e.openGLActor.getActiveTextures()||(p=null);let h=!1;if(e.renderable.getColorCoordinates()){p=e.renderable.getColorCoordinates(),h=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Br.newInstance({resizable:!0}));const v=e.internalColorTexture;v.setMinificationFilter(SS.NEAREST),v.setMagnificationFilter(SS.NEAREST),v.setWrapS(CS.CLAMP_TO_EDGE),v.setWrapT(CS.CLAMP_TO_EDGE),v.setOpenGLRenderWindow(e._openGLRenderWindow);const E=e.renderable.getColorTextureMap(),x=E.getExtent(),T=E.getPointData().getScalars();v.create2DFromRaw({width:x[1]-x[0]+1,height:x[3]-x[2]+1,numComps:T.getNumberOfComponents(),dataType:T.getDataType(),data:T.getData()}),v.activate(),v.sendParameters(),v.deactivate()}const y=`${i.getMTime()}A${g}B${i.getMTime()}C${f?f.getMTime():1}D${c?c.getMTime():1}E${s.getProperty().getEdgeVisibility()}F${p?p.getMTime():1}`;if(e.VBOBuildString!==y){const E={points:i.getPoints(),normals:f,tcoords:p,colors:c,cellOffset:0,vertexOffset:0,useTCoordsPerCell:h,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(w=>i.getPointData().getArrayByName(w))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const x=[{inRep:"verts",cells:i.getVerts()},{inRep:"lines",cells:i.getLines()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()}],T=s.getProperty().getEdgeVisibility()&&g===ui.SURFACE;for(let w=Ct.Start;w<Ct.End;w++)w!==Ct.TrisEdges&&w!==Ct.TriStripsEdges?(E.cellOffset+=e.primitives[w].getCABO().createVBO(x[w].cells,x[w].inRep,g,E,e.selectionWebGLIdsToVTKIds),E.vertexOffset+=e.primitives[w].getCABO().getElementCount()):T?e.primitives[w].getCABO().createVBO(x[w].cells,x[w].inRep,ui.WIREFRAME,{...E,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[w].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),e.VBOBuildString=y}e.VBOBuildTime.modified()},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(s=>{r+=s.getAllocatedGPUMemoryInBytes()}),r}}const x8={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:qt.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function v8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x8,n),ft.extend(t,e,n),yf.implementReplaceShaderCoincidentOffset(t,e,n),yf.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=Ct,e.tmpMat3=Na(new Float64Array(9)),e.tmpMat4=Ve(new Float64Array(16));for(let r=Ct.Start;r<Ct.End;r++)e.primitives[r]=Bi.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Gt(t,e,["context"]),e.VBOBuildTime={},Wt(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},Wt(e.selectionStateChanged,{mtime:0}),y8(t,e)}const m8=et(v8,"vtkOpenGLPolyDataMapper");$n("vtkMapper",m8);var T8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,S8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const Pb={BACKGROUND:0,FOREGROUND:1};var Jb={DisplayLocation:Pb};const{primTypes:qn}=Bi,{Filter:ES,Wrap:wS}=Br,{vtkErrorMacro:Uo}=fr,C8={type:"StartEvent"},E8={type:"EndEvent"};function w8(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=r=>{r&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera(),e.openGLCamera))},t.overlayPass=r=>{r&&t.render()},t.getShaderTemplate=(r,s,i)=>{r.Vertex=S8,r.Fragment=T8,r.Geometry=""},t.render=()=>{const r=e._openGLRenderWindow.getContext();if(e.context!==r){e.context=r;for(let c=qn.Start;c<qn.End;c++)e.primitives[c].setOpenGLRenderWindow(e._openGLRenderWindow)}const s=e.openGLActor2D.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,s)},t.renderPiece=(r,s)=>{if(t.invokeEvent(C8),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(E8),!e.currentInput){Uo("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context;e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK),t.renderPieceStart(r,s),t.renderPieceDraw(r,s),t.renderPieceFinish(r,s)},t.renderPieceStart=(r,s)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(s)}e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),t.updateBufferObjects(r,s),e.lastBoundBO=null},t.getNeedToRebuildShaders=(r,s,i)=>r.getShaderSourceTime().getMTime()<e.renderable.getMTime()||r.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(r,s)=>{t.getNeedToRebuildBufferObjects(r,s)&&t.buildBufferObjects(r,s)},t.getNeedToRebuildBufferObjects=(r,s)=>{const i=e.VBOBuildTime.getMTime();return!!(i<t.getMTime()||i<e._openGLRenderWindow.getMTime()||i<e.renderable.getMTime()||i<s.getMTime()||i<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&i<r.getMTime())},t.buildBufferObjects=(r,s)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,s.getProperty().getOpacity());const c=e.renderable.getColorMapColors(),l=s.getProperty().getRepresentation();let f=i.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(f=null);let g=!1;if(e.renderable.getColorCoordinates()){f=e.renderable.getColorCoordinates(),g=e.renderable.getAreScalarsMappedFromCells(),e.internalColorTexture||(e.internalColorTexture=Br.newInstance({resizable:!0}));const E=e.internalColorTexture;E.setMinificationFilter(ES.NEAREST),E.setMagnificationFilter(ES.NEAREST),E.setWrapS(wS.CLAMP_TO_EDGE),E.setWrapT(wS.CLAMP_TO_EDGE),E.setOpenGLRenderWindow(e._openGLRenderWindow);const x=e.renderable.getColorTextureMap(),T=x.getExtent(),w=x.getPointData().getScalars();E.create2DFromRaw({width:T[1]-T[0]+1,height:T[3]-T[2]+1,numComps:w.getNumberOfComponents(),dataType:w.getDataType(),data:w.getData()}),E.activate(),E.sendParameters(),E.deactivate()}const p=e.renderable.getTransformCoordinate(),y=r.getRenderWindow().getViews()[0].getViewportSize(r),v=`${i.getMTime()}A${l}B${i.getMTime()}C${c?c.getMTime():1}D${f?f.getMTime():1}E${p?r.getMTime():1}F${y}`;if(e.VBOBuildString!==v){let E=i.getPoints();if(p){const T=mc.newInstance(),w=E.getNumberOfPoints();T.setNumberOfPoints(w);const D=[];for(let M=0;M<w;++M){E.getPoint(M,D),p.setValue(D);const O=p.getComputedDoubleViewportValue(r);T.setPoint(M,O[0],O[1],0)}E=T}const x={points:E,tcoords:f,colors:c,cellOffset:0,useTCoordsPerCell:g,haveCellScalars:e.renderable.getAreScalarsMappedFromCells(),customAttributes:e.renderable.getCustomShaderAttributes().map(T=>i.getPointData().getArrayByName(T))};x.cellOffset+=e.primitives[qn.Points].getCABO().createVBO(i.getVerts(),"verts",l,x),x.cellOffset+=e.primitives[qn.Lines].getCABO().createVBO(i.getLines(),"lines",l,x),x.cellOffset+=e.primitives[qn.Tris].getCABO().createVBO(i.getPolys(),"polys",l,x),x.cellOffset+=e.primitives[qn.TriStrips].getCABO().createVBO(i.getStrips(),"strips",l,x),e.VBOBuildTime.modified(),e.VBOBuildString=v}},t.renderPieceDraw=(r,s)=>{const i=s.getProperty().getRepresentation();e.context.depthMask(!0);for(let l=qn.Start;l<qn.End;l++)e.primitives[l].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[l],e.primitiveIDOffset+=e.primitives[l].drawArrays(r,s,i,t))},t.renderPieceFinish=(r,s)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.replaceShaderValues=(r,s,i)=>{t.replaceShaderColor(r,s,i),t.replaceShaderTCoord(r,s,i),t.replaceShaderPicking(r,s,i),t.replaceShaderPositionVC(r,s,i)},t.replaceShaderColor=(r,s,i)=>{let c=r.Vertex,l=r.Geometry,f=r.Fragment,g=["uniform vec3 diffuseColorUniform;","uniform float opacityUniform;"],p=["vec3 diffuseColor = diffuseColorUniform;","float opacity = opacityUniform;"];e.lastBoundBO.getCABO().getColorComponents()!==0?(g=g.concat(["varying vec4 vertexColorVSOutput;"]),c=ie.substitute(c,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,c=ie.substitute(c,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,l=ie.substitute(l,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,l=ie.substitute(l,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,f=ie.substitute(f,"//VTK::Color::Impl",p.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result):e.renderable.getAreScalarsMappedFromCells()&&(p=p.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  opacity = opacity*texColor.a;"])),p=p.concat(["gl_FragData[0] = vec4(diffuseColor, opacity);"]),f=ie.substitute(f,"//VTK::Color::Dec",g).result,f=ie.substitute(f,"//VTK::Color::Impl",p).result,r.Vertex=c,r.Geometry=l,r.Fragment=f},t.replaceShaderTCoord=(r,s,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let c=r.Vertex,l=r.Geometry,f=r.Fragment;const g=e.lastBoundBO.getCABO().getTCoordComponents();g===1?(c=ie.substitute(c,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,c=ie.substitute(c,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,l=ie.substitute(l,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,l=ie.substitute(l,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,f=ie.substitute(f,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,f=ie.substitute(f,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):g===2&&(c=ie.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,c=ie.substitute(c,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,l=ie.substitute(l,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,l=ie.substitute(l,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,f=ie.substitute(f,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,f=ie.substitute(f,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.renderable.getAreScalarsMappedFromCells()&&(l=ie.substitute(l,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),r.Vertex=c,r.Geometry=l,r.Fragment=f}},t.replaceShaderPicking=(r,s,i)=>{let c=r.Fragment;c=ie.substitute(c,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,c=ie.substitute(c,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,r.Fragment=c},t.replaceShaderPositionVC=(r,s,i)=>{e.lastBoundBO.replaceShaderPositionVC(r,s,i)},t.invokeShaderCallbacks=(r,s,i)=>{const c=e.renderable.getViewSpecificProperties().ShadersCallbacks;c&&c.forEach(l=>{l.callback(l.userData,r,s,i)})},t.setMapperShaderParameters=(r,s,i)=>{if(r.getProgram().isUniformUsed("PrimitiveIDOffset")&&r.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),r.getProgram().isAttributeUsed("vertexWC")&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"vertexWC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,!1)||Uo("Error setting vertexWC in shader VAO.")),r.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>r.getAttributeUpdateTime().getMTime()||r.getShaderSourceTime().getMTime()>r.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((f,g)=>{r.getProgram().isAttributeUsed(`${f}MC`)&&(r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),`${f}MC`,r.getCABO().getCustomData()[g].offset,r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getCustomData()[g].components,!1)||Uo(`Error setting ${f}MC in shader VAO.`))}),r.getProgram().isAttributeUsed("tcoordMC")&&r.getCABO().getTCoordOffset()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO(),"tcoordMC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,r.getCABO().getTCoordComponents(),!1)||Uo("Error setting tcoordMC in shader VAO."):r.getVAO().removeAttributeArray("tcoordMC"),r.getProgram().isAttributeUsed("scalarColor")&&r.getCABO().getColorComponents()?r.getVAO().addAttributeArray(r.getProgram(),r.getCABO().getColorBO(),"scalarColor",r.getCABO().getColorOffset(),r.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||Uo("Error setting scalarColor in shader VAO."):r.getVAO().removeAttributeArray("scalarColor"),e.internalColorTexture&&r.getProgram().isUniformUsed("texture1")&&e.internalColorTexture.getTextureUnit()>-1&&r.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const c=e.openGLActor2D.getActiveTextures();if(c)for(let f=0;f<c.length;++f){const p=c[f].getTextureUnit(),h=`texture${p+1}`;r.getProgram().isUniformUsed(h)&&r.getProgram().setUniformi(h,p)}r.setMapperShaderParameters(s,i,e._openGLRenderer.getTiledSizeAndOrigin());const l=e._openGLRenderer.getSelector();r.getProgram().setUniform3fArray("mapperIndex",l?l.getPropColorValue():[0,0,0]),r.getProgram().setUniformi("picking",l?l.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(r,s,i)=>{const c=e.renderable.getColorMapColors();if(!c||c.getNumberOfComponents()===0){const l=r.getProgram(),f=i.getProperty(),g=f.getOpacity();l.setUniformf("opacityUniform",g);const p=f.getColor();l.setUniform3fArray("diffuseColorUniform",p)}},t.setLightingShaderParameters=(r,s,i)=>{};function n(r,s,i){return s.identity(i),r.reduce((c,l,f)=>f===0?l?s.copy(c,l):s.identity(c):l?s.multiply(c,c,l):c,i)}t.setCameraShaderParameters=(r,s,i)=>{const c=r.getProgram(),f=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,p=s.getRenderWindow().getViews()[0].getViewportSize(s),h=s.getViewport(),y=i.getActualPositionCoordinate().getComputedDoubleViewportValue(s),v=[0,0,1,1],E=[0,0,1,1];if(E[0]=h[0]>=v[0]?h[0]:v[0],E[1]=h[1]>=v[1]?h[1]:v[1],E[2]=h[2]<=v[2]?h[2]:v[2],E[3]=h[3]<=v[3]?h[3]:v[3],E[0]>=E[2]||E[1]>=E[3])return;p[0]=Ho(p[0]*(E[2]-E[0])/(h[2]-h[0])),p[1]=Ho(p[1]*(E[3]-E[1])/(h[3]-h[1]));const x=e._openGLRenderer.getParent().getSize(),T=Ho(y[0]-(E[0]-h[0])*x[0]),w=Ho(y[1]-(E[1]-h[1])*x[1]),D=-T;let M=-T+p[0];const O=-w;let R=-w+p[1];D===M&&(M=D+1),O===R&&(R=O+1);const b=Ve(new Float64Array(16));b[0]=2/(M-D),b[5]=2/(R-O),b[3]=-1*(M+D)/(M-D),b[7]=-1*(R+O)/(R-O),b[10]=0,b[11]=i.getProperty().getDisplayLocation()===Pb.FOREGROUND?-1:1,b[15]=1,Je(b,b),c.setUniformMatrix("WCVCMatrix",n([b,f],Nd,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let r=0;return e.primitives.forEach(s=>{r+=s.getAllocatedGPUMemoryInBytes()}),r}}const M8={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function b8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M8,n),ft.extend(t,e,n),yf.implementReplaceShaderCoincidentOffset(t,e,n),yf.implementBuildShadersWithReplacements(t,e,n),e.primitives=[],e.primTypes=qn,e.tmpMat4=Ve(new Float64Array(16));for(let r=qn.Start;r<qn.End;r++)e.primitives[r]=Bi.newInstance(),e.primitives[r].setPrimitiveType(r),e.primitives[r].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);Gt(t,e,["context"]),e.VBOBuildTime={},Wt(e.VBOBuildTime,{mtime:0}),w8(t,e)}const O8=et(b8,"vtkOpenGLPolyDataMapper2D");$n("vtkMapper2D",O8);const D8={HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"};var Ib={Orientation:D8};const{VectorMode:R8}=ob,{Orientation:xf}=Ib;function Ph(t,e,n){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor;const r=e.fontSize??n;t.font=`${e.fontStyle} ${r}px ${e.fontFamily}`}function eO(t,e){return n=>{const r=n.getLastSize(),s=(r[0]/700)**.8,i=(r[1]/700)**.8,c=Math.min(s,i),l=n.getAxisTextStyle(),f=n.getTickTextStyle();Object.assign(l,e.axisTextStyle),Object.assign(f,e.tickTextStyle),l.fontSize===void 0&&(l.fontSize=Math.max(24*c,12)),f.fontSize===void 0&&(n.getLastAspectRatio()>1?f.fontSize=Math.max(20*c,10):f.fontSize=Math.max(16*c,10));const g=n.updateTextureAtlas();n.setTopTitle(!1);const p=n.getBoxSizeByReference();let h=!1;if(e.orientation===xf.VERTICAL?h=!0:e.orientation===xf.HORIZONTAL?h=!1:h=n.getLastAspectRatio()>1,h)n.setTickLabelPixelOffset(.3*f.fontSize),g.titleWidth<=g.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize?(n.setTopTitle(!0),n.setAxisTitlePixelOffset(.2*f.fontSize),p[0]=2*(g.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize)/r[0],n.setBoxPosition([.98-p[0],-.92])):(n.setAxisTitlePixelOffset(.2*f.fontSize),p[0]=2*(g.titleHeight+n.getAxisTitlePixelOffset()+g.tickWidth+n.getTickLabelPixelOffset()+.8*f.fontSize)/r[0],n.setBoxPosition([.99-p[0],-.92])),p[1]=Math.max(1.2,Math.min(1.84/i,1.84));else{n.setAxisTitlePixelOffset(1.2*f.fontSize),n.setTickLabelPixelOffset(.1*f.fontSize);const y=2*(.8*f.fontSize+g.titleHeight+n.getAxisTitlePixelOffset())/r[1],v=2*g.tickWidth/r[0];p[0]=Math.min(1.9,Math.max(1.4,1.4*v*(n.getTicks().length+3))),p[1]=y,n.setBoxPosition([-.5*p[0],-.97])}n.recomputeBarSegments(g)}}function tO(t,e){return n=>{const r=n.getLastTickBounds(),s=qp().domain([r[0],r[1]]),i=s.ticks(5),c=s.tickFormat(5);n.setTicks(i),n.setTickStrings(i.map(c))}}function N8(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=s=>{e.renderable!==s&&(e.renderable=s,e.barActor.setProperty(s.getProperty()),e.barActor.setParentProp(s),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(s.getProperty()),e.tmActor.setParentProp(s),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=s.generateTicks,e.axisTextStyle={...s.getAxisTextStyle()},e.tickTextStyle={...s.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(s,i,c)=>{(e.lastSize[0]!==s[0]||e.lastSize[1]!==s[1])&&(e.lastSize[0]=s[0],e.lastSize[1]=s[1],e.lastAspectRatio=s[0]/s[1],e.forceUpdate=!0);const l=e.renderable.getScalarsToColors();if(!(!l||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(l),e.camera=i,e.renderWindow=c,e.forceUpdate||Math.max(l.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const f=l.getMappingRange();if(e.lastTickBounds=[...f],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const g=t.updateTextureAtlas();t.recomputeBarSegments(g)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const s={},i=new Map;let c=0,l=1;Ph(e.tmContext,e.axisTextStyle,18);let f=e.tmContext.measureText(e.renderable.getAxisLabel()),g={height:f.actualBoundingBoxAscent+2,startingHeight:l,width:f.width+2,textStyle:e.axisTextStyle};i.set(e.renderable.getAxisLabel(),g),l+=g.height,c=g.width,s.titleWidth=g.width,s.titleHeight=g.height,s.tickWidth=0,s.tickHeight=0,Ph(e.tmContext,e.tickTextStyle,14);const p=[...t.getTickStrings(),"NaN","Below","Above"];for(let h=0;h<p.length;h++)i.has(p[h])||(f=e.tmContext.measureText(p[h]),g={height:f.actualBoundingBoxAscent+2,startingHeight:l,width:f.width+2,textStyle:e.tickTextStyle},i.set(p[h],g),l+=g.height,c<g.width&&(c=g.width),s.tickWidth<g.width&&(s.tickWidth=g.width),s.tickHeight<g.height&&(s.tickHeight=g.height));return c=Fn(c),l=Fn(l),i.forEach(h=>{h.tcoords=[0,(l-h.startingHeight-h.height)/l,h.width/c,(l-h.startingHeight-h.height)/l,h.width/c,(l-h.startingHeight)/l,0,(l-h.startingHeight)/l]}),e.tmCanvas.width=c,e.tmCanvas.height=l,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,c,l),i.forEach((h,y)=>{const v=h.textStyle===e.axisTextStyle?18:14;Ph(e.tmContext,h.textStyle,v),e.tmContext.fillText(y,1,h.startingHeight+h.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=i,s},t.computeBarSize=s=>{e.vertical=e.boxSize[1]>e.boxSize[0];const i=2*s.tickHeight/e.lastSize[1],c=[1,1];if(e.vertical){const l=2*(s.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const f=2*(s.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-l,e.barSize[1]=e.boxSize[1]-f}else{const f=2*(s.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-f-l,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+l,e.barPosition[1]=e.boxPosition[1],c[1]=i}else{const l=(2*s.tickWidth-8)/e.lastSize[0],f=2*(s.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-f,e.barPosition[1]=e.boxPosition[1],c[0]=l}return c},t.recomputeBarSegments=s=>{const i=t.computeBarSize(s);e.barSegments=[];const c=[0,0],l=e.vertical?1:0,f=e.vertical?.01:.02;function g(y,v){e.barSegments.push({corners:[[...c],[c[0]+i[0],c[1]],[c[0]+i[0],c[1]+i[1]],[c[0],c[1]+i[1]]],scalars:v,title:y}),c[l]+=i[l]+f}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&g("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&e.renderable.getScalarsToColors().getUseBelowRangeColor?.()&&g("Below",[-.1,-.1,-.1,-.1]);const p=e.renderable.getScalarsToColors().getUseAboveRangeColor?.();c[l]+=f;const h=i[l];i[l]=p?1-2*f-i[l]-c[l]:1-f-c[l],g("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&p&&(i[l]=h,c[l]+=f,g("Above",[1.1,1.1,1.1,1.1]))};const n=new Float64Array(3);t.createPolyDataForOneLabel=(s,i,c,l,f,g)=>{const p=e._tmAtlas.get(s);if(!p)return;let h=g.ptIdx,y=g.cellIdx;n[0]=(.5*i[0]+.5)*e.lastSize[0],n[1]=(.5*i[1]+.5)*e.lastSize[1],n[2]=i[2],n[0]+=f[0],n[1]+=f[1];const v=[],E=l==="vertical"?[1,0]:[0,1];l==="vertical"?(v[0]=p.width,v[1]=-p.height,c[0]==="middle"?n[1]-=p.width/2:c[0]==="right"&&(n[1]-=p.width),c[1]==="middle"?n[0]+=p.height/2:c[1]==="top"&&(n[0]+=p.height)):(v[0]=p.width,v[1]=p.height,c[0]==="middle"?n[0]-=p.width/2:c[0]==="right"&&(n[0]-=p.width),c[1]==="middle"?n[1]-=p.height/2:c[1]==="top"&&(n[1]-=p.height)),g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=p.tcoords[0],g.tcoords[h*2+1]=p.tcoords[1],h++,n[E[0]]+=v[0],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=p.tcoords[2],g.tcoords[h*2+1]=p.tcoords[3],h++,n[E[1]]+=v[1],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=p.tcoords[4],g.tcoords[h*2+1]=p.tcoords[5],h++,n[E[0]]-=v[0],g.points[h*3]=n[0],g.points[h*3+1]=n[1],g.points[h*3+2]=n[2],g.tcoords[h*2]=p.tcoords[6],g.tcoords[h*2+1]=p.tcoords[7],h++,g.polys[y*4]=3,g.polys[y*4+1]=h-4,g.polys[y*4+2]=h-3,g.polys[y*4+3]=h-2,y++,g.polys[y*4]=3,g.polys[y*4+1]=h-4,g.polys[y*4+2]=h-2,g.polys[y*4+3]=h-1,g.ptIdx+=4,g.cellIdx+=2};const r=new Float64Array(3);t.updatePolyDataForLabels=()=>{const s=t.getTickStrings().length+e.barSegments.length,i=s*4,c=s*2,l=new Float64Array(i*3),f=new Uint16Array(c*4),g=new Float32Array(i*2),p={ptIdx:0,cellIdx:0,polys:f,points:l,tcoords:g},h=e.vertical?0:1,y=e.vertical?1:0;r[2]=-.99;const v=e.vertical?["right","middle"]:["middle","bottom"];let E=[0,1];const x=[0,0];e.vertical?(x[0]=-e.tickLabelPixelOffset,e.topTitle?(r[0]=e.boxPosition[0]+.5*e.boxSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],p)):(r[0]=e.barPosition[0]+e.barSize[0],r[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],p)),E=[-1,0]):(x[1]=e.tickLabelPixelOffset,r[0]=e.barPosition[0]+.5*e.barSize[0],r[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),r,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],p)),r[h]=e.barPosition[h]+(.5*E[h]+.5)*e.barSize[h],r[y]=e.barPosition[y]+e.barSize[y]*.5;let T=null;for(let L=0;L<e.barSegments.length;L++){const k=e.barSegments[L];k.title==="ticks"?T=k:(r[y]=e.barPosition[y]+.5*e.barSize[y]*(k.corners[2][y]+k.corners[0][y]),t.createPolyDataForOneLabel(k.title,r,v,"horizontal",x,p))}const w=e.barPosition[y]+e.barSize[y]*T.corners[0][y],D=e.barSize[y]*(T.corners[2][y]-T.corners[0][y]),M=t.getTicks(),O=t.getTickStrings(),R=t.getTickPositions();for(let L=0;L<M.length;L++){const k=R?R[L]:(M[L]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);r[y]=w+D*k,t.createPolyDataForOneLabel(O[L],r,v,"horizontal",x,p)}const b=rt.newInstance({numberOfComponents:2,values:g,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(b),e.tmPolyData.getPoints().setData(l,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(f,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{const s=e.renderable.getScalarsToColors();let i=0;e.renderable.getDrawNanAnnotation()&&s.getNanColor()&&(i+=1),e.renderable.getDrawBelowRangeSwatch()&&s.getUseBelowRangeColor?.()&&(i+=1),e.renderable.getDrawAboveRangeSwatch()&&s.getUseAboveRangeColor?.()&&(i+=1);const c=4*(1+i),l=c;let f=1;s.getVectorMode()===R8.COMPONENT&&(f=s.getVectorComponent()+1);const g=new Float64Array(c*3),p=new Uint16Array(l*5),h=new Float32Array(c*f);let y=0,v=0;for(let x=0;x<e.barSegments.length;x++){const T=e.barSegments[x];for(let w=0;w<4;w++){r[0]=e.barPosition[0]+T.corners[w][0]*e.barSize[0],r[1]=e.barPosition[1]+T.corners[w][1]*e.barSize[1],g[y*3]=(.5*r[0]+.5)*e.lastSize[0],g[y*3+1]=(.5*r[1]+.5)*e.lastSize[1],g[y*3+2]=r[2];for(let D=0;D<f;D++)h[y*f+D]=e.lastTickBounds[0]+T.scalars[w]*(e.lastTickBounds[1]-e.lastTickBounds[0]);y++}p[v*5]=4,p[v*5+1]=y-4,p[v*5+2]=y-3,p[v*5+3]=y-2,p[v*5+4]=y-1,v++}const E=rt.newInstance({numberOfComponents:f,values:h,name:"Scalars"});e.polyData.getPointData().setScalars(E),e.polyData.getPoints().setData(g,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(p,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const L8=V.newInstance(function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},n),V.obj(t,e),V.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings","tickPositions"]),V.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),V.getArray(t,e,["boxPosition","boxSize"]),V.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},V.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=Cs.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=Oi.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=Ss.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=Oi.newInstance(),e.tmMapper=Cs.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=Sc.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=Ss.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],N8(t,e)},"vtkScalarBarActorHelper");function V8(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.setOrientationToHorizontal=()=>t.setOrientation(xf.HORIZONTAL),t.setOrientationToVertical=()=>t.setOrientation(xf.VERTICAL),t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(eO(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(tO())}}function _8(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:void 0,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,orientation:null,...t}}function nO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_8(n)),e.autoLayout||(e.autoLayout=eO(t,e)),e.generateTicks||(e.generateTicks=tO()),Ss.extend(t,e,n),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),V.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch","orientation"]),V.get(t,e,["axisTextStyle","tickTextStyle"]),V.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),V.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),V8(t,e)}const k8=V.newInstance(nO,"vtkScalarBarActor");var rO={newInstance:k8,extend:nO,newScalarBarActorHelper:L8,...Ib};function B8(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=n=>{n&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const s=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],s,e._openGLRenderWindow.getRenderable())}}}const U8={};function F8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,U8,n),ft.extend(t,e,n),e.scalarBarActorHelper=rO.newScalarBarActorHelper(),B8(t,e)}const j8=et(F8,"vtkOpenGLScalarBarActor");$n("vtkScalarBarActor",j8);const{vtkErrorMacro:MS}=fr;function G8(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=n=>{if(n){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const r=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera(),e.openGLCamera)}},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},t.opaquePass=(n,r)=>{if(n&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const s=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",s);const i=e._openGLRenderer.getRenderable(),c=e.openGLCamera.getKeyMatrices(i),l=new Float64Array(16);if(An(l,c.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",l),e.lastFormat==="box"){const f=i.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",f[0],f[1],f[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const r=new Float32Array(12);for(let l=0;l<4;l++)r[l*3]=l%2*2-1,r[l*3+1]=l>1?1:-1,r[l*3+2]=1;const s=rt.newInstance({numberOfComponents:3,values:r});s.setName("points");const i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;const c=rt.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(c,"polys",Gn.SURFACE,{points:s,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||MS("Error setting vertexMC in shader VAO."));const n=e.renderable.getTextures();n.length||MS("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==n[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(n[0]))}}const z8={context:null};function A8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,z8,n),ft.extend(t,e,n),e.openGLTexture=Br.newInstance(),e.tris=Bi.newInstance(),e.keyMatrixTime={},Wt(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:Na(new Float64Array(9)),mcwc:Ve(new Float64Array(16))},Gt(t,e,["context"]),Cn(t,e,["activeTextures"]),G8(t,e)}const $8=et(A8);$n("vtkSkybox",$8);const{vtkDebugMacro:H8}=fr;function W8(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getLastAncestorOfType("vtkOpenGLRenderWindow");const s=e._openGLRenderer.getAspectRatio(),i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,c=e._openGLRenderer.getTiledSizeAndOrigin();let l=null;if(e.renderable.getUseZValues()){const f=r.getZBufferTexture(),g=Math.floor(f.getWidth()),p=Math.floor(f.getHeight()),h=e._openGLRenderWindow.getContext();f.bind();const y=r.getFramebuffer();y?y.saveCurrentBindingsAndBuffers():H8("No framebuffer to save/restore");const v=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,v),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,f.getHandle(),0),h.checkFramebufferStatus(h.FRAMEBUFFER)===h.FRAMEBUFFER_COMPLETE&&(l=new Uint8Array(g*p*4),h.viewport(0,0,g,p),h.readPixels(0,0,g,p,h.RGBA,h.UNSIGNED_BYTE,l)),y&&y.restorePreviousBindingsAndBuffers(),h.deleteFramebuffer(v)}e.renderable.invokeCallback(e.renderable.getInputData(),i,s,c,l)},t.queryPass=(n,r)=>{n&&e.renderable.getUseZValues()&&r.requestDepth()}}const K8={};function X8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K8,n),ft.extend(t,e,n),W8(t,e)}const Y8=et(X8,"vtkOpenGLPixelSpaceCallbackMapper");$n("vtkPixelSpaceCallbackMapper",Y8);const aO=Object.create(null);function jr(t,e){aO[t]=e}function q8(t,e){e.classHierarchy.push("vtkWebGPUViewNodeFactory")}const Z8={};function Q8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z8,n),e.overrides=aO,Fw.extend(t,e,n),q8(t,e)}V.newInstance(Q8,"vtkWebGPUViewNodeFactory");function P8(t,e){e.classHierarchy.push("vtkWebGPUCamera"),t.getProjectionMatrix=(n,r,s,i)=>{if(Ve(n),e.renderable.getParallelProjection()){const c=e.renderable.getParallelScale(),l=c*r,f=c,g=(i[0]-1)*l,p=(i[0]+1)*l,h=(i[1]-1)*f,y=(i[1]+1)*f,v=1/(p-g),E=1/(y-h);n[0]=2*v,n[5]=2*E,n[10]=1/(s[1]-s[0]),n[12]=(p+g)*v,n[13]=(y+h)*E,n[14]=s[1]/(s[1]-s[0])}else{const c=Math.tan(Math.PI*e.renderable.getViewAngle()/360);let l,f;e.renderable.getUseHorizontalViewAngle()===!0?(l=s[0]*c,f=s[0]*c/r):(l=s[0]*c*r,f=s[0]*c);const g=(i[0]-1)*l,p=(i[0]+1)*l,h=(i[1]-1)*f,y=(i[1]+1)*f;n[0]=2*s[0]/(p-g),n[5]=2*s[0]/(y-h),n[12]=(g+p)/(p-g),n[13]=(h+y)/(y-h),n[10]=0,n[14]=s[0],n[11]=-1,n[15]=0}},t.convertToOpenGLDepth=n=>{if(e.renderable.getParallelProjection())return 1-n;const r=e.renderable.getClippingRangeByReference();let s=-r[0]/n;return s=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(s*(r[1]-r[0])),.5*s+.5},t.getKeyMatrices=n=>{const r=n.getRenderable(),s=n.getParent();if(Math.max(s.getMTime(),t.getMTime(),r.getMTime(),e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatrixTime.getMTime()){const i=e.renderable.getViewMatrix();$t(e.keyMatrices.normalMatrix,i),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,An(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Je(e.keyMatrices.wcvc,i);const c=n.getStabilizedCenterByReference();wt(e.keyMatrices.scvc,e.keyMatrices.wcvc,c);const l=n.getAspectRatio(),f=e.renderable.getClippingRangeByReference();t.getProjectionMatrix(e.keyMatrices.vcpc,l,f,e.renderable.getWindowCenterByReference()),Zt(e.keyMatrices.scpc,e.keyMatrices.vcpc,e.keyMatrices.scvc),An(e.keyMatrices.pcsc,e.keyMatrices.scpc),e.keyMatrixTime.modified()}return e.keyMatrices}}const J8={keyMatrixTime:null,keyMatrices:null};function I8(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J8,n),ft.extend(t,e,n),e.keyMatrixTime={},V.obj(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},V.setGet(t,e,["keyMatrixTime"]),P8(t,e)}const e$=V.newInstance(I8);jr("vtkCamera",e$);function t$(t,e){e.classHierarchy.push("vtkWebGPUBindGroup"),t.setBindables=n=>{if(e.bindables.length===n.length){let r=!0;for(let s=0;s<e.bindables.length;s++)e.bindables[s]!==n[s]&&(r=!1);if(r)return}e.bindables=n,t.modified()},t.getBindGroupLayout=n=>{const r=[];for(let s=0;s<e.bindables.length;s++){const i=e.bindables[s].getBindGroupLayoutEntry();i.binding=s,r.push(i)}return n.getBindGroupLayout({entries:r})},t.getBindGroup=n=>{let r=t.getMTime();for(let i=0;i<e.bindables.length;i++){const c=e.bindables[i].getBindGroupTime().getMTime();r=c>r?c:r}if(r<e.bindGroupTime.getMTime())return e.bindGroup;const s=[];for(let i=0;i<e.bindables.length;i++){const c=e.bindables[i].getBindGroupEntry();c.binding=i,s.push(c)}return e.bindGroup=n.getHandle().createBindGroup({layout:t.getBindGroupLayout(n),entries:s,label:e.label}),e.bindGroupTime.modified(),e.bindGroup},t.getShaderCode=n=>{const r=[],s=n.getBindGroupLayoutCount(e.label);for(let i=0;i<e.bindables.length;i++)r.push(e.bindables[i].getShaderCode(i,s));return r.join(`
`)}}const n$={device:null,handle:null,label:null};function sO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n$,n),V.obj(t,e),e.bindables=[],e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),V.get(t,e,["bindGroupTime","handle","sizeInBytes","usage"]),V.setGet(t,e,["label","device","arrayInformation"]),t$(t,e)}const r$=V.newInstance(sO);var iO={newInstance:r$,extend:sO};function a$(t,e){e.classHierarchy.push("vtkWebGPUShaderModule"),t.initialize=(n,r)=>{e.device=n,e.handle=e.device.getHandle().createShaderModule({code:r.getCode()})}}const s$={device:null,handle:null};function oO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s$,n),V.obj(t,e),V.get(t,e,["lastCameraMTime"]),V.setGet(t,e,["device","handle"]),a$(t,e)}const i$=V.newInstance(oO,"vtkWebGPUShaderModule");var o$={newInstance:i$,extend:oO};function c$(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;const s=Array.isArray(n)?n.join(`
`):n;let i=!1;t.search(e)!==-1&&(i=!0);let c="";r&&(c="g");const l=new RegExp(e,c),f=t.replace(l,s);return{replace:i,result:f}}function l$(t,e){e.classHierarchy.push("vtkWebGPUShaderCache"),t.getShaderModule=n=>{const r=n.getType(),s=n.getHash(),i=e._shaderModules.keys();for(let l=0;l<i.length;l++){const f=i[l];if(f.getHash()===s&&f.getType()===r)return e._shaderModules.get(f)}const c=o$.newInstance();return c.initialize(e.device,n),e._shaderModules.set(n,c),c}}const u$={shaderModules:null,device:null,window:null};function cO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u$,n),e._shaderModules=new Map,V.obj(t,e),V.setGet(t,e,["device","window"]),l$(t,e)}const f$=V.newInstance(cO,"vtkWebGPUShaderCache");var Ye={newInstance:f$,extend:cO,substitute:c$};function g$(t,e){e.classHierarchy.push("vtkWebGPUPipeline"),t.getShaderDescriptions=()=>e.shaderDescriptions,t.initialize=(n,r)=>{e.pipelineDescription=e.renderEncoder.getPipelineSettings(),e.pipelineDescription.primitive.topology=e.topology,e.pipelineDescription.vertex=e.vertexState,e.pipelineDescription.label=r;const s=[];for(let i=0;i<e.layouts.length;i++)s.push(e.layouts[i].layout);e.pipelineLayout=n.getHandle().createPipelineLayout({bindGroupLayouts:s}),e.pipelineDescription.layout=e.pipelineLayout;for(let i=0;i<e.shaderDescriptions.length;i++){const c=e.shaderDescriptions[i],l=n.getShaderModule(c);c.getType()==="vertex"&&(e.pipelineDescription.vertex.module=l.getHandle(),e.pipelineDescription.vertex.entryPoint="main"),c.getType()==="fragment"&&(e.pipelineDescription.fragment.module=l.getHandle(),e.pipelineDescription.fragment.entryPoint="main")}e.handle=n.getHandle().createRenderPipeline(e.pipelineDescription)},t.getShaderDescription=n=>{for(let r=0;r<e.shaderDescriptions.length;r++)if(e.shaderDescriptions[r].getType()===n)return e.shaderDescriptions[r];return null},t.addBindGroupLayout=n=>{n&&e.layouts.push({layout:n.getBindGroupLayout(e.device),label:n.getLabel()})},t.getBindGroupLayout=n=>e.layouts[n].layout,t.getBindGroupLayoutCount=n=>{for(let r=0;r<e.layouts.length;r++)if(e.layouts[r].label===n)return r;return 0},t.bindVertexInput=(n,r)=>{r.bindBuffers(n)}}const h$={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function lO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h$,n),Wt(t,e),e.layouts=[],e.shaderDescriptions=[],Cn(t,e,["handle","pipelineDescription"]),Gt(t,e,["device","renderEncoder","topology","vertexState"]),g$(t,e)}const d$=et(lO,"vtkWebGPUPipeline");var p$={newInstance:d$,extend:lO};function y$(t,e){e.classHierarchy.push("vtkWebGPUShaderDescription"),t.hasOutput=n=>e.outputNames.includes(n),t.addOutput=function(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;e.outputTypes.push(n),e.outputNames.push(r),e.outputInterpolations.push(s)},t.addBuiltinOutput=(n,r)=>{e.builtinOutputTypes.push(n),e.builtinOutputNames.push(r)},t.addBuiltinInput=(n,r)=>{e.builtinInputTypes.push(n),e.builtinInputNames.push(r)},t.replaceShaderCode=(n,r)=>{const s=[];let i=[];if(r&&s.push(r.getShaderCode()),n||e.builtinInputNames.length){const c=[];if(c.push(`struct ${e.type}Input
{`),n){const l=n.getOutputNamesByReference(),f=n.getOutputTypesByReference(),g=n.getOutputInterpolationsByReference();for(let p=0;p<l.length;p++)g[p]!==void 0?c.push(`  @location(${p}) @interpolate(${g[p]}) ${l[p]} : ${f[p]},`):c.push(`  @location(${p}) ${l[p]} : ${f[p]},`)}for(let l=0;l<e.builtinInputNames.length;l++)c.push(`  ${e.builtinInputNames[l]} : ${e.builtinInputTypes[l]},`);c.length>1&&(c.push("};"),i=c,s[s.length-1]+=",",s.push(`input: ${e.type}Input`))}if(s.length&&(e.code=Ye.substitute(e.code,"//VTK::IOStructs::Input",s).result),e.outputNames.length+e.builtinOutputNames.length){const c=[`struct ${e.type}Output
{`];for(let l=0;l<e.outputNames.length;l++)e.outputInterpolations[l]!==void 0?c.push(`  @location(${l}) @interpolate(${e.outputInterpolations[l]}) ${e.outputNames[l]} : ${e.outputTypes[l]},`):c.push(`  @location(${l}) ${e.outputNames[l]} : ${e.outputTypes[l]},`);for(let l=0;l<e.builtinOutputNames.length;l++)c.push(`  ${e.builtinOutputNames[l]} : ${e.builtinOutputTypes[l]},`);c.push("};"),i=i.concat(c),e.code=Ye.substitute(e.code,"//VTK::IOStructs::Output",[`-> ${e.type}Output`]).result}e.code=Ye.substitute(e.code,"//VTK::IOStructs::Dec",i).result}}const x$={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function uO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,x$,n),e.outputNames=[],e.outputTypes=[],e.outputInterpolations=[],e.builtinOutputNames=[],e.builtinOutputTypes=[],e.builtinInputNames=[],e.builtinInputTypes=[],V.obj(t,e),V.setGet(t,e,["type","hash","code"]),V.getArray(t,e,["outputTypes","outputNames","outputInterpolations"]),y$(t,e)}const v$=V.newInstance(uO,"vtkWebGPUShaderDescription");var bS={newInstance:v$,extend:uO};const OS={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};function m$(t){return!t||t.length<6?0:t in OS?OS[t]:(we(`unknown format ${t}`),null)}function T$(t){if(!t||t.length<5)return 0;let e=1;t[t.length-2]==="x"&&(e=Number(t[t.length-1]));const n=e===1?t.length-1:t.length-3,r=Number(t[n]);if(Number.isNaN(r))return we(`unknown format ${t}`),0;const s=5-r/2;return e*s}function S$(t){if(!t||t.length<5)return 0;let e=1;return t[t.length-2]==="x"&&(e=Number(t[t.length-1])),e}function C$(t){if(!t||t.length<5)return 0;let e;if(t[0]==="f")e="Float";else if(t[0]==="s")e="Int";else if(t[0]==="u")e="Uint";else{we(`unknown format ${t}`);return}const n=t.split("x")[0],r=Number(n[n.length-1]);if(Number.isNaN(r)){we(`unknown format ${t}`);return}return e+=8*(5-r/2),e+="Array",e}function E$(t){let e;if(t[0]==="f"||t[1]==="n")e="f32";else if(t[0]==="s"&&t[1]==="i")e="i32";else if(t[0]==="u"&&t[1]==="i")e="u32";else{we(`unknown format ${t}`);return}let n=1;return t[t.length-2]==="x"&&(n=Number(t[t.length-1])),n===4?`vec4<${e}>`:n===3?`vec3<${e}>`:n===2?`vec2<${e}>`:e}function w$(t){if(!t)return 0;let e=1;return t.substring(0,3)==="vec"?e=Number(t[3]):t.substring(0,3)==="mat"&&(e=t[3]*t[5]),e*4}function M$(t){if(t){if(t.includes("f32"))return"Float32Array";if(t.includes("i32"))return"Int32Array";if(t.includes("u32"))return"Uint32Array";we(`unknown format ${t}`)}}var Ft={getDetailsFromTextureFormat:m$,getByteStrideFromBufferFormat:T$,getNumberOfComponentsFromBufferFormat:S$,getNativeTypeFromBufferFormat:C$,getShaderTypeFromBufferFormat:E$,getByteStrideFromShaderFormat:w$,getNativeTypeFromShaderFormat:M$};function b$(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!e.includes(t[n]))return!1;return!0}function O$(t,e){e.classHierarchy.push("vtkWebGPUVertexInput"),t.addBuffer=function(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"vertex",i=r;Array.isArray(i)||(i=[i]);for(let c=0;c<e.inputs.length;c++)if(b$(e.inputs[c].names,i)){if(e.inputs[c].buffer===n)return;e.inputs[c].buffer=n;return}e.inputs.push({buffer:n,stepMode:s,names:i}),e.inputs=e.inputs.sort((c,l)=>c.names[0]<l.names[0]?-1:c.names[0]>l.names[0]?1:0)},t.removeBufferIfPresent=n=>{for(let r=0;r<e.inputs.length;r++)e.inputs[r].names.includes(n)&&e.inputs.splice(r,1)},t.getBuffer=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer;return null},t.hasAttribute=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return!0;return!1},t.getAttributeTime=n=>{for(let r=0;r<e.inputs.length;r++)if(e.inputs[r].names.includes(n))return e.inputs[r].buffer.getSourceTime();return 0},t.getShaderCode=()=>{let n="",r=0;for(let s=0;s<e.inputs.length;s++)for(let i=0;i<e.inputs[s].names.length;i++){const c=e.inputs[s].buffer.getArrayInformation()[i],l=Ft.getShaderTypeFromBufferFormat(c.format);r>0&&(n+=`,
`),n=`${n}  @location(${r}) ${e.inputs[s].names[i]} : ${l}`,r++}return n},t.getVertexInputInformation=()=>{const n={};if(e.inputs.length){const r=[];let s=0;for(let i=0;i<e.inputs.length;i++){const c=e.inputs[i].buffer,l={arrayStride:c.getStrideInBytes(),stepMode:e.inputs[i].stepMode,attributes:[]},f=c.getArrayInformation();for(let g=0;g<e.inputs[i].names.length;g++)l.attributes.push({shaderLocation:s,offset:f[g].offset,format:f[g].format}),s++;r.push(l)}n.buffers=r}return n},t.bindBuffers=n=>{for(let r=0;r<e.inputs.length;r++)n.setVertexBuffer(r,e.inputs[r].buffer.getHandle());e.indexBuffer&&n.setIndexBuffer(e.indexBuffer.getHandle(),e.indexBuffer.getArrayInformation()[0].format)},t.getReady=()=>{},t.releaseGraphicsResources=()=>{e.created&&(e.inputs=[],e.bindingDescriptions=[],e.attributeDescriptions=[])}}const D$={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function fO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D$,n),Wt(t,e),e.bindingDescriptions=[],e.attributeDescriptions=[],e.inputs=[],Gt(t,e,["created","device","handle","indexBuffer"]),O$(t,e)}const R$=et(fO,"vtkWebGPUVertexInput");var N$={newInstance:R$,extend:fO};const L$=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  // var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,V$=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::Light::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);

  //VTK::RenderEncoder::Impl
  return output;
}
`;function _$(t,e){e.classHierarchy.push("vtkWebGPUSimpleMapper"),t.generateShaderDescriptions=(n,r,s)=>{const i=bS.newInstance({type:"vertex",hash:n,code:e.vertexShaderTemplate}),c=bS.newInstance({type:"fragment",hash:n,code:e.fragmentShaderTemplate}),l=r.getShaderDescriptions();l.push(i),l.push(c);const f=e.vertexShaderTemplate+e.fragmentShaderTemplate,g=new RegExp("//VTK::[^:]*::","g"),h=f.match(g).filter((y,v,E)=>E.indexOf(y)===v).map(y=>`replaceShader${y.substring(7,y.length-2)}`);for(let y=0;y<h.length;y++){const v=h[y];v!=="replaceShaderIOStructs"&&e.shaderReplacements.has(v)&&e.shaderReplacements.get(v)(n,r,s)}t.replaceShaderIOStructs(n,r,s)},t.replaceShaderIOStructs=(n,r,s)=>{const i=r.getShaderDescription("vertex");i.replaceShaderCode(null,s),r.getShaderDescription("fragment").replaceShaderCode(i)},t.replaceShaderRenderEncoder=(n,r,s)=>{e.renderEncoder.replaceShaderCode(r)},e.shaderReplacements.set("replaceShaderRenderEncoder",t.replaceShaderRenderEncoder),t.replaceShaderRenderer=(n,r,s)=>{if(!e.WebGPURenderer)return;const i=e.WebGPURenderer.getBindGroup().getShaderCode(r),c=r.getShaderDescription("vertex");let l=c.getCode();l=Ye.substitute(l,"//VTK::Renderer::Dec",[i]).result,c.setCode(l);const f=r.getShaderDescription("fragment");l=f.getCode(),l=Ye.substitute(l,"//VTK::Renderer::Dec",[i]).result,f.setCode(l)},e.shaderReplacements.set("replaceShaderRenderer",t.replaceShaderRenderer),t.replaceShaderMapper=(n,r,s)=>{const i=e.bindGroup.getShaderCode(r),c=r.getShaderDescription("vertex");let l=c.getCode();l=Ye.substitute(l,"//VTK::Mapper::Dec",[i]).result,c.setCode(l);const f=r.getShaderDescription("fragment");f.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),l=f.getCode(),l=Ye.substitute(l,"//VTK::Mapper::Dec",[i]).result,f.setCode(l)},e.shaderReplacements.set("replaceShaderMapper",t.replaceShaderMapper),t.replaceShaderPosition=(n,r,s)=>{const i=r.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position");let c=i.getCode();c=Ye.substitute(c,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,i.setCode(c)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderTCoord=(n,r,s)=>{r.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.addTextureView=n=>{e.textureViews.includes(n)||e.textureViews.push(n)},t.prepareToDraw=n=>{e.renderEncoder=n,t.updateInput(),t.updateBuffers(),t.updateBindings(),t.updatePipeline()},t.updateInput=()=>{},t.updateBuffers=()=>{},t.updateBindings=()=>{e.bindGroup.setBindables(t.getBindables())},t.computePipelineHash=()=>{},t.registerDrawCallback=n=>{n.registerDrawCallback(e.pipeline,t.draw)},t.prepareAndDraw=n=>{t.prepareToDraw(n),n.setPipeline(e.pipeline),t.draw(n)},t.draw=n=>{const r=n.getBoundPipeline();n.activateBindGroup(e.bindGroup),e.WebGPURenderer&&e.WebGPURenderer.bindUBO(n),r.bindVertexInput(n,e.vertexInput);const s=e.vertexInput.getIndexBuffer();s?n.drawIndexed(s.getIndexCount(),e.numberOfInstances,0,0,0):n.draw(e.numberOfVertices,e.numberOfInstances,0,0)},t.getBindables=()=>{const n=[...e.additionalBindables];e.UBO&&n.push(e.UBO),e.SSBO&&n.push(e.SSBO);for(let r=0;r<e.textureViews.length;r++){n.push(e.textureViews[r]);const s=e.textureViews[r].getSampler();s&&n.push(s)}return n},t.updatePipeline=()=>{t.computePipelineHash(),e.pipeline=e.device.getPipeline(e.pipelineHash),e.pipeline||(e.pipeline=p$.newInstance(),e.pipeline.setDevice(e.device),e.WebGPURenderer&&e.pipeline.addBindGroupLayout(e.WebGPURenderer.getBindGroup()),e.pipeline.addBindGroupLayout(e.bindGroup),t.generateShaderDescriptions(e.pipelineHash,e.pipeline,e.vertexInput),e.pipeline.setTopology(e.topology),e.pipeline.setRenderEncoder(e.renderEncoder),e.pipeline.setVertexState(e.vertexInput.getVertexInputInformation()),e.device.createPipeline(e.pipelineHash,e.pipeline))}}const k$={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function gO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k$,n),ft.extend(t,e,n),e.textureViews=[],e.vertexInput=N$.newInstance(),e.bindGroup=iO.newInstance({label:"mapperBG"}),e.additionalBindables=[],e.fragmentShaderTemplate=e.fragmentShaderTemplate||V$,e.vertexShaderTemplate=e.vertexShaderTemplate||L$,e.shaderReplacements=new Map,V.get(t,e,["pipeline","vertexInput"]),V.setGet(t,e,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),_$(t,e)}const B$=V.newInstance(gO,"vtkWebGPUSimpleMapper");var hO={newInstance:B$,extend:gO};function U$(t,e){e.classHierarchy.push("vtkWebGPUFullScreenQuad"),t.replaceShaderPosition=(n,r,s)=>{const i=r.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),i.addOutput("vec4<f32>","vertexVC");let c=i.getCode();c=Ye.substitute(c,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,i.setCode(c)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.updateBuffers=()=>{const n=e.device.getBufferManager().getFullScreenQuadBuffer();e.vertexInput.addBuffer(n,["vertexBC"]),e.numberOfVertices=6}}const F$={};function dO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F$,n),hO.extend(t,e,n),U$(t,e)}const j$=V.newInstance(dO,"vtkWebGPUFullScreenQuad");var DS={newInstance:j$,extend:dO};const G$={Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},z$={Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6};var Uc={BufferUsage:G$,PrimitiveTypes:z$};const Jh=["getMappedRange","mapAsync","unmap"];function A$(t,e,n,r){const s=r.byteLength,i=t.createBuffer({size:s,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),c=i.getMappedRange(0,s);new Uint8Array(c).set(new Uint8Array(r)),i.unmap();const l=t.createCommandEncoder();l.copyBufferToBuffer(i,0,e,n,s);const f=l.finish();t.queue.submit([f]),i.destroy()}function $$(t,e){e.classHierarchy.push("vtkWebGPUBuffer"),t.create=(n,r)=>{e.handle=e.device.getHandle().createBuffer({size:n,usage:r,label:e.label}),e.sizeInBytes=n,e.usage=r},t.write=n=>{A$(e.device.getHandle(),e.handle,0,n.buffer)},t.createAndWrite=(n,r)=>{const s=Math.ceil(n.byteLength/4)*4;e.handle=e.device.getHandle().createBuffer({size:s,usage:r,mappedAtCreation:!0,label:e.label}),e.sizeInBytes=s,e.usage=r,new Uint8Array(e.handle.getMappedRange()).set(new Uint8Array(n.buffer)),e.handle.unmap()};for(let n=0;n<Jh.length;n++)t[Jh[n]]=function(){return e.handle[Jh[n]](...arguments)}}const H$={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function pO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,H$,n),V.obj(t,e),V.get(t,e,["handle","sizeInBytes","usage"]),V.setGet(t,e,["strideInBytes","device","arrayInformation","label","sourceTime"]),$$(t,e)}const W$=V.newInstance(pO);var Jd={newInstance:W$,extend:pO,...Uc};const{Representation:RS}=Bc,{PrimitiveTypes:Ta}=Uc;class K${constructor(){this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}clear(){this.count=0}has(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return!0}get(e){for(let n=0;n<this.count;n++)if(this.keys[n]===e)return this.values[n]}set(e,n){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=n)}}function X$(t){switch(t){case Ta.Points:return"points";case Ta.Lines:return"lines";case Ta.Triangles:case Ta.TriangleEdges:return"polys";case Ta.TriangleStripEdges:case Ta.TriangleStrips:return"strips";default:return""}}function Tu(t,e,n){let r=t.pointIdToFlatId[e];return r<0&&(r=t.flatId,t.pointIdToFlatId[e]=r,t.flatIdToPointId[t.flatId]=e,t.flatIdToCellId[t.flatId]=n,t.flatId++),r}function Y$(t,e,n){const r=t.length;for(let c=0;c<r;c++){let l=t[c];if(n.cellProvokedMap.has(l)){n.ibo[n.iboId++]=n.cellProvokedMap.get(l);for(let f=c+1;f<c+r;f++){l=t[f%r];const g=Tu(n,l,e);n.ibo[n.iboId++]=g}return}}for(let c=0;c<r;c++){let l=t[c];if(!n.provokedPointIds[l]){let f=Tu(n,l,e);n.provokedPointIds[l]=1,n.cellProvokedMap.set(l,f),n.flatIdToCellId[f]=e,n.ibo[n.iboId++]=f;for(let g=c+1;g<c+r;g++)l=t[g%r],f=Tu(n,l,e),n.ibo[n.iboId++]=f;return}}let s=t[0],i=n.flatId;n.cellProvokedMap.set(s,i),n.flatIdToPointId[n.flatId]=s,n.flatIdToCellId[n.flatId]=e,n.flatId++,n.ibo[n.iboId++]=i;for(let c=1;c<r;c++)s=t[c],i=Tu(n,s,e),n.ibo[n.iboId++]=i}function q$(t,e,n){const r=t.length;n.iboSize+=r;for(let s=0;s<r;s++){const i=t[s];if(n.cellProvokedMap.has(i))return}for(let s=0;s<r;s++){const i=t[s];if(!n.provokedPointIds[i]){n.provokedPointIds[i]=1,n.cellProvokedMap.set(i,1);return}}n.cellProvokedMap.set(t[0],1),n.extraPoints++}let Lr;const NS=new Uint32Array(1),_n=new Uint32Array(2),ha=new Uint32Array(3),Ih={anythingToPoints(t,e,n,r,s){for(let i=0;i<t;++i)NS[0]=e[n+i],Lr(NS,r,s)},linesToWireframe(t,e,n,r,s){for(let i=0;i<t-1;++i)_n[0]=e[n+i],_n[1]=e[n+i+1],Lr(_n,r,s)},polysToWireframe(t,e,n,r,s){if(t>2)for(let i=0;i<t;++i)_n[0]=e[n+i],_n[1]=e[n+(i+1)%t],Lr(_n,r,s)},stripsToWireframe(t,e,n,r,s){if(t>2){for(let i=0;i<t-1;++i)_n[0]=e[n+i],_n[1]=e[n+i+1],Lr(_n,r,s);for(let i=0;i<t-2;i++)_n[0]=e[n+i],_n[1]=e[n+i+2],Lr(_n,r,s)}},polysToSurface(t,e,n,r,s){for(let i=0;i<t-2;i++)ha[0]=e[n],ha[1]=e[n+i+1],ha[2]=e[n+i+2],Lr(ha,r,s)},stripsToSurface(t,e,n,r,s){for(let i=0;i<t-2;i++)ha[0]=e[n+i],ha[1]=e[n+i+1+i%2],ha[2]=e[n+i+1+(i+1)%2],Lr(ha,r,s)}};function Z$(t,e){e.classHierarchy.push("vtkWebGPUIndexBuffer"),t.buildIndexBuffer=n=>{const r=n.cells,s=n.primitiveType,i=n.representation,c=n.cellOffset,l=r.getData(),f=l.length,g=X$(s),p=n.numberOfPoints,h={provokedPointIds:new Uint8Array(p),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new K$};let y=null;i===RS.POINTS||s===Ta.Points?y=Ih.anythingToPoints:i===RS.WIREFRAME||s===Ta.Lines?y=Ih[`${g}ToWireframe`]:y=Ih[`${g}ToSurface`],Lr=q$;let v=c||0;for(let E=0;E<f;)h.cellProvokedMap.clear(),y(l[E],l,E+1,v,h),E+=l[E]+1,v++;p<=65535?h.flatIdToPointId=new Uint16Array(p+h.extraPoints):h.flatIdToPointId=new Uint32Array(p+h.extraPoints),p+h.extraPoints<36863?h.pointIdToFlatId=new Int16Array(p):h.pointIdToFlatId=new Int32Array(p),p+h.extraPoints<=65535?(h.ibo=new Uint16Array(h.iboSize),n.format="uint16"):(h.ibo=new Uint32Array(h.iboSize),n.format="uint32"),v<=65535?h.flatIdToCellId=new Uint16Array(p+h.extraPoints):h.flatIdToCellId=new Uint32Array(p+h.extraPoints),h.pointIdToFlatId.fill(-1),h.provokedPointIds.fill(0),Lr=Y$,v=c||0;for(let E=0;E<f;)h.cellProvokedMap.clear(),y(l[E],l,E+1,v,h),E+=l[E]+1,v++;delete h.provokedPointIds,delete h.pointIdToFlatId,n.nativeArray=h.ibo,e.flatIdToPointId=h.flatIdToPointId,e.flatIdToCellId=h.flatIdToCellId,e.flatSize=h.flatId,e.indexCount=h.iboId}}const Q$={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function yO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q$,n),Jd.extend(t,e,n),V.setGet(t,e,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),Z$(t,e)}const P$=V.newInstance(yO);var J$={newInstance:P$,extend:yO,...Uc};const{BufferUsage:da}=Uc,{vtkErrorMacro:I$}=fr,{VtkDataTypes:is}=rt,eH={};function tH(t){let e;switch(t.getDataType()){case is.UNSIGNED_CHAR:e="uint8";break;case is.FLOAT:e="float32";break;case is.UNSIGNED_INT:e="uint32";break;case is.INT:e="sint32";break;case is.DOUBLE:e="float32";break;case is.UNSIGNED_SHORT:e="uint16";break;case is.SHORT:e="sin16";break;default:e="float32";break}switch(t.getNumberOfComponents()){case 2:e+="x2";break;case 3:e.includes("32")||I$(`unsupported x3 type for ${e}`),e+="x3";break;case 4:e+="x4";break}return e}function LS(t,e,n,r,s){const i={},c=t.getFlatSize();if(!c)return i;let l=[0,0,0,0];s.shift&&(s.shift.length?l=s.shift:l.fill(s.shift));let f=[1,1,1,1];s.scale&&(s.scale.length?f=s.scale:f.fill(s.scale));const g=Object.prototype.hasOwnProperty.call(s,"packExtra")?s.packExtra:!1;let p,h=0;const y=n+(g?1:0),v=Vi(r,c*y);let E=t.getFlatIdToPointId();s.cellData&&(E=t.getFlatIdToCellId()),n===1?p=function(T){v[h++]=f[0]*e[T]+l[0]}:n===2?p=function(T){v[h++]=f[0]*e[T]+l[0],v[h++]=f[1]*e[T+1]+l[1]}:n===3&&!g?p=function(T){v[h++]=f[0]*e[T]+l[0],v[h++]=f[1]*e[T+1]+l[1],v[h++]=f[2]*e[T+2]+l[2]}:n===3&&g?p=function(T){v[h++]=f[0]*e[T]+l[0],v[h++]=f[1]*e[T+1]+l[1],v[h++]=f[2]*e[T+2]+l[2],v[h++]=f[3]*1+l[3]}:n===4&&(p=function(T){v[h++]=f[0]*e[T]+l[0],v[h++]=f[1]*e[T+1]+l[1],v[h++]=f[2]*e[T+2]+l[2],v[h++]=f[3]*e[T+3]+l[3]});for(let x=0;x<c;x++){const T=n*E[x];p(T)}return i.nativeArray=v,i}function nH(t,e,n,r){const s=[t[r*3]-t[n*3],t[r*3+1]-t[n*3+1],t[r*3+2]-t[n*3+2]],i=[t[e*3]-t[n*3],t[e*3+1]-t[n*3+1],t[e*3+2]-t[n*3+2]],c=[];return Jt(s,i,c),Sn(c),c}function rH(t,e){const n=e.getData(),r=t.getData();if(!r||!n)return null;const s=new Int8Array(t.getNumberOfCells()*4),i=r.length;let c=0;for(let l=0;l<i;){const f=nH(n,r[l+1],r[l+2],r[l+3]);s[c++]=127*f[0],s[c++]=127*f[1],s[c++]=127*f[2],s[c++]=127,l+=r[l]+1}return s}function aH(t,e){e.classHierarchy.push("vtkWebGPUBufferManager");function n(r){r.dataArray&&!r.nativeArray&&(r.nativeArray=r.dataArray.getData());let s,i;if(r.usage===da.Index&&(s=J$.newInstance({label:r.label}),s.setDevice(e.device),i=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,s.buildIndexBuffer(r),s.createAndWrite(r.nativeArray,i),s.setArrayInformation([{format:r.format}])),s||(s=Jd.newInstance({label:r.label}),s.setDevice(e.device)),r.usage===da.UniformArray&&(i=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,s.createAndWrite(r.nativeArray,i)),r.usage===da.Storage&&(i=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,s.createAndWrite(r.nativeArray,i)),r.usage===da.Texture&&(i=GPUBufferUsage.COPY_SRC,s.createAndWrite(r.nativeArray,i)),r.usage===da.PointArray){i=GPUBufferUsage.VERTEX;const c=Ft.getNativeTypeFromBufferFormat(r.format),l=LS(r.indexBuffer,r.dataArray.getData(),r.dataArray.getNumberOfComponents(),c,{packExtra:r.packExtra,shift:r.shift,scale:r.scale,cellData:r.cellData,cellOffset:r.cellOffset});s.createAndWrite(l.nativeArray,i),s.setStrideInBytes(Ft.getByteStrideFromBufferFormat(r.format)),s.setArrayInformation([{offset:0,format:r.format,interpolation:r.cellData?"flat":"perspective"}])}if(r.usage===da.NormalsFromPoints){i=GPUBufferUsage.VERTEX;const c=Ft.getNativeTypeFromBufferFormat(r.format),l=rH(r.cells,r.dataArray),f=LS(r.indexBuffer,l,4,c,{cellData:!0});s.createAndWrite(f.nativeArray,i),s.setStrideInBytes(Ft.getByteStrideFromBufferFormat(r.format)),s.setArrayInformation([{offset:0,format:r.format,interpolation:"flat"}])}return r.usage===da.RawVertex&&(i=GPUBufferUsage.VERTEX,s.createAndWrite(r.nativeArray,i),s.setStrideInBytes(Ft.getByteStrideFromBufferFormat(r.format)),s.setArrayInformation([{offset:0,format:r.format}])),s.setSourceTime(r.time),s}t.hasBuffer=r=>e.device.hasCachedObject(r),t.getBuffer=r=>r.hash?e.device.getCachedObject(r.hash,n,r):n(r),t.getBufferForPointArray=(r,s)=>{const i=tH(r),c={hash:`${r.getMTime()}I${s.getMTime()}${i}`,usage:da.PointArray,format:i,dataArray:r,indexBuffer:s};return t.getBuffer(c)},t.getFullScreenQuadBuffer=()=>{if(e.fullScreenQuadBuffer)return e.fullScreenQuadBuffer;e.fullScreenQuadBuffer=Jd.newInstance(),e.fullScreenQuadBuffer.setDevice(e.device);const r=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return e.fullScreenQuadBuffer.createAndWrite(r,GPUBufferUsage.VERTEX),e.fullScreenQuadBuffer.setStrideInBytes(12),e.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),e.fullScreenQuadBuffer}}const sH={device:null,fullScreenQuadBuffer:null};function iH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sH,n),Wt(t,e),Gt(t,e,["device"]),aH(t,e)}et(iH);var Fc={...eH,...Uc};const{BufferUsage:oH}=Fc,{vtkErrorMacro:fi}=V;function cH(t,e){e.classHierarchy.push("vtkWebGPUStorageBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){fi(`entry named ${n} already exists`);return}e._bufferEntryNames.set(n,e.bufferEntries.length);const s=Ft.getByteStrideFromShaderFormat(r);e.bufferEntries.push({name:n,type:r,sizeInBytes:s,offset:e.sizeInBytes,nativeType:Ft.getNativeTypeFromShaderFormat(r)}),e.sizeInBytes+=s},t.send=n=>{if(!e._buffer){const r={nativeArray:e.Float32Array,usage:oH.Storage,label:e.label};e._buffer=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e._sendTime.modified();return}n.getHandle().queue.writeBuffer(e._buffer.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes*e.numberOfInstances),e._sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes*e.numberOfInstances)),e[n]=V.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r,s)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){fi(`entry named ${n} not found in UBO`);return}const c=e.bufferEntries[i];t.createView(c.nativeType);const l=e[c.nativeType];l[(c.offset+r*e.sizeInBytes)/l.BYTES_PER_ELEMENT]=s},t.setArray=(n,r,s)=>{const i=e._bufferEntryNames.get(n);if(i===void 0){fi(`entry named ${n} not found in UBO`);return}const c=e.bufferEntries[i];t.createView(c.nativeType);const l=e[c.nativeType],f=(c.offset+r*e.sizeInBytes)/l.BYTES_PER_ELEMENT;for(let g=0;g<s.length;g++)l[f+g]=s[g]},t.setAllInstancesFromArray=(n,r)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){fi(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[s];t.createView(i.nativeType);const c=e[i.nativeType],l=r.length/e.numberOfInstances;for(let f=0;f<e.numberOfInstances;f++){const g=(i.offset+f*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let p=0;p<l;p++)c[g+p]=r[f*l+p]}},t.setAllInstancesFromArrayColorToFloat=(n,r)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){fi(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[s];t.createView(i.nativeType);const c=e[i.nativeType],l=r.length/e.numberOfInstances;for(let f=0;f<e.numberOfInstances;f++){const g=(i.offset+f*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let p=0;p<l;p++)c[g+p]=r[f*l+p]/255}},t.setAllInstancesFromArray3x3To4x4=(n,r)=>{const s=e._bufferEntryNames.get(n);if(s===void 0){fi(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[s];t.createView(i.nativeType);const c=e[i.nativeType],l=9;for(let f=0;f<e.numberOfInstances;f++){const g=(i.offset+f*e.sizeInBytes)/c.BYTES_PER_ELEMENT;for(let p=0;p<3;p++)for(let h=0;h<3;h++)c[g+p*4+h]=r[f*l+p*3+h]}},t.getSendTime=()=>e._sendTime.getMTime(),t.getShaderCode=(n,r)=>{const s=[`struct ${e.label}StructEntry
{`];for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];s.push(`  ${c.name}: ${c.type},`)}return s.push(`
};
struct ${e.label}Struct
{
  values: array<${e.label}StructEntry>,
};
@binding(${n}) @group(${r}) var<storage, read> ${e.label}: ${e.label}Struct;
`),s.join(`
`)},t.getBindGroupEntry=()=>({resource:{buffer:e._buffer.getHandle()}}),t.clearData=()=>{e.numberOfInstances=0,e.sizeInBytes=0,e.bufferEntries=[],e._bufferEntryNames=new Map,e._buffer=null,delete e.arrayBuffer,delete e.Float32Array}}const lH={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function xO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lH,n),V.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e._sendTime={},V.obj(e._sendTime,{mtime:0}),e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},V.get(t,e,["bindGroupTime"]),V.setGet(t,e,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),cH(t,e)}const uH=V.newInstance(xO,"vtkWebGPUStorageBuffer");var fH={newInstance:uH,extend:xO};const{BufferUsage:gH}=Fc,{vtkErrorMacro:ed}=V;function hH(t,e){e.classHierarchy.push("vtkWebGPUUniformBuffer"),t.addEntry=(n,r)=>{if(e._bufferEntryNames.has(n)){ed(`entry named ${n} already exists`);return}e.sortDirty=!0,e._bufferEntryNames.set(n,e.bufferEntries.length),e.bufferEntries.push({name:n,type:r,sizeInBytes:Ft.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Ft.getNativeTypeFromShaderFormat(r),packed:!1})},t.sortBufferEntries=()=>{if(!e.sortDirty)return;let n=0;const r=[];let s=4;for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];c.sizeInBytes%16===0&&(s=Math.max(16,s)),c.sizeInBytes%8===0&&(s=Math.max(8,s))}for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];c.packed===!1&&c.sizeInBytes%16===0&&(c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes)}for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];if(c.packed===!1&&c.sizeInBytes===12)for(let l=0;l<e.bufferEntries.length;l++){const f=e.bufferEntries[l];if(f.packed===!1&&f.sizeInBytes===4){c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes;break}}}for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];if(!c.packed&&c.sizeInBytes%8===0)for(let l=i+1;l<e.bufferEntries.length;l++){const f=e.bufferEntries[l];if(!f.packed&&f.sizeInBytes%8===0){c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,f.packed=!0,f.offset=n,r.push(f),n+=f.sizeInBytes;break}}}for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];if(!c.packed&&c.sizeInBytes%8===0){let l=!1;for(let f=0;!l&&f<e.bufferEntries.length;f++){const g=e.bufferEntries[f];if(!g.packed&&g.sizeInBytes===4)for(let p=f+1;p<e.bufferEntries.length;p++){const h=e.bufferEntries[p];if(!h.packed&&h.sizeInBytes===4){c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes,g.packed=!0,g.offset=n,r.push(g),n+=g.sizeInBytes,h.packed=!0,h.offset=n,r.push(h),n+=h.sizeInBytes,l=!0;break}}}}}for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];!c.packed&&c.sizeInBytes>4&&(c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes)}for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];c.packed||(c.packed=!0,c.offset=n,r.push(c),n+=c.sizeInBytes)}e.bufferEntries=r,e._bufferEntryNames.clear();for(let i=0;i<e.bufferEntries.length;i++)e._bufferEntryNames.set(e.bufferEntries[i].name,i);e.sizeInBytes=n,e.sizeInBytes=s*Math.ceil(e.sizeInBytes/s),e.sortDirty=!1},t.sendIfNeeded=n=>{if(!e.UBO){const r={nativeArray:e.Float32Array,usage:gH.UniformArray,label:e.label};e.UBO=n.getBufferManager().getBuffer(r),e.bindGroupTime.modified(),e.sendDirty=!1}e.sendDirty&&(n.getHandle().queue.writeBuffer(e.UBO.getHandle(),0,e.arrayBuffer,0,e.sizeInBytes),e.sendDirty=!1),e.sendTime.modified()},t.createView=n=>{n in e||(e.arrayBuffer||(e.arrayBuffer=new ArrayBuffer(e.sizeInBytes)),e[n]=V.newTypedArray(n,e.arrayBuffer))},t.setValue=(n,r)=>{t.sortBufferEntries();const s=e._bufferEntryNames.get(n);if(s===void 0){ed(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[s];t.createView(i.nativeType);const c=e[i.nativeType];i.lastValue!==r&&(c[i.offset/c.BYTES_PER_ELEMENT]=r,e.sendDirty=!0),i.lastValue=r},t.setArray=(n,r)=>{t.sortBufferEntries();const s=e._bufferEntryNames.get(n);if(s===void 0){ed(`entry named ${n} not found in UBO`);return}const i=e.bufferEntries[s];t.createView(i.nativeType);const c=e[i.nativeType];let l=!1;for(let f=0;f<r.length;f++)(!i.lastValue||i.lastValue[f]!==r[f])&&(c[i.offset/c.BYTES_PER_ELEMENT+f]=r[f],l=!0);l&&(e.sendDirty=!0,i.lastValue=[...r])},t.getBindGroupEntry=()=>({resource:{buffer:e.UBO.getHandle()}}),t.getSendTime=()=>e.sendTime.getMTime(),t.getShaderCode=(n,r)=>{t.sortBufferEntries();const s=[`struct ${e.label}Struct
{`];for(let i=0;i<e.bufferEntries.length;i++){const c=e.bufferEntries[i];s.push(`  ${c.name}: ${c.type},`)}return s.push(`};
@binding(${n}) @group(${r}) var<uniform> ${e.label}: ${e.label}Struct;`),s.join(`
`)}}const dH={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function vO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,dH,n),V.obj(t,e),e._bufferEntryNames=new Map,e.bufferEntries=[],e.bindGroupLayoutEntry=e.bindGroupLayoutEntry||{buffer:{type:"uniform"}},e.sendTime={},V.obj(e.sendTime,{mtime:0}),e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),e.sendDirty=!0,e.sortDirty=!0,V.get(t,e,["binding","bindGroupTime"]),V.setGet(t,e,["bindGroupLayoutEntry","device","label","sizeInBytes"]),hH(t,e)}const pH=V.newInstance(vO,"vtkWebGPUUniformBuffer");var ac={newInstance:pH,extend:vO};const{vtkDebugMacro:yH}=fr,VS=`
//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;

  //VTK::RenderEncoder::Impl
  return output;
}
`,xH=`
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var pi: f32 = 3.14159265359;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Mapper::Dec

//VTK::TCoord::Dec

//VTK::RenderEncoder::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output: fragmentOutput;

  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);
  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);
  // textureSampleLevel gets rid of some ugly artifacts
  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0.0);
  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);

  //VTK::RenderEncoder::Impl
  return output;
}
`,Su=new Float64Array(16),_S=new Float64Array(16);function vH(t){return t.getPositional()?t.getConeAngle()>=90?0:2:1}function mH(t,e){e.classHierarchy.push("vtkWebGPURenderer"),t.buildPass=n=>{if(n){if(!e.renderable)return;e.camera=e.renderable.getActiveCamera(),t.updateLights(),t.prepareNodes(),t.addMissingNode(e.camera),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes(),e.webgpuCamera=t.getViewNodeFor(e.camera,e.webgpuCamera),t.updateStabilizedMatrix()}},t.updateStabilizedMatrix=()=>{const n=e.camera.getClippingRange(),r=e.camera.getPositionByReference(),s=e.camera.getDirectionOfProjectionByReference(),i=[],c=[];xa(c,s,.5*(n[0]+n[1])),Ao(i,r,c),Ld(c,i,e.stabilizedCenter),rw(c)/(n[1]-n[0])>e.recenterThreshold&&(e.stabilizedCenter=i,e.stabilizedTime.modified())},t.updateLights=()=>{let n=0;const r=e.renderable.getLightsByReference();for(let s=0;s<r.length;++s)r[s].getSwitch()>0&&n++;return n||(yH("No lights are on, creating one."),e.renderable.createLight()),n},t.updateUBO=()=>{const n=e.UBO.getSendTime();if(e._parent.getMTime()>n||t.getMTime()>n||e.camera.getMTime()>n||e.renderable.getMTime()>n){const r=e.webgpuCamera.getKeyMatrices(t);e.UBO.setArray("WCVCMatrix",r.wcvc),e.UBO.setArray("SCPCMatrix",r.scpc),e.UBO.setArray("PCSCMatrix",r.pcsc),e.UBO.setArray("SCVCMatrix",r.scvc),e.UBO.setArray("VCPCMatrix",r.vcpc),e.UBO.setArray("WCVCNormals",r.normalMatrix),e.UBO.setValue("LightCount",e.renderable.getLights().length),e.UBO.setValue("MaxEnvironmentMipLevel",e.renderable.getEnvironmentTexture()?.getMipLevel()),e.UBO.setValue("BackgroundDiffuseStrength",e.renderable.getEnvironmentTextureDiffuseStrength()),e.UBO.setValue("BackgroundSpecularStrength",e.renderable.getEnvironmentTextureSpecularStrength());const s=t.getYInvertedTiledSizeAndOrigin();e.UBO.setArray("viewportSize",[s.usize,s.vsize]),e.UBO.setValue("cameraParallel",e.camera.getParallelProjection());const i=e._parent.getDevice();e.UBO.sendIfNeeded(i)}},t.updateSSBO=()=>{const n=e.renderable.getLights(),r=e.webgpuCamera.getKeyMatrices(t);let s=`${e.renderable.getMTime()}`;for(let i=0;i<n.length;i++)s+=n[i].getMTime();if(s!==e.lightTimeString){const i=new Float32Array(n.length*4),c=new Float32Array(n.length*4),l=new Float32Array(n.length*4),f=new Float32Array(n.length*4);for(let p=0;p<n.length;p++){const h=p*4,y=n[p].getPosition();$e(y,y,r.wcvc),i[h]=y[0],i[h+1]=y[1],i[h+2]=y[2],i[h+3]=0,c[h]=-n[p].getDirection()[0],c[h+1]=-n[p].getDirection()[1],c[h+2]=-n[p].getDirection()[2],c[h+3]=0,l[h]=n[p].getColor()[0],l[h+1]=n[p].getColor()[1],l[h+2]=n[p].getColor()[2],l[h+3]=n[p].getIntensity()*5,f[h]=vH(n[p]),f[h+1]=Math.cos(ct(n[p].getConeAngle())),f[h+2]=Math.cos(ct(n[p].getConeAngle()+n[p].getConeFalloff())),f[h+3]=0}e.SSBO.clearData(),e.SSBO.setNumberOfInstances(n.length),e.SSBO.addEntry("LightPos","vec4<f32>"),e.SSBO.addEntry("LightDir","vec4<f32>"),e.SSBO.addEntry("LightColor","vec4<f32>"),e.SSBO.addEntry("LightData","vec4<f32>"),e.SSBO.setAllInstancesFromArray("LightPos",i),e.SSBO.setAllInstancesFromArray("LightDir",c),e.SSBO.setAllInstancesFromArray("LightColor",l),e.SSBO.setAllInstancesFromArray("LightData",f);const g=e._parent.getDevice();e.SSBO.send(g)}e.lightTimeString=s},t.scissorAndViewport=n=>{const r=t.getYInvertedTiledSizeAndOrigin();n.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),n.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},t.bindUBO=n=>{n.activateBindGroup(e.bindGroup)},t.opaquePass=n=>{n?(e.renderEncoder.begin(e._parent.getCommandEncoder()),t.updateUBO(),t.updateSSBO()):(t.scissorAndViewport(e.renderEncoder),t.clear(),e.renderEncoder.end())},t.clear=()=>{if(e.renderable.getTransparent()||e.suppressClear)return;const n=e._parent.getDevice();if(!e.clearFSQ){e.clearFSQ=DS.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(VS);const i=ac.newInstance({label:"mapperUBO"});i.addEntry("FSQMatrix","mat4x4<f32>"),i.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(i),e.backgroundTex=e.renderable.getEnvironmentTexture()}if(e.clearFSQ.getPipelineHash()!=="clearfsqwithtexture"&&e.renderable.getUseEnvironmentTextureAsBackground()&&e.backgroundTex?.getImageLoaded()){e.clearFSQ.setFragmentShaderTemplate(xH);const i=ac.newInstance({label:"mapperUBO"});i.addEntry("FSQMatrix","mat4x4<f32>"),i.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(i);const c=n.getTextureManager().getTextureForVTKTexture(e.backgroundTex,"EnvironmentTexture");if(c.getReady()){const l=c.createView("EnvironmentTexture");e.clearFSQ.setTextureViews([l]),e.backgroundTexLoaded=!0;const f=e.backgroundTex.getInterpolate()?"linear":"nearest";l.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:f,magFilter:f,mipmapFilter:"linear"})}e.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if(e.clearFSQ.getPipelineHash()==="clearfsqwithtexture"&&!e.renderable.getUseEnvironmentTextureAsBackground()){e.clearFSQ=DS.newInstance(),e.clearFSQ.setDevice(n),e.clearFSQ.setPipelineHash("clearfsq"),e.clearFSQ.setFragmentShaderTemplate(VS);const i=ac.newInstance({label:"mapperUBO"});i.addEntry("FSQMatrix","mat4x4<f32>"),i.addEntry("BackgroundColor","vec4<f32>"),e.clearFSQ.setUBO(i)}const r=e.webgpuCamera.getKeyMatrices(t),s=e.renderable.getBackgroundByReference();e.clearFSQ.getUBO().setArray("BackgroundColor",s),Je(_S,r.normalMatrix),Rd(Su,r.scvc,r.pcsc),Rd(Su,_S,Su),e.clearFSQ.getUBO().setArray("FSQMatrix",Su),e.clearFSQ.getUBO().sendIfNeeded(n),e.clearFSQ.prepareAndDraw(e.renderEncoder)},t.translucentPass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.volumeDepthRangePass=n=>{n?e.renderEncoder.begin(e._parent.getCommandEncoder()):(t.scissorAndViewport(e.renderEncoder),e.renderEncoder.end())},t.getAspectRatio=()=>{const n=e._parent.getSizeByReference(),r=e.renderable.getViewportByReference();return n[0]*(r[2]-r[0])/((r[3]-r[1])*n[1])},t.convertToOpenGLDepth=n=>e.webgpuCamera.convertToOpenGLDepth(n),t.getYInvertedTiledSizeAndOrigin=()=>{const n=t.getTiledSizeAndOrigin(),r=e._parent.getSizeByReference();return n.lowerLeftV=r[1]-n.vsize-n.lowerLeftV,n},t.getTiledSizeAndOrigin=()=>{const n=e.renderable.getViewportByReference(),r=[0,0,1,1],s=n[0]-r[0],i=n[1]-r[1],c=e._parent.normalizedDisplayToDisplay(s,i),l=Math.round(c[0]),f=Math.round(c[1]),g=n[2]-r[0],p=n[3]-r[1],h=e._parent.normalizedDisplayToDisplay(g,p);let y=Math.round(h[0])-l,v=Math.round(h[1])-f;return y<0&&(y=0),v<0&&(v=0),{usize:y,vsize:v,lowerLeftU:l,lowerLeftV:f}},t.getPropFromID=n=>{for(let r=0;r<e.children.length;r++)if((e.children[r].getPropID?e.children[r].getPropID():-1)===n)return e.children[r];return null},t.getStabilizedTime=()=>e.stabilizedTime.getMTime(),t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources()}}const TH={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function SH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TH,n),ft.extend(t,e,n),e.UBO=ac.newInstance({label:"rendererUBO"}),e.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),e.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),e.UBO.addEntry("WCVCNormals","mat4x4<f32>"),e.UBO.addEntry("viewportSize","vec2<f32>"),e.UBO.addEntry("LightCount","i32"),e.UBO.addEntry("MaxEnvironmentMipLevel","f32"),e.UBO.addEntry("BackgroundDiffuseStrength","f32"),e.UBO.addEntry("BackgroundSpecularStrength","f32"),e.UBO.addEntry("cameraParallel","u32"),e.SSBO=fH.newInstance({label:"rendererLightSSBO"}),e.lightTimeString="",e.bindGroup=iO.newInstance({label:"rendererBG"}),e.bindGroup.setBindables([e.UBO,e.SSBO]),e.tmpMat4=Ve(new Float64Array(16)),e.stabilizedTime={},Wt(e.stabilizedTime,{mtime:0}),Cn(t,e,["bindGroup","stabilizedTime"]),_i(t,e,["stabilizedCenter"]),Gt(t,e,["renderEncoder","selector","suppressClear","UBO"]),mH(t,e)}const CH=et(SH,"vtkWebGPURenderer");jr("vtkRenderer",CH);const{CoordinateSystem:kS}=kc;function EH(t,e){e.classHierarchy.push("vtkWebGPUActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.renderable.computeMatrix();const r=e.renderable.getMatrix();e.bufferShift[0]=r[3],e.bufferShift[1]=r[7],e.bufferShift[2]=r[11];const s=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===kS.WORLD&&(e.bufferShift[0]-=s[0],e.bufferShift[1]-=s[1],e.bufferShift[2]-=s[2]),Je(e.keyMatrices.bcwc,r),e.renderable.getIsIdentity()?Ve(e.keyMatrices.normalMatrix):($t(e.keyMatrices.normalMatrix,e.keyMatrices.bcwc),e.keyMatrices.normalMatrix[3]=0,e.keyMatrices.normalMatrix[7]=0,e.keyMatrices.normalMatrix[11]=0,An(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),Je(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),wt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===kS.WORLD?wt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-s[0],-s[1],-s[2]]):$t(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const wH={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function MH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,wH,n),ft.extend(t,e,n),e.keyMatricesTime={},V.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},V.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],EH(t,e)}const bH=V.newInstance(MH);jr("vtkActor",bH);const{CoordinateSystem:BS}=kc;function OH(t,e){e.classHierarchy.push("vtkWebGPUActor2D"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),e.propID===void 0&&(e.propID=e.WebGPURenderWindow.getUniquePropID()),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.traverseOpaquePass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.traverseTranslucentPass=n=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e.WebGPURenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(n,!0),e.children[0]&&e.children[0].traverse(n),t.apply(n,!1))},t.queryPass=(n,r)=>{if(n){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},t.getBufferShift=n=>(t.getKeyMatrices(n),e.bufferShift),t.getKeyMatrices=n=>{if(Math.max(e.renderable.getMTime(),n.getStabilizedTime())>e.keyMatricesTime.getMTime()){e.bufferShift[0]=0,e.bufferShift[1]=0,e.bufferShift[2]=0;const r=n.getStabilizedCenterByReference();e.renderable.getCoordinateSystem()===BS.WORLD&&(e.bufferShift[0]-=r[0],e.bufferShift[1]-=r[1],e.bufferShift[2]-=r[2]),Ve(e.keyMatrices.bcwc),Ve(e.keyMatrices.normalMatrix),wt(e.keyMatrices.bcwc,e.keyMatrices.bcwc,[-e.bufferShift[0],-e.bufferShift[1],-e.bufferShift[2]]),e.renderable.getCoordinateSystem()===BS.WORLD?wt(e.keyMatrices.bcsc,e.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):$t(e.keyMatrices.bcsc,e.keyMatrices.bcwc),e.keyMatricesTime.modified()}return e.keyMatrices}}const DH={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function RH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,DH,n),ft.extend(t,e,n),e.keyMatricesTime={},V.obj(e.keyMatricesTime,{mtime:0}),e.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},V.get(t,e,["propID","keyMatricesTime"]),e.bufferShift=[0,0,0,0],OH(t,e)}const NH=V.newInstance(RH);jr("vtkActor2D",NH);function LH(t,e){e.classHierarchy.push("vtkWebGPUCubeAxesActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const s=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,i=e.WebGPURenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],s,e.WebGPURenderWindow.getRenderable())}}}const VH={};function _H(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VH,n),ft.extend(t,e,n),e.CubeAxesActorHelper=Fb.newCubeAxesActorHelper(),LH(t,e)}const kH=et(_H,"vtkWebGPUCubeAxesActor");jr("vtkCubeAxesActor",kH);const{DisplayLocation:Id}=Jb;function BH(t,e){e.classHierarchy.push("vtkProperty2D"),t.setDisplayLocationToBackground=()=>t.setDisplayLocation(Id.BACKGROUND),t.setDisplayLocationToForeground=()=>t.setDisplayLocation(Id.FOREGROUND),t.setRepresentationToWireframe=()=>t.setRepresentation(Gn.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(Gn.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(Gn.POINTS),t.getRepresentationAsString=()=>V.enumToString(Gn,e.representation)}const UH={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:Gn.SURFACE,displayLocation:Id.FOREGROUND};function FH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UH,n),V.obj(t,e),V.setGet(t,e,["opacity","lineWidth","pointSize","displayLocation","representation"]),V.setGetArray(t,e,["color"],3),BH(t,e)}V.newInstance(FH,"vtkProperty2D");var jH={...Jb};const{BufferUsage:Dt,PrimitiveTypes:Xt}=Fc,{Representation:Cu}=Bc,{ScalarMode:Eu}=Cs,{CoordinateSystem:GH}=kc,{DisplayLocation:US}=jH,zH=`
//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::Normal::Dec

//VTK::TCoord::Dec

//VTK::Select::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@vertex
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : vertexOutput;

  var vertex: vec4<f32> = vertexBC;

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Select::Impl

  //VTK::Position::Impl

  return output;
}
`,AH=`
struct PBRData {
  diffuse: vec3<f32>,
  specular: vec3<f32>,
}

struct Material {
  ior: f32,
  roughness: f32,
  metallic: f32,
  base: vec3<f32>,
};

struct DirectionalLight {
  direction: vec3<f32>,
  color: vec3<f32>,
};

struct PointLight {
  position: vec3<f32>,
  color: vec3<f32>,
};

struct SpotLight {
  position: vec3<f32>,
  direction: vec3<f32>,
  cones: vec2<f32>,
  color: vec3<f32>,
};

const pi: f32 = 3.14159265359;

// Dot product with the max already in it
fn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  return max(0.0, dot(a, b));
}
// Dot product with a max in it that does not allow for negative values
// Physically based rendering is accurate as long as normals are accurate,
// however this is pretty often not the case. In order to prevent negative
// values from ruining light calculations and creating zones of zero light,
// this remapping is used, which smoothly clamps the dot product between
// zero and one while still maintaining a good amount of accuracy.
fn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {
  var d: f32 = max(0.0, dot(a, b));
  d = pow((d + 1.0) / 2.0, 2.6);
  return d;
}

// Lambertian diffuse model
fn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5);
  return (base/pi)*NdotL;
}

// Yasuhiro Fujii improvement on the Oren-Nayar model
// https://mimosa-pudica.net/improved-oren-nayar.html
// p is surface color, o is roughness
fn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {
  var invpi: f32 = 0.31830988618; // 1/pi

  var o2 = o*o;
  var NdotL: f32 = mdot(N, L);
  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better

  var NdotV: f32 = mdot(N, V);
  var LdotV: f32 = mdot(L, V);

  var s: f32 = LdotV - NdotL*NdotV;
  var t: f32 = mix(1.0, max(NdotL, NdotV), step(0.0, s)); // Mix with step is the equivalent of an if statement
  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));
  A = invpi*(1 - A);
  var B: f32 = 0.45*(o2 / (o2 + 0.09));
  B = invpi*B;

  return p*NdotL*(A + B*(s/t));
}

// Fresnel portion of BRDF (IOR only, simplified)
fn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {
  var NdotV: f32 = mdot(V, N);
  var F0: f32 = (pow((ior - 1.0), 2.0) + k*k) / (pow((ior + 1.0), 2.0) + k*k); // This takes into account the roughness, which the other one does not
  return F0 + (1.0 - F0) * pow((1.0-NdotV), 5.0);
}

// Fresnel portion of BRDF (Color ior, better)
fn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {
  var NdotV: f32 = mdot(V, N);
  return F0 + (1.0 - F0) * pow((1-NdotV), 5.0);
}

// Normal portion of BRDF
// https://learnopengl.com/PBR/Theory
// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2
fn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {
  var a2: f32 = a*a;
  var NdotH = mdot(N, H);
  var NdotH2 = NdotH*NdotH;

  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;

  return a2 / max((pi*denom*denom), 0.000001);
}

// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent
fn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {
  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;

  var ggx1: f32 = trGGX(N + Op*s, H, a);
  var ggx2: f32 = trGGX(N - Op*s, H, a);
  return (0.5 * ggx1 + 0.5 * ggx2);
}

// Geometry portion of BRDF
fn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {
  var NdotX = cdot(N, X);
  return NdotX / max(0.000001, (NdotX*(1.0-k) + k));
}

fn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {
  var ggx1: f32 = min(1.0, schlickGGX(N, V, k));
  var ggx2: f32 = min(1.0, schlickGGX(N, L, k));
  return ggx1*ggx2;
}

// BRDF Combination
fn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {
  var num: f32 = D*F*G;
  var denom: f32 = 4*cdot(V, N)*cdot(L, N);

  return num / max(denom, 0.000001);
}

// Different lighting calculations for different light sources
fn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, mat: Material, light: DirectionalLight) -> PBRData {
  var L: vec3<f32> = normalize(light.direction); // Light Vector
  var H: vec3<f32> = normalize(L + V); // Halfway Vector

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L); // Fresnel term is replaced with 1 because it is added later
  var incoming: vec3<f32> = light.color;
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5);

  var specular: vec3<f32> = brdf * incoming * angle;
  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate
  // control property for the diffuse vs specular roughness
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

fn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: PointLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V);
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0;

  var D: f32 = trGGX(N, H, alpha); // Distribution
  var F: f32 = schlickFresnelIOR(V, N, mat.ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);
  var incoming: vec3<f32> = light.color * (1.0 / (dist * dist));
  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);
  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights
fn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, mat: Material, light: SpotLight) -> PBRData {
  var L: vec3<f32> = normalize(light.position - fragPos);
  var H: vec3<f32> = normalize(L + V); // Halfway Vector
  var dist = distance(light.position, fragPos);

  var alpha = mat.roughness * mat.roughness;
  var k: f32 = alpha * alpha / 2.0; // could also be pow(alpha + 1.0, 2) / 8

  var D: f32 = trGGX(N, H, alpha); // Distribution
  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel
  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry

  var brdf: f32 = cookTorrance(D, 1.0, G, N, V, L);

  var theta: f32 = mdot(normalize(light.direction), L);
  var epsilon: f32 = light.cones.x - light.cones.y;
  var intensity: f32 = (theta - light.cones.y) / epsilon;
  intensity = clamp(intensity, 0.0, 1.0);
  intensity /= dist * dist;

  var incoming: vec3<f32> = light.color * intensity;

  var angle: f32 = mdot(L, N);
  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" between light sources

  var specular: vec3<f32> = brdf * incoming * angle;
  var diffuse: vec3<f32> = incoming * fujiiOrenNayar(mat.base, mat.roughness, N, L, V);

  // Stores the specular and diffuse separately to allow for finer post processing
  // Could also be done (propably more properly) with a struct
  var out = PBRData(diffuse, specular);

  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)
}

// Environment mapping stuff
// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point
fn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {
  var tau: f32 = 6.28318530718;
  var out: vec2<f32> = vec2<f32>(0.0);

  out.x = atan2(dir.z, dir.x) / tau;
  out.x += 0.5;

  var phix: f32 = length(vec2(dir.x, dir.z));
  out.y = atan2(dir.y, phix) / pi + 0.5;

  return out;
}

//VTK::Renderer::Dec

//VTK::Color::Dec

//VTK::TCoord::Dec

// optional surface normal declaration
//VTK::Normal::Dec

//VTK::Select::Dec

//VTK::RenderEncoder::Dec

//VTK::Mapper::Dec

//VTK::IOStructs::Dec

@fragment
fn main(
//VTK::IOStructs::Input
)
//VTK::IOStructs::Output
{
  var output : fragmentOutput;

  // Temporary ambient, diffuse, and opacity
  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;
  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;
  var opacity: f32 = mapperUBO.Opacity;
  var ior: f32 = mapperUBO.BaseIOR;

  // This should be declared somewhere else
  var _diffuseMap: vec4<f32> = vec4<f32>(1.0);
  var _roughnessMap: vec4<f32> = vec4<f32>(1.0);
  var _metallicMap: vec4<f32> = vec4<f32>(1.0);
  var _normalMap: vec4<f32> = vec4<f32>(0.0, 0.0, 1.0, 0.0); // normal map was setting off the normal vector detection in fragment
  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1.);
  var _emissionMap: vec4<f32> = vec4<f32>(0.);

  //VTK::Color::Impl

  //VTK::TCoord::Impl

  //VTK::Normal::Impl

  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);

  //VTK::Light::Impl

  //VTK::Select::Impl

  // Use texture alpha for transparency
  computedColor.a = mapperUBO.Opacity * _diffuseMap.a;
  if (computedColor.a == 0.0) { discard; };

  //VTK::Position::Impl

  //VTK::RenderEncoder::Impl

  return output;
}
`;function FS(t){return t.indexOf("edge")>=0}function $H(t,e){e.classHierarchy.push("vtkWebGPUCellArrayMapper"),t.buildPass=n=>{n&&(e.is2D?(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.forceZValue=!0):(e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.forceZValue=!1),e.coordinateSystem=e.WebGPUActor.getRenderable().getCoordinateSystem(),e.useRendererMatrix=e.coordinateSystem!==GH.DISPLAY,e.WebGPURenderer=e.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.device=e.WebGPURenderWindow.getDevice())},t.translucentPass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.opaquePass=n=>{n&&(t.prepareToDraw(e.WebGPURenderer.getRenderEncoder()),e.renderEncoder.registerDrawCallback(e.pipeline,t.draw))},t.updateUBO=()=>{const r=e.WebGPUActor.getRenderable().getProperty(),s=e.UBO.getSendTime();if(t.getMTime()<=s&&r.getMTime()<=s&&e.renderable.getMTime()<=s)return;const i=e.WebGPUActor.getKeyMatrices(e.WebGPURenderer);if(e.UBO.setArray("BCWCMatrix",i.bcwc),e.UBO.setArray("BCSCMatrix",i.bcsc),e.UBO.setArray("MCWCNormals",i.normalMatrix),e.is2D){const l=r.getDisplayLocation?.()??US.BACKGROUND;e.UBO.setValue("ZValue",l===US.FOREGROUND?1:0);const f=r.getColorByReference();e.UBO.setValue("AmbientIntensity",1),e.UBO.setArray("DiffuseColor",[...f,1]),e.UBO.setValue("DiffuseIntensity",0),e.UBO.setValue("SpecularIntensity",0)}else e.UBO.setValue("AmbientIntensity",r.getAmbient()),e.UBO.setArray("AmbientColor",[...r.getAmbientColorByReference(),1]),e.UBO.setValue("DiffuseIntensity",r.getDiffuse()),e.UBO.setArray("DiffuseColor",[...r.getDiffuseColorByReference(),1]),e.UBO.setValue("Roughness",r.getRoughness()),e.UBO.setValue("BaseIOR",r.getBaseIOR()),e.UBO.setValue("Metallic",r.getMetallic()),e.UBO.setValue("NormalStrength",r.getNormalStrength()),e.UBO.setValue("Emission",r.getEmission()),e.UBO.setValue("SpecularIntensity",r.getSpecular()),r.getSpecularColorByReference()&&e.UBO.setArray("SpecularColor",[...r.getSpecularColorByReference(),1]);const c=r.getEdgeColorByReference?.();c&&e.UBO.setArray("EdgeColor",[...c,1]),e.UBO.setValue("LineWidth",r.getLineWidth()),e.UBO.setValue("Opacity",r.getOpacity()),e.UBO.setValue("PropID",e.WebGPUActor.getPropID()),e.UBO.sendIfNeeded(e.WebGPURenderWindow.getDevice())},t.haveWideLines=()=>{const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();return n.getProperty().getLineWidth()<=1||e.primitiveType===Xt.Verts?!1:e.primitiveType===Xt.Triangles||e.primitiveType===Xt.TriangleStrips?r===Cu.WIREFRAME:!0},t.replaceShaderPosition=(n,r,s)=>{const i=r.getShaderDescription("vertex");i.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),i.hasOutput("vertexVC")||i.addOutput("vec4<f32>","vertexVC");let c=i.getCode();e.useRendererMatrix?(c=Ye.substitute(c,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,e.forceZValue&&(c=Ye.substitute(c,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(c=Ye.substitute(c,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,e.forceZValue&&(c=Ye.substitute(c,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),t.haveWideLines()&&(i.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),c=Ye.substitute(c,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),c=Ye.substitute(c,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,i.setCode(c)},e.shaderReplacements.set("replaceShaderPosition",t.replaceShaderPosition),t.replaceShaderNormal=(n,r,s)=>{const i=s.getBuffer("normalMC"),c=e.WebGPUActor.getRenderable();if(i){const l=r.getShaderDescription("vertex");l.hasOutput("normalVC")||l.addOutput("vec3<f32>","normalVC",i.getArrayInformation()[0].interpolation),l.hasOutput("tangentVC")||l.addOutput("vec3<f32>","tangentVC",i.getArrayInformation()[0].interpolation),l.hasOutput("bitangentVC")||l.addOutput("vec3<f32>","bitangentVC",i.getArrayInformation()[0].interpolation);let f=l.getCode();f=Ye.substitute(f,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,l.setCode(f);const g=r.getShaderDescription("fragment");f=g.getCode(),c.getProperty().getNormalTexture()?f=Ye.substitute(f,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:f=Ye.substitute(f,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,g.setCode(f)}},e.shaderReplacements.set("replaceShaderNormal",t.replaceShaderNormal),t.replaceShaderLight=(n,r,s)=>{if(n.includes("sel"))return;const i=r.getShaderDescription("vertex");i.hasOutput("vertexVC")||i.addOutput("vec4<f32>","vertexVC");const c=e.WebGPURenderer.getRenderable(),l=r.getShaderDescription("fragment");let f=l.getCode();if(f.includes("var normal:")&&e.useRendererMatrix&&!FS(n)&&!e.is2D&&!n.includes("sel")){const g=["  let fragPos = vec3<f32>(input.vertexVC.xyz);","  let V = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  let baseColor = _diffuseMap.rgb * diffuseColor.rgb;","  let roughness = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  let metallic = mapperUBO.Metallic * _metallicMap.r;","  let alpha = roughness * roughness;","  let k = alpha * alpha / 2.0;","  var diffuse = vec3<f32>(0.);","  var specular = vec3<f32>(0.);","  let emission = _emissionMap.rgb * mapperUBO.Emission;","","  // Material struct","  let mat = Material(ior, roughness, metallic, baseColor);","","  {","    var i = 0;","    loop {","      if (!(i < rendererUBO.LightCount)) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let pointLight = PointLight(pos, color);","           let result = calcPointLight(normal, V, fragPos, mat, pointLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","          }","         // Directional light","         case 1 {","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let dirLight = DirectionalLight(dir, color);","           let result = calcDirectionalLight(normal, V, mat, dirLight); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         // Spot Light","         case 2 {","           let color = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           let pos = (rendererLightSSBO.values[i].LightPos).xyz;","           let dir = normalize((rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz);","           let cones = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           let spotLight = SpotLight(pos, dir, cones, color);","           let result = calcSpotLight(normal, V, fragPos, mat, spotLight);","           diffuse += max(vec3<f32>(0), result.diffuse);","           specular += max(vec3<f32>(0), result.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  let fresnel = min(1.0, schlickFresnelIOR(V, normal, ior, k)); // Fresnel","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  let fresnelMetallic = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  let kS = min(vec3<f32>(1.0), mix(vec3<f32>(fresnel), fresnelMetallic, metallic));","  let kD = (1.0 - kS) * (1.0 - metallic);","  let PBR = mapperUBO.DiffuseIntensity * kD * diffuse + kS * specular;","  computedColor = vec4<f32>(PBR + emission, mapperUBO.Opacity);"];c.getEnvironmentTexture()?.getImageLoaded()&&g.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  let diffuseIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  let diffuseCoords = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  let VreflN = normalize(reflect(-V, normal));","  let reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  let specularCoords = vecToRectCoord(reflectionIBLCoords);","  let diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  let level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  let specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  let specularIBLContribution = specularIBL.rgb * rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution * kS, 0);","  let diffuseIBLContribution = diffuseIBL.rgb * rendererUBO.BackgroundDiffuseStrength;","  computedColor += vec4<f32>(diffuseIBLContribution * baseColor * _ambientOcclusionMap.rgb * kD, 0);"),f=Ye.substitute(f,"//VTK::Light::Impl",g).result,l.setCode(f)}else f=Ye.substitute(f,"//VTK::Light::Impl",["  let diffuse = diffuseColor.rgb;","  let specular = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,l.setCode(f)},e.shaderReplacements.set("replaceShaderLight",t.replaceShaderLight),t.replaceShaderColor=(n,r,s)=>{if(FS(n)){const g=r.getShaderDescription("fragment");let p=g.getCode();p=Ye.substitute(p,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,g.setCode(p);return}const i=s.getBuffer("colorVI");if(!i)return;const c=r.getShaderDescription("vertex");c.addOutput("vec4<f32>","color",i.getArrayInformation()[0].interpolation);let l=c.getCode();l=Ye.substitute(l,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,c.setCode(l);const f=r.getShaderDescription("fragment");l=f.getCode(),l=Ye.substitute(l,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,f.setCode(l)},e.shaderReplacements.set("replaceShaderColor",t.replaceShaderColor),t.replaceShaderTCoord=(n,r,s)=>{if(!s.hasAttribute("tcoord"))return;const i=r.getShaderDescription("vertex"),c=s.getBuffer("tcoord"),l=Ft.getNumberOfComponentsFromBufferFormat(c.getArrayInformation()[0].format);let f=i.getCode();i.addOutput(`vec${l}<f32>`,"tcoordVS"),f=Ye.substitute(f,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,i.setCode(f);const g=r.getShaderDescription("fragment");f=g.getCode();const p=e.WebGPUActor.getRenderable(),h=p.getProperty(),y=b=>b?b.getDimensionality()===l:!1,v=[],E=h.getDiffuseTexture?.();(E?.getImageLoaded()||p.getTextures()[0]||e.colorTexture)&&(y(E)||y(p.getTextures()[0])||y(e.colorTexture))&&v.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);");const x=h.getORMTexture?.(),T=h.getRMTexture?.(),w=h.getRoughnessTexture?.(),D=h.getMetallicTexture?.(),M=h.getAmbientOcclusionTexture?.(),O=h.getEmissionTexture?.(),R=h.getNormalTexture?.();x?.getImageLoaded()?y(x)&&v.push("_ambientOcclusionMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).rrra;","_roughnessMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(ORMTexture, ORMTextureSampler, input.tcoordVS).bbba;"):T?.getImageLoaded()?y(T)&&v.push("_roughnessMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).ggga;","_metallicMap = textureSample(RMTexture, RMTextureSampler, input.tcoordVS).bbba;"):(w?.getImageLoaded()&&y(w)&&v.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS).ggga;"),D?.getImageLoaded()&&y(D)&&v.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS).bbba;"),M?.getImageLoaded()&&y(M)&&v.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS).rrra;")),O?.getImageLoaded()&&y(O)&&v.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),R?.getImageLoaded()&&y(R)&&v.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),f=Ye.substitute(f,"//VTK::TCoord::Impl",v).result,g.setCode(f)},e.shaderReplacements.set("replaceShaderTCoord",t.replaceShaderTCoord),t.replaceShaderSelect=(n,r,s)=>{if(n.includes("sel")){const i=r.getShaderDescription("fragment");let c=i.getCode();c=Ye.substitute(c,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,i.setCode(c)}},e.shaderReplacements.set("replaceShaderSelect",t.replaceShaderSelect),t.getUsage=(n,r)=>n===Cu.POINTS||r===Xt.Points?Dt.Verts:r===Xt.Lines?Dt.Lines:n===Cu.WIREFRAME?r===Xt.Triangles?Dt.LinesFromTriangles:Dt.LinesFromStrips:r===Xt.Triangles?Dt.Triangles:r===Xt.TriangleStrips?Dt.Strips:r===Xt.TriangleEdges?Dt.LinesFromTriangles:Dt.LinesFromStrips,t.getHashFromUsage=n=>`pt${n}`,t.getTopologyFromUsage=n=>{switch(n){case Dt.Triangles:return"triangle-list";case Dt.Verts:return"point-list";case Dt.Lines:default:return"line-list"}},t.buildVertexInput=()=>{const n=e.currentInput,r=e.cellArray,s=e.primitiveType;let c=e.WebGPUActor.getRenderable().getProperty().getRepresentation();const l=e.WebGPURenderWindow.getDevice();let f=!1;s===Xt.TriangleEdges&&(f=!0,c=Cu.WIREFRAME);const g=e.vertexInput,p=n.getPoints();let h=null;if(r?(h=l.getBufferManager().getBuffer({hash:`R${c}P${s}${r.getMTime()}`,usage:Dt.Index,cells:r,numberOfPoints:p.getNumberOfPoints(),primitiveType:s,representation:c}),g.setIndexBuffer(h)):g.setIndexBuffer(null),p){const x=e.WebGPUActor.getBufferShift(e.WebGPURenderer);g.addBuffer(l.getBufferManager().getBuffer({hash:`${p.getMTime()}I${h?.getMTime?.()??0}${x.join()}float32x4`,usage:Dt.PointArray,format:"float32x4",dataArray:p,indexBuffer:h,shift:x,packExtra:!0}),["vertexBC"])}else g.removeBufferIfPresent("vertexBC");const y=t.getUsage(c,s);if(e._usesCellNormals=!1,!e.is2D&&(y===Dt.Triangles||y===Dt.Strips)){const x=n.getPointData().getNormals(),T={format:"snorm8x4",indexBuffer:h,packExtra:!0,shift:0,scale:127};x?(T.hash=`${x.getMTime()}I${h.getMTime()}snorm8x4`,T.dataArray=x,T.usage=Dt.PointArray,g.addBuffer(l.getBufferManager().getBuffer(T),["normalMC"])):s===Xt.Triangles?(e._usesCellNormals=!0,T.hash=`PFN${p.getMTime()}I${h.getMTime()}snorm8x4`,T.dataArray=p,T.cells=r,T.usage=Dt.NormalsFromPoints,g.addBuffer(l.getBufferManager().getBuffer(T),["normalMC"])):g.removeBufferIfPresent("normalMC")}else g.removeBufferIfPresent("normalMC");let v=!1;if(e.renderable.getScalarVisibility()){const x=e.renderable.getColorMapColors();if(x&&!f){const T=e.renderable.getScalarMode(),w=(T===Eu.USE_CELL_DATA||T===Eu.USE_CELL_FIELD_DATA||T===Eu.USE_FIELD_DATA||!n.getPointData().getScalars())&&T!==Eu.USE_POINT_FIELD_DATA&&x;g.addBuffer(l.getBufferManager().getBuffer({usage:Dt.PointArray,format:"unorm8x4",hash:`${w}${x.getMTime()}I${h.getMTime()}unorm8x4`,dataArray:x,indexBuffer:h,cellData:w,cellOffset:0}),["colorVI"]),v=!0}}v||g.removeBufferIfPresent("colorVI");let E=null;e.renderable.getInterpolateScalarsBeforeMapping?.()&&e.renderable.getColorCoordinates()?E=e.renderable.getColorCoordinates():E=n.getPointData().getTCoords(),E&&!f?g.addBuffer(l.getBufferManager().getBufferForPointArray(E,g.getIndexBuffer()),["tcoord"]):g.removeBufferIfPresent("tcoord")},t.updateTextures=()=>{const n=[],r=[],s=e.renderable.getColorTextureMap?.();s&&!e.colorTexture&&(e.colorTexture=Sc.newInstance({label:"polyDataColor"})),s&&(e.colorTexture.setInputData(s),r.push(["DiffuseTexture",e.colorTexture]));const i=e.WebGPUActor.getRenderable(),c=e.WebGPURenderer.getRenderable();[["DiffuseTexture",i.getProperty().getDiffuseTexture?.()],["DiffuseTexture",i.getTextures()[0]],["DiffuseTexture",e.colorTexture],["ORMTexture",i.getProperty().getORMTexture?.()],["RMTexture",i.getProperty().getRMTexture?.()],["RoughnessTexture",i.getProperty().getRoughnessTexture?.()],["MetallicTexture",i.getProperty().getMetallicTexture?.()],["NormalTexture",i.getProperty().getNormalTexture?.()],["AmbientOcclusionTexture",i.getProperty().getAmbientOcclusionTexture?.()],["EmissionTexture",i.getProperty().getEmissionTexture?.()],["EnvironmentTexture",c.getEnvironmentTexture?.()]].forEach(f=>{let[g,p]=f;p&&((p.getInputData()||p.getJsImageData()||p.getCanvas()||p.getImageBitmap())&&r.push([g,p]),p.getImage()&&p.getImageLoaded()&&r.push([g,p]))}),r.forEach(f=>{let[g,p]=f;const h=e.device.getTextureManager().getTextureForVTKTexture(p,g);if(!h.getReady())return;let y=!1;for(let v=0;v<e.textures.length;++v)if(e.textures[v]===h){y=!0,n[v]=!0;break}if(!y){n[e.textures.length]=!0;const v=h.createView(g);e.textures.push(h),e.textureViews.push(v);const E=p.getInterpolate()?"linear":"nearest";let x=null;p.getEdgeClamp()&&p.getRepeat()?x="mirror-repeat":p.getEdgeClamp()?x="clamp-to-edge":p.getRepeat()&&(x="repeat");let T={addressModeU:x,addressModeV:x,addressModeW:x,minFilter:E,magFilter:E};g==="EnvironmentTexture"&&(T={addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:E,magFilter:E,mipmapFilter:"linear"}),v.addSampler(e.device,T)}});for(let f=e.textures.length-1;f>=0;f--)n[f]||(e.textures.splice(f,1),e.textureViews.splice(f,1))},t.computePipelineHash=()=>{let n=`pd${e.useRendererMatrix?"r":""}${e.forceZValue?"z":""}`;if(e.primitiveType===Xt.TriangleEdges||e.primitiveType===Xt.TriangleStripEdges)n+="edge";else{if(e.vertexInput.hasAttribute("normalMC")&&(n+="n"),e.vertexInput.hasAttribute("colorVI")&&(n+="c"),e.vertexInput.hasAttribute("tcoord")){const s=e.vertexInput.getBuffer("tcoord"),i=Ft.getNumberOfComponentsFromBufferFormat(s.getArrayInformation()[0].format);n+=`t${i}`}e.textures.length&&(n+=`tx${e.textures.length}`)}e._usesCellNormals&&(n+="cn"),e.SSBO&&(n+="ssbo");const r=t.getHashFromUsage(e.usage);n+=r,n+=e.renderEncoder.getPipelineHash(),e.pipelineHash=n},t.updateBuffers=()=>{e.primitiveType!==Xt.TriangleEdges&&e.primitiveType!==Xt.TriangleStripEdges&&t.updateTextures();const n=e.WebGPUActor.getRenderable(),r=n.getProperty().getRepresentation();e.usage=t.getUsage(r,e.primitiveType),t.buildVertexInput();const s=e.vertexInput.getBuffer("vertexBC");if(t.setNumberOfVertices(s.getSizeInBytes()/s.getStrideInBytes()),t.setTopology(t.getTopologyFromUsage(e.usage)),t.updateUBO(),t.haveWideLines()){const i=n.getProperty();t.setNumberOfInstances(Math.ceil(i.getLineWidth()*2))}else t.setNumberOfInstances(1)}}const HH={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function mO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,HH,n),hO.extend(t,e,n),e.fragmentShaderTemplate=AH,e.vertexShaderTemplate=zH,e._tmpMat3=Na(new Float64Array(9)),e._tmpMat4=Ve(new Float64Array(16)),e.UBO=ac.newInstance({label:"mapperUBO"}),e.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),e.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),e.UBO.addEntry("MCWCNormals","mat4x4<f32>"),e.UBO.addEntry("AmbientColor","vec4<f32>"),e.UBO.addEntry("DiffuseColor","vec4<f32>"),e.UBO.addEntry("EdgeColor","vec4<f32>"),e.UBO.addEntry("SpecularColor","vec4<f32>"),e.UBO.addEntry("AmbientIntensity","f32"),e.UBO.addEntry("DiffuseIntensity","f32"),e.UBO.addEntry("Roughness","f32"),e.UBO.addEntry("Metallic","f32"),e.UBO.addEntry("Ambient","f32"),e.UBO.addEntry("Normal","f32"),e.UBO.addEntry("Emission","f32"),e.UBO.addEntry("NormalStrength","f32"),e.UBO.addEntry("BaseIOR","f32"),e.UBO.addEntry("SpecularIntensity","f32"),e.UBO.addEntry("LineWidth","f32"),e.UBO.addEntry("Opacity","f32"),e.UBO.addEntry("ZValue","f32"),e.UBO.addEntry("PropID","u32"),e.UBO.addEntry("ClipNear","f32"),e.UBO.addEntry("ClipFar","f32"),e.UBO.addEntry("Time","u32"),Gt(t,e,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),e.textures=[],$H(t,e)}const WH=et(mO,"vtkWebGPUCellArrayMapper");var TO={newInstance:WH,extend:mO};const{PrimitiveTypes:kn}=Fc;function KH(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper"),t.createCellArrayMapper=()=>TO.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{if(!n){we("No input!");return}const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],s=[];let i=0;for(let c=kn.Points;c<=kn.TriangleStrips;c++)if(r[c].getNumberOfValues()>0){e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const l=e.primitives[c];l.setCellArray(r[c]),l.setCurrentInput(n),l.setCellOffset(i),l.setPrimitiveType(c),l.setRenderable(e.renderable),i+=r[c].getNumberOfCells(),s.push(l)}else e.primitives[c]=null;if(e.WebGPUActor.getRenderable().getProperty().getEdgeVisibility()){if(r[kn.Triangles].getNumberOfValues()>0){const c=kn.TriangleEdges;e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const l=e.primitives[c];l.setCellArray(r[kn.Triangles]),l.setCurrentInput(n),l.setCellOffset(e.primitives[kn.Triangles].getCellOffset()),l.setPrimitiveType(c),l.setRenderable(e.renderable),s.push(l)}else e.primitives[kn.TriangleEdges]=null;if(r[kn.TriangleStrips].getNumberOfValues()>0){const c=kn.TriangleStripEdges;e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const l=e.primitives[c];l.setCellArray(r[kn.TriangleStrips]),l.setCurrentInput(n),l.setCellOffset(e.primitives[kn.TriangleStrips].getCellOffset()),l.setPrimitiveType(c),l.setRenderable(e.renderable),s.push(l)}else e.primitives[kn.TriangleStripEdges]=null}t.prepareNodes(),t.addMissingChildren(s),t.removeUnusedNodes()}}const XH={primitives:null};function YH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XH,n),ft.extend(t,e,n),e.primitives=[],KH(t,e)}const qH=et(YH,"vtkWebGPUPolyDataMapper");jr("vtkMapper",qH);const{PrimitiveTypes:jS}=Fc;function ZH(t,e){e.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),t.createCellArrayMapper=()=>TO.newInstance(),t.buildPass=n=>{if(n){e.WebGPUActor=t.getFirstAncestorOfType("vtkWebGPUActor2D"),e.renderable.getStatic()||e.renderable.update();const r=e.renderable.getInputData();e.renderable.mapScalars(r,1),t.updateCellArrayMappers(r)}},t.updateCellArrayMappers=n=>{const r=[n.getVerts(),n.getLines(),n.getPolys(),n.getStrips()],s=[];let i=0;for(let c=jS.Points;c<=jS.Triangles;c++)if(r[c].getNumberOfValues()>0){e.primitives[c]||(e.primitives[c]=t.createCellArrayMapper());const l=e.primitives[c];l.setCellArray(r[c]),l.setCurrentInput(n),l.setCellOffset(i),l.setPrimitiveType(c),l.setRenderable(e.renderable),l.setIs2D(!0),i+=r[c].getNumberOfCells(),s.push(l)}else e.primitives[c]=null;t.prepareNodes(),t.addMissingChildren(s),t.removeUnusedNodes()}}function QH(t){return{primitives:[],...t}}function PH(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,QH(n)),ft.extend(t,e,n),e.primitives=[],ZH(t,e)}const JH=et(PH,"vtkWebGPUPolyDataMapper2D");jr("vtkMapper2D",JH);function IH(t,e){e.classHierarchy.push("vtkWebGPUScalarBarActor"),t.buildPass=n=>{n&&(e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(n,r)=>{if(n){const s=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,i=e.WebGPURenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],s,e.WebGPURenderWindow.getRenderable())}}}const e9={};function t9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e9,n),ft.extend(t,e,n),e.scalarBarActorHelper=rO.newScalarBarActorHelper(),IH(t,e)}const n9=et(t9,"vtkWebGPUScalarBarActor");jr("vtkScalarBarActor",n9);function r9(t,e){e.classHierarchy.push("vtkWebGPUSampler"),t.create=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.device=n,e.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",e.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",e.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",e.options.magFilter=r.magFilter?r.magFilter:"nearest",e.options.minFilter=r.minFilter?r.minFilter:"nearest",e.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",e.options.label=e.label,e.handle=e.device.getHandle().createSampler(e.options),e.bindGroupTime.modified()},t.getShaderCode=(n,r)=>`@binding(${n}) @group(${r}) var ${e.label}: sampler;`,t.getBindGroupEntry=()=>({resource:e.handle})}const a9={device:null,handle:null,label:null,options:null};function SO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,a9,n),V.obj(t,e),e.options={},e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),V.get(t,e,["bindGroupTime","handle","options"]),V.setGet(t,e,["bindGroupLayoutEntry","device","label"]),r9(t,e)}const s9=V.newInstance(SO);var i9={newInstance:s9,extend:SO};function o9(t,e){e.classHierarchy.push("vtkWebGPUTextureView"),t.create=(n,r)=>{e.texture=n,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const s=Ft.getDetailsFromTextureFormat(e.texture.getFormat());e.bindGroupLayoutEntry.texture.sampleType=s.sampleType},t.createFromTextureHandle=(n,r)=>{e.texture=null,e.options=r,e.options.dimension=e.options.dimension||"2d",e.options.label=e.label,e.textureHandle=n,e.handle=e.textureHandle.createView(e.options),e.bindGroupLayoutEntry.texture.viewDimension=e.options.dimension;const s=Ft.getDetailsFromTextureFormat(r.format);e.bindGroupLayoutEntry.texture.sampleType=s.sampleType,e.bindGroupTime.modified()},t.getBindGroupEntry=()=>({resource:t.getHandle()}),t.getShaderCode=(n,r)=>{let s="f32";e.bindGroupLayoutEntry.texture.sampleType==="sint"?s="i32":e.bindGroupLayoutEntry.texture.sampleType==="uint"&&(s="u32");let i=`@binding(${n}) @group(${r}) var ${e.label}: texture_${e.options.dimension}<${s}>;`;return e.bindGroupLayoutEntry.texture.sampleType==="depth"&&(i=`@binding(${n}) @group(${r}) var ${e.label}: texture_depth_${e.options.dimension};`),i},t.addSampler=(n,r)=>{const s=i9.newInstance({label:`${e.label}Sampler`});s.create(n,r),t.setSampler(s)},t.getBindGroupTime=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.bindGroupTime),t.getHandle=()=>(e.texture&&e.texture.getHandle()!==e.textureHandle&&(e.textureHandle=e.texture.getHandle(),e.handle=e.textureHandle.createView(e.options),e.bindGroupTime.modified()),e.handle)}const c9={texture:null,handle:null,sampler:null,label:null};function CO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c9,n),V.obj(t,e),e.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},e.bindGroupTime={},V.obj(e.bindGroupTime,{mtime:0}),V.get(t,e,["bindGroupTime","texture"]),V.setGet(t,e,["bindGroupLayoutEntry","label","sampler"]),o9(t,e)}const l9=V.newInstance(CO);var u9={newInstance:l9,extend:CO};function f9(t,e){e.classHierarchy.push("vtkWebGPUTexture"),t.create=(n,r)=>{e.device=n,e.width=r.width,e.height=r.height,e.depth=r.depth?r.depth:1;const s=e.depth===1?"2d":"3d";e.format=r.format?r.format:"rgba8unorm",e.mipLevel=r.mipLevel?r.mipLevel:0,e.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label,dimension:s,mipLevelCount:e.mipLevel+1})},t.assignFromHandle=(n,r,s)=>{e.device=n,e.handle=r,e.width=s.width,e.height=s.height,e.depth=s.depth?s.depth:1,e.format=s.format?s.format:"rgba8unorm",e.usage=s.usage?s.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},t.writeImageData=n=>{let r=[];const s=h=>{e.device.getHandle().queue.copyExternalImageToTexture({source:h,flipY:n.flip},{texture:e.handle,premultipliedAlpha:!0,mipLevel:0,origin:{x:0,y:0,z:0}},[h.width,h.height,e.depth]),t.getDimensionality()!==3&&e.mipLevel>0&&Sc.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0};if(n.canvas){s(n.canvas);return}if(n.imageBitmap){n.width=n.imageBitmap.width,n.height=n.imageBitmap.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,s(n.imageBitmap);return}if(n.jsImageData){n.width=n.jsImageData.width,n.height=n.jsImageData.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,s(n.jsImageData);return}if(n.image){n.width=n.image.width,n.height=n.image.height,n.depth=1,n.format="rgba8unorm",n.flip=!0,s(n.image);return}const i=Ft.getDetailsFromTextureFormat(e.format);let c=e.width*i.stride;const l=(h,y,v)=>{const E=i.elementSize===2&&i.sampleType==="float",x=h.BYTES_PER_ELEMENT,T=h.length/(y*v)*x;if(!E&&T%256===0)return[h,T];const w=T/x,D=i.elementSize,M=256*Math.floor((w*D+255)/256),O=M/D,R=V.newTypedArray(E?"Uint16Array":h.constructor.name,O*y*v),b=y*v;if(E)for(let L=0;L<b;L++){const k=L*w,B=L*O;for(let j=0;j<w;j++)R[B+j]=hs.toHalf(h[k+j])}else if(O===w)R.set(h);else for(let L=0;L<b;L++)R.set(h.subarray(L*w,(L+1)*w),L*O);return[R,M]};n.nativeArray&&(r=n.nativeArray);const f=t.getDimensionality()===3,g=l(r,e.height,f?e.depth:1);c=g[1];const p=g[0];e.device.getHandle().queue.writeTexture({texture:e.handle,mipLevel:0,origin:{x:0,y:0,z:0}},p,{offset:0,bytesPerRow:c,rowsPerImage:e.height},{width:e.width,height:e.height,depthOrArrayLayers:f?e.depth:1}),!f&&e.mipLevel>0&&Sc.generateMipmaps(e.device.getHandle(),e.handle,e.mipLevel+1),e.ready=!0},t.getScale=()=>{const n=Ft.getDetailsFromTextureFormat(e.format);return n.elementSize===2&&n.sampleType==="float"?1:255},t.getNumberOfComponents=()=>Ft.getDetailsFromTextureFormat(e.format).numComponents,t.getDimensionality=()=>{let n=0;return e.width>1&&n++,e.height>1&&n++,e.depth>1&&n++,n},t.resizeToMatch=n=>{(n.getWidth()!==e.width||n.getHeight()!==e.height||n.getDepth()!==e.depth)&&(e.width=n.getWidth(),e.height=n.getHeight(),e.depth=n.getDepth(),e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.resize=function(n,r){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;(n!==e.width||r!==e.height||s!==e.depth)&&(e.width=n,e.height=r,e.depth=s,e.handle=e.device.getHandle().createTexture({size:[e.width,e.height,e.depth],format:e.format,usage:e.usage,label:e.label}))},t.createView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.dimension||(r.dimension=e.depth===1?"2d":"3d");const s=u9.newInstance({label:n});return s.create(t,r),s}}const g9={device:null,handle:null,buffer:null,ready:!1,label:null};function h9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,g9,n),V.obj(t,e),V.get(t,e,["handle","ready","width","height","depth","format","usage"]),V.setGet(t,e,["device","label"]),f9(t,e)}V.newInstance(h9);function d9(t,e){e.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),t.opaquePass=(n,r)=>{e.WebGPURenderer=t.getFirstAncestorOfType("vtkWebGPURenderer"),e.WebGPURenderWindow=e.WebGPURenderer.getParent();const s=e.WebGPURenderer.getAspectRatio(),i=e.WebGPURenderer?e.WebGPURenderer.getRenderable().getActiveCamera():null,c=e.WebGPURenderer.getTiledSizeAndOrigin(),l=null;e.renderable.getUseZValues(),e.renderable.invokeCallback(e.renderable.getInputData(),i,s,c,l)}}const p9={};function y9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p9,n),ft.extend(t,e,n),d9(t,e)}const x9=V.newInstance(y9,"vtkWebGPUPixelSpaceCallbackMapper");jr("vtkPixelSpaceCallbackMapper",x9);const v9="WebGL",vf=Object.create(null);function EO(t,e){vf[t]=e}function m9(){return Object.keys(vf)}function wO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vf[t]&&vf[t](e)}function T9(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=n=>{t.hasRenderer(n)||(n.setRenderWindow(t),e.renderers.push(n),t.modified())},t.removeRenderer=n=>{e.renderers=e.renderers.filter(r=>r!==n),t.modified()},t.hasRenderer=n=>e.renderers.indexOf(n)!==-1,t.newAPISpecificView=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return wO(n||e.defaultViewAPI,r)},t.addView=n=>{t.hasView(n)||(n.setRenderable(t),e._views.push(n),t.modified())},t.removeView=n=>{e._views=e._views.filter(r=>r!==n),t.modified()},t.hasView=n=>e._views.indexOf(n)!==-1,t.preRender=()=>{e.renderers.forEach(n=>{n.isActiveCameraCreated()||n.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(n=>n.traverseAllPasses())},t.getStatistics=()=>{const n={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(r=>{r.getGraphicsMemoryInfo&&(n.gpuMemoryMB+=r.getGraphicsMemoryInfo()/1e6)}),e.renderers.forEach(r=>{const s=r.getViewProps(),i=e._views[0].getViewNodeFor(r);s.forEach(c=>{if(c.getVisibility()){n.propCount+=1;const l=c.getMapper&&c.getMapper();if(l&&l.getPrimitiveCount){const f=i.getViewNodeFor(l);if(f){f.getAllocatedGPUMemoryInBytes&&(n.gpuMemoryMB+=f.getAllocatedGPUMemoryInBytes()/1e6);const g=l.getPrimitiveCount();Object.keys(g).forEach(p=>{n[p]||(n[p]=0),n[p]+=g[p]})}}}else n.invisiblePropCount+=1})}),n.str=Object.keys(n).map(r=>`${r}: ${n[r]}`).join(`
`),n},t.captureImages=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return V.setImmediate(t.render),e._views.map(s=>s.captureNextImage?s.captureNextImage(n,r):void 0).filter(s=>!!s)},t.addRenderWindow=n=>e.childRenderWindows.includes(n)?!1:(e.childRenderWindows.push(n),t.modified(),!0),t.removeRenderWindow=n=>{const r=e.childRenderWindows.findIndex(s=>s===n);return r<0?!1:(e.childRenderWindows.splice(r,1),t.modified(),!0)}}const S9={defaultViewAPI:v9,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1,childRenderWindows:[]};function MO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S9,n),V.obj(t,e),V.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),V.get(t,e,["neverRendered"]),V.getArray(t,e,["renderers","childRenderWindows"]),V.moveToProtected(t,e,["views"]),V.event(t,e,"completion"),T9(t,e)}const C9=V.newInstance(MO,"vtkRenderWindow");var E9={newInstance:C9,extend:MO,registerViewConstructor:EO,listViewAPIs:m9,newAPISpecificView:wO};const{vtkDebugMacro:wu}=V;function w9(t,e){e.classHierarchy.push("vtkCamera");const n=new Float64Array(3),r=new Float64Array([0,0,-1]),s=new Float64Array([0,1,0]),i=Ve(new Float64Array(16)),c=Ve(new Float64Array(16)),l=new Float64Array(3),f=new Float64Array(3),g=new Float64Array(3),p=Ve(new Float64Array(16)),h=Ve(new Float64Array(16)),y=new Float64Array(3),v=new Float64Array(3);function E(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const x=t.getViewMatrix();e.viewUp[0]=x[4],e.viewUp[1]=x[5],e.viewUp[2]=x[6],t.modified()},t.setPosition=(x,T,w)=>{x===e.position[0]&&T===e.position[1]&&w===e.position[2]||(e.position[0]=x,e.position[1]=T,e.position[2]=w,t.computeDistance(),t.modified())},t.setFocalPoint=(x,T,w)=>{x===e.focalPoint[0]&&T===e.focalPoint[1]&&w===e.focalPoint[2]||(e.focalPoint[0]=x,e.focalPoint[1]=T,e.focalPoint[2]=w,t.computeDistance(),t.modified())},t.setDistance=x=>{if(e.distance===x)return;e.distance=x,e.distance<1e-20&&(e.distance=1e-20,wu("Distance is set to minimum."));const T=e.directionOfProjection;e.focalPoint[0]=e.position[0]+T[0]*e.distance,e.focalPoint[1]=e.position[1]+T[1]*e.distance,e.focalPoint[2]=e.position[2]+T[2]*e.distance,t.modified()},t.computeDistance=()=>{const x=e.focalPoint[0]-e.position[0],T=e.focalPoint[1]-e.position[1],w=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(x*x+T*T+w*w),e.distance<1e-20){e.distance=1e-20,wu("Distance is set to minimum.");const D=e.directionOfProjection;e.focalPoint[0]=e.position[0]+D[0]*e.distance,e.focalPoint[1]=e.position[1]+D[1]*e.distance,e.focalPoint[2]=e.position[2]+D[2]*e.distance}e.directionOfProjection[0]=x/e.distance,e.directionOfProjection[1]=T/e.distance,e.directionOfProjection[2]=w/e.distance,E()},t.dolly=x=>{if(x<=0)return;const T=e.distance/x;t.setPosition(e.focalPoint[0]-T*e.directionOfProjection[0],e.focalPoint[1]-T*e.directionOfProjection[1],e.focalPoint[2]-T*e.directionOfProjection[2])},t.roll=x=>{const T=e.position,w=e.focalPoint,D=e.viewUp,M=new Float64Array([D[0],D[1],D[2],0]);Ve(p);const O=new Float64Array([w[0]-T[0],w[1]-T[1],w[2]-T[2]]);ar(p,p,ct(x),O),_o(M,M,p),e.viewUp[0]=M[0],e.viewUp[1]=M[1],e.viewUp[2]=M[2],t.modified()},t.azimuth=x=>{const T=e.focalPoint;Ve(h),wt(h,h,T),ar(h,h,ct(x),e.viewUp),wt(h,h,[-T[0],-T[1],-T[2]]),$e(y,e.position,h),t.setPosition(y[0],y[1],y[2])},t.yaw=x=>{const T=e.position;Ve(h),wt(h,h,T),ar(h,h,ct(x),e.viewUp),wt(h,h,[-T[0],-T[1],-T[2]]),$e(v,e.focalPoint,h),t.setFocalPoint(v[0],v[1],v[2])},t.elevation=x=>{const T=e.focalPoint,w=t.getViewMatrix(),D=[-w[0],-w[1],-w[2]];Ve(h),wt(h,h,T),ar(h,h,ct(x),D),wt(h,h,[-T[0],-T[1],-T[2]]),$e(y,e.position,h),t.setPosition(y[0],y[1],y[2])},t.pitch=x=>{const T=e.position,w=t.getViewMatrix(),D=[w[0],w[1],w[2]];Ve(h),wt(h,h,T),ar(h,h,ct(x),D),wt(h,h,[-T[0],-T[1],-T[2]]),$e(v,e.focalPoint,h),t.setFocalPoint(...v)},t.zoom=x=>{x<=0||(e.parallelProjection?e.parallelScale/=x:e.viewAngle/=x,t.modified())},t.translate=(x,T,w)=>{const D=[x,T,w];bi(e.position,D,e.position),bi(e.focalPoint,D,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=x=>{const T=[...e.viewUp,1],w=[],D=[],M=[];T[0]+=e.position[0],T[1]+=e.position[1],T[2]+=e.position[2],_o(w,[...e.position,1],x),_o(D,[...e.focalPoint,1],x),_o(M,T,x),M[0]-=w[0],M[1]-=w[1],M[2]-=w[2],t.setPosition(...w.slice(0,3)),t.setFocalPoint(...D.slice(0,3)),t.setViewUp(...M.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=x=>{let T=x;T<1e-20&&(T=1e-20,wu("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+T)},t.setThicknessFromFocalPoint=x=>{let T=x;T<1e-20&&(T=1e-20,wu("Thickness is set to minimum.")),t.setClippingRange(e.distance-T/2,e.distance+T/2)},t.setRoll=x=>{},t.getRoll=()=>{},t.setObliqueAngles=(x,T)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Float64Array(24);const w=[[1,0,0,1],[-1,0,0,1],[0,1,0,1],[0,-1,0,1],[0,0,1,1],[0,0,-1,1]],D=t.getCompositeProjectionMatrix(x,-1,1);for(let M=0;M<6;M++)_o(w[M],w[M],D),sj(w[M]),T[4*M+0]=w[M][0],T[4*M+1]=w[M][1],T[4*M+2]=w[M][2],T[4*M+3]=w[M][3];return T},t.getCameraLightTransformMatrix=x=>($t(x,e.cameraLightTransform),x),t.computeCameraLightTransform=()=>{$t(i,t.getViewMatrix()),An(i,i),XE(c,[e.distance,e.distance,e.distance]),Zt(i,i,c),Ve(e.cameraLightTransform),wt(e.cameraLightTransform,i,[0,0,-1])},t.deepCopy=x=>{},t.physicalOrientationToWorldDirection=x=>{const T=rT(x[0],x[1],x[2],x[3]),w=ms(),D=rT(0,0,1,0);return yB(w,T),nT(D,T,D),nT(D,D,w),[D[0],D[1],D[2]]},t.getPhysicalToWorldMatrix=x=>{t.getWorldToPhysicalMatrix(x),An(x,x)},t.getWorldToPhysicalMatrix=x=>{Ve(x);const T=[3];Jt(e.physicalViewNorth,e.physicalViewUp,T),x[0]=T[0],x[1]=T[1],x[2]=T[2],x[4]=e.physicalViewUp[0],x[5]=e.physicalViewUp[1],x[6]=e.physicalViewUp[2],x[8]=-e.physicalViewNorth[0],x[9]=-e.physicalViewNorth[1],x[10]=-e.physicalViewNorth[2],Je(x,x),nf(l,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),hc(x,x,l),wt(x,x,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=x=>{An(i,x),$e(l,n,i),t.computeDistance();const T=e.distance;t.setPosition(l[0],l[1],l[2]),$e(f,r,i),Ea(f,f,l),dc(f,f),t.setDirectionOfProjection(f[0],f[1],f[2]),$e(g,s,i),Ea(g,g,l),dc(g,g),t.setViewUp(g[0],g[1],g[2]),t.setDistance(T)},t.computeViewParametersFromPhysicalMatrix=x=>{t.getWorldToPhysicalMatrix(i),Zt(i,x,i),t.computeViewParametersFromViewMatrix(i)},t.setModelTransformMatrix=x=>{e.modelTransformMatrix=x},t.getModelTransformMatrix=()=>e.modelTransformMatrix,t.setViewMatrix=x=>{e.viewMatrix=x,e.viewMatrix&&($t(i,e.viewMatrix),t.computeViewParametersFromViewMatrix(i),Je(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.modelTransformMatrix?(Zt(i,e.viewMatrix,e.modelTransformMatrix),i):e.viewMatrix;IE(i,e.position,e.focalPoint,e.viewUp),Je(i,i);const x=new Float64Array(16);return e.modelTransformMatrix?Zt(x,i,e.modelTransformMatrix):$t(x,i),x},t.setProjectionMatrix=x=>{e.projectionMatrix=x},t.getProjectionMatrix=(x,T,w)=>{const D=new Float64Array(16);if(Ve(D),e.projectionMatrix){const R=1/e.physicalScale;return nf(l,R,R,R),$t(D,e.projectionMatrix),hc(D,D,l),Je(D,D),D}Ve(i);const M=e.clippingRange[1]-e.clippingRange[0],O=[e.clippingRange[0]+(T+1)*M/2,e.clippingRange[0]+(w+1)*M/2];if(e.parallelProjection){const R=e.parallelScale*x,b=e.parallelScale,L=(e.windowCenter[0]-1)*R,k=(e.windowCenter[0]+1)*R,B=(e.windowCenter[1]-1)*b,j=(e.windowCenter[1]+1)*b;JE(i,L,k,B,j,O[0],O[1]),Je(i,i)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const R=Math.tan(ct(e.viewAngle)/2);let b,L;e.useHorizontalViewAngle===!0?(b=e.clippingRange[0]*R,L=e.clippingRange[0]*R/x):(b=e.clippingRange[0]*R*x,L=e.clippingRange[0]*R);const k=(e.windowCenter[0]-1)*b,B=(e.windowCenter[0]+1)*b,j=(e.windowCenter[1]-1)*L,z=(e.windowCenter[1]+1)*L,$=O[0],W=O[1];i[0]=2*$/(B-k),i[5]=2*$/(z-j),i[2]=(k+B)/(B-k),i[6]=(j+z)/(z-j),i[10]=-($+W)/(W-$),i[14]=-1,i[11]=-2*$*W/(W-$),i[15]=0}}return $t(D,i),D},t.getCompositeProjectionMatrix=(x,T,w)=>{const D=t.getViewMatrix(),M=t.getProjectionMatrix(x,T,w);return Zt(M,D,M),M},t.setDirectionOfProjection=(x,T,w)=>{if(e.directionOfProjection[0]===x&&e.directionOfProjection[1]===T&&e.directionOfProjection[2]===w)return;e.directionOfProjection[0]=x,e.directionOfProjection[1]=T,e.directionOfProjection[2]=w;const D=e.directionOfProjection;e.focalPoint[0]=e.position[0]+D[0]*e.distance,e.focalPoint[1]=e.position[1]+D[1]*e.distance,e.focalPoint[2]=e.position[2]+D[2]*e.distance,E()},t.setDeviceAngles=(x,T,w,D)=>{const M=[3];Jt(e.physicalViewNorth,e.physicalViewUp,M);const O=Ve(new Float64Array(16));ar(O,O,ct(x),e.physicalViewUp),ar(O,O,ct(T),M),ar(O,O,ct(w),e.physicalViewNorth),ar(O,O,ct(-D),e.physicalViewUp);const R=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),b=new Float64Array(e.physicalViewNorth);$e(R,R,O),$e(b,b,O),t.setDirectionOfProjection(R[0],R[1],R[2]),t.setViewUp(b[0],b[1],b[2]),t.modified()},t.setOrientationWXYZ=(x,T,w,D)=>{const M=Ve(new Float64Array(16));if(x!==0&&(T!==0||w!==0||D!==0)){const b=ct(x),L=ms();Up(L,[T,w,D],b),ec(M,L)}const O=new Float64Array(3);$e(O,[0,0,-1],M);const R=new Float64Array(3);$e(R,[0,1,0],M),t.setDirectionOfProjection(...O),t.setViewUp(...R),t.modified()},t.computeClippingRange=x=>{let T=null,w=null;T=e.viewPlaneNormal,w=e.position;const D=-T[0],M=-T[1],O=-T[2],R=-(D*w[0]+M*w[1]+O*w[2]),b=[D*x[0]+M*x[2]+O*x[4]+R,1e-18];for(let L=0;L<2;L++)for(let k=0;k<2;k++)for(let B=0;B<2;B++){const j=D*x[B]+M*x[2+k]+O*x[4+L]+R;b[0]=j<b[0]?j:b[0],b[1]=j>b[1]?j:b[1]}return b}}const M9={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,modelTransformMatrix:null,cameraLightTransform:Ef(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function bO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M9,n),V.obj(t,e),V.get(t,e,["distance"]),V.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),V.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),V.setGetArray(t,e,["clippingRange","windowCenter"],2),V.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),w9(t,e)}const b9=V.newInstance(bO,"vtkCamera");var O9={newInstance:b9,extend:bO};function D9(t,e){e.classHierarchy.push("vtkLight");const n=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?$e(n,e.position,e.transformMatrix):nf(n,e.position[0],e.position[1],e.position[2]),n),t.getTransformedFocalPoint=()=>(e.transformMatrix?$e(n,e.focalPoint,e.transformMatrix):nf(n,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),n),t.getDirection=()=>(e.directionMTime<e.mtime&&(Ld(e.direction,e.focalPoint,e.position),Sn(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=r=>{const s=new Float64Array(3);Ld(s,e.position,r),e.focalPoint=s},t.setDirectionAngle=(r,s)=>{const i=ct(r),c=ct(s);t.setPosition(Math.cos(i)*Math.sin(c),Math.sin(i),Math.cos(i)*Math.cos(c)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const R9={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function N9(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,R9,n),V.obj(t,e),V.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),V.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),D9(t,e)}const L9=V.newInstance(N9,"vtkLight");var V9={newInstance:L9};const{vtkErrorMacro:Yu}=V;function _9(t){return()=>Yu(`vtkViewport::${t} - NOT IMPLEMENTED`)}function k9(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=r=>e.props.includes(r),t.addViewProp=r=>{r&&!t.hasViewProp(r)&&e.props.push(r)},t.removeViewProp=r=>{const s=e.props.filter(i=>i!==r);e.props.length!==s.length&&(e.props=s)},t.removeAllViewProps=()=>{e.props=[]};function n(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];s.push(r);const i=r.getNestedProps();if(i&&i.length)for(let c=0;c<i.length;c++)n(i[c],s);return s}t.getViewPropsWithNestedProps=()=>{let r=[];e.actors2D=[];for(let s=0;s<e.props.length;s++){const i=e.props[s].getActors2D();i&&(!Array.isArray(i)||i.length>0)?e.actors2D=e.actors2D.concat(i):n(e.props[s],r)}return e.actors2D.sort((s,i)=>s.getLayerNumber()-i.getLayerNumber()),r=r.concat(e.actors2D),r},t.addActor2D=t.addViewProp,t.removeActor2D=r=>{t.removeViewProp(r)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(r=>{e.actors2D=e.actors2D.concat(r.getActors2D())}),e.actors2D),t.displayToView=()=>Yu("call displayToView on your view instead"),t.viewToDisplay=()=>Yu("callviewtodisplay on your view instead"),t.getSize=()=>Yu("call getSize on your View instead"),t.normalizedDisplayToProjection=(r,s,i)=>{const c=t.normalizedDisplayToNormalizedViewport(r,s,i);return t.normalizedViewportToProjection(c[0],c[1],c[2])},t.normalizedDisplayToNormalizedViewport=(r,s,i)=>{const c=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(r-e.viewport[0])/c[0],(s-e.viewport[1])/c[1],i]},t.normalizedViewportToProjection=(r,s,i)=>[r*2-1,s*2-1,i*2-1],t.projectionToNormalizedDisplay=(r,s,i)=>{const c=t.projectionToNormalizedViewport(r,s,i);return t.normalizedViewportToNormalizedDisplay(c[0],c[1],c[2])},t.normalizedViewportToNormalizedDisplay=(r,s,i)=>{const c=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[r*c[0]+e.viewport[0],s*c[1]+e.viewport[1],i]},t.projectionToNormalizedViewport=(r,s,i)=>[(r+1)*.5,(s+1)*.5,(i+1)*.5],t.PickPropFrom=_9("PickPropFrom")}const B9={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function OO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,B9,n),V.obj(t,e),V.event(t,e,"event"),V.setGetArray(t,e,["viewport"],4),V.setGetArray(t,e,["background","background2"],3),k9(t,e)}const U9=V.newInstance(OO,"vtkViewport");var F9={newInstance:U9,extend:OO};const{vtkDebugMacro:Fo,vtkErrorMacro:ma,vtkWarningMacro:j9}=fr;function GS(t){return()=>ma(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function G9(t,e){e.classHierarchy.push("vtkRenderer");const n={type:"ComputeVisiblePropBoundsEvent",renderer:t},r={type:"ResetCameraClippingRangeEvent",renderer:t},s={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(Fo("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const i=t.getActiveCameraAndResetIfCreated();e.lights.forEach(c=>{c.lightTypeIsSceneLight()||(c.lightTypeIsHeadLight()?(c.setPositionFrom(i.getPositionByReference()),c.setFocalPointFrom(i.getFocalPointByReference()),c.modified(i.getMTime())):c.lightTypeIsCameraLight()?c.setTransformMatrix(i.getCameraLightTransformMatrix(Ef())):ma("light has unknown light type",c.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=GS("allocateTime"),t.updateGeometry=GS("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=i=>{Fo(t.getClassName(),t,"setting Layer to ",i),e.layer!==i&&(e.layer=i,t.modified()),t.setPreserveColorBuffer(!!i)},t.setActiveCamera=i=>e.activeCamera===i?!1:(e.activeCamera=i,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:i}),!0),t.makeCamera=()=>{const i=O9.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:i}),i},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(i=>{e.actors=e.actors.concat(i.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=i=>{e.actors=e.actors.filter(c=>c!==i),t.removeViewProp(i),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(c=>{t.removeViewProp(c)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(i=>{e.volumes=e.volumes.concat(i.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=i=>{e.volumes=e.volumes.filter(c=>c!==i),t.removeViewProp(i),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(c=>{t.removeViewProp(c)}),e.volumes=[],t.modified()},t.hasLight=i=>e.lights.includes(i),t.addLight=i=>{i&&!t.hasLight(i)&&(e.lights.push(i),t.modified())},t.removeLight=i=>{e.lights=e.lights.filter(c=>c!==i),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=i=>{e.lights=i,t.modified()},t.makeLight=V9.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(i,c,l,f)=>{let g=t.normalizedDisplayToProjection(i,c,l);return g=t.projectionToView(g[0],g[1],g[2],f),t.viewToWorld(g[0],g[1],g[2])},t.worldToNormalizedDisplay=(i,c,l,f)=>{let g=t.worldToView(i,c,l);return g=t.viewToProjection(g[0],g[1],g[2],f),t.projectionToNormalizedDisplay(g[0],g[1],g[2])},t.viewToWorld=(i,c,l)=>{if(e.activeCamera===null)return ma("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const f=e.activeCamera.getViewMatrix();An(f,f),Je(f,f);const g=new Float64Array([i,c,l]);return $e(g,g,f),g},t.projectionToView=(i,c,l,f)=>{if(e.activeCamera===null)return ma("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(f,-1,1);An(g,g),Je(g,g);const p=new Float64Array([i,c,l]);return $e(p,p,g),p},t.worldToView=(i,c,l)=>{if(e.activeCamera===null)return ma("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const f=e.activeCamera.getViewMatrix();Je(f,f);const g=new Float64Array([i,c,l]);return $e(g,g,f),g},t.viewToProjection=(i,c,l,f)=>{if(e.activeCamera===null)return ma("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const g=e.activeCamera.getProjectionMatrix(f,-1,1);Je(g,g);const p=new Float64Array([i,c,l]);return $e(p,p,g),p},t.computeVisiblePropBounds=()=>{e.allBounds[0]=_e.INIT_BOUNDS[0],e.allBounds[1]=_e.INIT_BOUNDS[1],e.allBounds[2]=_e.INIT_BOUNDS[2],e.allBounds[3]=_e.INIT_BOUNDS[3],e.allBounds[4]=_e.INIT_BOUNDS[4],e.allBounds[5]=_e.INIT_BOUNDS[5];let i=!0;t.invokeEvent(n);for(let c=0;c<e.props.length;++c){const l=e.props[c];if(l.getVisibility()&&l.getUseBounds()){const f=l.getBounds();f&&Hu(f)&&(i=!1,f[0]<e.allBounds[0]&&(e.allBounds[0]=f[0]),f[1]>e.allBounds[1]&&(e.allBounds[1]=f[1]),f[2]<e.allBounds[2]&&(e.allBounds[2]=f[2]),f[3]>e.allBounds[3]&&(e.allBounds[3]=f[3]),f[4]<e.allBounds[4]&&(e.allBounds[4]=f[4]),f[5]>e.allBounds[5]&&(e.allBounds[5]=f[5]))}}return i&&(e1(e.allBounds),Fo("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const c=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),l=[0,0,0];if(!Hu(c))return Fo("Cannot reset camera!"),!1;let f=null;if(t.getActiveCamera())f=e.activeCamera.getViewPlaneNormal();else return ma("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),l[0]=(c[0]+c[1])/2,l[1]=(c[2]+c[3])/2,l[2]=(c[4]+c[5])/2;let g=c[1]-c[0],p=c[3]-c[2],h=c[5]-c[4];g*=g,p*=p,h*=h;let y=g+p+h;y=y===0?1:y,y=Math.sqrt(y)*.5;const v=ct(e.activeCamera.getViewAngle()),E=y,x=y/Math.sin(v*.5),T=e.activeCamera.getViewUp();return Math.abs(xe(T,f))>.999&&(j9("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-T[2],T[0],T[1])),e.activeCamera.setFocalPoint(l[0],l[1],l[2]),e.activeCamera.setPosition(l[0]+x*f[0],l[1]+x*f[1],l[2]+x*f[2]),t.resetCameraClippingRange(c),e.activeCamera.setParallelScale(E),e.activeCamera.setPhysicalScale(y),e.activeCamera.setPhysicalTranslation(-l[0],-l[1],-l[2]),t.invokeEvent(s),!0},t.resetCameraClippingRange=function(){const c=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!Hu(c))return Fo("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return ma("Trying to reset clipping range of non-existent camera"),!1;const l=e.activeCamera.computeClippingRange(c);let f=0;if(e.activeCamera.getParallelProjection())f=.2*e.activeCamera.getParallelScale();else{const g=ct(e.activeCamera.getViewAngle());f=.2*Math.tan(g/2)*l[1]}return l[1]-l[0]<f&&(f=f-l[1]+l[0],l[1]+=f/2,l[0]-=f/2),l[0]<0&&(l[0]=0),l[0]=.99*l[0]-(l[1]-l[0])*e.clippingRangeExpansion,l[1]=1.01*l[1]+(l[1]-l[0])*e.clippingRangeExpansion,l[0]=l[0]>=l[1]?.01*l[1]:l[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),l[0]<e.nearClippingPlaneTolerance*l[1]&&(l[0]=e.nearClippingPlaneTolerance*l[1]),e.activeCamera.setClippingRange(l[0],l[1]),t.invokeEvent(r),!1},t.setRenderWindow=i=>{i!==e._renderWindow&&(e._vtkWindow=i,e._renderWindow=i)},t.visibleActorCount=()=>e.props.filter(i=>i.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let i=e.mtime;const c=e.activeCamera?e.activeCamera.getMTime():0;c>i&&(i=c);const l=e._createdLight?e._createdLight.getMTime():0;return l>i&&(i=l),i},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const z9={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Of(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function DO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,z9,n),F9.extend(t,e,n),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),Cn(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),Gt(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),_i(t,e,["actors","volumes","lights"]),zp(t,e,["background"],4,1),Rc(t,e,["renderWindow"]),G9(t,e)}const A9=et(DO,"vtkRenderer");var $9={newInstance:A9,extend:DO};function H9(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.saveCurrentBindings(r),t.saveCurrentBuffers(r)},t.saveCurrentBindings=n=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const r=e.context;e.previousDrawBinding=r.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=n=>{},t.restorePreviousBindingsAndBuffers=n=>{const r=typeof n<"u"?n:t.getBothMode();t.restorePreviousBindings(r),t.restorePreviousBuffers(r)},t.restorePreviousBindings=n=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const r=e.context;r.bindFramebuffer(r.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=n=>{},t.bind=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;r===null&&(r=e.context.FRAMEBUFFER),e.context.bindFramebuffer(r,e.glFramebuffer);for(let s=0;s<e.colorBuffers.length;s++)e.colorBuffers[s].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(n,r)=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=n,e.glFramebuffer.height=r},t.setColorBuffer=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=e.context;if(!s){we("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let i=s.COLOR_ATTACHMENT0;if(r>0)if(e._openGLRenderWindow.getWebgl2())i+=r;else{we("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[r]=n,s.framebufferTexture2D(s.FRAMEBUFFER,i,s.TEXTURE_2D,n.getHandle(),0)},t.removeColorBuffer=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const r=e.context;if(!r){we("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let s=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())s+=n;else{we("Using multiple framebuffer attachments requires WebGL 2");return}r.framebufferTexture2D(r.FRAMEBUFFER,s,r.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(n,1)},t.setDepthBuffer=n=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const r=e.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n.getHandle(),0)}else we("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,null,0)}else we("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=n=>{e._openGLRenderWindow!==n&&(t.releaseGraphicsResources(),e._openGLRenderWindow=n,e.context=null,n&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>e.glFramebuffer==null?null:[e.glFramebuffer.width,e.glFramebuffer.height],t.populateFramebuffer=()=>{if(!e.context){we("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const n=e.context,r=Br.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.setMinificationFilter(Pd.LINEAR),r.setMagnificationFilter(Pd.LINEAR),r.create2DFromRaw({width:e.glFramebuffer.width,height:e.glFramebuffer.height,numComps:4,dataType:Rt.UNSIGNED_CHAR,data:null}),t.setColorBuffer(r),e.depthTexture=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,e.depthTexture),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const W9={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function RO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W9,n),Wt(t,e),e.colorBuffers&&we("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],_i(t,e,["colorBuffers"]),H9(t,e)}const K9=et(RO,"vtkFramebuffer");var p1={newInstance:K9,extend:RO};function X9(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=n=>{e.currentOperation=n,e.currentTraverseOperation=`traverse${V.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=r,e.preDelegateOperations.forEach(s=>{t.setCurrentOperation(s),n.traverse(t)}),e.delegates.forEach(s=>{s.traverse(n,t)}),e.postDelegateOperations.forEach(s=>{t.setCurrentOperation(s),n.traverse(t)}))}}const Y9={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function NO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y9,n),V.obj(t,e),V.get(t,e,["currentOperation"]),V.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),V.moveToProtected(t,e,["currentParent"]),X9(t,e)}const q9=V.newInstance(NO,"vtkRenderPass");var y1={newInstance:q9,extend:NO};const{Representation:Z9}=Bc,{vtkErrorMacro:zS}=V;function Q9(t){const e=ie.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const P9=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function J9(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const n=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),s=new Uint16Array([4,0,1,3,2]),i=rt.newInstance({numberOfComponents:3,values:n});i.setName("points");const c=rt.newInstance({numberOfComponents:2,values:r});c.setName("tcoords");const l=rt.newInstance({numberOfComponents:1,values:s});e.tris.getCABO().createVBO(l,"polys",Z9.SURFACE,{points:i,tcoords:c,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=n=>{const r=n.getSize(),s=n.getContext();e.framebuffer=p1.newInstance(),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.create(...r),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Br.newInstance(),e.translucentRGBATexture.setInternalFormat(s.RGBA16F),e.translucentRGBATexture.setFormat(s.RGBA),e.translucentRGBATexture.setOpenGLDataType(s.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(n),e.translucentRGBATexture.create2DFromRaw({width:r[0],height:r[1],numComps:4,dataType:"Float32Array",data:null}),e.translucentRTexture=Br.newInstance(),e.translucentRTexture.setInternalFormat(s.R16F),e.translucentRTexture.setFormat(s.RED),e.translucentRTexture.setOpenGLDataType(s.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(n),e.translucentRTexture.create2DFromRaw({width:r[0],height:r[1],numComps:1,dataType:"Float32Array",data:null}),e.translucentZTexture=Br.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(n),e.translucentZTexture.createDepthFromRaw({width:r[0],height:r[1],dataType:"Float32Array",data:null}),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=n=>{e.copyShader=n.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),P9,"")},t.createVBO=n=>{const r=n.getContext();e.tris.setOpenGLRenderWindow(n),t.createVertexBuffer();const s=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(s,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),r.FLOAT,3,r.FALSE)||zS("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(s,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),r.FLOAT,2,r.FALSE)||zS("Error setting vertexDC in copy shader VAO.")},t.traverse=(n,r,s)=>{if(e.deleted)return;const i=n.getSize(),c=n.getContext();if(e._supported=!1,r.getSelector()||!c||!n.getWebgl2()||!c.getExtension("EXT_color_buffer_half_float")&&!c.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),r.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(n);else{const f=e.framebuffer.getSize();f===null||f[0]!==i[0]||f[1]!==i[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRTexture.releaseGraphicsResources(n),e.translucentZTexture.releaseGraphicsResources(n),t.createFramebuffer(n)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}c.drawBuffers([c.COLOR_ATTACHMENT0]),c.clearBufferfv(c.COLOR,0,[0,0,0,0]),c.clearBufferfv(c.DEPTH,0,[1]),c.colorMask(!1,!1,!1,!1),s.getOpaqueActorCount()>0&&(s.setCurrentOperation("opaqueZBufferPass"),r.traverse(s)),c.colorMask(!0,!0,!0,!0),c.drawBuffers([c.COLOR_ATTACHMENT0,c.COLOR_ATTACHMENT1]),c.viewport(0,0,i[0],i[1]),c.scissor(0,0,i[0],i[1]),c.clearBufferfv(c.COLOR,0,[0,0,0,1]),c.clearBufferfv(c.COLOR,1,[0,0,0,0]),c.enable(c.DEPTH_TEST),c.enable(c.BLEND),c.blendFuncSeparate(c.ONE,c.ONE,c.ZERO,c.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),r.traverse(t),c.drawBuffers([c.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(n):n.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=Kb.newInstance(),e.copyVAO.setOpenGLRenderWindow(n)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(n),c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA),c.depthMask(!1),c.depthFunc(c.ALWAYS),c.viewport(0,0,i[0],i[1]),c.scissor(0,0,i[0],i[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),c.drawArrays(c.TRIANGLES,0,e.tris.getCABO().getElementCount()),c.depthMask(!0),c.depthFunc(c.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate();const l=r.getTiledSizeAndOrigin();c.scissor(l.lowerLeftU,l.lowerLeftV,l.usize,l.vsize),c.viewport(l.lowerLeftU,l.lowerLeftV,l.usize,l.vsize)},t.getShaderReplacement=()=>e._supported?Q9:null,t.releaseGraphicsResources=n=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(n),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(n),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(n),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(n),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(n),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(n),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(n),e.tris=null),t.modified()}}const I9={framebuffer:null,copyShader:null,tris:null};function LO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I9,n),y1.extend(t,e,n),e.VBOBuildTime={},V.obj(e.VBOBuildTime,{mtime:0}),e.tris=Bi.newInstance(),V.get(t,e,["framebuffer"]),J9(t,e)}const e7=V.newInstance(LO,"vtkOpenGLOrderIndependentTranslucentPass");var t7={newInstance:e7,extend:LO};function n7(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=r,t.setCurrentOperation("buildPass"),n.traverse(t);const s=n.getRenderable().getNumberOfLayers(),i=n.getRenderable().getRenderersByReference();for(let c=0;c<s;c++)for(let l=0;l<i.length;l++){const f=i[l],g=n.getViewNodeFor(f);if(f.getDraw()&&f.getLayer()===c){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),g.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const p=n.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=p1.newInstance()),e.framebuffer.setOpenGLRenderWindow(n),e.framebuffer.saveCurrentBindingsAndBuffers();const h=e.framebuffer.getSize();(h===null||h[0]!==p[0]||h[1]!==p[1])&&(e.framebuffer.create(p[0],p[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),g.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),g.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),g.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=t7.newInstance()),e.translucentPass.traverse(n,g,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),g.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),g.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const r7={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function VO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,r7,n),y1.extend(t,e,n),V.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),n7(t,e)}const a7=V.newInstance(VO,"vtkForwardPass");var s7={newInstance:a7,extend:VO};const{FieldAssociations:i7}=ki;function o7(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(n,r,s,i,c)=>{},t.selectAsync=async(n,r,s,i,c)=>{const l=await t.getSourceDataAsync(n,r,s,i,c);return l?l.generateSelection(r,s,i,c):[]}}const c7={fieldAssociation:i7.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function _O(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c7,n),V.obj(t,e),V.setGet(t,e,["fieldAssociation","captureZValues"]),o7(t,e)}const l7=V.newInstance(_O,"vtkHardwareSelector");var u7={newInstance:l7,extend:_O};const f7={GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},g7={CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5};var h7={SelectionContent:f7,SelectionField:g7};function d7(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const p7={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function kO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p7,n),V.obj(t,e),e.properties={},V.setGet(t,e,["contentType","fieldType","properties","selectionList"]),d7(t,e)}const y7=V.newInstance(kO,"vtkSelectionNode");var BO={newInstance:y7,extend:kO,...h7};const{PassTypes:dt}=fb,{SelectionContent:x7,SelectionField:AS}=BO,{FieldAssociations:sc}=ki,{vtkErrorMacro:UO}=V,Sa=1;function FO(t){return`${t.propID} ${t.compositeID}`}function jO(t,e,n,r){if(!n)return 0;const s=(e*(r[2]-r[0]+1)+t)*4;return n[s+3]}function _r(t,e,n,r){if(!n)return 0;const s=(e*(r[2]-r[0]+1)+t)*4,i=n[s],c=n[s+1];return(n[s+2]*256+c)*256+i}function GO(t,e){let n=e;return n<<=24,n|=t,n}function v7(t,e,n,r){{if(r[0]=e[0],r[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const s=[e[0]-t.area[0],e[1]-t.area[1]],i=_r(s[0],s[1],t.pixBuffer[dt.ACTOR_PASS],t.area);if(i<=0||i-Sa>=t.props.length)return null;const c={};c.valid=!0,c.propID=i-Sa,c.prop=t.props[c.propID];let l=_r(s[0],s[1],t.pixBuffer[dt.COMPOSITE_INDEX_PASS],t.area);if((l<0||l>16777215)&&(l=0),c.compositeID=l-Sa,t.captureZValues){const p=(s[1]*(t.area[2]-t.area[0]+1)+s[0])*4;c.zValue=(256*t.zBuffer[p]+t.zBuffer[p+1])/65535,c.displayPosition=e}if(t.pixBuffer[dt.ID_LOW24]&&jO(s[0],s[1],t.pixBuffer[dt.ID_LOW24],t.area)===0)return c;const f=_r(s[0],s[1],t.pixBuffer[dt.ID_LOW24],t.area),g=_r(s[0],s[1],t.pixBuffer[dt.ID_HIGH24],t.area);return c.attributeID=GO(f,g),c}}function zO(t,e,n,r,s){const i=[];let c=0;return e.forEach((l,f)=>{const g=BO.newInstance();switch(g.setContentType(x7.INDICES),t){case sc.FIELD_ASSOCIATION_CELLS:g.setFieldType(AS.CELL);break;case sc.FIELD_ASSOCIATION_POINTS:g.setFieldType(AS.POINT);break;default:UO("Unknown field association")}g.getProperties().propID=l.info.propID,g.getProperties().prop=l.info.prop,g.getProperties().compositeID=l.info.compositeID,g.getProperties().attributeID=l.info.attributeID,g.getProperties().pixelCount=l.pixelCount,n&&(g.getProperties().displayPosition=[l.info.displayPosition[0],l.info.displayPosition[1],l.info.zValue],g.getProperties().worldPosition=s.displayToWorld(l.info.displayPosition[0],l.info.displayPosition[1],l.info.zValue,r)),g.setSelectionList(l.attributeIDs),i[c]=g,c++}),i}function m7(t,e,n,r,s){const i=Math.floor(e),c=Math.floor(n),l=Math.floor(r),f=Math.floor(s),g=new Map,p=[0,0];for(let h=c;h<=f;h++)for(let y=i;y<=l;y++){const E=v7(t,[y,h],0,p);if(E&&E.valid){const x=FO(E);if(!g.has(x))g.set(x,{info:E,pixelCount:1,attributeIDs:[E.attributeID]});else{const T=g.get(x);T.pixelCount++,t.captureZValues&&E.zValue<T.info.zValue&&(T.info=E),T.attributeIDs.indexOf(E.attributeID)===-1&&T.attributeIDs.push(E.attributeID)}}}return zO(t.fieldAssociation,g,t.captureZValues,t.renderer,t.openGLRenderWindow)}function T7(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer,e._openGLRenderer),e.maxAttributeId=0;const r=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=p1.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const s=e.framebuffer.getSize();!s||s[0]!==r[0]||s[1]!==r[1]?(e.framebuffer.create(r[0],r[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===sc.FIELD_ASSOCIATION_POINTS){const s=e._openGLRenderWindow.getContext(),i=s.isEnabled(s.BLEND);s.disable(s.BLEND),e._openGLRenderWindow.traverseAllPasses(),i&&s.enable(s.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending=r.isEnabled(r.BLEND),r.disable(r.BLEND)},t.postCapturePass=()=>{const r=e._openGLRenderWindow.getContext();e.originalBlending&&r.enable(r.BLEND)},t.select=()=>{let r=null;return t.captureBuffers()&&(r=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),r},t.getSourceDataAsync=async(r,s,i,c,l)=>{if(e._renderer=r,s===void 0){const g=e._openGLRenderWindow.getSize();t.setArea(0,0,g[0]-1,g[1]-1)}else t.setArea(s,i,c,l);if(!t.captureBuffers())return!1;const f={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:r,openGLRenderWindow:e._openGLRenderWindow};return f.generateSelection=function(){for(var g=arguments.length,p=new Array(g),h=0;h<g;h++)p[h]=arguments[h];return m7(f,...p)},f},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return UO("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer,e._openGLRenderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const r=e._openGLRenderWindow.getRenderPasses();t.beginSelection();const s=[];for(e.currentPass=dt.MIN_KNOWN_PASS;e.currentPass<=dt.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===dt.ACTOR_PASS&&typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"&&r[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),s.push(e.currentPass));return s.forEach(i=>{e.currentPass=i,t.processPixelBuffers()}),e.currentPass=dt.MAX_KNOWN_PASS,t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((r,s)=>{t.isPropHit(s)&&r.processSelectorPixelBuffers(t,e.propPixels[s])})},t.passRequired=r=>{if(r===dt.ID_HIGH24){if(e.fieldAssociation===sc.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===sc.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=r=>{if(e.pixBuffer[r]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[r]){const s=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[r]=new Uint8Array(s),e.rawPixBuffer[r].set(e.pixBuffer[r])}if(r===dt.ACTOR_PASS){if(e.captureZValues){const s=e._openGLRenderWindow.getRenderPasses();if(typeof s[0].requestDepth=="function"&&typeof s[0].getFramebuffer=="function"){const i=s[0].getFramebuffer();i.saveCurrentBindingsAndBuffers(),i.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),i.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[r])}},t.buildPropHitList=r=>{let s=0;for(let i=0;i<=e.area[3]-e.area[1];i++)for(let c=0;c<=e.area[2]-e.area[0];c++){let l=_r(c,i,r,e.area);l>0&&(l--,l in e.hitProps||(e.hitProps[l]=!0,e.propPixels[l]=[]),e.propPixels[l].push(s*4)),++s}},t.renderProp=r=>{e.currentPass===dt.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Sa),e.props.push(r))},t.renderCompositeIndex=r=>{e.currentPass===dt.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(r+Sa)},t.renderAttributeId=r=>{r<0||(e.maxAttributeId=r>e.maxAttributeId?r:e.maxAttributeId)},t.passTypeToString=r=>V.enumToString(dt,r),t.isPropHit=r=>!!e.hitProps[r],t.setPropColorValueFromInt=r=>{e.propColorValue[0]=r%256/255,e.propColorValue[1]=Math.floor(r/256)%256/255,e.propColorValue[2]=Math.floor(r/65536)%256/255},t.getPixelInformation=(r,s,i)=>{const c=s<0?0:s;if(console.log("getPixelInformation called",c),c===0){if(i[0]=r[0],i[1]=r[1],r[0]<e.area[0]||r[0]>e.area[2]||r[1]<e.area[1]||r[1]>e.area[3])return null;console.log(r),console.log(e.area);const p=[r[0]-e.area[0],r[1]-e.area[1]];console.log("adjusted displayPosition",p);const h=_r(p[0],p[1],e.pixBuffer[dt.ACTOR_PASS],e.area);if(console.log("actorid",h),h<=0||h-Sa>=e.props.length)return null;const y={};y.valid=!0,y.propID=h-Sa,y.prop=e.props[y.propID];let v=_r(p[0],p[1],e.pixBuffer[dt.COMPOSITE_INDEX_PASS],e.area);if((v<0||v>16777215)&&(v=0),y.compositeID=v-Sa,e.captureZValues){const T=(p[1]*(e.area[2]-e.area[0]+1)+p[0])*4;y.zValue=(256*e.zBuffer[T]+e.zBuffer[T+1])/65535,y.displayPosition=r}if(e.pixBuffer[dt.ID_LOW24]&&jO(p[0],p[1],e.pixBuffer[dt.ID_LOW24],e.area)===0)return y;const E=_r(p[0],p[1],e.pixBuffer[dt.ID_LOW24],e.area),x=_r(p[0],p[1],e.pixBuffer[dt.ID_HIGH24],e.area);return y.attributeID=GO(E,x),y}const l=[r[0],r[1]],f=[0,0];let g=t.getPixelInformation(r,0,i);if(g&&g.valid)return g;for(let p=1;p<c;++p){for(let h=l[1]>p?l[1]-p:0;h<=l[1]+p;++h)if(f[1]=h,l[0]>=p&&(f[0]=l[0]-p,g=t.getPixelInformation(f,0,i),g&&g.valid)||(f[0]=l[0]+p,g=t.getPixelInformation(f,0,i),g&&g.valid))return g;for(let h=l[0]>=p?l[0]-(p-1):0;h<=l[0]+(p-1);++h)if(f[0]=h,l[1]>=p&&(f[1]=l[1]-p,g=t.getPixelInformation(f,0,i),g&&g.valid)||(f[1]=l[1]+p,g=t.getPixelInformation(f,0,i),g&&g.valid))return g}return i[0]=r[0],i[1]=r[1],null},t.generateSelection=(r,s,i,c)=>{const l=Math.floor(r),f=Math.floor(s),g=Math.floor(i),p=Math.floor(c),h=new Map,y=[0,0];for(let v=f;v<=p;v++)for(let E=l;E<=g;E++){const x=[E,v],T=t.getPixelInformation(x,0,y);if(T&&T.valid){const w=FO(T);if(!h.has(w))h.set(w,{info:T,pixelCount:1,attributeIDs:[T.attributeID]});else{const D=h.get(w);D.pixelCount++,e.captureZValues&&T.zValue<D.info.zValue&&(D.info=T),D.attributeIDs.indexOf(T.attributeID)===-1&&D.attributeIDs.push(T.attributeID)}}}return zO(e.fieldAssociation,h,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=r=>e.rawPixBuffer[r],t.getPixelBuffer=r=>e.pixBuffer[r],t.attach=(r,s)=>{e._openGLRenderWindow=r,e._renderer=s};const n=t.setArea;t.setArea=function(){return n(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const S7={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function AO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S7,n),u7.extend(t,e,n),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),V.setGetArray(t,e,["area"],4),V.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),V.setGetArray(t,e,["propColorValue"],3),V.moveToProtected(t,e,["renderer","openGLRenderWindow"]),V.event(t,e,"event"),T7(t,e)}const C7=V.newInstance(AO,"vtkOpenGLHardwareSelector");var $O={newInstance:C7,extend:AO,...fb},td={exports:{}},$S;function E7(){return $S||($S=1,(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function s(w,D){var M=w[0],O=w[1],R=w[2],b=w[3];M+=(O&R|~O&b)+D[0]-680876936|0,M=(M<<7|M>>>25)+O|0,b+=(M&O|~M&R)+D[1]-389564586|0,b=(b<<12|b>>>20)+M|0,R+=(b&M|~b&O)+D[2]+606105819|0,R=(R<<17|R>>>15)+b|0,O+=(R&b|~R&M)+D[3]-1044525330|0,O=(O<<22|O>>>10)+R|0,M+=(O&R|~O&b)+D[4]-176418897|0,M=(M<<7|M>>>25)+O|0,b+=(M&O|~M&R)+D[5]+1200080426|0,b=(b<<12|b>>>20)+M|0,R+=(b&M|~b&O)+D[6]-1473231341|0,R=(R<<17|R>>>15)+b|0,O+=(R&b|~R&M)+D[7]-45705983|0,O=(O<<22|O>>>10)+R|0,M+=(O&R|~O&b)+D[8]+1770035416|0,M=(M<<7|M>>>25)+O|0,b+=(M&O|~M&R)+D[9]-1958414417|0,b=(b<<12|b>>>20)+M|0,R+=(b&M|~b&O)+D[10]-42063|0,R=(R<<17|R>>>15)+b|0,O+=(R&b|~R&M)+D[11]-1990404162|0,O=(O<<22|O>>>10)+R|0,M+=(O&R|~O&b)+D[12]+1804603682|0,M=(M<<7|M>>>25)+O|0,b+=(M&O|~M&R)+D[13]-40341101|0,b=(b<<12|b>>>20)+M|0,R+=(b&M|~b&O)+D[14]-1502002290|0,R=(R<<17|R>>>15)+b|0,O+=(R&b|~R&M)+D[15]+1236535329|0,O=(O<<22|O>>>10)+R|0,M+=(O&b|R&~b)+D[1]-165796510|0,M=(M<<5|M>>>27)+O|0,b+=(M&R|O&~R)+D[6]-1069501632|0,b=(b<<9|b>>>23)+M|0,R+=(b&O|M&~O)+D[11]+643717713|0,R=(R<<14|R>>>18)+b|0,O+=(R&M|b&~M)+D[0]-373897302|0,O=(O<<20|O>>>12)+R|0,M+=(O&b|R&~b)+D[5]-701558691|0,M=(M<<5|M>>>27)+O|0,b+=(M&R|O&~R)+D[10]+38016083|0,b=(b<<9|b>>>23)+M|0,R+=(b&O|M&~O)+D[15]-660478335|0,R=(R<<14|R>>>18)+b|0,O+=(R&M|b&~M)+D[4]-405537848|0,O=(O<<20|O>>>12)+R|0,M+=(O&b|R&~b)+D[9]+568446438|0,M=(M<<5|M>>>27)+O|0,b+=(M&R|O&~R)+D[14]-1019803690|0,b=(b<<9|b>>>23)+M|0,R+=(b&O|M&~O)+D[3]-187363961|0,R=(R<<14|R>>>18)+b|0,O+=(R&M|b&~M)+D[8]+1163531501|0,O=(O<<20|O>>>12)+R|0,M+=(O&b|R&~b)+D[13]-1444681467|0,M=(M<<5|M>>>27)+O|0,b+=(M&R|O&~R)+D[2]-51403784|0,b=(b<<9|b>>>23)+M|0,R+=(b&O|M&~O)+D[7]+1735328473|0,R=(R<<14|R>>>18)+b|0,O+=(R&M|b&~M)+D[12]-1926607734|0,O=(O<<20|O>>>12)+R|0,M+=(O^R^b)+D[5]-378558|0,M=(M<<4|M>>>28)+O|0,b+=(M^O^R)+D[8]-2022574463|0,b=(b<<11|b>>>21)+M|0,R+=(b^M^O)+D[11]+1839030562|0,R=(R<<16|R>>>16)+b|0,O+=(R^b^M)+D[14]-35309556|0,O=(O<<23|O>>>9)+R|0,M+=(O^R^b)+D[1]-1530992060|0,M=(M<<4|M>>>28)+O|0,b+=(M^O^R)+D[4]+1272893353|0,b=(b<<11|b>>>21)+M|0,R+=(b^M^O)+D[7]-155497632|0,R=(R<<16|R>>>16)+b|0,O+=(R^b^M)+D[10]-1094730640|0,O=(O<<23|O>>>9)+R|0,M+=(O^R^b)+D[13]+681279174|0,M=(M<<4|M>>>28)+O|0,b+=(M^O^R)+D[0]-358537222|0,b=(b<<11|b>>>21)+M|0,R+=(b^M^O)+D[3]-722521979|0,R=(R<<16|R>>>16)+b|0,O+=(R^b^M)+D[6]+76029189|0,O=(O<<23|O>>>9)+R|0,M+=(O^R^b)+D[9]-640364487|0,M=(M<<4|M>>>28)+O|0,b+=(M^O^R)+D[12]-421815835|0,b=(b<<11|b>>>21)+M|0,R+=(b^M^O)+D[15]+530742520|0,R=(R<<16|R>>>16)+b|0,O+=(R^b^M)+D[2]-995338651|0,O=(O<<23|O>>>9)+R|0,M+=(R^(O|~b))+D[0]-198630844|0,M=(M<<6|M>>>26)+O|0,b+=(O^(M|~R))+D[7]+1126891415|0,b=(b<<10|b>>>22)+M|0,R+=(M^(b|~O))+D[14]-1416354905|0,R=(R<<15|R>>>17)+b|0,O+=(b^(R|~M))+D[5]-57434055|0,O=(O<<21|O>>>11)+R|0,M+=(R^(O|~b))+D[12]+1700485571|0,M=(M<<6|M>>>26)+O|0,b+=(O^(M|~R))+D[3]-1894986606|0,b=(b<<10|b>>>22)+M|0,R+=(M^(b|~O))+D[10]-1051523|0,R=(R<<15|R>>>17)+b|0,O+=(b^(R|~M))+D[1]-2054922799|0,O=(O<<21|O>>>11)+R|0,M+=(R^(O|~b))+D[8]+1873313359|0,M=(M<<6|M>>>26)+O|0,b+=(O^(M|~R))+D[15]-30611744|0,b=(b<<10|b>>>22)+M|0,R+=(M^(b|~O))+D[6]-1560198380|0,R=(R<<15|R>>>17)+b|0,O+=(b^(R|~M))+D[13]+1309151649|0,O=(O<<21|O>>>11)+R|0,M+=(R^(O|~b))+D[4]-145523070|0,M=(M<<6|M>>>26)+O|0,b+=(O^(M|~R))+D[11]-1120210379|0,b=(b<<10|b>>>22)+M|0,R+=(M^(b|~O))+D[2]+718787259|0,R=(R<<15|R>>>17)+b|0,O+=(b^(R|~M))+D[9]-343485551|0,O=(O<<21|O>>>11)+R|0,w[0]=M+w[0]|0,w[1]=O+w[1]|0,w[2]=R+w[2]|0,w[3]=b+w[3]|0}function i(w){var D=[],M;for(M=0;M<64;M+=4)D[M>>2]=w.charCodeAt(M)+(w.charCodeAt(M+1)<<8)+(w.charCodeAt(M+2)<<16)+(w.charCodeAt(M+3)<<24);return D}function c(w){var D=[],M;for(M=0;M<64;M+=4)D[M>>2]=w[M]+(w[M+1]<<8)+(w[M+2]<<16)+(w[M+3]<<24);return D}function l(w){var D=w.length,M=[1732584193,-271733879,-1732584194,271733878],O,R,b,L,k,B;for(O=64;O<=D;O+=64)s(M,i(w.substring(O-64,O)));for(w=w.substring(O-64),R=w.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=0;O<R;O+=1)b[O>>2]|=w.charCodeAt(O)<<(O%4<<3);if(b[O>>2]|=128<<(O%4<<3),O>55)for(s(M,b),O=0;O<16;O+=1)b[O]=0;return L=D*8,L=L.toString(16).match(/(.*?)(.{0,8})$/),k=parseInt(L[2],16),B=parseInt(L[1],16)||0,b[14]=k,b[15]=B,s(M,b),M}function f(w){var D=w.length,M=[1732584193,-271733879,-1732584194,271733878],O,R,b,L,k,B;for(O=64;O<=D;O+=64)s(M,c(w.subarray(O-64,O)));for(w=O-64<D?w.subarray(O-64):new Uint8Array(0),R=w.length,b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=0;O<R;O+=1)b[O>>2]|=w[O]<<(O%4<<3);if(b[O>>2]|=128<<(O%4<<3),O>55)for(s(M,b),O=0;O<16;O+=1)b[O]=0;return L=D*8,L=L.toString(16).match(/(.*?)(.{0,8})$/),k=parseInt(L[2],16),B=parseInt(L[1],16)||0,b[14]=k,b[15]=B,s(M,b),M}function g(w){var D="",M;for(M=0;M<4;M+=1)D+=r[w>>M*8+4&15]+r[w>>M*8&15];return D}function p(w){var D;for(D=0;D<w.length;D+=1)w[D]=g(w[D]);return w.join("")}p(l("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function w(D,M){return D=D|0||0,D<0?Math.max(D+M,0):Math.min(D,M)}ArrayBuffer.prototype.slice=function(D,M){var O=this.byteLength,R=w(D,O),b=O,L,k,B,j;return M!==n&&(b=w(M,O)),R>b?new ArrayBuffer(0):(L=b-R,k=new ArrayBuffer(L),B=new Uint8Array(k),j=new Uint8Array(this,R,L),B.set(j),k)}})();function h(w){return/[\u0080-\uFFFF]/.test(w)&&(w=unescape(encodeURIComponent(w))),w}function y(w,D){var M=w.length,O=new ArrayBuffer(M),R=new Uint8Array(O),b;for(b=0;b<M;b+=1)R[b]=w.charCodeAt(b);return D?R:O}function v(w){return String.fromCharCode.apply(null,new Uint8Array(w))}function E(w,D,M){var O=new Uint8Array(w.byteLength+D.byteLength);return O.set(new Uint8Array(w)),O.set(new Uint8Array(D),w.byteLength),O}function x(w){var D=[],M=w.length,O;for(O=0;O<M-1;O+=2)D.push(parseInt(w.substr(O,2),16));return String.fromCharCode.apply(String,D)}function T(){this.reset()}return T.prototype.append=function(w){return this.appendBinary(h(w)),this},T.prototype.appendBinary=function(w){this._buff+=w,this._length+=w.length;var D=this._buff.length,M;for(M=64;M<=D;M+=64)s(this._hash,i(this._buff.substring(M-64,M)));return this._buff=this._buff.substring(M-64),this},T.prototype.end=function(w){var D=this._buff,M=D.length,O,R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b;for(O=0;O<M;O+=1)R[O>>2]|=D.charCodeAt(O)<<(O%4<<3);return this._finish(R,M),b=p(this._hash),w&&(b=x(b)),this.reset(),b},T.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},T.prototype.setState=function(w){return this._buff=w.buff,this._length=w.length,this._hash=w.hash,this},T.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},T.prototype._finish=function(w,D){var M=D,O,R,b;if(w[M>>2]|=128<<(M%4<<3),M>55)for(s(this._hash,w),M=0;M<16;M+=1)w[M]=0;O=this._length*8,O=O.toString(16).match(/(.*?)(.{0,8})$/),R=parseInt(O[2],16),b=parseInt(O[1],16)||0,w[14]=R,w[15]=b,s(this._hash,w)},T.hash=function(w,D){return T.hashBinary(h(w),D)},T.hashBinary=function(w,D){var M=l(w),O=p(M);return D?x(O):O},T.ArrayBuffer=function(){this.reset()},T.ArrayBuffer.prototype.append=function(w){var D=E(this._buff.buffer,w),M=D.length,O;for(this._length+=w.byteLength,O=64;O<=M;O+=64)s(this._hash,c(D.subarray(O-64,O)));return this._buff=O-64<M?new Uint8Array(D.buffer.slice(O-64)):new Uint8Array(0),this},T.ArrayBuffer.prototype.end=function(w){var D=this._buff,M=D.length,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R,b;for(R=0;R<M;R+=1)O[R>>2]|=D[R]<<(R%4<<3);return this._finish(O,M),b=p(this._hash),w&&(b=x(b)),this.reset(),b},T.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.ArrayBuffer.prototype.getState=function(){var w=T.prototype.getState.call(this);return w.buff=v(w.buff),w},T.ArrayBuffer.prototype.setState=function(w){return w.buff=y(w.buff,!0),T.prototype.setState.call(this,w)},T.ArrayBuffer.prototype.destroy=T.prototype.destroy,T.ArrayBuffer.prototype._finish=T.prototype._finish,T.ArrayBuffer.hash=function(w,D){var M=f(new Uint8Array(w)),O=p(M);return D?x(O):O},T})})(td)),td.exports}var w7=E7();const M7=Di(w7),b7=["lastShaderProgramBound","context","_openGLRenderWindow"];function O7(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(n,r,s)=>{let i=r;s.length>0&&(i=ie.substitute(i,"VSOut","GSOut").result);const c=e._openGLRenderWindow.getWebgl2();let l=`
`,f=`#version 100
`;c?f=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(l=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(l+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),i=ie.substitute(i,"//VTK::System::Dec",[`${f}
`,c?"":`#extension GL_OES_standard_derivatives : enable
`,l,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let g=ie.substitute(n,"//VTK::System::Dec",[`${f}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(c){g=ie.substitute(g,"varying","out").result,i=ie.substitute(i,"varying","in").result;let h="",y=0;for(;i.includes(`gl_FragData[${y}]`);)i=ie.substitute(i,`gl_FragData\\[${y}\\]`,`fragOutput${y}`).result,h+=`layout(location = ${y}) out vec4 fragOutput${y};
`,y++;i=ie.substitute(i,"//VTK::Output::Dec",h).result}const p=ie.substitute(s,"//VTK::System::Dec",f).result;return{VSSource:g,FSSource:i,GSSource:p}},t.readyShaderProgramArray=(n,r,s)=>{const i=t.replaceShaderValues(n,r,s),c=t.getShaderProgram(i.VSSource,i.FSSource,i.GSSource);return t.readyShaderProgram(c)},t.readyShaderProgram=n=>!n||!n.getCompiled()&&!n.compileShader()||!t.bindShaderProgram(n)?null:n,t.getShaderProgram=(n,r,s)=>{const i=`${n}${r}${s}`,c=M7.hash(i);if(!(c in e.shaderPrograms)){const l=ie.newInstance();return l.setContext(e.context),l.getVertexShader().setSource(n),l.getFragmentShader().setSource(r),s&&l.getGeometryShader().setSource(s),l.setMd5Hash(c),e.shaderPrograms[c]=l,l}return e.shaderPrograms[c]},t.releaseGraphicsResources=n=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(r=>e.shaderPrograms[r]).forEach(r=>r.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=n=>(e.lastShaderProgramBound===n||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),n.bind(),e.lastShaderProgramBound=n),1)}const D7={lastShaderProgramBound:null,shaderPrograms:null,context:null};function HO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D7,n),e.shaderPrograms={},V.obj(t,e),V.setGet(t,e,b7),V.moveToProtected(t,e,["openGLRenderWindow"]),O7(t,e)}const R7=V.newInstance(HO,"vtkShaderCache");var N7={newInstance:R7,extend:HO};const{vtkErrorMacro:L7}=V;function V7(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]===!0&&L7("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=n=>{if(e.context!==n){if(e.context!==0&&t.deleteTable(),e.context=n,e.context){e.numberOfTextureUnits=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS);for(let r=0;r<e.numberOfTextureUnits;++r)e.textureUnits[r]=!1}t.modified()}},t.allocate=()=>{for(let n=0;n<e.numberOfTextureUnits;n++)if(!t.isAllocated(n))return e.textureUnits[n]=!0,n;return-1},t.allocateUnit=n=>t.isAllocated(n)?-1:(e.textureUnits[n]=!0,n),t.isAllocated=n=>e.textureUnits[n],t.free=n=>{e.textureUnits[n]=!1},t.freeAll=()=>{for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}}const _7={context:null,numberOfTextureUnits:0,textureUnits:0};function WO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_7,n),V.obj(t,e),e.textureUnits=[],V.get(t,e,["numberOfTextureUnits"]),V.setGet(t,e,["context"]),V7(t,e)}const k7=V.newInstance(WO,"vtkOpenGLTextureUnitManager");var B7={newInstance:k7,extend:WO};function U7(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=n=>{const r=n.getViewportByReference();return e.size[0]*(r[2]-r[0])/((r[3]-r[1])*e.size[1])},t.isInViewport=(n,r,s)=>{const i=s.getViewportByReference(),c=t.getFramebufferSize();return i[0]*c[0]<=n&&i[2]*c[0]>=n&&i[1]*c[1]<=r&&i[3]*c[1]>=r},t.getViewportSize=n=>{const r=n.getViewportByReference(),s=t.getFramebufferSize();return[(r[2]-r[0])*s[0],(r[3]-r[1])*s[1]]},t.getViewportCenter=n=>{const r=t.getViewportSize(n);return[r[0]*.5,r[1]*.5]},t.displayToNormalizedDisplay=(n,r,s)=>{const i=t.getFramebufferSize();return[n/i[0],r/i[1],s]},t.normalizedDisplayToDisplay=(n,r,s)=>{const i=t.getFramebufferSize();return[n*i[0],r*i[1],s]},t.worldToView=(n,r,s,i)=>i.worldToView(n,r,s),t.viewToWorld=(n,r,s,i)=>i.viewToWorld(n,r,s),t.worldToDisplay=(n,r,s,i)=>{const c=i.worldToView(n,r,s),l=t.getViewportSize(i),f=i.viewToProjection(c[0],c[1],c[2],l[0]/l[1]),g=i.projectionToNormalizedDisplay(f[0],f[1],f[2]);return t.normalizedDisplayToDisplay(g[0],g[1],g[2])},t.displayToWorld=(n,r,s,i)=>{const c=t.displayToNormalizedDisplay(n,r,s),l=i.normalizedDisplayToProjection(c[0],c[1],c[2]),f=t.getViewportSize(i),g=i.projectionToView(l[0],l[1],l[2],f[0]/f[1]);return i.viewToWorld(g[0],g[1],g[2])},t.normalizedDisplayToViewport=(n,r,s,i)=>{let c=i.getViewportByReference();c=t.normalizedDisplayToDisplay(c[0],c[1],0);const l=t.normalizedDisplayToDisplay(n,r,s);return[l[0]-c[0]-.5,l[1]-c[1]-.5,s]},t.viewportToNormalizedViewport=(n,r,s,i)=>{const c=t.getViewportSize(i);return c&&c[0]!==0&&c[1]!==0?[n/(c[0]-1),r/(c[1]-1),s]:[n,r,s]},t.normalizedViewportToViewport=(n,r,s,i)=>{const c=t.getViewportSize(i);return[n*(c[0]-1),r*(c[1]-1),s]},t.displayToLocalDisplay=(n,r,s)=>{const i=t.getFramebufferSize();return[n,i[1]-r-1,s]},t.viewportToNormalizedDisplay=(n,r,s,i)=>{let c=i.getViewportByReference();c=t.normalizedDisplayToDisplay(c[0],c[1],0);const l=n+c[0]+.5,f=r+c[1]+.5;return t.displayToNormalizedDisplay(l,f,s)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{V.vtkErrorMacro("not implemented")},t.getPixelData=(n,r,s,i)=>{V.vtkErrorMacro("not implemented")},t.createSelector=()=>{V.vtkErrorMacro("not implemented")}}const F7={size:void 0,selector:void 0};function KO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F7,n),e.size||(e.size=[300,300]),V.getArray(t,e,["size"],2),V.get(t,e,["selector"]),ft.extend(t,e,n),U7(t,e)}const j7=V.newInstance(KO,"vtkRenderWindowViewNode");var G7={newInstance:j7,extend:KO};const z7="__getUnderlyingContext";function A7(){const t=new Map,e={apply(s,i,c){return t.has(c[0])?t.get(c[0]):s.apply(i,c)}};function n(s){return{apply(i,c,l){return t.set(s,l[0]),i.apply(c,l)}}}const r=Object.create(null);return r.getParameter=(s,i,c,l)=>new Proxy(l.bind(s),e),r.depthMask=(s,i,c,l)=>new Proxy(l.bind(s),n(s.DEPTH_WRITEMASK)),{get(s,i,c){if(i===z7)return()=>s;let l=Reflect.get(s,i,s);l instanceof Function&&(l=l.bind(s));const f=r[i];return f?f(s,i,c,l):l}}}const{vtkDebugMacro:HS,vtkErrorMacro:WS}=V,$7={position:"absolute",top:0,left:0,width:"100%",height:"100%"},H7=["activateTexture","deactivateTexture","disableCullFace","enableCullFace","get3DContext","getActiveFramebuffer","getContext","getDefaultTextureByteSize","getDefaultTextureInternalFormat","getDefaultToWebgl2","getGLInformations","getGraphicsMemoryInfo","getGraphicsResourceForObject","getHardwareMaximumLineWidth","getPixelData","getShaderCache","getTextureUnitForTexture","getTextureUnitManager","getWebgl2","makeCurrent","releaseGraphicsResources","registerGraphicsResourceUser","unregisterGraphicsResourceUser","restoreContext","setActiveFramebuffer","setContext","setDefaultToWebgl2","setGraphicsResourceForObject"];function Yt(t,e,n){const r=t.createFramebuffer(),s=t.createTexture();t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,n,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,s,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),i===t.FRAMEBUFFER_COMPLETE}let mf=0;const Vf=[];function W7(){mf++,Vf.forEach(t=>t(mf))}function K7(){mf--,Vf.forEach(t=>t(mf))}function X7(t){Vf.push(t)}function Y7(t){return Vf.pop()}function KS(t){t.preventDefault()}function q7(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");let n;function r(){return n||(n=A7()),n}t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",KS,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const s=[0,0];function i(){e.renderable&&(e.size[0]!==s[0]||e.size[1]!==s[1])&&(s[0]=e.size[0],s[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(i),t.buildPass=h=>{if(h){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.addMissingNodes(e.renderable.getChildRenderWindowsByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(y=>{y.setOpenGLRenderWindow?.(t)})}},t.initialize=()=>{if(!e.initialized){if(e.rootOpenGLRenderWindow=t.getLastAncestorOfType("vtkOpenGLRenderWindow"),e.rootOpenGLRenderWindow)e.context2D=t.get2DContext();else{e.context=t.get3DContext(),t.resizeFromChildRenderWindows(),e.context&&W7(),e.textureUnitManager=B7.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const h=e.context;h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),h.depthFunc(h.LEQUAL),h.enable(h.BLEND)}e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=h=>{e.el&&e.el!==h&&(e.canvas.parentNode!==e.el&&WS("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==h&&(e.el=h,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:h,height:y}=e.el.getBoundingClientRect();e.containerSize=[h,y]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.activeFramebuffer?.getSize()||e.size,t.getPixelData=(h,y,v,E)=>{const x=new Uint8Array((v-h+1)*(E-y+1)*4);return e.context.readPixels(h,y,v-h+1,E-y+1,e.context.RGBA,e.context.UNSIGNED_BYTE,x),x},t.get3DContext=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},y=null;const v=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&v&&(y=e.canvas.getContext("webgl2",h),y&&(e.webgl2=!0,HS("using webgl2"))),y||(HS("using webgl1"),y=e.canvas.getContext("webgl",h)||e.canvas.getContext("experimental-webgl",h)),new Proxy(y,r())},t.get2DContext=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.canvas.getContext("2d",h)},t.restoreContext=()=>{const h=y1.newInstance();h.setCurrentOperation("Release"),h.traverse(t,null)},t.activateTexture=h=>{const y=e._textureResourceIds.get(h);if(y!==void 0){e.context.activeTexture(e.context.TEXTURE0+y);return}const v=t.getTextureUnitManager().allocate();if(v<0){WS("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(h,v),e.context.activeTexture(e.context.TEXTURE0+v)},t.deactivateTexture=h=>{const y=e._textureResourceIds.get(h);y!==void 0&&(t.getTextureUnitManager().free(y),e._textureResourceIds.delete(h))},t.getTextureUnitForTexture=h=>{const y=e._textureResourceIds.get(h);return y!==void 0?y:-1},t.getDefaultTextureByteSize=function(h){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(h){case Rt.CHAR:case Rt.SIGNED_CHAR:case Rt.UNSIGNED_CHAR:return 1;case y:case v:case Rt.UNSIGNED_SHORT:case Rt.SHORT:case Rt.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(h,y){let v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(h){case Rt.UNSIGNED_CHAR:switch(y){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;default:return e.context.RGBA8}case(v&&!E&&Rt.UNSIGNED_SHORT):switch(y){case 1:return v.R16_EXT;case 2:return v.RG16_EXT;case 3:return v.RGB16_EXT;default:return v.RGBA16_EXT}case(v&&!E&&Rt.SHORT):switch(y){case 1:return v.R16_SNORM_EXT;case 2:return v.RG16_SNORM_EXT;case 3:return v.RGB16_SNORM_EXT;default:return v.RGBA16_SNORM_EXT}case Rt.UNSIGNED_SHORT:case Rt.SHORT:case Rt.FLOAT:default:switch(y){case 1:return E?e.context.R16F:e.context.R32F;case 2:return E?e.context.RG16F:e.context.RG32F;case 3:return E?e.context.RGB16F:e.context.RGB32F;default:return E?e.context.RGBA16F:e.context.RGBA32F}}switch(y){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;default:return e.context.RGBA}},t.setBackgroundImage=h=>{e.bgImage.src=h.src},t.setUseBackgroundImage=h=>{e.useBackgroundImage=h,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function c(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const y=document.createElement("canvas"),v=y.getContext("2d");y.width=e.canvas.width,y.height=e.canvas.height,v.drawImage(e.canvas,0,0);const E=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(D=>{D.getViewProps().forEach(O=>{if(O.getContainer){const b=O.getContainer().getElementsByTagName("canvas");for(let L=0;L<b.length;L++){const k=b[L],B=k.getBoundingClientRect(),j=B.x-E.x,z=B.y-E.y;v.drawImage(k,j,z)}}})});const w=y.toDataURL(h);y.remove(),t.invokeImageReady(w)}t.captureNextImage=function(){let h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:y=!1,size:v=null,scale:E=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=h;const x=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:v||E!==1?v||e.size.map(T=>T*E):null},new Promise((T,w)=>{const D=t.onImageReady(M=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=x,D.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(O=>{let{restoreParamsFn:R,arg:b}=O;return R(b)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),T(M);else{const O=document.createElement("img");if(O.style=$7,O.src=M,e._screenshot.placeHolder=e.el.appendChild(O),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e.rootOpenGLRenderWindow?.resizeFromChildRenderWindows(),e._screenshot.size=null,t.modified(),y){const R=y!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(b=>{const L=b.getActiveCamera(),k=L.get("focalPoint","position","parallelScale");return{resetCameraArgs:R?{renderer:b}:void 0,resetCameraFn:R?y:b.resetCamera,restoreParamsFn:L.set,arg:JSON.parse(JSON.stringify(k))}}),e._screenshot.cameras.forEach(b=>{let{resetCameraFn:L,resetCameraArgs:k}=b;return L(k)})}t.traverseAllPasses()}})})};let l;t.getHardwareMaximumLineWidth=()=>{if(l!=null)return l;const h=t.get3DContext(),y=h.getParameter(h.ALIASED_LINE_WIDTH_RANGE);return l=y[1],y[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const h=t.get3DContext(),y=h.getExtension("OES_texture_float"),v=h.getExtension("OES_texture_half_float"),E=h.getExtension("WEBGL_debug_renderer_info"),x=h.getExtension("WEBGL_draw_buffers"),T=h.getExtension("EXT_texture_filter_anisotropic")||h.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),w=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",h.getParameter(h.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",h.getParameter(h.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",h.getParameter(h.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",h.getParameter(h.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",h.getParameter(h.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",h.getParameter(h.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",h.getParameter(h.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",T&&h.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",h.getParameter(h.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",h.getParameter(h.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",h.getParameter(h.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",h.getParameter(h.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",h.getParameter(h.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",h.getParameter(h.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",h.getParameter(h.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",h.getParameter(h.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",h.getParameter(h.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",h.getParameter(h.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",h.getParameter(h.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",h.getParameter(h.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",h.getParameter(h.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[y&&Yt(h,h.RGBA,h.UNSIGNED_BYTE)?"RGBA":"",y&&Yt(h,h.RGB,h.UNSIGNED_BYTE)?"RGB":"",y&&Yt(h,h.LUMINANCE,h.UNSIGNED_BYTE)?"LUMINANCE":"",y&&Yt(h,h.ALPHA,h.UNSIGNED_BYTE)?"ALPHA":"",y&&Yt(h,h.LUMINANCE_ALPHA,h.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[v&&Yt(h,h.RGBA,v.HALF_FLOAT_OES)?"RGBA":"",v&&Yt(h,h.RGB,v.HALF_FLOAT_OES)?"RGB":"",v&&Yt(h,h.LUMINANCE,v.HALF_FLOAT_OES)?"LUMINANCE":"",v&&Yt(h,h.ALPHA,v.HALF_FLOAT_OES)?"ALPHA":"",v&&Yt(h,h.LUMINANCE_ALPHA,v.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[y&&Yt(h,h.RGBA,h.FLOAT)?"RGBA":"",y&&Yt(h,h.RGB,h.FLOAT)?"RGB":"",y&&Yt(h,h.LUMINANCE,h.FLOAT)?"LUMINANCE":"",y&&Yt(h,h.ALPHA,h.FLOAT)?"ALPHA":"",y&&Yt(h,h.LUMINANCE_ALPHA,h.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",x?h.getParameter(x.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.VERTEX_SHADER,h.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).precision," (-2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).rangeMin,"</sup> - 2<sup>",h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",h.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",h.getParameter(h.RENDERER)],["WebGL Vendor","VENDOR",h.getParameter(h.VENDOR)],["WebGL Version","VERSION",h.getParameter(h.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",h.getParameter(h.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",E&&h.getParameter(E.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",E&&h.getParameter(E.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],D={};for(;w.length;){const[M,O,R]=w.pop();O&&(D[O]={label:M,value:R})}return e._glInformation=D,D},t.traverseAllPasses=()=>{if(e.renderPasses)for(let y=0;y<e.renderPasses.length;++y)e.renderPasses[y].traverse(t,null);t.copyParentContent(),e.notifyStartCaptureImage&&c();const h=e.renderable.getChildRenderWindowsByReference();for(let y=0;y<h.length;++y)t.getViewNodeFor(h[y])?.traverseAllPasses()},t.copyParentContent=()=>{const h=e.rootOpenGLRenderWindow;if(!h||!e.context2D||e.children.some(E=>!!E.getSelector?.()))return;const y=h.getCanvas(),v=e.canvas;e.context2D.drawImage(y,0,y.height-v.height,v.width,v.height,0,0,v.width,v.height)},t.resizeFromChildRenderWindows=()=>{const h=e.renderable.getChildRenderWindowsByReference();if(h.length>0){const y=[0,0];for(let v=0;v<h.length;++v){const E=t.getViewNodeFor(h[v])?.getSize();E&&(y[0]=E[0]>y[0]?E[0]:y[0],y[1]=E[1]>y[1]?E[1]:y[1])}t.setSize(...y)}},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=h=>{if(e.viewStream===h)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=h,e.viewStream){const y=e.renderable.getRenderers()[0];y.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(v=>t.setBackgroundImage(v.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const h=$O.newInstance();return h.setOpenGLRenderWindow(t),h};function f(){e.canvas.removeEventListener("webglcontextlost",KS),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=V.chain(()=>{e.context&&K7(),t.setContainer(),t.setViewStream()},f,t.delete),t.setActiveFramebuffer=h=>{e.activeFramebuffer=h};const g=t.setSize;t.setSize=(h,y)=>{const v=g(h,y);return v&&t.invokeWindowResizeEvent({width:h,height:y}),v},t.registerGraphicsResourceUser=(h,y)=>{e._graphicsResources.has(h)||t.setGraphicsResourceForObject(h,null,null),e._graphicsResources.get(h)?.users.add(y)},t.unregisterGraphicsResourceUser=(h,y)=>{const v=e._graphicsResources.get(h);v&&(v.users.delete(y),v.users.size||(v.oglObject?.releaseGraphicsResources(t),e._graphicsResources.delete(h)))},t.getGraphicsResourceForObject=h=>e._graphicsResources.get(h),t.setGraphicsResourceForObject=(h,y,v)=>{if(!h)return;const E=e._graphicsResources.get(h);E?.oglObject?.releaseGraphicsResources(t),e._graphicsResources.set(h,{coreObject:h,oglObject:y,hash:v,users:E?.users??new Set})},t.getGraphicsMemoryInfo=()=>{let h=0;return e._graphicsResources.forEach(y=>{let{oglObject:v}=y;h+=v.getAllocatedGPUMemoryInBytes()}),h},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach(h=>{let{oglObject:y}=h;y.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(h=>{t.getViewNodeFor(h)?.releaseGraphicsResources()})};const p={...t};H7.forEach(h=>{t[h]=function(){return e.rootOpenGLRenderWindow?e.rootOpenGLRenderWindow[h](...arguments):p[h](...arguments)}})}const Z7={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,context2D:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function XO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z7,n),G7.extend(t,e,n),e.canvas||(e.canvas=document.createElement("canvas"),e.canvas.style.width="100%"),e.selector||(e.selector=$O.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._glInformation=null,e.myFactory=PB.newInstance(),e.shaderCache=N7.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=s7.newInstance(),V.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer","rootOpenGLRenderWindow"]),V.setGet(t,e,["initialized","context","context2D","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),V.setGetArray(t,e,["size"],2),V.event(t,e,"imageReady"),V.event(t,e,"windowResizeEvent"),q7(t,e)}const x1=V.newInstance(XO,"vtkOpenGLRenderWindow");EO("WebGL",x1);var Q7={newInstance:x1,extend:XO,pushMonitorGLContextCount:X7,popMonitorGLContextCount:Y7};$n("vtkRenderWindow",x1);const ep={Unknown:0,LeftController:1,RightController:2},qo={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},P7={Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4},J7={LeftButton:1,MiddleButton:2,RightButton:3};var YO={Device:ep,Input:qo,Axis:P7,MouseButton:J7};const{Device:Mu,Input:ls}=YO,{vtkWarningMacro:bu,vtkErrorMacro:Ou,normalizeWheel:I7,vtkOnceErrorMacro:eW}=V,gi={ctrlKey:!1,altKey:!1,shiftKey:!1},nd={"xr-standard":[ls.Trigger,ls.Grip,ls.TrackPad,ls.Thumbstick,ls.A,ls.B]},v1=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function jo(t){t.cancelable&&t.preventDefault()}function Du(t){const e=Object.create(null);return t.forEach(n=>{let{pointerId:r,position:s}=n;e[r]=s}),e}function tW(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const n={...t},r=new Set,s=new Map;let i=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=x=>{Ou("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=x=>{e.interactorStyle!==x&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=x,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>bu("empty event loop");function c(x,T){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(x,T))}t.getCurrentRenderer=()=>(e.currentRenderer||c(0,0),e.currentRenderer);function l(x){const T=e._view.getCanvas(),w=T.getBoundingClientRect(),D=T.width/w.width,M=T.height/w.height,O={x:D*(x.clientX-w.left),y:M*(w.height-x.clientY+w.top),z:0,movementX:D*x.movementX,movementY:M*x.movementY};return(s.size<=1||!e.currentRenderer)&&c(O.x,O.y),O}const f=e._getScreenEventPositionFor||l;function g(x){return{controlKey:x.ctrlKey,altKey:x.altKey,shiftKey:x.shiftKey}}function p(x){const T=g(x);return{key:x.key,keyCode:x.charCode,...T}}function h(x){return x.pointerType||""}const y=()=>{if(e.container===null)return;const{container:x}=e;x.addEventListener("contextmenu",jo),x.addEventListener("wheel",t.handleWheel),x.addEventListener("DOMMouseScroll",t.handleWheel),x.addEventListener("pointerenter",t.handlePointerEnter),x.addEventListener("pointerleave",t.handlePointerLeave),x.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),x.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),x.addEventListener("pointerup",t.handlePointerUp),x.addEventListener("pointercancel",t.handlePointerCancel),x.addEventListener("keypress",t.handleKeyPress),x.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),x.tabIndex=0,x.style.touchAction="none",x.style.userSelect="none",x.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=x=>{if(x===null)return;n.setContainer(x)&&y()};const v=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,i=1;const{container:x}=e;x&&(x.removeEventListener("contextmenu",jo),x.removeEventListener("wheel",t.handleWheel),x.removeEventListener("DOMMouseScroll",t.handleWheel),x.removeEventListener("pointerenter",t.handlePointerEnter),x.removeEventListener("pointerleave",t.handlePointerLeave),x.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),x.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),x.removeEventListener("pointerup",t.handlePointerUp),x.removeEventListener("pointercancel",t.handlePointerCancel),x.removeEventListener("keypress",t.handleKeyPress),x.removeEventListener("keydown",t.handleKeyDown)),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),s.clear()};t.unbindEvents=()=>{v(),n.setContainer(null)},t.handleKeyPress=x=>{const T=p(x);t.keyPressEvent(T)},t.handleKeyDown=x=>{const T=p(x);t.keyDownEvent(T)},t.handleKeyUp=x=>{const T=p(x);t.keyUpEvent(T)},t.handlePointerEnter=x=>{const T={...g(x),position:f(x),deviceType:h(x)};t.pointerEnterEvent(T),T.deviceType==="mouse"&&t.mouseEnterEvent(T)},t.handlePointerLeave=x=>{const T={...g(x),position:f(x),deviceType:h(x)};t.pointerLeaveEvent(T),T.deviceType==="mouse"&&t.mouseLeaveEvent(T)},t.handlePointerDown=x=>{if(!(x.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&jo(x),x.target.hasPointerCapture(x.pointerId)&&x.target.releasePointerCapture(x.pointerId),e.container.setPointerCapture(x.pointerId),s.has(x.pointerId)&&bu("[RenderWindowInteractor] duplicate pointerId detected"),s.set(x.pointerId,{pointerId:x.pointerId,position:f(x)}),x.pointerType){case"pen":case"touch":t.handleTouchStart(x);break;default:t.handleMouseDown(x);break}},t.handlePointerUp=x=>{if(s.has(x.pointerId))switch(e.preventDefaultOnPointerUp&&jo(x),s.delete(x.pointerId),e.container.releasePointerCapture(x.pointerId),x.pointerType){case"pen":case"touch":t.handleTouchEnd(x);break;default:t.handleMouseUp(x);break}},t.handlePointerCancel=x=>{if(s.has(x.pointerId))switch(s.delete(x.pointerId),x.pointerType){case"pen":case"touch":t.handleTouchEnd(x);break;default:t.handleMouseUp(x);break}},t.handlePointerMove=x=>{if(s.has(x.pointerId)){const T=s.get(x.pointerId);T.position=f(x)}switch(x.pointerType){case"pen":case"touch":t.handleTouchMove(x);break;default:t.handleMouseMove(x);break}},t.handleMouseDown=x=>{const T={...g(x),position:f(x),deviceType:h(x)};switch(x.button){case 0:t.leftButtonPressEvent(T);break;case 1:t.middleButtonPressEvent(T);break;case 2:t.rightButtonPressEvent(T);break;default:Ou(`Unknown mouse button pressed: ${x.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>document.exitPointerLock?.(),t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function E(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=x=>{if(x===void 0){Ou("undefined requester, can not start animating");return}if(r.has(x)){bu("requester is already registered for animating");return}r.add(x),!e.animationRequest&&r.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=x=>{const T=Date.now()+x;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,T),!e.animationRequest&&r.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(x){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r.has(x)){if(!T){const w=x&&x.getClassName?x.getClassName():x;bu(`${w} did not request an animation`)}return}r.delete(x),e.animationRequest&&r.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,r.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(x,T,w)=>{x.inputSources.forEach(D=>{const M=D.gripSpace==null?null:T.getPose(D.gripSpace,w),O=D.gripSpace==null?null:T.getPose(D.targetRaySpace,w),R=D.gamepad,b=D.handedness;if(R){R.index in e.lastGamepadValues||(e.lastGamepadValues[R.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let L=0;L<R.buttons.length;++L)L in e.lastGamepadValues[R.index][b].buttons||(e.lastGamepadValues[R.index][b].buttons[L]=!1),e.lastGamepadValues[R.index][b].buttons[L]!==R.buttons[L].pressed&&M!=null&&(t.button3DEvent({gamepad:R,position:M.transform.position,orientation:M.transform.orientation,targetPosition:O.transform.position,targetOrientation:O.transform.orientation,pressed:R.buttons[L].pressed,device:D.handedness==="left"?Mu.LeftController:Mu.RightController,input:nd[R.mapping]&&nd[R.mapping][L]?nd[R.mapping][L]:ls.Trigger}),e.lastGamepadValues[R.index][b].buttons[L]=R.buttons[L].pressed),e.lastGamepadValues[R.index][b].buttons[L]&&M!=null&&t.move3DEvent({gamepad:R,position:M.transform.position,orientation:M.transform.orientation,targetPosition:O.transform.position,targetOrientation:O.transform.orientation,device:D.handedness==="left"?Mu.LeftController:Mu.RightController})}})},t.handleMouseMove=x=>{const T={...g(x),position:f(x),deviceType:h(x)};e.moveTimeoutID===0?t.startMouseMoveEvent(T):(t.mouseMoveEvent(T),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const x=Date.now();e._animationFrameCount++,x-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(x-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=x,e._animationFrameCount=1),t.animationEvent(),E(),r.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=x=>{jo(x);const T={...I7(x),...g(x),position:f(x),deviceType:h(x)};e.wheelTimeoutID===0&&(Math.abs(T.spinY)>=.3?i=Math.abs(T.spinY):i=1),T.spinY/=i,e.wheelTimeoutID===0?(t.startMouseWheelEvent(T),t.mouseWheelEvent(T)):(t.mouseWheelEvent(T),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=x=>{const T={...g(x),position:f(x),deviceType:h(x)};switch(x.button){case 0:t.leftButtonReleaseEvent(T);break;case 1:t.middleButtonReleaseEvent(T);break;case 2:t.rightButtonReleaseEvent(T);break;default:Ou(`Unknown mouse button released: ${x.button}`);break}},t.handleTouchStart=x=>{const T=[...s.values()];if(e.recognizeGestures&&T.length>1){const w=Du(s);if(T.length===2){const D={...g(gi),position:T[0].position,deviceType:h(x)};t.leftButtonReleaseEvent(D)}t.recognizeGesture("TouchStart",w)}else if(T.length===1){const w={...g(gi),position:f(x),deviceType:h(x)};t.leftButtonPressEvent(w)}},t.handleTouchMove=x=>{const T=[...s.values()];if(e.recognizeGestures&&T.length>1){const w=Du(s);t.recognizeGesture("TouchMove",w)}else if(T.length===1){const w={...g(gi),position:T[0].position,deviceType:h(x)};t.mouseMoveEvent(w)}},t.handleTouchEnd=x=>{const T=[...s.values()];if(e.recognizeGestures)if(T.length===0){const w={...g(gi),position:f(x),deviceType:h(x)};t.leftButtonReleaseEvent(w)}else if(T.length===1){const w=Du(s);t.recognizeGesture("TouchEnd",w);const D={...g(gi),position:T[0].position,deviceType:h(x)};t.leftButtonPressEvent(D)}else{const w=Du(s);t.recognizeGesture("TouchMove",w)}else if(T.length===1){const w={...g(gi),position:T[0].position,deviceType:h(x)};t.leftButtonReleaseEvent(w)}},t.setView=x=>{e._view!==x&&(e._view=x,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>e._view?.getRenderable()?.getRenderersByReference()?.[0],t.findPokedRenderer=function(){let x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const w=e._view?.getRenderable()?.getRenderers();if(!w||w.length===0)return null;w.sort((b,L)=>b.getLayer()-L.getLayer());let D=null,M=null,O=null,R=w.length;for(;R--;){const b=w[R];if(e._view.isInViewport(x,T,b)&&b.getInteractive()){O=b;break}D===null&&b.getInteractive()&&(D=b),M===null&&e._view.isInViewport(x,T,b)&&(M=b)}return O===null&&(O=D),O===null&&(O=M),O==null&&(O=w[0]),O},t.render=()=>{!t.isAnimating()&&!e.inRender&&E()},v1.forEach(x=>{const T=x.charAt(0).toLowerCase()+x.slice(1);t[`${T}Event`]=w=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){eW(`
          Can not forward events without a current renderer on the interactor.
        `);return}const M={type:x,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...w};t[`invoke${x}`](M)}}),t.recognizeGesture=(x,T)=>{if(Object.keys(T).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),x==="TouchStart"){Object.keys(T).forEach(j=>{e.startingEventPositions[j]=T[j]}),e.currentGesture="Start";return}if(x==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let w=0;const D=[],M=[];Object.keys(T).forEach(j=>{D[w]=T[j],M[w]=e.startingEventPositions[j],w++});const O=Math.sqrt((M[0].x-M[1].x)*(M[0].x-M[1].x)+(M[0].y-M[1].y)*(M[0].y-M[1].y)),R=Math.sqrt((D[0].x-D[1].x)*(D[0].x-D[1].x)+(D[0].y-D[1].y)*(D[0].y-D[1].y));let b=Mi(Math.atan2(M[1].y-M[0].y,M[1].x-M[0].x)),L=Mi(Math.atan2(D[1].y-D[0].y,D[1].x-D[0].x)),k=L-b;L=L+180>=360?L-180:L+180,b=b+180>=360?b-180:b+180,Math.abs(L-b)<Math.abs(k)&&(k=L-b);const B=[];if(B[0]=(D[0].x-M[0].x+D[1].x-M[1].x)/2,B[1]=(D[0].y-M[0].y+D[1].y-M[1].y)/2,x==="TouchMove")if(e.currentGesture==="Start"){let j=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);j<15&&(j=15);const z=Math.abs(R-O),$=R*3.1415926*Math.abs(k)/360,W=Math.sqrt(B[0]*B[0]+B[1]*B[1]);if(z>j&&z>$&&z>W){e.currentGesture="Pinch";const Z={scale:1,touches:T};t.startPinchEvent(Z)}else if($>j&&$>W){e.currentGesture="Rotate";const Z={rotation:0,touches:T};t.startRotateEvent(Z)}else if(W>j){e.currentGesture="Pan";const Z={translation:[0,0],touches:T};t.startPanEvent(Z)}}else{if(e.currentGesture==="Rotate"){const j={rotation:k,touches:T};t.rotateEvent(j)}if(e.currentGesture==="Pinch"){const j={scale:R/O,touches:T};t.pinchEvent(j)}if(e.currentGesture==="Pan"){const j={translation:B,touches:T};t.panEvent(j)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=x=>{e._forcedRenderer=!!x,e.currentRenderer=x},t.setContainer=x=>{v();const T=n.setContainer(x??null);return T&&y(),T},t.delete=()=>{for(;r.size;)t.cancelAnimation(r.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),n.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const nW={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function qO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nW,n),V.obj(t,e),e._animationExtendedEnd=0,V.event(t,e,"RenderEvent"),v1.forEach(r=>V.event(t,e,r)),V.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),V.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),V.moveToProtected(t,e,["view"]),tW(t,e)}const rW=V.newInstance(qO,"vtkRenderWindowInteractor");var ZO={newInstance:rW,extend:qO,handledEvents:v1,...YO};const{vtkErrorMacro:aW,VOID:sW}=V;function iW(t,e,n,r){return t.getRenderWindow().getViews()[0].worldToDisplay(e,n,r,t)}function oW(t,e,n,r){return t.getRenderWindow().getViews()[0].displayToWorld(e,n,r,t)}const cW={computeWorldToDisplay:iW,computeDisplayToWorld:oW};function lW(t,e){e.classHierarchy.push("vtkInteractorObserver");const n={...t};function r(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function s(){ZO.handledEvents.forEach(i=>{t[`handle${i}`]&&e.subscribedEvents.push(e._interactor[`on${i}`](c=>e.processEvents?t[`handle${i}`](c):sW,e.priority))})}t.setInteractor=i=>{i!==e._interactor&&(r(),e._interactor=i,i&&e.enabled&&s(),t.modified())},t.setEnabled=i=>{i!==e.enabled&&(r(),i&&(e._interactor?s():aW(`
          The interactor must be set before subscribing to events
        `)),e.enabled=i,t.modified())},t.computeDisplayToWorld=(i,c,l,f)=>i?e._interactor.getView().displayToWorld(c,l,f,i):null,t.computeWorldToDisplay=(i,c,l,f)=>i?e._interactor.getView().worldToDisplay(c,l,f,i):null,t.setPriority=i=>{n.setPriority(i)&&e._interactor&&(r(),s())}}const uW={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function QO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uW,n),V.obj(t,e),V.event(t,e,"InteractionEvent"),V.event(t,e,"StartInteractionEvent"),V.event(t,e,"EndInteractionEvent"),V.get(t,e,["_interactor","enabled"]),V.setGet(t,e,["priority","processEvents"]),V.moveToProtected(t,e,["interactor"]),lW(t,e)}const fW=V.newInstance(QO,"vtkInteractorObserver");var gW={newInstance:fW,extend:QO,...cW};const hW={IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025};var m1={States:hW};const{States:ir}=m1,rd={Rotate:ir.IS_ROTATE,Pan:ir.IS_PAN,Spin:ir.IS_SPIN,Dolly:ir.IS_DOLLY,CameraPose:ir.IS_CAMERA_POSE,WindowLevel:ir.IS_WINDOW_LEVEL,Slice:ir.IS_SLICE};function dW(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(rd).forEach(n=>{V.event(t,e,`Start${n}Event`),t[`start${n}`]=()=>{e.state===ir.IS_NONE&&(e.state=rd[n],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${n}Event`]({type:`Start${n}Event`}))},V.event(t,e,`End${n}Event`),t[`end${n}`]=()=>{e.state===rd[n]&&(e.state=ir.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${n}Event`]({type:`End${n}Event`}),e._interactor.render())}}),e.getRenderer=n=>e.focusedRenderer||n.pokedRenderer,t.handleKeyPress=n=>{const r=e._interactor;let s=null;switch(n.key){case"r":case"R":e.getRenderer(n).resetCamera(),r.render();break;case"w":case"W":s=e.getRenderer(n).getActors(),s.forEach(i=>{const c=i.getProperty();c.setRepresentationToWireframe&&c.setRepresentationToWireframe()}),r.render();break;case"s":case"S":s=e.getRenderer(n).getActors(),s.forEach(i=>{const c=i.getProperty();c.setRepresentationToSurface&&c.setRepresentationToSurface()}),r.render();break;case"v":case"V":s=e.getRenderer(n).getActors(),s.forEach(i=>{const c=i.getProperty();c.setRepresentationToPoints&&c.setRepresentationToPoints()}),r.render();break}}}const pW={state:ir.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function PO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pW,n),gW.extend(t,e,n),V.setGet(t,e,["focusedRenderer"]),dW(t,e)}const yW=V.newInstance(PO,"vtkInteractorStyle");var xW={newInstance:yW,extend:PO,...m1};const{States:rr}=m1;function vW(t,e){e.classHierarchy.push("vtkInteractorStyleTrackballCamera"),t.handleMouseMove=n=>{const r=n.position,s=e.getRenderer(n);switch(e.state){case rr.IS_ROTATE:t.handleMouseRotate(s,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case rr.IS_PAN:t.handleMousePan(s,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case rr.IS_DOLLY:t.handleMouseDolly(s,r),t.invokeInteractionEvent({type:"InteractionEvent"});break;case rr.IS_SPIN:t.handleMouseSpin(s,r),t.invokeInteractionEvent({type:"InteractionEvent"});break}e.previousPosition=r},t.handleButton3D=n=>{if(n&&n.pressed&&n.device===ep.RightController&&(n.input===qo.Trigger||n.input===qo.TrackPad)){t.startCameraPose();return}n&&!n.pressed&&n.device===ep.RightController&&(n.input===qo.Trigger||n.input===qo.TrackPad)&&e.state===rr.IS_CAMERA_POSE&&t.endCameraPose()},t.handleMove3D=n=>{e.state===rr.IS_CAMERA_POSE&&t.updateCameraPose(n)},t.updateCameraPose=n=>{const r=e.getRenderer(n).getActiveCamera(),s=r.getPhysicalTranslation(),c=.5*.05*r.getPhysicalScale(),l=r.physicalOrientationToWorldDirection([n.orientation.x,n.orientation.y,n.orientation.z,n.orientation.w]);r.setPhysicalTranslation(s[0]+l[0]*c,s[1]+l[1]*c,s[2]+l[2]*c)},t.handleLeftButtonPress=n=>{const r=n.position;e.previousPosition=r,n.shiftKey?n.controlKey||n.altKey?t.startDolly():t.startPan():n.controlKey||n.altKey?t.startSpin():t.startRotate()},t.handleLeftButtonRelease=()=>{switch(e.state){case rr.IS_DOLLY:t.endDolly();break;case rr.IS_PAN:t.endPan();break;case rr.IS_SPIN:t.endSpin();break;case rr.IS_ROTATE:t.endRotate();break}},t.handleStartMouseWheel=()=>{t.startDolly()},t.handleEndMouseWheel=()=>{t.endDolly()},t.handleStartPinch=n=>{e.previousScale=n.scale,t.startDolly()},t.handleEndPinch=()=>{t.endDolly()},t.handleStartRotate=n=>{e.previousRotation=n.rotation,t.startRotate()},t.handleEndRotate=()=>{t.endRotate()},t.handleStartPan=n=>{e.previousTranslation=n.translation,t.startPan()},t.handleEndPan=()=>{t.endPan()},t.handlePinch=n=>{t.dollyByFactor(e.getRenderer(n),n.scale/e.previousScale),e.previousScale=n.scale},t.handlePan=n=>{const r=e.getRenderer(n).getActiveCamera();let s=r.getFocalPoint();s=t.computeWorldToDisplay(e.getRenderer(n),s[0],s[1],s[2]);const i=s[2],c=n.translation,l=e.previousTranslation,f=t.computeDisplayToWorld(e.getRenderer(n),s[0]+c[0]-l[0],s[1]+c[1]-l[1],i),g=t.computeDisplayToWorld(e.getRenderer(n),s[0],s[1],i),p=[];p[0]=g[0]-f[0],p[1]=g[1]-f[1],p[2]=g[2]-f[2],s=r.getFocalPoint();const h=r.getPosition();r.setFocalPoint(p[0]+s[0],p[1]+s[1],p[2]+s[2]),r.setPosition(p[0]+h[0],p[1]+h[1],p[2]+h[2]),e._interactor.getLightFollowCamera()&&e.getRenderer(n).updateLightsGeometryToFollowCamera(),r.orthogonalizeViewUp(),e.previousTranslation=n.translation},t.handleRotate=n=>{const r=e.getRenderer(n).getActiveCamera();r.roll(n.rotation-e.previousRotation),r.orthogonalizeViewUp(),e.previousRotation=n.rotation},t.handleMouseRotate=(n,r)=>{if(!e.previousPosition)return;const s=e._interactor,i=r.x-e.previousPosition.x,c=r.y-e.previousPosition.y,l=s.getView().getViewportSize(n);let f=-.1,g=-.1;l[0]&&l[1]&&(f=-20/l[1],g=-20/l[0]);const p=i*g*e.motionFactor,h=c*f*e.motionFactor,y=n.getActiveCamera();!Number.isNaN(p)&&!Number.isNaN(h)&&(y.azimuth(p),y.elevation(h),y.orthogonalizeViewUp()),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange(),s.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseSpin=(n,r)=>{if(!e.previousPosition)return;const s=e._interactor,i=n.getActiveCamera(),c=s.getView().getViewportCenter(n),l=Mi(Math.atan2(e.previousPosition.y-c[1],e.previousPosition.x-c[0])),f=Mi(Math.atan2(r.y-c[1],r.x-c[0]))-l;Number.isNaN(f)||(i.roll(f),i.orthogonalizeViewUp())},t.handleMousePan=(n,r)=>{if(!e.previousPosition)return;const s=n.getActiveCamera();let i=s.getFocalPoint();i=t.computeWorldToDisplay(n,i[0],i[1],i[2]);const c=i[2],l=t.computeDisplayToWorld(n,r.x,r.y,c),f=t.computeDisplayToWorld(n,e.previousPosition.x,e.previousPosition.y,c),g=[];g[0]=f[0]-l[0],g[1]=f[1]-l[1],g[2]=f[2]-l[2],i=s.getFocalPoint();const p=s.getPosition();s.setFocalPoint(g[0]+i[0],g[1]+i[1],g[2]+i[2]),s.setPosition(g[0]+p[0],g[1]+p[1],g[2]+p[2]),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()},t.handleMouseDolly=(n,r)=>{if(!e.previousPosition)return;const s=r.y-e.previousPosition.y,c=e._interactor.getView().getViewportCenter(n),l=e.motionFactor*s/c[1];t.dollyByFactor(n,1.1**l)},t.handleMouseWheel=n=>{const r=1-n.spinY/e.zoomFactor;t.dollyByFactor(e.getRenderer(n),r)},t.dollyByFactor=(n,r)=>{if(Number.isNaN(r))return;const s=n.getActiveCamera();s.getParallelProjection()?s.setParallelScale(s.getParallelScale()/r):(s.dolly(r),e.autoAdjustCameraClippingRange&&n.resetCameraClippingRange()),e._interactor.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const mW={motionFactor:10,zoomFactor:10};function JO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,mW,n),xW.extend(t,e,n),V.setGet(t,e,["motionFactor","zoomFactor"]),vW(t,e)}const TW=V.newInstance(JO,"vtkInteractorStyleTrackballCamera");var SW={newInstance:TW,extend:JO};const CW=({geometries:t})=>{const e=Q.useRef(null),n=Q.useRef(null),r=Q.useRef(new Map),[s,i]=Q.useState(!1),[c,l]=Q.useState(new Set),[f,g]=Q.useState(null),[p,h]=Q.useState(new Set),y=B=>{const j=B.includes("extrusion"),z=B.includes("beam");return j?z?{r:.2,g:.8,b:.4,hex:"#33cc66",name:"3D Beam"}:{r:.2,g:.6,b:1,hex:"#3399ff",name:"3D Shell"}:{r:1,g:1,b:0,hex:"#ffff00",name:"Mesh Wire"}},v=(B,j=!1)=>{const z=new Set(c);j?(t.forEach($=>{$.id!==B&&z.add($.id)}),z.has(B)&&z.delete(B)):z.has(B)?z.delete(B):z.add(B),l(z)},E=B=>{g(j=>j===B?null:B)},x=B=>{const j=new Set(p);j.has(B)?j.delete(B):j.add(B),h(j)};Q.useEffect(()=>{if(!e.current)return;const B=E9.newInstance(),j=$9.newInstance();B.addRenderer(j);const z=Q7.newInstance();z.setContainer(e.current),B.addView(z);const $=ZO.newInstance();$.setView(z),$.initialize(),$.bindEvents(e.current);const W=SW.newInstance();$.setInteractorStyle(W),j.setBackground(.1,.12,.15),n.current={renderWindow:B,renderer:j,openglRenderWindow:z,interactor:$};const Z=new ResizeObserver(te=>{for(const F of te){const{width:P,height:ae}=F.contentRect;z.setSize(P,ae),B.render()}});return Z.observe(e.current),()=>{Z.disconnect(),n.current&&(n.current.interactor.delete(),n.current.openglRenderWindow.delete(),n.current.renderer.delete(),n.current.renderWindow.delete(),n.current=null)}},[]),Q.useEffect(()=>{if(!n.current||!t)return;const{renderer:B,renderWindow:j}=n.current;B.removeAllActors(),r.current.clear();const z=new Set;t.forEach($=>{$.id.includes("extrusion")||z.add($.id)}),h(z),console.log(`[VTK Viewer] Construindo cena para ${t.length} objetos...`),t.forEach($=>{const{data:W,id:Z}=$;if(!W||!W.points)return;const te=new Float32Array(W.points),F=[];W.connectivity&&W.connectivity.forEach(U=>{F.push(U.length),F.push(...U)});const P=new Uint32Array(F),ae=Oi.newInstance();ae.getPoints().setData(te,3),W.vtk_type===2||W.vtk_type===3?ae.getLines().setData(P):ae.getPolys().setData(P);const J=Cs.newInstance();J.setInputData(ae);const oe=Ss.newInstance();oe.setMapper(J),Z.includes("extrusion")||(J.setResolveCoincidentTopologyToPolygonOffset(),J.setResolveCoincidentTopologyPolygonOffsetParameters(-2,-2)),B.addActor(oe),r.current.set(Z,oe)}),B.resetCamera(),j.render()},[t]),Q.useEffect(()=>{if(!n.current)return;const{renderWindow:B}=n.current;r.current.forEach((j,z)=>{const $=j.getProperty(),W=y(z),Z=z.includes("extrusion"),te=c.has(z),F=f===z,P=p.has(z);j.setVisibility(!te),$.setEdgeVisibility(P),$.setEdgeColor(0,0,0),F?($.setColor(1,.4,0),$.setAmbient(.6),$.setDiffuse(.8),$.setOpacity(1),$.setLineWidth(P?3:1)):($.setColor(W.r,W.g,W.b),$.setAmbient(.1),$.setDiffuse(.9),Z?($.setRepresentationToSurface(),$.setOpacity(.9),$.setLineWidth(1)):($.setOpacity(1),$.setLineWidth(2)))}),B.render()},[c,f,p,t]);const T=()=>{n.current&&n.current.renderWindow.render()},w=Q.useCallback(()=>{n.current&&(n.current.renderer.resetCamera(),T())},[]),D=Q.useCallback(B=>{if(!n.current)return;const j=n.current.renderer.getActiveCamera();j&&(j.zoom(B),T())},[]),M=Q.useCallback(()=>{if(!n.current)return;const B=n.current.renderer.getActiveCamera(),j=!B.getParallelProjection();B.setParallelProjection(j),i(j),n.current.renderer.resetCamera(),T()},[]),O=Q.useCallback((B,j)=>{if(!n.current)return;const z=n.current.renderer.getActiveCamera();z.setPosition(...B),z.setFocalPoint(0,0,0),z.setViewUp(...j),n.current.renderer.resetCamera(),T()},[]),R=()=>O([1,-1,1],[0,0,1]),b=()=>O([0,0,1],[0,1,0]),L=()=>O([0,-1,0],[0,0,1]),k=()=>O([1,0,0],[0,0,1]);return S.jsxs("div",{className:"w-full h-full relative overflow-hidden flex flex-col group font-sans",children:[S.jsx("div",{ref:e,className:"w-full h-full bg-transparent cursor-crosshair",style:{position:"absolute",top:0,left:0,right:0,bottom:0}}),S.jsx("div",{className:"absolute top-4 left-4 w-72 flex flex-col gap-2 z-30 max-h-[calc(100%-100px)]",children:S.jsxs("div",{className:"bg-slate-900/95 backdrop-blur-md border border-slate-700 rounded-lg shadow-2xl overflow-hidden flex flex-col",children:[S.jsxs("div",{className:"px-3 py-2 bg-slate-800 border-b border-slate-700 flex items-center justify-between",children:[S.jsxs("div",{className:"flex items-center gap-2 text-slate-200",children:[S.jsx(Ei,{size:16}),S.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Scene Objects"})]}),S.jsx("span",{className:"text-xs bg-slate-700 text-slate-300 px-1.5 py-0.5 rounded-full",children:t?.length||0})]}),S.jsx("div",{className:"p-2 flex flex-col gap-1 overflow-y-auto custom-scrollbar",children:t&&t.length>0?t.map(B=>{const j=y(B.id),z=c.has(B.id),$=f===B.id,W=p.has(B.id);return S.jsxs("div",{onClick:()=>E(B.id),className:`
                                            group/item flex items-center gap-2 p-2 rounded cursor-pointer transition-all border
                                            ${$?"bg-slate-800 border-orange-500/50 shadow-[0_0_10px_rgba(249,115,22,0.1)]":"bg-transparent border-transparent hover:bg-slate-800 hover:border-slate-700"}
                                            ${z?"opacity-50":"opacity-100"}
                                        `,children:[S.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[S.jsx("button",{onClick:Z=>{Z.stopPropagation(),v(B.id,Z.altKey)},className:"p-1 text-slate-400 hover:text-white hover:bg-slate-700 rounded transition-colors",title:"Toggle Visibility (Alt+Click to Isolate)",children:z?S.jsx(I4,{size:14}):S.jsx(X2,{size:14})}),S.jsx("button",{onClick:Z=>{Z.stopPropagation(),x(B.id)},className:`
                                                    p-1 rounded transition-colors
                                                    ${W?"text-cyan-400 hover:text-cyan-300 hover:bg-slate-700":"text-slate-600 hover:text-slate-400 hover:bg-slate-700"}
                                                `,title:"Toggle Mesh Edges (Wireframe)",children:S.jsx(l5,{size:14})})]}),S.jsx("div",{className:"w-2.5 h-2.5 rounded-full shadow-sm ring-1 ring-white/10 shrink-0 mx-1",style:{backgroundColor:$?"#F97316":j.hex,boxShadow:$?"0 0 8px #F97316":"none"}}),S.jsx("div",{className:"flex flex-col min-w-0 flex-1",children:S.jsx("span",{className:`text-xs truncate ${$?"text-orange-400 font-bold":"text-slate-200 font-medium"}`,children:B.id.replace("_extrusion.json","").replace(".json","")})}),$&&S.jsx(m5,{size:12,className:"text-orange-500"})]},B.id)}):S.jsx("div",{className:"p-4 text-center text-slate-500 text-xs italic",children:"Loading geometry..."})})]})}),S.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 z-30 pointer-events-none",children:[S.jsxs("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg p-1.5 shadow-xl flex flex-col gap-1 pointer-events-auto",children:[S.jsx(pa,{onClick:R,icon:S.jsx(RE,{size:18}),title:"Isometric View"}),S.jsx(pa,{onClick:b,icon:S.jsx(h5,{size:18}),title:"Top View"}),S.jsx(pa,{onClick:L,icon:S.jsx(D4,{size:18}),title:"Front View"}),S.jsx(pa,{onClick:k,icon:S.jsx(Vp,{size:18}),title:"Right View"})]}),S.jsxs("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg p-1.5 shadow-xl flex flex-col gap-1 pointer-events-auto",children:[S.jsx(pa,{onClick:w,icon:S.jsx(x5,{size:18}),title:"Fit All"}),S.jsx("div",{className:"h-px bg-slate-700 my-0.5"}),S.jsx(pa,{onClick:()=>D(1.2),icon:S.jsx(X5,{size:18}),title:"Zoom In"}),S.jsx(pa,{onClick:()=>D(.8),icon:S.jsx(q5,{size:18}),title:"Zoom Out"})]}),S.jsx("div",{className:"bg-slate-800/90 backdrop-blur-sm border border-slate-700 rounded-lg p-1.5 shadow-xl flex flex-col gap-1 pointer-events-auto",children:S.jsx(pa,{onClick:M,icon:S.jsx(X2,{size:18}),active:s,title:s?"Perspective":"Orthographic"})})]}),S.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex justify-between items-end pointer-events-none opacity-50 group-hover:opacity-100 transition-opacity",children:[S.jsxs("div",{className:"text-[10px] text-slate-400 bg-black/40 px-2 py-1 rounded backdrop-blur-sm",children:[S.jsx("span",{className:"font-bold text-slate-200",children:"LMB:"})," Rotate |",S.jsx("span",{className:"font-bold text-slate-200",children:"Shift+LMB:"})," Pan |",S.jsx("span",{className:"font-bold text-slate-200",children:"RMB:"})," Zoom"]}),S.jsx("div",{className:"text-[10px] font-mono text-slate-500",children:"VTK.js Viewport"})]})]})},pa=({onClick:t,icon:e,title:n,active:r=!1})=>S.jsx("button",{onClick:t,title:n,className:`
            p-1.5 rounded-md transition-all active:scale-95
            flex items-center justify-center
            ${r?"bg-blue-600 text-white shadow-sm":"text-slate-400 hover:bg-slate-700 hover:text-white"}
        `,children:e});function EW({projectPath:t,config:e,onUpdate:n}){const[r,s]=Q.useState(null),[i,c]=Q.useState([]),[l,f]=Q.useState(!1),[g,p]=Q.useState(null),h=async()=>{if(t){f(!0),p(null);try{const T=await(await fetch(`/api/verification?project_path=${encodeURIComponent(t)}`)).json();T.status==="success"?(s(T.mass_properties),c(T.reactions||[])):p(T.message||"Failed to load verification data")}catch{p("Could not connect to backend. Run simulation first.")}finally{f(!1)}}};Q.useEffect(()=>{t&&h()},[t]);const y=(x,T=4)=>x==null?"-":x.toLocaleString("en-US",{minimumFractionDigits:T,maximumFractionDigits:T}),v=x=>x==null?"-":x.toExponential(3),E=()=>{const x=e.reactions?.reaction_extraction?.enabled??!0;n("reactions",{...e.reactions,reaction_extraction:{...e.reactions?.reaction_extraction,enabled:!x}})};return t?S.jsxs("div",{className:"flex flex-col h-full w-full bg-slate-950 font-sans overflow-hidden",children:[S.jsxs("div",{className:"h-24 shrink-0 border-b border-slate-800 flex items-center justify-between px-8 bg-slate-900/10",children:[S.jsxs("div",{className:"flex items-center gap-6",children:[S.jsx("div",{className:"p-4 border border-emerald-500/40 bg-emerald-500/5",children:S.jsx(K4,{className:"w-8 h-8 text-emerald-500"})}),S.jsxs("div",{children:[S.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[S.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest leading-none",children:"Verification_Protocol"}),S.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-emerald-500 animate-pulse outline outline-1 outline-emerald-500 outline-offset-2"})]}),S.jsx("h2",{className:"text-2xl font-black text-white leading-none font-mono uppercase",children:"Quality_Assurance_Dashboard"})]})]}),S.jsxs("div",{className:"flex items-center gap-5",children:[S.jsxs("button",{onClick:E,className:`flex items-center gap-2 px-4 py-2 border font-black text-[9px] uppercase tracking-widest transition-all ${e.reactions?.reaction_extraction?.enabled??!0?"bg-orange-500 border-orange-400 text-slate-950":"bg-slate-900 border-slate-800 text-slate-600"}`,children:[S.jsx(fc,{className:"w-3.5 h-3.5"}),"Extraction: ",e.reactions?.reaction_extraction?.enabled??!0?"ACTIVE":"IDLE"]}),S.jsx("div",{className:"h-10 w-px bg-slate-800"}),S.jsxs("button",{onClick:h,disabled:l,className:"flex items-center gap-3 px-6 py-2.5 bg-cyan-600 border border-cyan-400 text-slate-950 font-black text-[10px] uppercase tracking-widest transition-all hover:bg-cyan-500 shadow-[0_0_20px_rgba(34,211,238,0.2)] disabled:opacity-30",children:[S.jsx(w5,{className:`w-3.5 h-3.5 ${l?"animate-spin":""}`}),l?"Fetching...":"Reload Results"]})]})]}),S.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[g&&S.jsxs("div",{className:"mb-8 p-6 bg-red-500/5 border border-red-500/20 flex items-start gap-4",children:[S.jsx(z5,{className:"w-6 h-6 text-red-500 shrink-0"}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-[10px] font-black text-red-400 uppercase tracking-[0.2em] mb-1",children:"Data_Extraction_Error"}),S.jsx("p",{className:"text-xs text-slate-500 font-mono",children:g})]}),S.jsx("button",{onClick:h,className:"ml-auto text-[9px] font-black text-red-400 uppercase py-1 px-3 border border-red-500/30 hover:bg-red-500/10 transition-all",children:"Retry"})]}),S.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[S.jsx("div",{className:"col-span-12 xl:col-span-4 space-y-8",children:S.jsxs("section",{className:"bg-slate-900/40 border border-slate-800 p-8 relative",children:[S.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:S.jsx(Z2,{className:"w-16 h-16 text-slate-500"})}),S.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[S.jsx(s5,{className:"w-4 h-4 text-cyan-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none",children:"Mass_Properties_Inspector"})]}),r?S.jsxs("div",{className:"space-y-10",children:[S.jsxs("div",{className:"bg-slate-950 border border-slate-800 p-6 flex flex-col justify-center",children:[S.jsx("label",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest mb-2",children:"Aggregate_Mass"}),S.jsxs("div",{className:"flex items-baseline gap-3",children:[S.jsx("span",{className:"text-5xl font-black text-emerald-400 font-mono tracking-tighter",children:y(r.mass,2)}),S.jsx("span",{className:"text-xs font-black text-slate-700 uppercase",children:"KG"})]})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("label",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest",children:"Center_of_Gravity"}),S.jsx("div",{className:"grid grid-cols-3 gap-2",children:[["X",r.cdg_x],["Y",r.cdg_y],["Z",r.cdg_z]].map(([x,T])=>S.jsxs("div",{className:"bg-slate-950/50 border border-slate-800 p-3",children:[S.jsx("span",{className:"block text-[8px] font-bold text-slate-700 uppercase mb-1",children:x}),S.jsx("span",{className:"text-xs font-black text-slate-200 font-mono",children:y(T,1)})]},x))})]}),S.jsxs("div",{className:"space-y-4",children:[S.jsx("label",{className:"text-[9px] font-black text-slate-600 uppercase tracking-widest",children:"Inertia_Tensor_at_CG"}),S.jsx("div",{className:"grid grid-cols-1 gap-2",children:[["Ixx",r.ix_g],["Iyy",r.iy_g],["Izz",r.iz_g]].map(([x,T])=>S.jsxs("div",{className:"flex items-center justify-between bg-slate-950/50 border border-slate-800 px-4 py-2",children:[S.jsx("span",{className:"text-[9px] font-black text-slate-700 uppercase",children:x}),S.jsx("span",{className:"text-xs font-black text-slate-200 font-mono",children:v(T)}),S.jsx("span",{className:"text-[7px] text-slate-800 font-bold uppercase",children:"KGMM"})]},x))})]})]}):S.jsxs("div",{className:"py-20 text-center flex flex-col items-center opacity-20",children:[S.jsx(Z2,{className:"w-12 h-12 mb-4"}),S.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Awaiting_Analysis_Data"})]})]})}),S.jsxs("div",{className:"col-span-12 xl:col-span-8 space-y-8",children:[S.jsxs("section",{className:"bg-slate-900/40 border border-slate-800 p-8",children:[S.jsxs("div",{className:"flex items-center justify-between mb-8",children:[S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(N4,{className:"w-4 h-4 text-orange-500"}),S.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest leading-none",children:"Statical_Equilibrium_Engine"})]}),S.jsxs("span",{className:"text-[9px] font-mono text-slate-600 uppercase italic",children:["Active_Cases: ",i.length]})]}),i.length>0?S.jsxs("div",{className:"space-y-10",children:[S.jsx("div",{className:"overflow-hidden border border-slate-800",children:S.jsxs("table",{className:"w-full text-left border-collapse",children:[S.jsx("thead",{children:S.jsxs("tr",{className:"bg-slate-950 border-b border-slate-800",children:[S.jsx("th",{className:"p-4 text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Case_Identifier"}),S.jsx("th",{className:"p-4 text-right text-[9px] font-black text-slate-500 uppercase tracking-widest border-l border-slate-800/50",children:"Fx (N)"}),S.jsx("th",{className:"p-4 text-right text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Fy (N)"}),S.jsx("th",{className:"p-4 text-right text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Fz (N)"}),S.jsx("th",{className:"p-4 text-right text-[9px] font-black text-slate-500 uppercase tracking-widest border-l border-slate-800/50",children:"Mx (Nm)"})]})}),S.jsx("tbody",{className:"divide-y divide-slate-800/50",children:i.map((x,T)=>S.jsxs("tr",{className:"hover:bg-slate-900/50 transition-colors",children:[S.jsx("td",{className:"p-4 text-xs font-black text-white font-mono uppercase italic",children:x.case_name}),S.jsx("td",{className:"p-4 text-right text-xs font-black text-slate-300 font-mono border-l border-slate-800/30",children:y(x.fx,1)}),S.jsx("td",{className:"p-4 text-right text-xs font-black text-slate-300 font-mono",children:y(x.fy,1)}),S.jsx("td",{className:"p-4 text-right text-xs font-black text-orange-400 font-mono",children:y(x.fz,1)}),S.jsx("td",{className:"p-4 text-right text-xs font-black text-slate-300 font-mono border-l border-slate-800/30",children:y(x.mx/1e3,2)})]},T))})]})}),S.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/20 p-6 flex items-start gap-6",children:[S.jsx("div",{className:"p-3 bg-emerald-500/10 border border-emerald-500/30",children:S.jsx(fc,{className:"w-6 h-6 text-emerald-500"})}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-[10px] font-black text-emerald-400 uppercase mb-2 tracking-[0.2em]",children:"Equilibrium_Validation_Protocol"}),S.jsx("p",{className:"text-[10px] text-slate-600 font-mono leading-relaxed uppercase italic",children:"Solver convergence confirmed. Total Z-Reaction (Rz) must equate to structural dead-weight in gravity conditions. Variance threshold: 0.1% for high-precision validation."})]})]})]}):S.jsxs("div",{className:"py-24 text-center border-2 border-dashed border-slate-800 rounded-none opacity-20 flex flex-col items-center",children:[S.jsx(E4,{className:"w-12 h-12 mb-4"}),S.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Awaiting_Simulation_Output"})]})]}),S.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[S.jsx("div",{className:"p-6 bg-slate-900/40 border border-slate-800",children:S.jsxs("div",{className:"flex gap-4",children:[S.jsx(UE,{className:"w-5 h-5 text-indigo-500 shrink-0"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Nodal_Origin_Reference"}),S.jsx("p",{className:"text-[9px] text-slate-700 font-mono uppercase italic leading-relaxed",children:"Moments (Mx, My, Mz) are evaluated at the global domain origin (0,0,0) as defined in the primary MED mesh."})]})]})}),S.jsx("div",{className:"p-6 bg-slate-900/40 border border-slate-800",children:S.jsxs("div",{className:"flex gap-4",children:[S.jsx(ba,{className:"w-5 h-5 text-indigo-500 shrink-0"}),S.jsxs("div",{children:[S.jsx("h5",{className:"text-[10px] font-black text-slate-400 uppercase mb-2 tracking-widest",children:"Aster_Convergence"}),S.jsx("p",{className:"text-[9px] text-slate-700 font-mono uppercase italic leading-relaxed",children:"Results extracted via `REAC_NODA` operator. Data corresponds to the consolidated summation over the specified project domain."})]})]})})]})]})]})]})]}):S.jsx("div",{className:"p-10 text-center text-slate-500 font-mono uppercase italic tracking-widest",children:"RESTRICTION: PROJECT_ID_UNDEFINED"})}function wW({onBack:t,projectPath:e,setProjectPath:n}){const[r,s]=Q.useState(!1),[i,c]=Q.useState("mesh"),[l,f]=Q.useState({geometries:[],materials:[],restrictions:[],loads:[],load_cases:[],post_elem_mass:{mass_calculations:[]},post_releve_t_reactions:{reaction_extraction:{enabled:!0}}}),[g,p]=Q.useState([]),[h,y]=Q.useState([]),[v,E]=Q.useState({}),[x,T]=Q.useState([]),[w,D]=Q.useState(!1),[M,O]=Q.useState([]);Q.useEffect(()=>{if(e&&x.length>0){const te=x.filter(F=>F.toLowerCase().endsWith(".med"));console.log(`[MeshDNA] Multi-Mesh Protocol: Detected ${te.length} files.`),te.forEach(F=>{R(F)})}},[e,x]);const R=async te=>{try{const F=window.location.port||"3000";console.log(`[MeshDNA] Fetching from Port: ${F}`);const ae=await(await fetch("/api/mesh_dna",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:`${e}\\${te}`})})).json();if(ae.status==="success"){const J=ae.data.groups;console.log(`[MeshDNA] Groups Received from ${te}:`,Object.keys(J));const oe=window;oe.projectState||(oe.projectState={}),oe.projectState.meshes||(oe.projectState.meshes={}),oe.projectState.meshes[te]=ae.data,E(ee=>({...ee,[te]:J}));const U=Object.keys(J);p(ee=>Array.from(new Set([...ee,...U])));const Y=U.filter(ee=>J[ee].category==="Node");y(ee=>Array.from(new Set([...ee,...Y]))),window.dispatchEvent(new Event("meshDataLoaded"))}}catch(F){console.error("[MeshDNA] Fetch failed:",F)}};Q.useEffect(()=>{i==="3d-view"&&e&&(async()=>{try{const F=await fetch("/api/vtk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_path:e})});if(!F.ok){console.error("[VTK] Erro na gerao:",F.statusText);return}const ae=await(await fetch("/api/get_vtk_geometry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e})})).json();ae.status==="success"&&(console.log(" [PARENT] Dados prontos para entrega:",ae.data),O(ae.data))}catch(F){console.error("[VTK] Erro na sequncia:",F)}})()},[i,e]);const b=async()=>{if(e){D(!0);try{await L();const F=await(await fetch("/api/run_simulation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e})})).json();F.status==="success"?alert(`Simulation Completed!
Check "simulation_files/message" for details.`):alert(`Simulation Failed:
`+F.message)}catch(te){console.error(te),alert("Error running simulation")}finally{D(!1)}}},L=async()=>{if(e)try{console.log("Saving project...");const F=await(await fetch("/api/save_project",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:e,config:{...l,meshes:x.map(P=>({name:P.split(".")[0].replace(/[- ]/g,"_"),filename:P}))}})})).json();F.status==="success"?alert("Project Saved & Generated Successfully!"):alert("Save Failed: "+F.message)}catch(te){console.error(te),alert("Error saving project")}},k=Q.useCallback(te=>{f(F=>{const P=new Set(te.map(J=>J._category).filter(Boolean)),ae=F.geometries.filter(J=>!P.has(J._category));return{...F,geometries:[...ae,...te]}})},[]),B=Q.useCallback(te=>{f(F=>({...F,materials:te}))},[]),j=Q.useCallback(te=>{f(F=>({...F,restrictions:te}))},[]),z=Q.useCallback(te=>{f(F=>({...F,loads:te}))},[]),$=Q.useCallback(te=>{f(F=>({...F,load_cases:te}))},[]),W=async()=>{try{s(!0);const F=await(await fetch("/api/open_folder_dialog")).json();if(F.status==="success"&&F.path){n(F.path),T([]),f({geometries:[],materials:[],restrictions:[],loads:[],load_cases:[]}),s(!0);const ae=await(await fetch("/api/scan_workspace",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:F.path})})).json();if(ae.status==="success"){ae.files&&ae.files.mesh?T(ae.files.mesh):T([]);const oe=await(await fetch("/api/read_mesh_groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folder_path:F.path})})).json();if(oe.status==="success"&&oe.data&&oe.data.groups){const U=oe.data.groups,Y=Object.keys(U),ee=Y.filter(ce=>U[ce].type==="node");console.log("ROOT: Groups centralized (DNA-only mode):",{nodes:ee,allCount:Y.length}),f(ce=>{const he=Y.filter(fe=>U[fe].type!=="node").map(fe=>{const Te=ce.geometries.find(Ze=>Ze.group===fe);return Te||{group:fe,type:"3D",phenomenon:"MECANIQUE",_category:"3D"}});return{...ce,geometries:he}})}}}}catch(te){console.error("Failed to open folder:",te)}finally{s(!1)}},Z=[{id:"mesh",label:"Mesh",icon:""},{id:"model",label:"Model",icon:""},{id:"geometry",label:"Geometry",icon:""},{id:"3d-view",label:"3D View",icon:""},{id:"material",label:"Material",icon:""},{id:"restrictions",label:"Restrictions",icon:""},{id:"loads",label:"Loads",icon:""},{id:"loadcases",label:"Load Cases",icon:""},{id:"verification",label:"Verification",icon:""}];return S.jsxs("div",{className:"h-full w-full flex flex-col bg-slate-950 font-sans",children:[S.jsxs("div",{className:"h-14 bg-slate-900 border-b border-slate-800 flex items-center px-4 gap-3 shrink-0",children:[S.jsxs(or.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:"flex items-center gap-2 px-4 py-1.5 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 transition-colors uppercase text-[10px] font-black tracking-widest",children:[S.jsx(M4,{className:"w-3.5 h-3.5"}),S.jsx("span",{children:"Terminal"})]}),S.jsx("div",{className:"h-8 w-px bg-slate-800"}),S.jsxs(or.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:W,disabled:r,className:"flex items-center gap-2 px-5 py-2 bg-cyan-600 hover:bg-cyan-500 border border-cyan-400 text-slate-950 font-black text-[10px] uppercase tracking-widest transition-all disabled:opacity-50",children:[S.jsx(Io,{className:"w-4 h-4"}),S.jsx("span",{children:r?"Scanning...":"Open Project"})]}),e&&S.jsxs(S.Fragment,{children:[S.jsxs(or.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:L,className:"flex items-center gap-2 px-5 py-2 bg-emerald-600 hover:bg-emerald-500 border border-emerald-400 text-slate-950 font-black text-[10px] uppercase tracking-widest transition-all",children:[S.jsx(_E,{className:"w-4 h-4"}),S.jsx("span",{children:"Save Project"})]}),S.jsxs(or.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:b,disabled:w,className:`flex items-center gap-2 px-5 py-2 bg-orange-600 hover:bg-orange-500 border border-orange-400 text-slate-950 font-black text-[10px] uppercase tracking-widest transition-all ${w?"opacity-50":""}`,children:[S.jsx(S5,{className:"w-4 h-4"}),S.jsx("span",{children:w?"Job_Running...":"Run Simulation"})]})]}),e&&S.jsxs("div",{className:"ml-auto flex items-center gap-4",children:[S.jsx("div",{className:"h-8 w-[1px] bg-slate-800"}),S.jsxs("div",{className:"text-[10px] text-slate-500 font-mono tracking-tighter truncate max-w-md uppercase italic",children:["PATH: ",e]})]})]}),S.jsx("div",{className:"flex-1 flex overflow-hidden",children:e?S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"w-52 bg-slate-900 border-r border-slate-800 flex flex-col",children:[S.jsx("div",{className:"p-4 border-b border-slate-800 bg-slate-950/40",children:S.jsx("span",{className:"text-[10px] font-black text-slate-600 uppercase tracking-widest leading-none",children:"Modules_Selection"})}),S.jsx("div",{className:"flex-1 p-2 space-y-1 overflow-y-auto custom-scrollbar",children:Z.map(te=>S.jsxs("button",{onClick:()=>c(te.id),className:`
                                            w-full flex items-center gap-3 px-4 py-3 transition-all border
                                            ${i===te.id?"bg-cyan-500/10 border-cyan-500/40 text-cyan-400 shadow-[inset_0_0_20px_rgba(34,211,238,0.05)]":"bg-transparent border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-800/40"}`,children:[S.jsx("span",{className:`text-lg grayscale brightness-50 contrast-125 ${i===te.id?"grayscale-0 brightness-100":""}`,children:te.icon}),S.jsx("span",{className:"font-black text-[10px] uppercase tracking-widest",children:te.label}),i===te.id&&S.jsx("div",{className:"ml-auto w-1 h-3 bg-cyan-500 shadow-[0_0_10px_rgba(34,211,238,0.5)]"})]},te.id))}),S.jsx("div",{className:"p-4 border-t border-slate-800 bg-slate-950/40",children:S.jsx("span",{className:"text-[9px] font-mono text-slate-700 uppercase tracking-tighter",children:"ProSolve_Core_v.0.9"})})]}),S.jsxs("div",{className:"flex-1 overflow-hidden bg-slate-950",children:[i==="model"&&S.jsx(P5,{projectPath:e,meshGroups:v,currentGeometries:l.geometries,onUpdate:k},e),i==="mesh"&&S.jsx(ck,{projectPath:e,meshes:x},e),i==="material"&&S.jsx(I5,{projectPath:e,availableGroups:g,nodeGroups:h,initialMaterials:l.materials,onUpdate:B},e),i==="geometry"&&S.jsx(sk,{projectPath:e,meshGroups:v,availableGeometries:l.geometries,onUpdate:k},e),i==="3d-view"&&S.jsx(CW,{projectPath:e,meshKey:Date.now(),geometries:M}),i==="restrictions"&&S.jsx(tk,{projectPath:e,availableGroups:h.length>0?h:g,initialRestrictions:l.restrictions,onUpdate:j},e),i==="loads"&&S.jsx(rk,{projectPath:e,availableGroups:g,initialLoads:l.loads,onUpdate:z},e),i==="loadcases"&&S.jsx(ok,{projectPath:e,availableLoads:l.loads,availableRestrictions:l.restrictions,availableGroups:g,initialLoadCases:l.load_cases,onUpdate:$},e),i==="verification"&&S.jsx(EW,{projectPath:e,config:{mass:l.post_elem_mass,reactions:l.post_releve_t_reactions},onUpdate:(te,F)=>{f(P=>({...P,[te==="mass"?"post_elem_mass":"post_releve_t_reactions"]:F}))}},e)]})]}):S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center opacity-40",children:[S.jsx(Io,{className:"w-20 h-20 text-slate-700 mb-6"}),S.jsx("h2",{className:"text-sm font-black text-slate-600 uppercase tracking-[0.4em] mb-2",children:"Null_Workspace_Detected"}),S.jsx("p",{className:"text-[10px] font-mono text-slate-700 text-center max-w-sm",children:"Initiate project sequence. Load a workspace containing MED topology."})]})})]})}const qu=[],MW=console.log,bW=console.error,OW=console.warn;console.log=(...t)=>{MW(...t),T1("log",t)};console.error=(...t)=>{bW(...t),T1("error",t)};console.warn=(...t)=>{OW(...t),T1("warn",t)};function T1(t,e){const n=e.map(s=>typeof s=="object"?JSON.stringify(s):String(s)).join(" "),r={id:Date.now()+Math.random(),timestamp:new Date().toLocaleTimeString(),type:t,message:n};qu.forEach(s=>s(r))}function DW(){const[t,e]=Q.useState(!1),[n,r]=Q.useState([]),s=Q.useRef(null);return Q.useEffect(()=>{const i=c=>{r(l=>[...l.slice(-100),c])};return qu.push(i),()=>{const c=qu.indexOf(i);c!==-1&&qu.splice(c,1)}},[]),Q.useEffect(()=>{t&&s.current&&s.current.scrollIntoView({behavior:"smooth"})},[n,t]),t?S.jsxs("div",{className:"fixed bottom-0 right-0 w-full md:w-2/3 lg:w-1/2 h-1/3 min-h-[300px] z-[9999] bg-slate-950 border-t border-l border-slate-800 shadow-2xl flex flex-col font-mono text-xs",children:[S.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-slate-900 border-b border-slate-800 shrink-0",children:[S.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-bold uppercase tracking-wider",children:[S.jsx(Q2,{className:"w-3 h-3"}),S.jsx("span",{children:"Debug Console"})]}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("button",{onClick:()=>r([]),className:"p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white",title:"Clear",children:S.jsx(Oc,{className:"w-4 h-4"})}),S.jsx("button",{onClick:()=>e(!1),className:"p-1 hover:bg-slate-800 rounded text-slate-400 hover:text-white",title:"Close",children:S.jsx(FE,{className:"w-4 h-4"})})]})]}),S.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-1",children:[n.map(i=>S.jsxs("div",{className:"flex gap-2 font-mono",children:[S.jsxs("span",{className:"text-slate-600 shrink-0",children:["[",i.timestamp,"]"]}),S.jsx("span",{className:`break-all whitespace-pre-wrap ${i.type==="error"?"text-red-400":i.type==="warn"?"text-yellow-400":"text-slate-300"}`,children:i.message})]},i.id)),S.jsx("div",{ref:s})]})]}):S.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-4 right-4 z-[9999] bg-slate-900 border border-slate-700 p-2 rounded-full shadow-lg hover:bg-slate-800 transition-colors text-slate-400 hover:text-white",title:"Open Debug Console",children:S.jsx(Q2,{className:"w-5 h-5"})})}function RW(){const[t,e]=Q.useState("dashboard"),[n,r]=Q.useState(null);return S.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-950",children:[S.jsx("div",{className:"h-10 bg-slate-900 border-b border-slate-800 flex items-center px-4 shrink-0",children:S.jsxs("h1",{className:"text-xs font-bold tracking-widest text-slate-400 uppercase",children:["ProSolve Professional ",t==="structural"&&"/ Structural"]})}),S.jsxs("div",{className:"flex-1 overflow-hidden",children:[t==="dashboard"&&S.jsx(Q5,{onNavigate:s=>e(s)}),t==="structural"&&S.jsx(wW,{onBack:()=>e("dashboard"),projectPath:n,setProjectPath:r})]}),S.jsx(DW,{})]})}kN.createRoot(document.getElementById("root")).render(S.jsx(bN.StrictMode,{children:S.jsx(RW,{})}));
