<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProSolve Suite</title>

    <!-- Libs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>


<!-- Maker.js Dependencies -->
<!-- Maker.js & Dependencies (Official CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bezier-js@2/bezier.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/opentype.js@0/dist/opentype.js"></script> <!-- Opcional, mas bom ter -->
    <script src="https://cdn.jsdelivr.net/npm/makerjs@0/target/js/browser.maker.js"></script>


    <!-- Carrega seus Componentes Externos -->
    <script type="text/babel" src="./ModelConfig.js"></script>    
    <script type="text/babel" src="./MaterialConfig.js"></script>    
    <script type="text/babel" src="./GemetryConfig.js"></script>        
    <script type="text/babel" src="./RestrictionConfig.js"></script>     
    <script type="text/babel" src="./LoadConfig.js"></script>     
    <script type="text/babel" src="./LoadCaseConfig.js"></script>       
    <script type="text/babel" src="./StructuralWorkflow.js"></script>
    <script type="text/babel" src="StructuralWorkspace.js"></script>


    <style>
        /* O PULO DO GATO: CSS controla o movimento nativo da janela */
        .drag-region {
            -webkit-app-region: drag;
        }

        .no-drag {
            -webkit-app-region: no-drag;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #0f172a;
            color: white;
            overflow: hidden;
            /* Evita barras de rolagem globais */
        }

        /* Anima√ß√£o simples de Fade */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <div id="root" class="h-screen w-screen flex flex-col"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- COMPONENTE: DASHBOARD (HOME) ---
        const DashboardView = ({ onNavigate }) => {
            return (
                <div className="flex-1 p-8 bg-slate-800 fade-in flex flex-col items-center justify-center">
                    <h1 className="text-4xl font-light mb-12 text-slate-200">ProSolve Suite</h1>

                    <div className="grid grid-cols-3 gap-8 max-w-5xl w-full">
                        {/* Structural Card */}
                        <div onClick={() => onNavigate('structural')}
                            className="group bg-slate-700 hover:bg-slate-600 border border-slate-600 hover:border-blue-500 p-8 rounded-xl cursor-pointer transition-all shadow-lg">
                            <div className="text-4xl mb-4">üèóÔ∏è</div>
                            <h2 className="text-2xl font-bold mb-2 group-hover:text-blue-400">Structural</h2>
                            <p className="text-slate-400">An√°lise FEA e Modelagem.</p>
                        </div>

                        {/* Marine Card */}
                        <div className="bg-slate-700/50 border border-slate-700 p-8 rounded-xl opacity-60">
                            <div className="text-4xl mb-4">üö¢</div>
                            <h2 className="text-2xl font-bold mb-2">Marine</h2>
                            <p className="text-slate-500">Em breve.</p>
                        </div>

                        {/* Utility Card */}
                        <div className="bg-slate-700 hover:bg-slate-600 border border-slate-600 hover:border-purple-500 p-8 rounded-xl cursor-pointer transition-all shadow-lg">
                            <div className="text-4xl mb-4">üìì</div>
                            <h2 className="text-2xl font-bold mb-2 hover:text-purple-400">Utility</h2>
                            <p className="text-slate-400">Ferramentas e Notebooks.</p>
                        </div>
                    </div>
                </div>
            );
        };

        // --- APP SHELL (Gerencia Rotas) ---
        function App() {
            const [view, setView] = useState('dashboard'); // 'dashboard' | 'structural'
            const [projectPath, setProjectPath] = useState(null);

            return (
                <div className="flex flex-col h-full bg-slate-900">

                    {/* BARRA DE T√çTULO GLOBAL */}
                    <div className="h-8 bg-slate-950 flex items-center justify-between px-4 select-none shrink-0 border-b border-slate-800">
                        <div className="text-xs font-bold tracking-widest text-slate-500 uppercase">
                            ProSolve {view === 'structural' && '/ Structural'}
                        </div>
                    </div>

                    {/* CONTE√öDO (Troca instant√¢nea) */}
                    <div className="flex-1 flex overflow-hidden relative w-full">
                        {view === 'dashboard' && (
                            <DashboardView onNavigate={setView} />
                        )}

                        {view === 'structural' && (
                            // Renderiza o componente que est√° no arquivo StructuralWorkspace.js
                            window.StructuralWorkspace ? (
                                <div className="w-full h-full flex-1">
                                    <window.StructuralWorkspace
                                        onBack={() => setView('dashboard')}
                                        projectPath={projectPath}
                                        setProjectPath={setProjectPath}
                                    />
                                </div>
                            ) : (
                                <div className="p-10 text-red-400">
                                    Erro: StructuralWorkspace.js n√£o carregou corretamente.
                                    <br />Verifique se o arquivo est√° na mesma pasta.
                                </div>
                            )
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>